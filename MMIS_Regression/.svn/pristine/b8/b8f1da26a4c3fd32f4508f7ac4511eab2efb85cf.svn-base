package newMMIS_Subsystems;

import java.io.BufferedReader;
import java.io.Console;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.util.Date;
import java.util.List;
import java.util.Scanner;
import java.util.concurrent.TimeUnit;

import jxl.Sheet;
import jxl.Workbook;
import jxl.write.Label;
import jxl.write.WritableSheet;
import jxl.write.WritableWorkbook;

import org.openqa.selenium.By;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;
import org.testng.Assert;
import org.testng.SkipException;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Listeners;
import org.testng.annotations.Test;

@Listeners({ newMMIS_Subsystems.TestNGCustom.class })
public class Provider extends Login{
	
	public boolean foundit = false;
	public boolean test22928foundit = false;
	public boolean refound = false;
	public String portalATN;
	public boolean portalEnroll = false;
	public boolean portalEnrollrel = false;
	public static String lName,fName, lNameR, lon, lat;
	public static String provTC23099;
	public static String recredProvID = "110005785A";

	
	@BeforeTest
    public void provStartup() throws Exception {
    	log("Starting Provider Subsystem......");
    }
	
	@BeforeMethod
	public void LoginCheck() throws Exception {
		Common.resetBase();
		testCheckDBLoginSuccessful();	
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Provider")).click();
	}
	
    @Test
    public void test23135a() throws Exception{
    	TestNGCustom.TCNo="23135a";
    	log("//TC 23135a");
    	
        //Verify unix report
		String command, error;

		//Get Desired Filename
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt/prw53001.rpt.* | tail -1"; //grabs the latest gdg of the file
		error = "There was no report file found";
		String fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);
		
		log(" The Provider Changes By Clerk ID Weekly Summary Report filename is: "+fileName);

		//Verify CLERK ID in report
		if (env.equals("MO")) {
			command = "grep DSMAMOD "+fileName;
			error = "The selected file is not correct/ or it is empty/ or it does not have DSMAMOD user id";
			String outputText = Common.connectUNIX(command, error);
			
			Assert.assertTrue(outputText.contains("DSMAMOD"), "File does not have DSMAMOD user id");
		} else {
			command = "grep DSMAACC "+fileName;
			error = "The selected file is not correct/ or it is empty/ or it does not have DSMAACC user id";
			String outputText = Common.connectUNIX(command, error);
			
			Assert.assertTrue(outputText.contains("DSMAACC"), "File does not have DSMAACC user id");
		}


    }
    
    @Test
    public void test23135b() throws Exception{
    	TestNGCustom.TCNo="23135b";
    	log("//TC 23135b");
    	
    	//Get data from tables that needs to be verified in the report (Newly Enrolled Providers Report)
		sqlStatement ="select * from r_day2 where TC = '22463' and DES='Enrolled Prov ID'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no Prov ID generated");

		String providerID = colValues.get(0);
		log("Provider is: "+providerID);
		
		sqlStatement ="select * from r_day2 where TC = '22463' and DES='Enrolled Prov lName'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no Prov Last Name generated");

		String providerlName = colValues.get(0);
		log("Provider Last name is: "+providerlName);
		
		sqlStatement ="select * from r_day2 where TC = '22463' and DES='Enrolled Prov fName'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no Prov First Name generated");

		String providerfName = colValues.get(0);
		log("Provider First name is: "+providerfName);
    	
        //Verify unix report
		String command, error;

		//Get Desired Filename
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt/prd30001.rpt.* | grep '"+Common.monthUNIX(Common.convertSysdatecustom(-1))+" "+Common.dayUNIX(Common.convertSysdatecustom(-1))+"'";
		error = "There was no report file found";
		String fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);
		
		log(" The Newly Enrolled Providers  Report filename is: "+fileName);

		//Verify data in file
		command = "grep "+providerID+" "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have provider "+providerID+" in it";
		String outputText = Common.connectUNIX(command, error);
		log("Output string from report is: "+outputText);
		
		Assert.assertTrue(outputText.contains(providerID), "File does not have provider "+providerID+" in it");
		Assert.assertTrue(outputText.contains(providerlName), "File does not have provider last name"+providerlName+" in it");
		Assert.assertTrue(outputText.contains(providerfName), "File does not have provider first name"+providerfName+" in it");
		
		//Generate provider welcome letter - This scenario was added on 3/20/2014 to increase the scope of regression suite as part of technical refresh.
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRptsAndLettersNavigatorPanel:ProviderReportsNavigator:GRP_g2")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRptsAndLettersNavigatorPanel:ProviderReportsNavigator:ITM_n107")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterRequestBean_CriteriaPanel:LetterRequestDataPanel_ProviderId")).sendKeys(providerID);
		driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterRequestBean_CriteriaPanel:LetterRequestDataPanel_ProviderLoc")).sendKeys("A");
		Common.search();
		//Verify letter name ang req date
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults_0:_id48")).getText().equals("PRV-9008-R")), "PRV-9008-R Newly enrolled provider welcome Letter not found");
		Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults:tbody_element']/tr/td[2]")).getText().equals(Common.convertSysdatecustom(-2))), "request date was not from this reg cycle(yest)");
		//Generate letter
		driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults_0:_id48")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Generate and Print']")).click();
		log("Provider Welcome Batch Letter Name is: "+Common.fileName());

    }
    
    @Test
	public void test22461a() throws Exception {
		TestNGCustom.TCNo="22461a";
    	log("//TC 22461a");

		
		//Reset prov Address in Base
		String idProvider="110000314";
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(idProvider);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    //Select Loc Name Address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10414")).click();
	    //Click on billing address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_0:ProviderLocationNameAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Maintain Address']")).click();
		//Enter the provider address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:contactNameID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:contactNameID")).sendKeys("ANTILESSAMUELMD");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).sendKeys("133 MAPLE STREET");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).sendKeys("SPRINGFIELD");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressDataPanel_MailState"))).selectByVisibleText("MA");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).sendKeys("01105");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:phoneID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:phoneID")).sendKeys("4137329201");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:emailID")).clear();
	    Common.update();
	    //Address verification
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).click();
		Common.saveAll();
		//Go to portal
		String provList="td.leftPadding.leftAlign > span";
		
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Provider Information")).click();
		driver.findElement(By.linkText("Maintain Profile")).click();
		driver.findElement(By.linkText("Update Your MassHealth Profile")).click();
	    Assert.assertTrue(driver.findElement(By.cssSelector(provList)).getText().equals("Please select the provider you wish to update."));
		//driver.wait(5000);
		int i=0;
		int j=0;
		int a=1;
		int b=2;

		String pName = "ANTILES SAMUEL";
		for (;a<b; a++){
			for (;i<=j; i++){
				driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
				if ((driver.findElements(By.xpath("//*[contains(@id,'"+i+":name')]")).size())>0) { 
					if (pName.equals(driver.findElement(By.xpath("//*[contains(@id,'"+i+":name')]")).getText())) { 
						driver.findElement(By.xpath("//*[contains(@id,'"+i+":name')]")).click();
							foundit=true;
					}
					else
						j=j+1;
				}
			}
			if ((!foundit) && ((driver.findElements(By.xpath("//*[contains(@id,'providerList:paginatoridx"+b+"')]")).size())>0)) {
				driver.findElement(By.xpath("//*[contains(@id,'providerList:paginatoridx"+b+"')]")).click();
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
			    Assert.assertTrue(driver.findElement(By.cssSelector(provList)).getText().equals("Please select the provider you wish to update."));
				b=b+1;
				i=i-1;
			}
		}
		if (!foundit)
			throw new SkipException("I couldnt find prov '"+pName+"' in portal in the list of providers, exiting now");
		
		//Perform the profile update
		//Enter legal entity data
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityContact')]")).sendKeys("me");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_line1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_line1')]")).sendKeys("133 MAPLE STREET");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_city')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_city')]")).sendKeys("SPRINGFIELD");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'legalEntityAddress_state')]"))).selectByVisibleText("Massachusetts");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_zip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_zip')]")).sendKeys("01105");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_email')]")).sendKeys("ansh90@gmail.com");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_phoneNumber')]")).sendKeys("4137329201");
	    
	    //Change address
		driver.findElement(By.xpath("//*[contains(@id,'MENUITEM_provPrflAddressType')]")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:dbaName')]")).click();
		driver.findElement(By.linkText("Billing Address")).click();
		driver.findElement(By.xpath("//input[contains(@id,'contact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'contact')]")).sendKeys("SAMUEL ANTILES");
		driver.findElement(By.xpath("//input[contains(@id,'address_line1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_line1')]")).sendKeys("101 FEDERAL STREET");
		driver.findElement(By.xpath("//input[contains(@id,'address_city')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_city')]")).sendKeys("BOSTON");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'address_state')]"))).selectByVisibleText("Massachusetts");
		driver.findElement(By.xpath("//input[contains(@id,'address_zip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_zip')]")).sendKeys("02110");
		driver.findElement(By.xpath("//input[contains(@id,'address_email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_email')]")).sendKeys("ansh90@gmail.com");
		driver.findElement(By.xpath("//input[contains(@id,'address_phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_phoneNumber')]")).sendKeys("4137329201");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @alt='Update']")).click();

		//Submit the profile update
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		driver.findElement(By.xpath("//input[contains(@id,'agreementAcceptanceIndicator')]")).click();
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		
		Common.portalLogout();

	}
    
	@Test
	public void test22461b() throws Exception {
		TestNGCustom.TCNo="22461b";
    	log("//TC 22461b");
		if (!foundit) 
			Assert.assertTrue(false, "Not continuing with Profile Update test as it failed on portal or address change failed on Base");

		else {
		//Navigate to profile update npanel
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ProfileUpdateWorklist")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklist_DropDownQueueType"))).selectByIndex(2);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    
	    //Check image
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults_0:_id20")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList:ProviderImagesSearchResultBean_SortColHeader_receiptDate")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList:ProviderImagesSearchResultBean_SortColHeader_receiptDate")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_0:_id105")).click();

	    //Click on WI
	    driver.findElement(By.id("workList[0]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Review']")).click();
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_0:ProviderLocationNameAddressBean_ColValue_status")).getText().equals("Updated"), "The billing adddress did not come as updated"); 
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_0:ProviderLocationNameAddressBean_ColValue_status")).click();
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:contactNameID")).getAttribute("value").equals("SAMUEL ANTILES"), "The contact name did not come as updated"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).getAttribute("value").equals("101 FEDERAL STREET"), "The adddress1 did not come as updated"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).getAttribute("value").equals("BOSTON"), "The city did not come as updated"); 
		Assert.assertTrue(driver.findElement(By.xpath("//option[@selected='selected' and @value='MA']")).getAttribute("value").equals("MA"), "The state did not come as updated"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).getAttribute("value").equals("02110"), "The zip did not come as updated"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:phoneID")).getAttribute("value").equals("(413)732-9201"), "The phone did not come as updated"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:emailID")).getAttribute("value").equals("ansh90@gmail.com"), "The email did not come as updated"); 
	    driver.findElement(By.id("ProviderLocationNameAddressPanel_cancelAction_btn")).click();

		//Change status to IN PROCESS
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderworkflowProfileUpdateStatusPanel:WorkflowStatusdropdown"))).selectByVisibleText("IN PROCESS");
	    Common.saveAll();
//	    df30872_saveAll(); //remove after DF 20872 is fixed, and uncomment above line of Common.saveAll()
	    
	    //Select The WI again from PROFILE UPDATE queue
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ProfileUpdateWorklist")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklist_DropDownQueueType"))).selectByIndex(3);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    //Click on WI
	    driver.findElement(By.id("workList[0]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Review']")).click();
		//Change status to COMPLETE
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderworkflowProfileUpdateStatusPanel:WorkflowStatusdropdown"))).selectByVisibleText("COMPLETE");
	    Common.saveAll();
//	    df30872_saveAll(); //remove after DF 20872 is fixed, and uncomment above line of Common.saveAll()
	    
		//Verify prov address is changed
		String idProvider="110000314";
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(idProvider);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    //Select Loc Name Address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10414")).click();
	    //Click on remittance address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_0:ProviderLocationNameAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();

		//Verify provider address
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:contactNameID")).getAttribute("value").equals("SAMUEL ANTILES"), "The contact name update failed"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).getAttribute("value").equals("101 FEDERAL STREET"), "The adddress1 update failed"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).getAttribute("value").equals("BOSTON"), "The city update failed"); 
		Assert.assertTrue(driver.findElement(By.xpath("//option[@selected='selected' and @value='MA']")).getAttribute("value").equals("MA"), "The state update failed"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).getAttribute("value").equals("02110"), "The zip update failed"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:phoneID")).getAttribute("value").equals("(413)732-9201"), "The phone update failed"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:emailID")).getAttribute("value").equals("ansh90@gmail.com"), "The email update failed");
		Common.cancelAll();
		}
	}
	
	@Test
	public void test22463a() throws Exception {
		TestNGCustom.TCNo="22463a";
    	log("//TC 22463a");
    	
    	lName=Common.generateRandomName();
    	fName=Common.generateRandomName();
    	String adr1="101 FEDERAL STREET";
    	String city="BOSTON";
    	String state ="Massachusetts";
    	String stateab ="MA";
    	String zip="02110";
    	String phone="6176176177";
    	String email="ansh90@gmail.com";
    	
    	//Store provider names
    	String SelSql="select * from r_day2 where TC = '22463' and DES='Enrolled Prov lName'";
    	String col="ID";
    	String DelSql="delete from r_day2 where TC = '22463'and DES='Enrolled Prov lName'";
    	String InsSql="insert into r_day2 values ('22463', '"+lName+"', 'Enrolled Prov lName', '"+Common.convertSysdate()+"')";
    	Common.insertData(SelSql, col, DelSql, InsSql);
    	
    	SelSql="select * from r_day2 where TC = '22463' and DES='Enrolled Prov fName'";
    	col="ID";
    	DelSql="delete from r_day2 where TC = '22463'and DES='Enrolled Prov fName'";
    	InsSql="insert into r_day2 values ('22463', '"+fName+"', 'Enrolled Prov fName', '"+Common.convertSysdate()+"')";
    	Common.insertData(SelSql, col, DelSql, InsSql);

		Common.portalLogin();
		driver.findElement(By.linkText("Manage Provider Information")).click();
		driver.findElement(By.linkText("Enrollment")).click();
		driver.findElement(By.linkText("Start an Enrollment Application")).click();
		conti();
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).sendKeys(lName);
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).sendKeys(fName);
		driver.findElement(By.xpath("//input[contains(@id,'providerSSN')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerSSN')]")).sendKeys(Common.generateRandomTaxID());
		driver.findElement(By.xpath("//input[contains(@id,'providerNPI')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerNPI')]")).sendKeys(Common.generateRandomTaxID()+"1");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'legalEntityType')]"))).selectByVisibleText("INDIVIDUAL PRACTITIONER");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'providerType')]"))).selectByVisibleText("PHYSICIAN");
		conti();
		conti();
		conti();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationlastName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationlastName')]")).sendKeys(lName);
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationfirstName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationfirstName')]")).sendKeys(fName);
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationdateOfBirth')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationdateOfBirth')]")).sendKeys("01011966");
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationPIN')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationPIN')]")).sendKeys("8188");
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressLine1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressLine1')]")).sendKeys(adr1);
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressCity')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressCity')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'providerAddressState')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressZip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressZip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressPhoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressPhoneNumber')]")).sendKeys(phone);
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressEmail')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressEmail')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		portalATN = driver.findElement(By.xpath("//*[contains(@id,'atn1')]")).getText();
		conti();
		
		
		//Legal Entity
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityContact')]")).sendKeys(fName+" "+lName);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityAddr1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityAddr1')]")).sendKeys(adr1);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityCity')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityCity')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityState')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityZip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityZip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityEmail')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityEmail')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityPhoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityPhoneNumber')]")).sendKeys(phone);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityOwnershipClass')]"))).selectByVisibleText("COUNTY");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityOwnershipType')]"))).selectByVisibleText("Corporation");
		driver.findElement(By.xpath("//input[@value='false' and contains(@name, 'provider_legalEntity_commercialUsageIndicator')]")).click();
		conti();
		
		//New Changes
		conti();
		conti();
		conti();
		conti();
		conti();
		driver.findElement(By.xpath("//input[contains(@id,'attestName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'attestName')]")).sendKeys("ANSHUL GANDHI");
		driver.findElement(By.xpath("//input[contains(@id,'attestDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'attestDate')]")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[contains(@id,'attestTitle')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'attestTitle')]")).sendKeys("BA");
	    conti();
	    
	    
	    //Service Locations
	    newItem();
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).sendKeys(lName);
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).sendKeys(fName);
		driver.findElement(By.xpath("//input[contains(@id,'serviceLocationContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'serviceLocationContact')]")).sendKeys(fName+" "+lName);
		driver.findElement(By.xpath("//input[contains(@id,'address1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address1')]")).sendKeys(adr1);	    
		driver.findElement(By.xpath("//input[contains(@id,'city')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'city')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'state')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'zip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'zip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).sendKeys(phone);
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumberForTTDTTY')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumberForTTDTTY')]")).sendKeys(phone);
	    add();
	    conti();
	    
	    conti();
	    
	    //Identification Info
		driver.findElement(By.xpath("//*[contains(@id,'0:dbaName_Link')]")).click();
		new Select(driver.findElement(By.xpath("//select[contains(@id,'organizationType')]"))).selectByVisibleText("CHAIN");
		driver.findElement(By.xpath("//input[contains(@id,'deaNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'deaNumber')]")).sendKeys(Common.generateRandomTaxID());
		driver.findElement(By.xpath("//input[contains(@id,'deaEffectiveDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'deaEffectiveDate')]")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[contains(@id,'deaEndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'deaEndDate')]")).sendKeys("12/31/2299");
	    update();
	    conti();
	    
	    conti();
	    conti();
	    conti();
	    conti();
	    
	    //License Info
		driver.findElement(By.xpath("//*[contains(@id,'0:dbaName_Link')]")).click();
		newItem();
		driver.findElement(By.xpath("//input[contains(@id,'licenseNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'licenseNumber')]")).sendKeys(Common.generateRandomTaxID()+"6");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'agencyName')]"))).selectByVisibleText("MA BOARD OF REGISTRATION IN MEDICINE");
		driver.findElement(By.xpath("//input[contains(@id,'licenseEffectiveDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'licenseEffectiveDate')]")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[contains(@id,'licenseEndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'licenseEndDate')]")).sendKeys("12/31/2299");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'licenseState')]"))).selectByVisibleText(state);
	    add();
	    conti();
	    
	    conti();
	    conti();
	    
	    //PCC
		driver.findElement(By.xpath("//*[contains(@id,'0:dbaName_Link')]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_managedCareContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_managedCareContact')]")).sendKeys(Common.generateRandomName());
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_email')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_phoneNumber')]")).sendKeys(phone);
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_maxMembersRequested')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_maxMembersRequested')]")).sendKeys("99");
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_ageLessThan')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_ageLessThan')]")).sendKeys("99");
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_ageGreaterThan')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_ageGreaterThan')]")).sendKeys("11");
	    update();
	    conti();
	    
	    conti();
	    conti();
	    conti();
	    conti();
	    
	    //Trading Partner Agreement
		driver.findElement(By.xpath("//input[contains(@id,'agreementDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'agreementDate')]")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[contains(@id,'legalName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalName')]")).sendKeys(Common.generateRandomName());
		driver.findElement(By.xpath("//input[contains(@id,'signature')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'signature')]")).sendKeys(Common.generateRandomName());
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).sendKeys("6176176777");
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).sendKeys(email);
	    conti();
	    
	    conti();
	    
	    //Provider Contract
		driver.findElement(By.xpath("//input[@type='radio' and @value='true']")).click();
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		
		//Verify ATN
		Assert.assertTrue(driver.findElement(By.xpath("//form[@id='enrollmentConfirmation']/table/tbody/tr/td[2]/div/table/tbody/tr[11]/td/span[5]/i")).getText().equals(portalATN), "Provider enrollment confirmation failed on submit. ATN not present on confirmation page");
		portalEnroll=true;
		Common.portalLogout();
	}
	
	//Helper functions for 20463
	public void conti() {
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Continue']")).click();
	}
	
	public void newItem() {
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @alt='New Item']")).click();
	}
	public void add() {
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @alt='Add']")).click();
	}
	public void update() {
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @alt='Update']")).click();
	}
	
	@Test
	public void test22463b() throws Exception {
		TestNGCustom.TCNo="22463b";
    	log("//TC 22463b");

    	if (!portalEnroll) 
			Assert.assertTrue(false, "Not continuing with provider enrollment(from portal) test as it failed on portal");
		else {
			enrlWrklistNew("UNASSIGNED",portalATN);
		
		//In review
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("04 - IN REVIEW");
		Common.warning();
		Common.saveAll();
		
		//Credentialing
		enrlWrklistNew("CREDENTIALING",portalATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("05 - CREDENTIALING COMPLETE");
	    Common.warning();
		Common.saveAll();
		
		//QA
		enrlWrklistNew("QA",portalATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("18 - QA COMPLETE");
	    Common.warning();
		Common.saveAll();
		
		//Ready to enroll
		enrlWrklistNew("APPROVAL",portalATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("33 - READY TO ENROLL");
	    Common.warning();
		Common.saveAll();
		
		//ID Issued
		enrlWrklistNew("APPROVAL",portalATN);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:id_EnrollProv")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_DelegatedCredentIndicator"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ManagedCareGroup"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_BillingAgent"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ManagedCareOrganization"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_HospitalAffiliation"))).selectByVisibleText("No");
	    
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_CityTownCode"))).selectByVisibleText("ACTON");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_ProviderOrganizationType"))).selectByVisibleText("CHAIN");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_UcpIndicator"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_Coverage24hr"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_BypassTPL"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_OrganizationCode"))).selectByVisibleText("Corporation");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_AcceptNewMembers"))).selectByVisibleText("No");
	   
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:ProviderEnrollPublicHealthProgramEligibility_NewButtonClay:ProviderEnrollPublicHealthProgramEligibilityList_newAction_btn")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:EnrollProgramDropDown_2"))).selectByVisibleText("ACUTE OUTPATIENT");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityDataPanel_PrEnrollStatus"))).selectByVisibleText("ACTIVE - Pay");
	    
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:ProviderSpecialtyAdd_NewButtonClay:ProviderSpecialtyAddList_newAction_btn")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:ProviderSpecialtySearchControl_CMD_SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:_id149:TypeSpecialitiySearchResults_0:column1Value")).click();

	    Common.warning();
		Common.saveAll();
		
		//Enrolled
		enrlWrklistNew("ENROLLMENT",portalATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("34 - ENROLLED");
		Common.saveAll();
		String enlProv=driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplProvIDSearchControl")).getAttribute("value");
		log("Provider Id enrolled from portal is "+enlProv);
		
		//Verify provider comes in search results
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(enlProv);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    
	    //Store Prov ID for day 2 report
    	String SelSql="select * from r_day2 where TC = '22463' and DES='Enrolled Prov ID'";
    	String col="ID";
    	String DelSql="delete from r_day2 where TC = '22463'and DES='Enrolled Prov ID'";
    	String InsSql="insert into r_day2 values ('22463', '"+enlProv+"', 'Enrolled Prov ID', '"+Common.convertSysdate()+"')";
    	Common.insertData(SelSql, col, DelSql, InsSql);
    	
		}
	}
	
	public void enrlWrklist(int r, String ATN) {
		//Navigate to enrollment worklist panel
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_EnrollmentWorklist")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklist_DropDownQueueType"))).selectByIndex(r);
	    Common.search();
	    //sort by dte received for faster search
	    driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:_id44")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:_id44")).click();
	
		int i=2;
		int j=2;

		if (ATN.equals(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr/td[2]")).getText()))
			driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr/td/input")).click();
		else {
			for (;i<=j; i++){
				driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
				if ((driver.findElements(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[2]")).size())>0) {
					if (ATN.equals(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[2]")).getText())) { 
						driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
						driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td/input")).click();
					}
					else
						j=j+1;
				}
			}
		}

	    //Click on Search
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Review']")).click();
		
	}
	
	public void enrlWrklistNew(String queue, String ATN) {
		//Navigate to enrollment worklist panel
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_EnrollmentWorklist")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklist_DropDownQueueType"))).getOptions();
		for (WebElement i:list) 
			if ((i.getText()).contains(queue)) {
				//This is to handle QA and PREAPPROVAL QA
				if (i.getText().contains("PREAPPROVAL QA"))
					continue;
				else {
					i.click();
					break;
				}
			}
	    Common.search();
	    //sort by dte received for faster search
	    driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:_id44")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:_id44")).click();
	
		int i=1; //item 1 on a page
		int j=2; //page 2
		boolean foundATN = false;

		while(true){
			driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
			if ((driver.findElements(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[2]")).size())>0) {
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
				if (ATN.equals(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[2]")).getText())) { 
					driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td/input")).click();
					foundATN=true;
					break;
				}
				else
					i++;
			}
			else {
				if ((driver.findElements(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults_DataScrolleridx"+j)).size())>0) {
					driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
					driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults_DataScrolleridx"+j)).click();
					i=1;
					j++;
				}
				else {
					driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
					break;
				}
			}
			
		}

		if(!foundATN)
			Assert.assertTrue(false, "ATN "+ATN+" not found on any page.");
		else
			driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Review']")).click();
		
	}
	
	@Test
	public void test22464a() throws Exception {
		TestNGCustom.TCNo="22464a";
    	log("//TC 22464a");
    	
    	lNameR=Common.generateRandomName();
    	String fNameR=Common.generateRandomName();
    	String adr1="101 FEDERAL STREET";
    	String city="BOSTON";
    	String state ="Massachusetts";
    	String stateab ="MA";
    	String zip="02110";
    	String phone="6176176177";
    	String email="ansh90@gmail.com";

		Common.portalLogin();
		driver.findElement(By.linkText("Manage Provider Information")).click();
		driver.findElement(By.linkText("Business Partners (non Provider)")).click();
		driver.findElement(By.linkText("Enroll as Business Partner")).click();
		
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).sendKeys(lNameR);
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).sendKeys(fNameR);
		driver.findElement(By.xpath("//input[contains(@id,'dob')]")).sendKeys("01/01/1970");
		driver.findElement(By.xpath("//input[contains(@id,'pin')]")).sendKeys("1234");
		driver.findElement(By.xpath("//input[contains(@id,'nonProviderLine1')]")).sendKeys(adr1);		
		driver.findElement(By.xpath("//input[contains(@id,'nonProviderCity')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'nonProviderState')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'nonProviderZip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'nonProviderPhoneNumber')]")).sendKeys(phone);
		driver.findElement(By.xpath("//input[contains(@id,'nonProviderEmail')]")).sendKeys(email);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'relEntityType')]"))).selectByVisibleText("Billing Intermediary");
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		
		//Doing Business As (DBA) Address
		driver.findElement(By.xpath("//input[contains(@id,'dbaName')]")).sendKeys(lNameR);
		driver.findElement(By.xpath("//input[contains(@id,'line1')]")).sendKeys(adr1);
		driver.findElement(By.xpath("//input[contains(@id,'city')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'state')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'zip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).sendKeys(phone);
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).sendKeys(email);
	    
	    //Information Address
		driver.findElement(By.xpath("//*[contains(@id,'sameAsDbaAddressInd')]")).click();
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Continue to next page']")).click();
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Continue to next page']")).click();
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		portalEnrollrel = true;
		Common.portalLogout();
	}
	
	@Test
	public void test22464b() throws Exception {
		TestNGCustom.TCNo="22464b";
    	log("//TC 22464b");
    	Thread.sleep(300000);
    	if (!portalEnrollrel) 
			Assert.assertTrue(false, "Not continuing with relationship entity enrollment(from portal) test as it failed on portal");
		else {
		//Get ATN
		String atn=getATNnew("UNASSIGNED",lNameR);
		//Unassigned queue
		enrlWrklistNew("UNASSIGNED",atn);

		//In review
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("04 - IN REVIEW");
		Common.saveAll();
		
		//Credentialing
		enrlWrklistNew("CREDENTIALING",atn);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("05 - CREDENTIALING COMPLETE");
		Common.saveAll();
		
		//QA
		enrlWrklistNew("QA",atn);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("18 - QA COMPLETE");
		Common.saveAll();
		
		//Ready to enroll
		enrlWrklistNew("APPROVAL",atn);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("33 - READY TO ENROLL");
		Common.saveAll();
		
		//ID Issued
		enrlWrklistNew("APPROVAL",atn);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationPanelSpacer5")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_OwnershipType"))).selectByVisibleText("Corporation");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_DelegatedCredentIndicator"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ManagedCareGroup"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_BillingAgent"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ManagedCareOrganization"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_HospitalAffiliation"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ProviderLegalEntityType"))).selectByVisibleText("BUSINESS CORPORATION");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_CommercialInsurance"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ProviderOwnershipClass"))).selectByVisibleText("COUNTY");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_HospitalAffiliation"))).selectByVisibleText("No");

	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_CityTownCode"))).selectByVisibleText("ACTON");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_ProviderOrganizationType"))).selectByVisibleText("CHAIN");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_UcpIndicator"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_Coverage24hr"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_BypassTPL"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_OrganizationCode"))).selectByVisibleText("Corporation");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_AcceptNewMembers"))).selectByVisibleText("No");
	   
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:ProviderEnrollPublicHealthProgramEligibility_NewButtonClay:ProviderEnrollPublicHealthProgramEligibilityList_newAction_btn")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:EnrollProgramDropDown_2"))).selectByVisibleText("ACUTE OUTPATIENT");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityDataPanel_PrEnrollStatus"))).selectByVisibleText("ACTIVE - Pay");
	    
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:ProviderSpecialtyAdd_NewButtonClay:ProviderSpecialtyAddList_newAction_btn")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:ProviderSpecialtySearchControl_CMD_SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:_id147:TypeSpecialitiySearchResults_0:column1Value")).click();

		Common.saveAll();
		
		//Enrolled
		enrlWrklistNew("ENROLLMENT",atn);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("34 - ENROLLED");
		Common.saveAll();
		String enlRel=driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplProvIDSearchControl")).getAttribute("value");
		log("Relationship Entity enrolled from portal is "+enlRel);
		
		//Verify id does not come in provider search results
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(enlRel);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
		Assert.assertTrue((driver.findElement(By.cssSelector("span.redreg")).getText().equals("***No records found***")), "Relation entity got returned in provider search results");
		
		//Verify id comes in rel entity search results
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelationshipEntity")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchBean_CriteriaPanel:ProvRelationshipEntitySearchCrit_ID")).sendKeys(enlRel);
	    Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchResults_0:_id17")).click();
    	
		}
	}
	
	public String getATN(int r, String name) {
		//Navigate to enrollment worklist panel
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_EnrollmentWorklist")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklist_DropDownQueueType"))).selectByIndex(r);
	    Common.search();
	    //sort by dte received for faster search
	    driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:_id44")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:_id44")).click();
	
		int i=2;
		int j=2;

		if (name.equals(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr/td[5]")).getText()))
			return driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr/td[2]")).getText();
		else {
			for (;i<=j; i++){
				driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
				if ((driver.findElements(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[5]")).size())>0) {
					if (name.equals(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[5]")).getText())) { 
						driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
					}
					else
						j=j+1;
				}
			}
			return driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+(i-1)+"]/td[2]")).getText(); //(i-1) because the for loop does an i++ finally
		}		
	}
	
	public String getATNnew(String queue, String name) {
		//Navigate to enrollment worklist panel
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_EnrollmentWorklist")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklist_DropDownQueueType"))).getOptions();
		for (WebElement i:list) 
			if ((i.getText()).contains(queue)) {
				//This is to handle QA and PREAPPROVAL QA
				if (i.getText().contains("PREAPPROVAL QA"))
					continue;
				else {
					i.click();
					break;
				}
			}
	    Common.search();
	    
	    //sort by dte received for faster search
	    driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:_id44")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:_id44")).click();
	    
		int i=1; //item 1 on a page
		int j=2; //page 2
		boolean foundATN = false;
		String atnno="";

		while(true){
			driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
			if ((driver.findElements(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[5]")).size())>0) {
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
				if (name.equals(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[5]")).getText())) { 
					atnno=driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults:tbody_element']/tr["+i+"]/td[2]")).getText();
					foundATN=true;
					break;
				}
				else
					i++;
			}
			else {
				if ((driver.findElements(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults_DataScrolleridx"+j)).size())>0) {
					driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
					driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentWorkflowWorklistPanel:ProviderEnrollmentWorkflowWorklistResults_DataScrolleridx"+j)).click();
					i=1;
					j++;
				}
				else {
					driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
					break;
				}
			}
			
		}

		if(!foundATN)
			Assert.assertTrue(false, "ATN not found on any page with name: "+name);
		
		return atnno;

	}
	    
	@Test
	public void test22465() throws Exception {
		TestNGCustom.TCNo="22465";
    	log("//TC 22465");
    	
    	//Get relationship entity
    	sqlStatement = "select * from T_PR_prov  where cde_relationship_entity_type = '0099' and rownum <2";
    	colNames.add("ID_PROVIDER");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	String id = colValues.get(0);
    	
    	//Search for this rel entity
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelationshipEntity")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchBean_CriteriaPanel:ProvRelationshipEntitySearchCrit_ID")).sendKeys(id);
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchResults_0:_id17")).click();
		
		//Trading Partner Clients
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityNavigatorPanel:relationshipentitynavigator:ITM_n10610")).click();
		driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
		if (driver.findElements(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderTradingPartnerClientsList_0:ProviderTradingPartnerClientsBean_ColValue_ProviderIDSvcClient")).size()==0) {
			driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
			driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderRelationshipEntityClientDataPanel_ProviderIDClient")).sendKeys("110000014");
			driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderRelationshipEntityClientDataPanel_CdeServiceLocClient")).sendKeys("C");
			driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderRelationshipEntityClientDataPanel_EffectiveDte")).sendKeys(Common.convertSysdate());
			driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderRelationshipEntityClientDataPanel_EndDte")).sendKeys("12/31/2299");
			Common.saveAll();
		}
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		
		//Sort on end date desc
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderTradingPartnerClientsList:ProviderTradingPartnerClientsBean_ColHeader_endDte")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderTradingPartnerClientsList:ProviderTradingPartnerClientsBean_ColHeader_endDte")).click();

		//make end date = EoT
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderTradingPartnerClientsList_0:ProviderTradingPartnerClientsBean_ColValue_ProviderIDSvcClient")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderRelationshipEntityClientDataPanel_EndDte")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderRelationshipEntityClientDataPanel_EndDte")).sendKeys("12/31/2299");
		Common.saveAll();
		
		//End Date the row now
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderTradingPartnerClientsList_0:ProviderTradingPartnerClientsBean_ColValue_ProviderIDSvcClient")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderRelationshipEntityClientDataPanel_EndDte")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerClientsPanel:ProviderRelationshipEntityClientDataPanel_EndDte")).sendKeys("12/31/2298");
		Common.saveAll();
		
		log("The relationship entity end dated was: "+id);
    	
	}
	
	@Test
	public void test22466() throws Exception {
		TestNGCustom.TCNo="22466";
    	log("//TC 22466");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_CaseTracking")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseDataPanel_caseDescription")).sendKeys(Common.generateRandomName());
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseDataPanel_clerkIDRefAgencyFrom")).sendKeys("CST");
		driver.findElement(By.xpath("/html/body/form/table/tbody/tr/td[2]/span/table[2]/tbody/tr/td/table/tbody/tr/td/div[2]/table/tbody/tr/td/table/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]/a/img")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:_id102:ClerkIDSearchCriteriaPanel:UserID")).sendKeys("AGANDHI");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:_id102:ClerkIDSearchCriteriaPanel:SEARCH")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:_id102:ClerkIDSearchResults_0:column1Value")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseDataPanel_ProvCaseType"))).selectByVisibleText("CST Provider Complaint");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseDataPanel_ProvCaseStatus"))).selectByVisibleText("Active Case Status");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseDataPanel_ProvCaseLevel"))).selectByVisibleText("IN-HOUSE");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseDataPanel_CaseRefFromDate")).sendKeys(Common.convertSysdate());
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseDataPanel_CaseSecuredIndicator"))).selectByVisibleText("No");
	    Common.saveAll();
	    
	    String caseNo = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseDataPanel_caseNumber")).getText();
	    log("Case Number: "+caseNo);
	    
	    //Add related providers
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingNavigatorPanel:ProviderCaseTrackingNavigator:ITM_n109")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		
		//Select provider
		sqlStatement="select p.id_provider, h.cde_service_loc, n.name , x.num_tax_id, i.alt_id_provider from t_hist_directory h, t_pr_prov p, t_pr_nam n, t_pr_tax_id x, T_PR_IDENTIFIER i, T_PR_LOC_NM_ADR adr where n.sak_prov = p.sak_prov and x.sak_prov = p.sak_prov and i.sak_prov = p.sak_prov and i.cde_service_loc=h.cde_service_loc and i.cde_pr_id_type='NPI' and h.cde_clm_status = 'P' and h.sak_prov=p.sak_prov and h.dte_first_svc > "+HIPAA.datePaneltoSQL(Common.convertSysdatecustom(-90))+" and adr.SAK_SHORT_NAME = n.SAK_SHORT_NAME and adr.cde_service_loc = h.cde_service_loc and rownum < 2";		
		colNames.add("ID_PROVIDER");
		colNames.add("CDE_SERVICE_LOC");
		colNames.add("NAME");
		colNames.add("NUM_TAX_ID");
		colNames.add("ALT_ID_PROVIDER");
		colValues=Common.executeQuery(sqlStatement, colNames);
		String prov= colValues.get(0);
		String sl = colValues.get(1);
		String name = colValues.get(2);
		String tax = colValues.get(3);
		String npi = colValues.get(4);

		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseXrefPanel:ProviderCaseRefDataPanel_ProviderID")).sendKeys(prov);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseXrefPanel:ProviderCaseRefDataPanel_ProvLoc")).sendKeys(sl);
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
	    log("Provider Added: "+prov+sl);
		
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseRelatedProvidersPanel:ProviderCase_ProviderCaseXrefList_0:ProviderCaseRefNewBean_ColValue_providerIDLoc")).getText().equals(prov+" "+sl)), "Mismatch on Prov ID/SL");
		Assert.assertTrue(name.contains(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseRelatedProvidersPanel:ProviderCase_ProviderCaseXrefList_0:ProviderCaseRefNewBean_ColValue_firstName")).getText().trim()), "Name Mismatch");
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseRelatedProvidersPanel:ProviderCase_ProviderCaseXrefList_0:ProviderCaseRefNewBean_ColValue_numTaxID")).getText().equals(tax)), "tax ID mismatch");
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingProvCasePanel:ProviderCaseRelatedProvidersPanel:ProviderCase_ProviderCaseXrefList_0:ProviderCaseRefNewBean_ColValue_altIDProvider")).getText().equals(npi)), "npi mismatch");

		//Add related claims
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingNavigatorPanel:ProviderCaseTrackingNavigator:ITM_n108")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseRelatedClaimXrefPanel:ProviderCaseRelatedClaimXrefList_NewButtonClay:ProviderCaseRelatedClaimXrefList_newAction_btn")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Advanced Search']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseRelatedClaimXrefPanel:ClaimSearchPanel:ProviderCaseRelatedClaimSearchBean_CriteriaPanel:FDOS")).sendKeys(Common.convertSysdatecustom(-90));
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseRelatedClaimXrefPanel:ClaimSearchPanel:ProviderCaseRelatedClaimSearchBean_CriteriaPanel:TDOS")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseRelatedClaimXrefPanel:ClaimSearchPanel:ProviderCaseRelatedClaimSearchBean_CriteriaPanel:ClmProviderId")).sendKeys(prov+sl);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseRelatedClaimXrefPanel:ClaimSearchPanel:ProviderCaseRelatedClaimSearchBean_CriteriaPanel:SEARCH")).click();
		
		//Store ICN
		String icn = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseRelatedClaimXrefPanel:ClaimSearchPanel:ClaimSearchResultsDataTable_0:CTClaimSearchCol1Txt")).getText();

		
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseRelatedClaimXrefPanel:ClaimSearchPanel:ClaimSearchResultsDataTable_0:selected")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseRelatedClaimXrefPanel:ProviderCaseRelatedClaimXrefList_0:ProviderCaseRelatedClaimXrefBean_ColValue_relatedClaim_historyDirectory_ICN")).getText().equals(icn)), "icn mismatch");
		
	    log("ICN selected: "+icn);

	}
	
	@Test
	public void test22467() throws Exception {
		TestNGCustom.TCNo="22467";
    	log("//TC 22467");
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Admin")).click();
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_imaging")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImagingNavigatorPanel:ImagingMaintenance_id:GRP_provider")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImagingNavigatorPanel:ImagingMaintenance_id:ITM_n109")).click();
    	
    	//create WI for image
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocument_ReceiptDate")).sendKeys(Common.convertSysdate());
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocument_UploadFileName")).sendKeys(System.getProperty("user.dir")+"\\testngMO.xml");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocumentDataPanel_ImageProviderDocumentTaxID")).sendKeys("");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocumentDataPanel_ImageProviderDocumentTaxID")).sendKeys("1");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocumentDataPanel_ImageProviderDocumentTaxID_CMD_SEARCH")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:_id285:ImageProviderDocumentSearchResults_2:column1Value")).click(); //get the 3rd prov from list to avoid getting 110000314, whic is also used for TC 22461
    	Common.saveAll();
    	
    	//check WI and image
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Provider")).click();
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ProfileUpdateWorklist")).click();
    	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklist_DropDownQueueType"))).selectByIndex(2);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    
	    //Check image
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults_0:_id20")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList:ProviderImagesSearchResultBean_SortColHeader_receiptDate")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList:ProviderImagesSearchResultBean_SortColHeader_receiptDate")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_0:_id105")).click();

	    //Click on WI
	    driver.findElement(By.id("workList[0]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Review']")).click();

		//Change status to IN PROCESS
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderworkflowProfileUpdateStatusPanel:WorkflowStatusdropdown"))).selectByVisibleText("IN PROCESS");
	    Common.saveAll();
//	    df30872_saveAll(); //remove after DF 20872 is fixed, and uncomment above line of Common.saveAll()
	    
	    //Select The WI again from PROFILE UPDATE queue
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ProfileUpdateWorklist")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklist_DropDownQueueType"))).selectByIndex(3);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    //Click on WI
	    driver.findElement(By.id("workList[0]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Review']")).click();
		//Change status to COMPLETE
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderworkflowProfileUpdateStatusPanel:WorkflowStatusdropdown"))).selectByVisibleText("COMPLETE");
	    Common.saveAll();
//	    df30872_saveAll(); //remove after DF 20872 is fixed, and uncomment above line of Common.saveAll()
	    
	    log("The image name is: "+Common.fileName());
    	
	}
	
	@Test
	public void test22469() throws Exception {
		TestNGCustom.TCNo="22469";
    	log("//TC 22469");
    	
		String idProvider="110048577";
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(idProvider);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    
	    //Restricted services- Check for existing row, otherwise create new
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10423")).click();
		driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
		if (driver.findElements(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceList_0:ProviderRestrictedServiceBean_ColValue_status")).size()>0) {
			//Sort by end date
		    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceList:ProviderRestrictedServiceBean_ColHeader_endDate")).click();
		    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceList:ProviderRestrictedServiceBean_ColHeader_endDate")).click();
		    //select the latest record now
		    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceList_0:ProviderRestrictedServiceBean_ColValue_status")).click();
		}
		else 
			driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		
		driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
		
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceDataPanel_Status1Code"))).selectByVisibleText("Active");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceDataPanel_EffectiveDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceDataPanel_EndDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceDataPanel_EndDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestrictedServiceDataPanel_IncludeExcludeIndicator"))).selectByVisibleText("Include");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderRestDataPanel_RestrictionType"))).selectByVisibleText("Proc");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:BoundDataSearchLowCodePanel_CMD_SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:_id238:ProcedureCodePopUpSearchCriteriaPanel:ProcedureCode")).sendKeys("99203");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:_id238:ProcedureCodePopUpSearchCriteriaPanel:SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:_id238:ProcedureCodePopUpSearchResults_0:column1Value")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:BoundDataSearchHighCodePanel_CMD_SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:_id238:ProcedureCodePopUpSearchCriteriaPanel:ProcedureCode")).sendKeys("99203");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:_id238:ProcedureCodePopUpSearchCriteriaPanel:SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:_id238:ProcedureCodePopUpSearchResults_0:column1Value")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderEnrollProgramPopUpSearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRestrictedServicePanel:ProviderEnrollProgramPopUpSearch")).sendKeys("AOH");
	    Common.saveAll();
	    
	    //Get Claims Data
		sqlStatement="select * from R_CLAIMS_BILLING where TC = '22469'";
		colNames.add("TC"); 
		colNames.add("CT");  
		colNames.add("PROV_BILLING"); 
		colNames.add("AMT_BILLED");   
		colNames.add("TOB"); 
		colNames.add("NPI_ATTEND");   
		colNames.add("REFERRAL"); 
		colNames.add("PAS"); 
	    colValues=Common.executeQuery1(sqlStatement, colNames);
	    
	    String TC = colValues.get(0); 
	    String CT = colValues.get(1);  
	    String PROV_BILLING = colValues.get(2); 
	    String AMT_BILLED = colValues.get(3);   
	    String TOB = colValues.get(4); 
	    String NPI_ATTEND = colValues.get(5);   
	    String REFERRAL = colValues.get(6); 
	    String PAS = colValues.get(7); 
	    
	    String sql = "select /*+ NO_PARALLEL OPT_PARAM('_hash_join_enabled','FALSE') OPT_PARAM('_optimizer_sortmerge_join_enabled','FALSE') OPT_PARAM('_b_tree_bitmap_plans','FALSE') */ base.* from t_re_base base, t_pub_hlth_pgm pgm,t_pub_hlth_aid pubaid," +
				"t_cde_aid aid,t_re_aid_elig elig where " +
				"elig.sak_recip=base.sak_recip " +
				"and pgm.SAK_PUB_HLTH=pubaid.SAK_PUB_HLTH " +
				"and pubaid.SAK_CDE_AID=aid.SAK_CDE_AID "  +
				"and  aid.SAK_CDE_AID= elig.SAK_CDE_AID "  +
				"and pgm. CDE_PGM_HEALTH='STD' " +
				"and elig.DTE_END='22991231' " + 
				"and elig.cde_status1<>'H' " +
				"and not exists ( select sak_recip from t_re_pmp_assign asg where asg.sak_recip=base.sak_recip and asg.dte_end> 20130401) " +
				"and not exists ( select sak_recip from t_tpl_resource rs Where rs.Sak_Recip=Base.Sak_Recip) " +
				"and not exists (select sak_recip from t_re_hib hib where hib.sak_recip=base.sak_recip and hib.dte_end> 20130401) " +
				"And Not Exists ( Select Sak_Recip From t_hist_directory hist Where hist.Sak_Recip=Base.Sak_Recip) " +
				"and base.ind_active='Y' "+ 
				"and base.sak_recip > dbms_random.value * 6300000 " +
				"and rownum<2 ";
	  
	    Common.portalLogin();
    	SubmitClaims.initiateClaim();
    	SubmitClaims.M(TC, CT, PROV_BILLING, AMT_BILLED, TOB, NPI_ATTEND, REFERRAL, PAS, sql);
    	String clmNo = SubmitClaims.clmICN("prof");
       	log("ICN: "+clmNo);
       	
       	//Verify 1040/1041 edit
       	Common.portalLogout();
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Claims")).click();
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ClaimSearchBean_CriteriaPanel:ClmIcnNumber")).sendKeys(clmNo);
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ClaimSearchResultsDataTable_0:_id14")).click();
		//Error 1040
		driver.findElement(By.id("MMISForm:MMISBodyContent:PhysicianClaimNavigatorPanel:PhysicianClaimNavigator:ITM_PhysicianClaim10")).click();
		int rws=driver.findElements(By.xpath("//span[contains(@id,'ClaimErrorHdrBean_ColValue_errorCode')]")).size();
		boolean errFound = false;
		for (int i=0;i<rws;i++) {
			if (driver.findElement(By.id("MMISForm:MMISBodyContent:ClaimErrorHdrPanel:ClaimErrorHdr_Errorlist_"+i+":ClaimErrorHdrBean_ColValue_errorCode")).getText().equals("1040")) {
				errFound=true;
				break;
			}
		}
		if (!errFound)
			Assert.assertTrue(false, "Claim error code 1040 was not found");
		//Error 1041
		errFound = false;
		for (int i=0;i<rws;i++) {
			if (driver.findElement(By.id("MMISForm:MMISBodyContent:ClaimErrorHdrPanel:ClaimErrorHdr_Errorlist_"+i+":ClaimErrorHdrBean_ColValue_errorCode")).getText().equals("1041")) {
				errFound=true;
				break;
			}
		}
		if (!errFound)
			Assert.assertTrue(false, "Claim error code 1041 was not found");
	
	}
	
	@Test
	public void test22471() throws Exception {
		TestNGCustom.TCNo="22471";
    	log("//TC 22471");
    	
		String idProvider="110026771";
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(idProvider);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
    	
	    //inpatient LoC
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:GRP_g101")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n1014")).click();
	    //Sort by end date
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateList:ProviderUbLevelOfCareRateBean_ColHeader_endDate")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateList:ProviderUbLevelOfCareRateBean_ColHeader_endDate")).click();
	    //Store existing data
	    String plan = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateList_0:ProviderUbLevelOfCareRateBean_ColValue_inpLoc_levelOfCareDescription")).getText();
	    String rate = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateList_0:ProviderUbLevelOfCareRateBean_ColValue_amount")).getText();
	    String percent = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateList_0:ProviderUbLevelOfCareRateBean_ColValue_prcntOfAmntBilled")).getText();
	    String certDate = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateList_0:ProviderUbLevelOfCareRateBean_ColValue_certifiedDate")).getText();
	    
	    //End date this row
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateList_0:ProviderUbLevelOfCareRateBean_ColValue_inpLoc_levelOfCareDescription")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_EndDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_EndDate")).sendKeys(Common.convertSysdate());
	    Common.saveAll();
	    
	    //Enter new one
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_InpLoc"))).selectByVisibleText(plan);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_EffectiveDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(1));
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_EndDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_EndDate")).sendKeys("12/31/2299");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_Amount")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_Amount")).sendKeys(rate);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_PrcntOfAmntBilled")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_PrcntOfAmntBilled")).sendKeys(percent);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_CertifiedDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateDataPanel_CertifiedDate")).sendKeys(certDate);
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderUbLevelOfCareRatePanel:ProviderUbLevelOfCareRateList_0:ProviderUbLevelOfCareRateBean_ColValue_status")).getText().equals("Added")), "New row was not added");
		Common.saveAll();

	}
	
	@Test
	public void test23097() throws Exception {
		TestNGCustom.TCNo="23097";
    	log("//TC 23097");
    	
    	//get ATN
    	sqlStatement="select sak_atn from T_PR_APPLN where cde_prov_type =17 and rownum<2";
    	colNames.add("SAK_ATN");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String atn = colValues.get(0);
    	log("Nurse practitioner ATN is: "+atn);
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ApplicationSearch")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentSearchBean_CriteriaPanel:EnrollmentSearch_ATN_Id")).sendKeys(atn);
    	Common.search();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentSearchResults_0:EnrollmentSearchPanelSpacer24")).click();
    	//Provider enrollment requirements
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ApplicationNavigatorPanel:providerapplicationnavigator:ITM_n111")).click();
    	//Sort asc on requirement description
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEnrollmentRequirementProviderTypeXrefPanel:ProviderEnrollmentRequirementProviderTypeXrefPanelList:ProviderEnrollmentRequirementProviderTypeXrefBean_ColHeader_providerEnrollmentRequirement_providerRequirementType_requirementTypeDescription")).click();
		
    	int rws=driver.findElements(By.xpath("//span[contains(@id,'ProviderEnrollmentRequirementProviderTypeXrefBean_ColValue_providerEnrollmentRequirement_providerRequirementType_requirementTypeDescription')]")).size();
		boolean clear = false;
		for (int i=0;i<rws;i++) {
			if (driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEnrollmentRequirementProviderTypeXrefPanel:ProviderEnrollmentRequirementProviderTypeXrefPanelList_"+i+":ProviderEnrollmentRequirementProviderTypeXrefBean_ColValue_providerEnrollmentRequirement_providerRequirementType_requirementTypeDescription")).getText().equals("DEA")) {
				clear=true;
				break;
			}
		}
		if (!clear)
			Assert.assertTrue(false, "DEA requirement was not found for nurse practitioner ATN");    	
		
	}
	
	@Test
	public void test23099a() throws Exception {
		TestNGCustom.TCNo="23099a";
    	log("//TC 23099a");
    	
    	//Get active prov whose last name is smith
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderSearchResult_Name")).sendKeys("SMITH");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
	    //Store this provider id
    	provTC23099=driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).getText();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    
	    //Location name address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10414")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_0:ProviderLocationNameAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressPanel_maintainAddressAction_btn")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).sendKeys("101 FEDERAL ST");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).sendKeys("BOSTON");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).sendKeys("02110");
	    
	    //Store current coordinates
	    lon = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:longitudeNumber")).getAttribute("value");
	    lat = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:latitudeNumber")).getAttribute("value");
	    
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).click();
		Common.saveAll();
		
		log("Provider: "+provTC23099);
		log("Old longitude: "+lon);
		log("Old latitude: "+lat);
    	
	}
	
	@Test
	public void test23099b() throws Exception {
		TestNGCustom.TCNo="23099b";
    	log("//TC 23099b");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(provTC23099);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    
	    //Location name address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10414")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_0:ProviderLocationNameAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();
    	
    	if (driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:longitudeNumber")).getAttribute("value").equals(lon))
    		Assert.assertTrue(false, "Longitude did not change");
    	if (driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:latitudeNumber")).getAttribute("value").equals(lat))
    		Assert.assertTrue(false, "Latitude did not change");
    	
		log("New longitude: "+driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:longitudeNumber")).getAttribute("value"));
		log("New latitude: "+driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:latitudeNumber")).getAttribute("value"));
		
		//Change the address back to prev one for next time
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressPanel_maintainAddressAction_btn")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).sendKeys("1054 KINGS HWY");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).sendKeys("NEW BEDFORD");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).sendKeys("02745");
	    
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).click();
		Common.saveAll();
    	
	}
	
	@Test
	public void test23101a() throws Exception {
		TestNGCustom.TCNo="23101a";
    	log("//TC 23101a");
    	
		String idProvider="110000148";
		searchProv(idProvider);
	    //SERVICE LOCATION - set disbursement codes
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n104")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderServiceLocationPanel:ProviderServiceLocationDataPanel_DisbursementCode"))).selectByVisibleText("0 Pay");
	    Common.saveAll();
	    
		idProvider="110000254";
		searchProv(idProvider);
	    //SERVICE LOCATION
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n104")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderServiceLocationPanel:ProviderServiceLocationDataPanel_DisbursementCode"))).selectByVisibleText("1 State Agency");
	    Common.saveAll();

	    String[] part = new String[2];
	    part[0]="a";
	    part[1]="b";
       	
	    Common.portalLogin();
	    for (int i=0;i<2;i++) {
	    	//Get Claims Data
			sqlStatement="select * from R_CLAIMS_BILLING where TC = '23101"+part[i]+"'";
			colNames.add("TC"); 
			colNames.add("CT");  
			colNames.add("PROV_BILLING"); 
			colNames.add("AMT_BILLED");   
			colNames.add("TOB"); 
			colNames.add("NPI_ATTEND");   
			colNames.add("REFERRAL"); 
			colNames.add("PAS"); 
		    colValues=Common.executeQuery1(sqlStatement, colNames);
		    
		    String TC = colValues.get(0); 
		    String CT = colValues.get(1);  
		    String PROV_BILLING = colValues.get(2); 
		    String AMT_BILLED = colValues.get(3);   
		    String TOB = colValues.get(4); 
		    String NPI_ATTEND = colValues.get(5);   
		    String REFERRAL = colValues.get(6); 
		    String PAS = colValues.get(7); 
		    
		    String sql = "select /*+ NO_PARALLEL OPT_PARAM('_hash_join_enabled','FALSE') OPT_PARAM('_optimizer_sortmerge_join_enabled','FALSE') OPT_PARAM('_b_tree_bitmap_plans','FALSE') */ base.* from t_re_base base, t_pub_hlth_pgm pgm,t_pub_hlth_aid pubaid," +
					"t_cde_aid aid,t_re_aid_elig elig where " +
					"elig.sak_recip=base.sak_recip " +
					"and pgm.SAK_PUB_HLTH=pubaid.SAK_PUB_HLTH " +
					"and pubaid.SAK_CDE_AID=aid.SAK_CDE_AID "  +
					"and  aid.SAK_CDE_AID= elig.SAK_CDE_AID "  +
					"and pgm. CDE_PGM_HEALTH='STD' " +
					"and elig.DTE_END='22991231' " + 
					"and elig.cde_status1<>'H' " +
					"and not exists ( select sak_recip from t_re_pmp_assign asg where asg.sak_recip=base.sak_recip and asg.dte_end> 20130401) " +
					"and not exists ( select sak_recip from t_tpl_resource rs Where rs.Sak_Recip=Base.Sak_Recip) " +
					"and not exists (select sak_recip from t_re_hib hib where hib.sak_recip=base.sak_recip and hib.dte_end> 20130401) " +
					"And Not Exists ( Select Sak_Recip From t_hist_directory hist Where hist.Sak_Recip=Base.Sak_Recip) " +
					"and base.ind_active='Y' "+ 
					"and base.sak_recip > dbms_random.value * 6300000 " +
					"and rownum<2 ";
		  
		    
	    	SubmitClaims.initiateClaim();
	    	SubmitClaims.M(TC, CT, PROV_BILLING, AMT_BILLED, TOB, NPI_ATTEND, REFERRAL, PAS, sql);
	    	String clmNo = SubmitClaims.clmICN("prof");
	    	if (!(SubmitClaims.clmStatus().equals("Paid")))
	    		Assert.assertTrue(false, "The ICN "+clmNo+" is denied");
	       	log("ICN for prov ("+PROV_BILLING+") with disbursement code "+i+" is:"+clmNo);
	       	
	       	//Store ICN in DB for day 2
	    	String SelSql="select * from r_day2 where TC = '23101"+part[i]+"'";
	    	String col="ID";
	    	String DelSql="delete from r_day2 where TC = '23101"+part[i]+"'";
	    	String InsSql="insert into r_day2 values ('23101"+part[i]+"', '"+clmNo+"', 'ICN for disb code "+i+"', '"+Common.convertSysdate()+"')";
	    	Common.insertData(SelSql, col, DelSql, InsSql);
	    	Common.resetPortal();
	    }
	    
	    Common.portalLogout();
	}
	
	@Test
	public void test23101b() throws Exception {
		TestNGCustom.TCNo="23101b";
    	log("//TC 23101b");
    	
	    String[] part = new String[2];
	    part[0]="a";
	    part[1]="b";
	    
	    String[] prov = new String[2];
	    prov[0]="110000148";
	    prov[1]="110000254";
       		    
	    for (int i=0;i<2;i++) {
    	
		String idProvider=prov[i];
		
		sqlStatement ="select * from r_day2 where TC = '23101"+part[i]+"'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no icn present generated");
		String icn = colValues.get(0);
		
		log("Checking Finance subsystem for voucher no. for provider "+idProvider+" for icn "+icn);
		
		//Go to Finance>Payment
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Financial")).click();
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Payment")).click();
	    driver.findElement(By.xpath("//input[contains(@id,'ProviderID')]")).sendKeys(idProvider);
	    driver.findElement(By.xpath("//input[contains(@id,'checkProviderSearchControlID')]")).sendKeys("A");
	    Common.search();
	    
	    //Get Finance run date stamp from user
//    	BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
//    	String resp = reader.readLine(); 
//	    System.out.println(resp);
	    
	    String finDate = "10/13/2015";
	    
	    //sort by dte received for faster search
	    driver.findElement(By.id("MMISForm:MMISBodyContent:CheckSearchResults:CheckSearchResultsCol3Title")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:CheckSearchResults:CheckSearchResultsCol6Title")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:CheckSearchResults:CheckSearchResultsCol6Title")).click();

		int a=0; //item 1 on a page
		int j=2; //page 2
		boolean foundFinDt = false;

		while(true){
			driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
			if ((driver.findElements(By.xpath("//*[contains(@id,'"+a+":CheckSearchResultsCol6Value')]")).size())>0) {
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
				if (finDate.equals(driver.findElement(By.xpath("//*[contains(@id,'"+a+":CheckSearchResultsCol6Value')]")).getText())) {
					//Validate voucher no.
					if (idProvider.equals(prov[0])) {
						Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'"+a+":CheckSearchResultsCol4Value')]")).getText().substring(0, 1).equals("1"), "Voucher no. for "+idProvider+" did not start with 1");
						log("Voucher no. for "+idProvider+" starts with 1");
					}
					else {
						Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'"+a+":CheckSearchResultsCol4Value')]")).getText().substring(0, 1).equals("9"), "Voucher no. for "+idProvider+" did not start with 9");
						log("Voucher no. for "+idProvider+" starts with 9");
					}
					driver.findElement(By.xpath("//*[contains(@id,'"+a+":CheckSearchResultsCol1Value')]")).click();
					foundFinDt=true;
					break;
				}
				else
					a++;
			}
			else {
				if ((driver.findElements(By.id("MMISForm:MMISBodyContent:_id32idx"+j)).size())>0) {
					driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
					driver.findElement(By.id("MMISForm:MMISBodyContent:_id32idx"+j)).click();
					a=0;
					j++;
				}
				else {
					driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
					break;
				}
			}
			
		}

		if(!foundFinDt)
			Assert.assertTrue(false, "Fin Date "+finDate+" not found on any page.");

		//Validate ICN
		driver.findElement(By.linkText("Related Transactions")).click();
		
		a=0;
		boolean foundICN = false;
		while(true){
			driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
			if ((driver.findElements(By.xpath("//*[contains(@id,'"+a+":_id17')]")).size())>0) {
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
				if (icn.equals(driver.findElement(By.xpath("//*[contains(@id,'"+a+":_id17')]")).getText())) { 
					log("Found "+icn+" in Finance>Payment>Related Transactions panel for provider "+idProvider);
					foundICN=true;
					break;
				}
				else
					a++;
			}
			else{
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
				break;
			}
			
		}
		
		if(!foundICN)
			Assert.assertTrue(false, "Did not find ICN "+icn+" in Finance>Payment>Related Transactions panel for provider "+idProvider);
		
		LoginCheck();

	    }
	    
	}
	
	@Test
	public void test23102() throws Exception {
		TestNGCustom.TCNo="23102";
    	log("//TC 23102");
    	
    	//get Prov
    	sqlStatement="Select p.Id_Provider From T_Pr_Prov P, T_Pr_Svc_Loc S, T_PR_SPEC cs Where P.Sak_Prov = S.Sak_Prov And S.Cde_Service_Loc = 'A' and p.sak_prov = cs.sak_prov and cs.dte_end = '22991231' and exists (select c.sak_prov from T_PR_SPEC c where c.sak_prov = p.sak_prov group by c.sak_prov having count(c.sak_prov)=1) and rownum<2";
    	colNames.add("ID_PROVIDER");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String certProv = colValues.get(0);
    	log("Cert Spec Prov is: "+certProv);
		searchProv(certProv);
    	
	    //Type and cert spec
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10430")).click();
	    //Sort by end date
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyList:ProviderSpecialtyBean_ColHeader_endDate")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyList:ProviderSpecialtyBean_ColHeader_endDate")).click();
	    //Make sure cert spec has end date=EOT
	    if (!(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyList_0:ProviderSpecialtyBean_ColValue_endDate")).getText().equals("12/31/2299")))
	    	throw new SkipException("Skipping this TC because cert spec has end date!=EOT, so nothing to end date");

	    //End date this row
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyList_0:ProviderSpecialtyBean_ColValue_status")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyDataPanel_EndDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyDataPanel_EndDate")).sendKeys(Common.convertSysdate());
	    Common.SaveWarnings();
	    
	    //Enter new one
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtySearchControl_CMD_SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:_id238:TypeSpecialitiySearchResults_0:column1Value")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyDataPanel_EffectiveDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(1));
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyDataPanel_EndDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyDataPanel_EndDate")).sendKeys("12/31/2299");
	    //Make it primary
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypePanel:ProviderSpecialtyPanel:ProviderSpecialtyPrimaryCheckBox")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.SaveWarnings();

	}
	
	@Test
	public void test23103() throws Exception {
		TestNGCustom.TCNo="23103";
    	log("//TC 23103");
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
		//Codes-Affiliation type
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n115")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationTypePanel:ProviderAffiliationTypeDataPanel_AffiliationTypeCode")).sendKeys("ZZ");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationTypePanel:ProviderAffiliationTypeDataPanel_AffiliationTypeDescription")).sendKeys("AUTOMATION REGRESSION");
		Common.saveAll();
		Common.cancelAll();
		//Other-Other relationship
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n129")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();

		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_OtherRelationshipName")).sendKeys("TPL REGRESSION TESTING");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_ProviderOtherRelType"))).selectByVisibleText("AUTOMATION REGRESSION");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_ContactFirstName")).sendKeys("TPL");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_ContactLastName")).sendKeys("REGRESSION");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_Street1")).sendKeys("101 FEDERAL ST");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_City")).sendKeys("BOSTON");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_State"))).selectByVisibleText("MA");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_Zip")).sendKeys("02110");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_EmailAddress")).sendKeys("ansh90@gmail.com");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipDataPanel_PhoneNumber")).sendKeys("8190199918");
	    Common.saveAll();
	    
	    //Get a provider
	    String affProv = "110003665";
	    log("The prov to which aff is added is: "+affProv);
	    
	    searchProv(affProv);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n100438")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationsPanel:OtherRelationshipSearchControl_CMD_SEARCH")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationsPanel:_id238:ProviderOtherRelationshipPopUpSearchCriteriaPanel:OtherRelationshipType"))).selectByVisibleText("AUTOMATION REGRESSION");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationsPanel:_id238:ProviderOtherRelationshipPopUpSearchCriteriaPanel:SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationsPanel:_id238:ProviderOtherRelationshipPopUpSearchResults_0:column1Value")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationsPanel:ProviderAffiliationsDataPanel_ProviderAffiliationType"))).selectByVisibleText("AUTOMATION REGRESSION");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Delete this record
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationsPanel:ProviderAffiliationsList_0:ProviderAffiliationsBean_ColValue_status")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Delete']")).click();
		//Declare Alert to handle Popup
		alert = driver.switchTo().alert();
		System.out.println(alert.getText());
		alert.accept();
		Common.saveAll();
		//Delete relationship
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
		//Other-Other relationship
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n129")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipBean_CriteriaPanel:ProviderOtherRelationshipDataPanel_ProviderAffiliationTypeList"))).selectByVisibleText("AUTOMATION REGRESSION");
	    Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderOtherRelationshipPanel:ProviderOtherRelationshipSearchResults_0:ProviderOtherRelationshipBean_ColValue_status")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Delete']")).click();
		//Declare Alert to handle Popup
		alert = driver.switchTo().alert();
		System.out.println(alert.getText());
		alert.accept();
		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("Save Successful."));
		Common.cancelAll();
		//Delete Affiliation Type
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:GRP_RelatedDataCodes")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n115")).click();
		//Sort desc on Affiliation Type (already sorted asc, so click elsewhere sort first(description column here))
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationTypePanel:ProviderAffiliationTypeList:ProviderAffiliationTypeBean_ColHeader_affiliationTypeDescription")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationTypePanel:ProviderAffiliationTypeList:ProviderAffiliationTypeBean_ColHeader_affiliationTypeCode")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationTypePanel:ProviderAffiliationTypeList:ProviderAffiliationTypeBean_ColHeader_affiliationTypeCode")).click();
		//Verify latest record (on top) is ZZ
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationTypePanel:ProviderAffiliationTypeList_0:ProviderAffiliationTypeBean_ColValue_affiliationTypeCode")).getText().equals("ZZ")), "The record you want to delete is not ZZ, ie not the one you entered for this test. Skipping deletion");
		//Select latest record (on top)
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAffiliationTypePanel:ProviderAffiliationTypeList_0:ProviderAffiliationTypeBean_ColValue_affiliationTypeCode")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Delete']")).click();
		//Declare Alert to handle Popup
		alert = driver.switchTo().alert();
		System.out.println(alert.getText());
		alert.accept();
		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("Save Successful."));
		
	}
	
	@Test
	public void test23105a() throws Exception {
		TestNGCustom.TCNo="23105a";
    	log("//TC 23105a");
    	
    	sqlStatement = "Select B.Id_Provider From T_Pr_Php_Elig A, T_Pr_Prov B Where A.Sak_Prov_Pgm = 36 And A.Dte_End = 22991231 And A.Dte_Inactive = 22991231 And A.Cde_Enroll_Status = '20' And A.Sak_Prov = B.Sak_Prov and exists (select c.sak_prov from T_Pr_Php_Elig c where c.sak_prov = b.sak_prov group by (c.sak_prov) having count(c.sak_prov) = 1) and rownum < 2";
    	colNames.add("ID_PROVIDER");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	String id = colValues.get(0);
    	log("Prov is: "+id);
    	
    	searchProv(id);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10422")).click();
		if (!(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityList_0:ProviderPublicHealthProgramEligibilityBean_ColValue_endDate")).getText().equals("12/31/2299") && driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityList_0:ProviderPublicHealthProgramEligibilityBean_ColValue_prEnrollStatus_enrollStatusDescriptionStatus")).getText().equals("ACTIVE - Pay")))
			throw new SkipException("Skipping this test as test provider's program elig end date is not EOT, or his elig is not ACTIVE-Pay");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityList_0:ProviderPublicHealthProgramEligibilityBean_ColValue_prEnrollPgm_providerProgramDescription")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityDataPanel_PrEnrollStatus"))).selectByVisibleText("VOLUNTARY SUSPENSION PROVIDER WITHDRAWAL-NO 30 DAY NOTICE - No Pay");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityDataPanel_EndDate")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-1));
	    Common.saveAll();
	    
	    //Store provider in the DB
    	String SelSql="select * from r_day2 where TC = '23105'";
    	String col="ID";
    	String DelSql="delete from r_day2 where TC = '23105'";
    	String InsSql="insert into r_day2 values ('23105', '"+id+"', 'Vol Susp Prov', '"+Common.convertSysdate()+"')";
    	Common.insertData(SelSql, col, DelSql, InsSql);
    	
	}
	
	@Test
	public void test23105b() throws Exception {
		TestNGCustom.TCNo="23105b";
    	log("//TC 23105b");
    	
    	//Get data from tables that needs to be verified in the report
		sqlStatement ="select * from r_day2 where TC = '23105'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no Prov ID generated");
    	
		String volProv = colValues.get(0);
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRptsAndLettersNavigatorPanel:ProviderReportsNavigator:GRP_g2")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRptsAndLettersNavigatorPanel:ProviderReportsNavigator:ITM_n107")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterRequestBean_CriteriaPanel:LetterRequestDataPanel_ProviderId")).sendKeys(volProv);
		Common.search();
		//Sort on generate date desc
		driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults:_id55")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults:_id55")).click();
		//Verify letter name ang req date
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults_0:_id48")).getText().equals("PRV-9053-R")), "PRV-9053-R Letter not found");
		Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults:tbody_element']/tr/td[2]")).getText().equals(Common.convertSysdatecustom(-1))), "request date was not from this reg cycle(yest)");
		//Generate letter
		driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults_0:_id48")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Generate and Print']")).click();
		
	}
	
	@Test
	public void test23107() throws Exception {
		TestNGCustom.TCNo="23107";
    	log("//TC 23107");
    	
    	//get grpMemProv
    	sqlStatement="select id_provider from T_PR_prov a, T_PR_TYPE b where a.sak_prov=b.sak_prov and b.cde_service_loc  = 'A' and b.CDE_PROV_TYPE='01' and a.sak_prov not in (Select sak_prov From T_Pr_Grp_Mbr) and a.sak_prov not in (Select sak_prov_group From T_Pr_Grp_Mbr) and rownum<2";
    	colNames.add("ID_PROVIDER");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String grpMemProv = colValues.get(0);
    	log("Group member Prov is: "+grpMemProv);
    	
    	//get grpProv
    	sqlStatement="select id_provider from T_PR_prov a, T_PR_TYPE b  where a.sak_prov=b.sak_prov and b.cde_service_loc  = 'A' and b.CDE_PROV_TYPE='97' and a.sak_prov not in (Select sak_prov From T_Pr_Grp_Mbr) and a.sak_prov not in (Select sak_prov_group From T_Pr_Grp_Mbr) and rownum<2";
    	colNames.add("ID_PROVIDER");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String grpProv = colValues.get(0);
    	log("Group Prov is: "+grpProv);
    	
    	//Create a record
    	searchProv(grpMemProv);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10434")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvidergroupMemberPanel:ProviderGroupMemberDataPanel_ProviderID")).sendKeys(grpProv);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvidergroupMemberPanel:ProviderGroupMemberDataPanel_ProvLoc")).sendKeys("A");
		Common.saveAll();
		//End date this record
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvidergroupMemberPanel:ProvidergroupMemberList_0:ProviderGroupBean_ColValue_providerId")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvidergroupMemberPanel:ProviderGroupDataPanel_EndDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvidergroupMemberPanel:ProviderGroupDataPanel_EndDate")).sendKeys(Common.convertSysdate());
		Common.saveAll();
		
		//verify record is end dated in grp prov
    	searchProv(grpProv);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10411")).click();
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProvidergroupPanel:ProvidergroupList_0:ProviderGroupMemberBean_ColValue_providerId")).getText().equals(grpMemProv)), "Group member Prov mismatch");
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProvidergroupPanel:ProvidergroupList_0:ProviderGroupMemberBean_ColValue_effectiveDate")).getText().equals("01/01/1900")), "Begin date mismatch");
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProvidergroupPanel:ProvidergroupList_0:ProviderGroupMemberBean_ColValue_endDate")).getText().equals(Common.convertSysdate())), "End date mismatch");
    	
	}
	
	@Test
	public void test23110a() throws Exception {
		TestNGCustom.TCNo="23110a";
    	log("//TC 23110a");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRptsAndLettersNavigatorPanel:ProviderReportsNavigator:ITM_n101")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();

		driver.findElement(By.id("MMISForm:MMISBodyContent:LabelReportPanel:TypeFromSearch")).sendKeys("24");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LabelReportPanel:TypeToSearch")).sendKeys("24");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LabelReportPanel:LabelReportDataPanel_StatusIndicator"))).selectByVisibleText("ACTIVE");
	    Common.save();
    	
	}
	
	@Test
	public void test23110b() throws Exception {
		TestNGCustom.TCNo="23110b";
    	log("//TC 23110b");
    	
    	//Verify unix report
		String command, error;

		//Get Desired Filename
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt/prd01001.rpt.* | grep '"+Common.monthUNIX(Common.convertSysdatecustom(-1))+" "+Common.dayUNIX(Common.convertSysdatecustom(-1))+"'";
		error = "There was no report file found";
		String fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);
		log(" The Provider Label Print Request Summary Information Report filename is: "+fileName);

		//Verify data in file
		command = "grep 24 "+fileName;
		error = "The selected file "+fileName+" is not correct/ or it is empty/ or it does not have the desired data";
		log(Common.connectUNIX(command, error));
		
		command = "grep ACTIVE "+fileName;
		error = "The selected file "+fileName+" is not correct/ or it is empty/ or it does not have the desired data";
		log(Common.connectUNIX(command, error));
    	
	}
	
	@Test
	public void test23113() throws Exception {
		TestNGCustom.TCNo="23113";
    	log("//TC 23113");
    	
    	//get npiProv
    	sqlStatement="select id_provider from T_PR_prov where sak_prov not in (Select sak_prov From T_PR_IDENTIFIER where CDE_PR_ID_TYPE = 'NPI') and rownum<2";
    	colNames.add("ID_PROVIDER");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String npiProv = colValues.get(0);
    	log("npi Prov is: "+npiProv);
    	
    	searchProv(npiProv);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n100436")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAlternateIDsPanel:ProviderIdentifierDataPanel_AltIdProvider")).sendKeys(Common.generateRandomTaxID()+"1");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAlternateIDsPanel:ProviderAlternateIDscodeProviderIdType"))).selectByVisibleText("National Provider ID");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAlternateIDsPanel:NPIVerfiedDropDown"))).selectByVisibleText("Yes");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAlternateIDsPanel:ProviderIdentifierDataPanel_DateProviderIdEffective")).sendKeys(Common.convertSysdate());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderAlternateIDsPanel:ProviderIdentifierDataPanel_DateProviderIdEnd")).sendKeys("12/31/2299");
	    driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
	    Common.save();
    	
	}
	
	@Test
	public void test23115a() throws Exception {
		TestNGCustom.TCNo="23115a";
    	log("//TC 23115a");
    	
    	//get adrProv- Note -this sql has info to keep off any license numbers containing a -, because that has problem in saving on panel. Also searching a lic tht contains 1, as it has less possibility of special characters
    	sqlStatement="select c.id_provider from T_PR_LOC_NM_ADR a, t_pr_adr b, t_pr_prov c where a.sak_prov=b.sak_prov and a.sak_prov = c.sak_prov and a.sak_short_address = b.sak_short_address and a.cde_service_loc = 'A' and a.ind_addr_type='P' and b.ind_undeliverable = 'N' and c.sak_prov not in (select d.sak_prov from T_PR_TAX_ID d , T_Pr_Hb_Lic e where d.num_tax_id=e.num_ssn and e.num_prov_lic like '%-%') and c.sak_prov in (select f.sak_prov from T_PR_TAX_ID f , T_Pr_Hb_Lic g where f.num_tax_id=g.num_ssn and g.num_prov_lic like '%1%') and rownum < 2";
    	colNames.add("ID_PROVIDER");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String adrProv = colValues.get(0);
    	log("Undeliverable address Prov is: "+adrProv);
    	
    	searchProv(adrProv);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10414")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_1:ProviderLocationNameAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();
	    driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Maintain Address']")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressDataPanel_UnDeliverableIndicator"))).selectByVisibleText("Yes");
	    driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
	    driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).click();
	    Common.save();
	    
	    //Get the no. of days from today when the weekly will run
	    int jobday=0;
	    Date sysdate=new Date();
	    int today=sysdate.getDay();
	    if (today==0)
	    	jobday=3;
	    if (today==1)
	    	jobday=2;
	    if (today==2)
	    	jobday=1;
	    if (today==4)
	    	jobday=6;
	    if (today==5)
	    	jobday=5;
	    if (today==6)
	    	jobday=4;
	    
	    
	    //Store provider in the DB
    	String SelSql="select * from r_day2 where TC = '23115'";
    	String col="ID";
    	String DelSql="delete from r_day2 where TC = '23115'";
    	String InsSql="insert into r_day2 values ('23115', '"+adrProv+"', 'Addr undeliverable Prov', '"+Common.convertSysdatecustom(jobday)+"')";
    	Common.insertData(SelSql, col, DelSql, InsSql);
	    
	}
	
	@Test
	public void test23115b() throws Exception {
		TestNGCustom.TCNo="23115b";
    	log("//TC 23115b");
    	
	 	//get the prov that was submitted for undeliverable address
		sqlStatement = "Select * From R_Day2 Where Tc = '23115'";
		colNames.add("ID");
		colNames.add("DATE_REQUESTED");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no prov submitted for undeliverable address");

		String adrProv = colValues.get(0);
    	String rundate = colValues.get(1);
    	log("Undeliverable address Prov is: "+adrProv);
    	
    	//Verify unix report
		String command, error;

		//Get Desired Filename
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt/prw01801.rpt.* | grep '"+Common.monthUNIX(rundate)+" "+Common.dayUNIX(rundate)+"'";
		error = "There was no report file found";
		String fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);
		log(" The Provider undeliverable address Report filename is: "+fileName);

		//Verify data in file
		command = "grep "+adrProv+" "+fileName;
		error = "The selected file "+fileName+" is not correct/ or it is empty/ or it does not have the desired undeliverable address prov";
		log(Common.connectUNIX(command, error));
	}
	
	@Test
	public void test23116() throws Exception {
		TestNGCustom.TCNo="23116";
    	log("//TC 23116");
    	
    	//get claim data
    	sqlStatement="select * from R_CLAIMS_BILLING where TC = '23116'";
    	colNames.add("TC");
    	colNames.add("CT");
    	colNames.add("PROV_BILLING");
    	colNames.add("AMT_BILLED");
    	colNames.add("TOB");
    	colNames.add("NPI_ATTEND");
    	colNames.add("REFERRAL");
    	colNames.add("PAS");
    	colValues = Common.executeQuery1(sqlStatement, colNames);
    	String testCase, CT, provider, Amount, TOB, NPI, referral, pas;
    	testCase = colValues.get(0);
    	CT = colValues.get(1);
    	provider = colValues.get(2);
    	Amount = colValues.get(3);
    	TOB = colValues.get(4);
    	NPI = colValues.get(5);
    	referral = colValues.get(6);
    	pas = colValues.get(7);
    	

    	//member sql for claim
    	String	sql = "select /*+ NO_PARALLEL OPT_PARAM('_hash_join_enabled','FALSE') OPT_PARAM('_optimizer_sortmerge_join_enabled','FALSE') OPT_PARAM('_b_tree_bitmap_plans','FALSE') */ base.* from t_re_base base, t_pub_hlth_pgm pgm,t_pub_hlth_aid pubaid," +
    				"t_cde_aid aid,t_re_aid_elig elig where " +
    				"elig.sak_recip=base.sak_recip " +
    				"and pgm.SAK_PUB_HLTH=pubaid.SAK_PUB_HLTH " +
    				"and pubaid.SAK_CDE_AID=aid.SAK_CDE_AID "  +
    				"and  aid.SAK_CDE_AID= elig.SAK_CDE_AID "  +
    				"and pgm. CDE_PGM_HEALTH='STD' " +
    				"and elig.DTE_END='22991231' " + 
    				"and elig.cde_status1<>'H' " +
    				"and not exists ( select sak_recip from t_re_pmp_assign asg where asg.sak_recip=base.sak_recip and asg.dte_end> 20130401) " +
    				"and not exists ( select sak_recip from t_tpl_resource rs Where rs.Sak_Recip=Base.Sak_Recip) " +
    				"and not exists (select sak_recip from t_re_hib hib where hib.sak_recip=base.sak_recip and hib.dte_end> 20130401) " +
    				"And Not Exists ( Select Sak_Recip From t_hist_directory hist Where hist.Sak_Recip=Base.Sak_Recip) " +
    				"and base.ind_active='Y' "+ 
    				"and base.sak_recip > dbms_random.value * 6300000 " +
    				"and rownum<2 ";

    	Common.portalLogin();
    	SubmitClaims.initiateClaim();
    	SubmitClaims.O(testCase, CT, provider, Amount, TOB, NPI, referral, pas, sql);
    	String clmNo = SubmitClaims.clmICN("inst");
       	log("ICN: "+clmNo);
    	
		//Verify claims subsystem
       	Common.portalLogout();
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Claims")).click();
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ClaimSearchBean_CriteriaPanel:ClmIcnNumber")).sendKeys(clmNo);
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ClaimSearchResultsDataTable_0:_id14")).click();
		Assert.assertTrue((driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:UB92ClaimHeaderPanel:UB92ClmBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[15]/td[2]")).getText().contains(provider.substring(0, 9))), "The prov was not found");
		Assert.assertTrue((driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:UB92ClaimHeaderPanel:UB92ClmBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[15]/td[2]")).getText().contains("B")), "The prov with service loc B was not found");

//		Assert.assertTrue((driver.findElement(By.id("")).getText().equals()), "");
//		driver.findElement(By.id("")).click();
//		driver.findElement(By.id("")).getText();
//		driver.findElement(By.id("")).sendKeys("");
//	    new Select(driver.findElement(By.id(""))).selectByVisibleText("");
	}
    	
	@Test
	public void test23117() throws Exception {
		TestNGCustom.TCNo="23117";
    	log("//TC 23117");
    	
    	//get case number, without any history of case letters
    	sqlStatement="select a.id_case from T_Pr_case a, T_PR_CASE_PROV_XREF b, t_pr_prov c where a.sak_case=b.sak_case and b.sak_prov = c.sak_prov and a.sak_atn <> '-1' and a.id_case not in (select id_case from t_letter_request where sak_letter  in ('85','64','69','70')) and rownum < 2";
    	colNames.add("ID_CASE");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String casenum = colValues.get(0);
    	log("Case No. is: "+casenum);
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_CaseTracking")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingSearchBean_CriteriaPanel:ProviderCTSearch_CaseNumber_Id")).sendKeys(casenum);
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:CaseTrackingSearchResults_0:CaseTrackingSearchPanelSpacer2")).click();
		//letters
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingNavigatorPanel:ProviderCaseTrackingNavigator:GRP_g2")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingNavigatorPanel:ProviderCaseTrackingNavigator:ITM_n1005")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPRCApprovalProbation:DataPanel_PrcApprovalRelatedProviders"))).selectByIndex(1);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPRCApprovalProbation:DataPanel_PrcApprovalSancAgency")).sendKeys("AUTOMATION REGRESSION");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPRCApprovalProbation:DataPanel_PrcApprovalEffectiveDate")).sendKeys(Common.convertSysdate());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPRCApprovalProbation:DataPanel_PrcApprovalMeetingDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Create Letter']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Generate and Print']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		Common.cancelAll();
		
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingNavigatorPanel:ProviderCaseTrackingNavigator:ITM_n1004")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPRCMeetingLetterPanel:DataPanel_SancAgency")).sendKeys("AUTOMATION REGRESSION");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPRCMeetingLetterPanel:DataPanel_SancEffectiveDate")).sendKeys(Common.convertSysdate());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderPRCMeetingLetterPanel:DataPanel_MeetingDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Create Letter']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Generate and Print']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		Common.cancelAll();
		//Check Letter history
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingNavigatorPanel:ProviderCaseTrackingNavigator:GRP_g1")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseTrackingNavigatorPanel:ProviderCaseTrackingNavigator:ITM_n102")).click();
		//order asc by letter name
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseLetterHistoryPanel:LetterSearchResults:ProviderCaseLetterHistoryBean_ColHeader_letterId")).click();
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseLetterHistoryPanel:LetterSearchResults_0:ProviderCaseLetterHistoryBean_ColValue_letterId")).getText().equals("PRV-9046-R")), "9046 letter is not present in history");
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderCaseLetterHistoryPanel:LetterSearchResults_1:ProviderCaseLetterHistoryBean_ColValue_letterId")).getText().equals("PRV-9047-R")), "9047 letter is not present in history");

	}
	
	@Test
	public void test23118() throws Exception {
		TestNGCustom.TCNo="23118";
    	log("//TC 23118");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProgramEligibilityList"))).selectByVisibleText("MANAGED CARE SITE");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_CountyList"))).selectByVisibleText("Essex");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	}
    	
	
	@Test
	public void test23119() throws Exception {
		TestNGCustom.TCNo="23119";
    	log("//TC 23119");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderTypePopUpSearchControl")).sendKeys("20");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_McProgramList"))).selectByVisibleText("A LIST OF SERVICES THAT REQUIRE REFERRAL");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	}
	
	@Test
	public void test23120() throws Exception {
		TestNGCustom.TCNo="23120";
    	log("//TC 23120");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderTypePopUpSearchControl")).sendKeys("07");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ServicingProvidersList"))).selectByVisibleText("Exclude servicing");
	    Common.search();
	    String oldProv = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).getText();
	    log("Old Prov is: "+oldProv);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    //Go to service loc and Change billing indicator from yes to no
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n104")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderServiceLocationPanel:ProviderServiceLocationDataPanel_BillerIndicator"))).selectByVisibleText("No");
	    Common.save();
	    
	    //Search again
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderTypePopUpSearchControl")).sendKeys("07");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ServicingProvidersList"))).selectByVisibleText("Exclude servicing");
	    Common.search();
	    if (driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).getText().equals(oldProv))
			Assert.assertTrue(false, "Previous provider was still returned");
	}
	
	@Test
	public void test23121() throws Exception {
		TestNGCustom.TCNo="23121";
    	log("//TC 23121");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderTypePopUpSearchControl")).sendKeys("01");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_CountyList"))).selectByVisibleText("Middlesex");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	}
	
	@Test
	public void test23122() throws Exception {
		TestNGCustom.TCNo="23122";
    	log("//TC 23122");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderSearchResult_Phone")).sendKeys("4136252305");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	}
	
	@Test
	public void test23123() throws Exception {
		TestNGCustom.TCNo="23123";
    	log("//TC 23123");
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderTypePopUpSearchControl")).sendKeys("01");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:SpecialtySearchControl")).sendKeys("504");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	 
	}
	
	@Test
	public void test23124() throws Exception {
		TestNGCustom.TCNo="23124";
    	log("//TC 23124");
    	
    	//get atn for non enrolled provider
    	sqlStatement="select sak_atn from t_pr_appln where cde_status1 = '05' and rownum<2";
    	colNames.add("SAK_ATN");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String atn = colValues.get(0);
    	log("ATN is: "+atn);
    	//Search ATN in enrollment tab
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ApplicationSearch")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentSearchBean_CriteriaPanel:EnrollmentSearch_ATN_Id")).sendKeys(atn);
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentSearchResults_0:EnrollmentSearchPanelSpacer24")).click();
		//Search ATN in Provider tab
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderSearchResult_ATN")).sendKeys(atn);
		Common.search();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		if (driver.findElements(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).size()>0)
			Assert.assertTrue(false, "Search was succesful for an ATN for a partially enrolled provider");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
	}
	
	@Test
	public void test23125() throws Exception {
		TestNGCustom.TCNo="23125";
    	log("//TC 23125");
    	//Search by Prov ID
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys("110026858");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    //Search by npi
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMiniSearchProviderID")).sendKeys("1073638045");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	    //Search by legacy ID
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMiniSearchProviderID")).sendKeys("001200445");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	 
	}
	
	@Test
	public void test23127() throws Exception {
		TestNGCustom.TCNo="23127";
    	log("//TC 23127");
    	
    	//get atn
    	sqlStatement="select sak_atn from t_pr_appln where cde_status1 = '05' and rownum<2";
    	colNames.add("SAK_ATN");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String atn = colValues.get(0);
    	log("ATN is: "+atn);
    	//Search ATN in enrollment tab
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ApplicationSearch")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentSearchBean_CriteriaPanel:EnrollmentSearch_ATN_Id")).sendKeys(atn);
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentSearchResults_0:EnrollmentSearchPanelSpacer24")).click();
		//generate RTP Letter
		driver.findElement(By.id("MMISForm:MMISBodyContent:ApplicationNavigatorPanel:providerapplicationnavigator:ITM_n102")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationReturnToProviderPanel:ReasonTextId")).sendKeys("AUTOMATION REGRESSION");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Create RTP Letter']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Generate and Print']")).click();
		log("RTP Letter Name is: "+Common.fileName());

	}
	
	@Test
	public void test23128() throws Exception {
		TestNGCustom.TCNo="23128";
    	log("//TC 23128");
    	
    	//get atn in cred complete status
       	//REQUESTED
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ApplicationSearch")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("01 - REQUESTED");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_RequestTypeCode"))).selectByVisibleText("Mail");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_ReceivedDate")).sendKeys(Common.convertSysdate());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderAppSpacertName")).sendKeys(Common.generateRandomName());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Street1")).sendKeys("101 FEDERAL ST");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_City")).sendKeys("BOSTON");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_State"))).selectByVisibleText("MA");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_ZipCode")).sendKeys("02110");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_PhoneNumber")).sendKeys("6176176177");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_ContactName")).sendKeys("AG");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_AddressEmail")).sendKeys("ansh90@gmail.com");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_CommPrefCode"))).selectByVisibleText("email");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_RelationshipEntityType"))).selectByVisibleText("0001 Medical Service Provider");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplication_CdeProviderType"))).selectByVisibleText("01 PHYSICIAN");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_TaxIDNumber")).sendKeys(Common.generateRandomTaxID());
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_TaxIDType"))).selectByVisibleText("FEIN");
		Common.save();
		
		//Store ATN
		String baseATN = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Sak")).getText();
		log("ATN is: "+baseATN);
		//Ready For Review
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("02 - READY FOR REVIEW");
	    Common.save();
		
		//In review
	    //Adding a 5 min delay because WI not showing up right away
	    Thread.sleep(300000);
	    enrlWrklistNew("UNASSIGNED",baseATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("04 - IN REVIEW");
	    Common.save();
		
		//Credentialing
	    enrlWrklistNew("CREDENTIALING",baseATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("05 - CREDENTIALING COMPLETE");
	    Common.save();
	    
    	//Search ATN in enrollment tab
	    LoginCheck();
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ApplicationSearch")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentSearchBean_CriteriaPanel:EnrollmentSearch_ATN_Id")).sendKeys(baseATN);
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EnrollmentSearchResults_0:EnrollmentSearchPanelSpacer24")).click();
		//Change status to denied
		driver.findElement(By.id("MMISForm:MMISBodyContent:ApplicationNavigatorPanel:providerapplicationnavigator:ITM_n1")).click();
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("17 - DENIED");
		Common.save();
		//generate Denial Letter
		driver.findElement(By.id("MMISForm:MMISBodyContent:ApplicationNavigatorPanel:providerapplicationnavigator:ITM_n112")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEnrollmentDenialLetterPanel:ReasonTextId")).sendKeys("AUTOMATION REGRESSION");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Create Denial Letter']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Generate and Print']")).click();
		log("Denial Letter Name is: "+Common.fileName());

	}
	
	@Test
	public void test23129() throws Exception {
		TestNGCustom.TCNo="23129";
    	log("//TC 23129");
    	
    	lName=Common.generateRandomName();
    	fName=Common.generateRandomName();
    	String adr1="101 FEDERAL STREET";
    	String city="BOSTON";
    	String state ="Massachusetts";
    	String stateab ="MA";
    	String zip="02110";
    	String phone="6176176177";
    	String email="ansh90@gmail.com";
    	
    	Common.portalLogin();
		driver.findElement(By.linkText("Manage Provider Information")).click();
		driver.findElement(By.linkText("Enrollment")).click();
		driver.findElement(By.linkText("Start an Enrollment Application")).click();
		conti();
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).sendKeys(lName);
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).sendKeys(fName);
		driver.findElement(By.xpath("//input[contains(@id,'providerSSN')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerSSN')]")).sendKeys(Common.generateRandomTaxID());
		driver.findElement(By.xpath("//input[contains(@id,'providerNPI')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerNPI')]")).sendKeys(Common.generateRandomTaxID()+"1");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'legalEntityType')]"))).selectByVisibleText("INDIVIDUAL PRACTITIONER");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'providerType')]"))).selectByVisibleText("PHYSICIAN");
		conti();
		conti();
		conti();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationlastName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationlastName')]")).sendKeys(lName);
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationfirstName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationfirstName')]")).sendKeys(fName);
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationdateOfBirth')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationdateOfBirth')]")).sendKeys("01011966");
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationPIN')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerRegistrationPIN')]")).sendKeys("8188");
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressLine1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressLine1')]")).sendKeys(adr1);
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressCity')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressCity')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'providerAddressState')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressZip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressZip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressPhoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressPhoneNumber')]")).sendKeys(phone);
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressEmail')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'providerAddressEmail')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		String atnNo = driver.findElement(By.xpath("//*[contains(@id,'atn1')]")).getText();
		log("ATN no. is: "+atnNo);
		conti();
		
		
		//Legal Entity
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityContact')]")).sendKeys(fName+" "+lName);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityAddr1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityAddr1')]")).sendKeys(adr1);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityCity')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityCity')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityState')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityZip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityZip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityEmail')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityEmail')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityPhoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityPhoneNumber')]")).sendKeys(phone);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityOwnershipClass')]"))).selectByVisibleText("COUNTY");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityOwnershipType')]"))).selectByVisibleText("Corporation");
		driver.findElement(By.xpath("//input[@value='false' and contains(@name, 'provider_legalEntity_commercialUsageIndicator')]")).click();
		conti();
		//Save Application
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Save Provider Enrollment Application in-process; can update and submit later']")).click();
		Common.portalLogout();
		
		//Retrieve Application
    	Common.portalLogin();
		driver.findElement(By.linkText("Manage Provider Information")).click();
		driver.findElement(By.linkText("Enrollment")).click();
		driver.findElement(By.linkText("Continue Application")).click();
		int i=0;
		int j=0;
		int a=1;
		int b=2;
		boolean atnFound=false;

		for (;a<b; a++){
			for (;i<=j; i++){
				driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
				if ((driver.findElements(By.xpath("//*[contains(@id,'applicationList:"+i+"')]")).size())>0) { 
					if (atnNo.equals(driver.findElement(By.xpath("//*[contains(@id,'applicationList:"+i+"')]")).getText())) { 
						driver.findElement(By.xpath("//*[contains(@id,'applicationList:"+i+"')]")).click();
							atnFound=true;
					}
					else
						j=j+1;
				}
			}
			if ((!atnFound) && ((driver.findElements(By.xpath("//*[contains(@id,'applicationList:paginatoridx"+b+"')]")).size())>0)) {
				driver.findElement(By.xpath("//*[contains(@id,'applicationList:paginatoridx"+b+"')]")).click();
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
				b=b+1;
				i=i-1;
			}
		}
		if (!atnFound)
			System.out.println("I couldnt find atn, exiting now");
		
		//Complete Enrollment to not pile up things
		//Legal Entity
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityContact')]")).sendKeys(fName+" "+lName);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityAddr1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityAddr1')]")).sendKeys(adr1);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityCity')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityCity')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityState')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityZip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityZip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityEmail')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityEmail')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityPhoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'provider_legalEntity_legalEntityPhoneNumber')]")).sendKeys(phone);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityOwnershipClass')]"))).selectByVisibleText("COUNTY");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'provider_legalEntity_legalEntityOwnershipType')]"))).selectByVisibleText("Corporation");
		driver.findElement(By.xpath("//input[@value='false' and contains(@name, 'provider_legalEntity_commercialUsageIndicator')]")).click();
		conti();
		
		//New Changes
		conti();
		conti();
		conti();
		conti();
		conti();
		conti(); //extra conti(); because ownership and control panel is not enabled while enrollment, but when save and retrieve application, it comes alive.  Might be a defect

		driver.findElement(By.xpath("//input[contains(@id,'attestName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'attestName')]")).sendKeys("ANSHUL GANDHI");
		driver.findElement(By.xpath("//input[contains(@id,'attestDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'attestDate')]")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[contains(@id,'attestTitle')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'attestTitle')]")).sendKeys("BA");
	    conti();
	    
	    
	    //Service Locations
	    newItem();
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'lastName')]")).sendKeys(lName);
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'firstName')]")).sendKeys(fName);
		driver.findElement(By.xpath("//input[contains(@id,'serviceLocationContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'serviceLocationContact')]")).sendKeys(fName+" "+lName);
		driver.findElement(By.xpath("//input[contains(@id,'address1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address1')]")).sendKeys(adr1);	    
		driver.findElement(By.xpath("//input[contains(@id,'city')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'city')]")).sendKeys(city);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'state')]"))).selectByVisibleText(state);
		driver.findElement(By.xpath("//input[contains(@id,'zip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'zip')]")).sendKeys(zip);
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).sendKeys(phone);
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumberForTTDTTY')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumberForTTDTTY')]")).sendKeys(phone);
	    add();
	    conti();
	    
	    conti();
	    
	    //Identification Info
		driver.findElement(By.xpath("//*[contains(@id,'0:dbaName_Link')]")).click();
		new Select(driver.findElement(By.xpath("//select[contains(@id,'organizationType')]"))).selectByVisibleText("CHAIN");
		driver.findElement(By.xpath("//input[contains(@id,'deaNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'deaNumber')]")).sendKeys(Common.generateRandomTaxID());
		driver.findElement(By.xpath("//input[contains(@id,'deaEffectiveDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'deaEffectiveDate')]")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[contains(@id,'deaEndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'deaEndDate')]")).sendKeys("12/31/2299");
	    update();
	    conti();
	    
	    conti();
	    conti();
	    conti();
	    conti();
	    
	    //License Info
		driver.findElement(By.xpath("//*[contains(@id,'0:dbaName_Link')]")).click();
		newItem();
		driver.findElement(By.xpath("//input[contains(@id,'licenseNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'licenseNumber')]")).sendKeys(Common.generateRandomTaxID()+"6");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'agencyName')]"))).selectByVisibleText("MA BOARD OF REGISTRATION IN MEDICINE");
		driver.findElement(By.xpath("//input[contains(@id,'licenseEffectiveDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'licenseEffectiveDate')]")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[contains(@id,'licenseEndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'licenseEndDate')]")).sendKeys("12/31/2299");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'licenseState')]"))).selectByVisibleText(state);
	    add();
	    conti();
	    
	    conti();
	    conti();
	    
	    //PCC
		driver.findElement(By.xpath("//*[contains(@id,'0:dbaName_Link')]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_managedCareContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_managedCareContact')]")).sendKeys(Common.generateRandomName());
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_email')]")).sendKeys(email);
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_phoneNumber')]")).sendKeys(phone);
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_maxMembersRequested')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_maxMembersRequested')]")).sendKeys("99");
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_ageLessThan')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_ageLessThan')]")).sendKeys("99");
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_ageGreaterThan')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'pccInfo_ageGreaterThan')]")).sendKeys("11");
	    update();
	    conti();
	    
	    conti();
	    conti();
	    conti();
	    conti();
	    
	    //Trading Partner Agreement
		driver.findElement(By.xpath("//input[contains(@id,'agreementDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'agreementDate')]")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[contains(@id,'legalName')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalName')]")).sendKeys(Common.generateRandomName());
		driver.findElement(By.xpath("//input[contains(@id,'signature')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'signature')]")).sendKeys(Common.generateRandomName());
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'phoneNumber')]")).sendKeys("6176176777");
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).sendKeys(email);
	    conti();
	    
	    conti();
	    
	    //Provider Contract
		driver.findElement(By.xpath("//input[@type='radio' and @value='true']")).click();
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		
		//Verify ATN
		String confirmationATN = driver.findElement(By.xpath("//form[@id='enrollmentConfirmation']/table/tbody/tr/td[2]/div/table/tbody/tr[11]/td/span[5]/i")).getText();
		Assert.assertTrue(confirmationATN.equals(atnNo), "Confirmation ATN: "+confirmationATN+" not qual to initial ATN: "+atnNo);
//		Assert.assertTrue(driver.findElement(By.xpath("//span[@id='enrollmentConfirmation:continueEnrollApplication_1_id0:continueEnrollApplication_1_id4:continueEnrollApplication_1_id36']/i")).getText().equals(atnNo), "Provider enrollment confirmation failed on submit. ATN not present on confirmation page");
		Common.portalLogout();

	}
	
	@Test
	public void test23483() throws Exception {
		TestNGCustom.TCNo="23483";
    	log("//TC 23483");
    	//Check if Pharmacy is present or not
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n16")).click();
    	int i=0;
		int j=0;
		int a=1;
		int b=2;
		boolean pharmacyFound=false;
		String baseFlag = "No";

		for (;a<b; a++){
			for (;i<=j; i++){
				driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
				if ((driver.findElements(By.id("MMISForm:MMISBodyContent:ProviderTypeCodePanel:ProviderTypeCodeList_"+i+":ProviderTypeCodeBean_ColValue_providerTypeDescription")).size())>0) {
					if ("PHARMACY".equals(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeCodePanel:ProviderTypeCodeList_"+i+":ProviderTypeCodeBean_ColValue_providerTypeDescription")).getText())) { 
						baseFlag = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeCodePanel:ProviderTypeCodeList_"+i+":ProviderTypeCodeBean_ColValue_webPortalIndicator")).getText();
						pharmacyFound=true;
						log("Web portal for pharmacy prov is "+baseFlag+" in base app");					
					}
					else
						j=j+1;
				}
			}
			if ((!pharmacyFound) && ((driver.findElements(By.id("MMISForm:MMISBodyContent:ProviderTypeCodePanel:ProviderTypeCodeScrolleridx"+b)).size())>0)) {
				driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeCodePanel:ProviderTypeCodeScrolleridx"+b)).click();
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
				b=b+1;
				i=i-1;
			}
		}
		if (!pharmacyFound)
			throw new SkipException("Skipping this test beacuse PHARMACY provider type was not found in Base app");
		
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Provider Information")).click();
		driver.findElement(By.linkText("Enrollment")).click();
		driver.findElement(By.linkText("Start an Enrollment Application")).click();
		conti();
		if (baseFlag.equals("Yes")) {
			new Select(driver.findElement(By.xpath("//select[contains(@id,'providerType')]"))).selectByVisibleText("PHARMACY");
			log("Successfully found PHARMACY in portal enrollment list");
		}
		else {
			driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
			try {
				new Select(driver.findElement(By.xpath("//select[contains(@id,'providerType')]"))).selectByVisibleText("PHARMACY");
				log("Failed! Found PHARMACY in portal enrollment list, but its set to no in Base app");
				Assert.assertTrue(false, "Failed! Found PHARMACY in portal enrollment list, but its set to no in Base app");
			}
			catch (NoSuchElementException exception) {
				log("Success! There is no provider in portal enrollment list");
			}
			driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		}
		
		Common.portalLogout();	
	}
	
	@Test
	public void test23130() throws Exception {
		TestNGCustom.TCNo="23130";
    	log("//TC 23130");
    	
    	//get tpaProv-- Note -this sql has info to keep off any license numbers containing a -, because that has problem in saving on panel. Also searching a lic tht contains 1, as it has less possibility of special characters
    	sqlStatement="Select Id_Provider From T_Pr_Prov Where Id_Provider Not In (Select Substr(Custno, 1, 9) From T_Trading_Partner Where Custno Is Not Null) and sak_prov not in (select d.sak_prov from T_PR_TAX_ID d , T_Pr_Hb_Lic e where d.num_tax_id=e.num_ssn and e.num_prov_lic like '%-%') and sak_prov in (select f.sak_prov from T_PR_TAX_ID f , T_Pr_Hb_Lic g where f.num_tax_id=g.num_ssn and g.num_prov_lic like '%1%') And Rownum < 2";
    	colNames.add("ID_PROVIDER");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String tpaProv = colValues.get(0);
    	log("TPA Prov is: "+tpaProv);
    	
    	//Add TP details
    	searchProv(tpaProv);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n1020")).click();
    	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TradingPartnerAgreementDetailsPanel:TradingPartnerAgreementDetailsDataPanel_CdeMt837I"))).selectByVisibleText("Web Portal Batch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:TradingPartnerAgreementDetailsPanel:TradingPartnerAgreementDetailsDataPanel_Contact1")).sendKeys("REGRESSION AUTOMATION");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:TradingPartnerAgreementDetailsPanel:TradingPartnerAgreementDetailsDataPanel_Telephone1")).sendKeys("6176176177");
    	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TradingPartnerAgreementDetailsPanel:TradingPartnerAgreementDetailsDataPanel_CdeTpaStatus"))).selectByVisibleText("COMPLETED");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:TradingPartnerAgreementDetailsPanel:TradingPartnerAgreementDetailsDataPanel_ReceivedDate")).sendKeys(Common.convertSysdate());
    	Common.save();
    	
    	//Assign TP summary
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n1019")).click();
    	new Select(driver.findElement(By.id("ProviderTradingPartnerAgreementTransactionSummaryPanelMultiplesink"))).selectByVisibleText("837I - IN - 005010X223A2");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTradingPartnerAgreementTransactionSummaryPanel:ProviderTradingPartnerAgreementTransactionSummaryPanelMultipleimage_button__left_single")).click();
    	Common.save();	
    }
	
	@Test
	public void test23131() throws Exception {
		TestNGCustom.TCNo="23131";
    	log("//TC 23131");
    	
    	//get eftProv
    	sqlStatement="select id_provider from T_PR_prov where sak_prov not in (select sak_prov from T_PR_EFT_ACCT) and rownum < 2";
    	colNames.add("ID_PROVIDER");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String eftProv = colValues.get(0);
    	log("EFT Prov is: "+eftProv);
    	
    	//Add EFT details
    	searchProv(eftProv);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10409")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEFTAccountPanel:ProviderEFTAccountDataPanel_ABANumber")).sendKeys(Common.generateRandomTaxID());
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEFTAccountPanel:ProviderEFTAccountDataPanel_EFTAccountNumber")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEFTAccountPanel:ProviderEFTAccountDataPanel_EFTAccountNumber")).sendKeys(Common.generateRandomTaxID());
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEFTAccountPanel:ProviderEFTAccountDataPanel_AccountTypeIndicator"))).selectByVisibleText("Checking");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEFTAccountPanel:ProviderEFTAccountDataPanel_StatusEFTCode"))).selectByVisibleText("Active");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEFTAccountPanel:ProviderEFTAccountDataPanel_EmailAddress")).sendKeys("ansh90@gmail.com");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderEFTAccountPanel:ProviderEFTAccountDataPanel_SignatureDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.save();
	}
	
	@Test
	public void test23132() throws Exception {
		TestNGCustom.TCNo="23132";
    	log("//TC 23131");
    	
    	//get prov with billing address in SPRINGFIELD
    	sqlStatement="select id_provider from T_PR_prov where sak_prov in (select a.sak_prov from T_Pr_Adr a, T_PR_LOC_NM_ADR b where A.Sak_Short_Address=B.Sak_Short_Address and a.sak_prov=b.sak_prov and B.Ind_Addr_Type='B' and A.Adr_Mail_City = 'SPRINGFIELD' and B.Cde_Service_Loc = 'A') and sak_prov not in (select d.sak_prov from T_PR_TAX_ID d , T_Pr_Hb_Lic e where d.num_tax_id=e.num_ssn and e.num_prov_lic like '%-%') and sak_prov in (select f.sak_prov from T_PR_TAX_ID f , T_Pr_Hb_Lic g where f.num_tax_id=g.num_ssn and g.num_prov_lic like '%1%') and rownum < 2";
    	colNames.add("ID_PROVIDER");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String addProv = colValues.get(0);
    	log("Address Prov is: "+addProv);
    	
    	//Change address
    	searchProv(addProv);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10414")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_0:ProviderLocationNameAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Maintain Address']")).click();
		
		//Get previous address
		String adr1 = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).getAttribute("value");
		String city = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).getAttribute("value");
		String zip = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).getAttribute("value");
		
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address1ID")).sendKeys("101 FEDERAL ST");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:address2ID")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:cityID")).sendKeys("BOSTON");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:zipID")).sendKeys("02110");
	    //Address verification
    	Common.update();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).click();
		Common.save();
		Common.cancelAll();
		
		//Check Audit panel
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:ITM_n10414")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressList_0:ProviderLocationNameAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:LocationNameAddressPanel_CMD_AUDIT")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:id_selectAll")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:SEARCH")).click();
    	//Sort on sysdate desc
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:ProviderLocationNameAddressAuditList:SystemDate23_id")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:ProviderLocationNameAddressAuditList:SystemDate23_id")).click();
    	//Verify data
    	Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:ProviderLocationNameAddressAuditList:tbody_element']/tr/td[5]/span")).getText().equals(adr1)), "adr1 mismatch");
    	Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:ProviderLocationNameAddressAuditList:tbody_element']/tr/td[7]/span")).getText().equals(city)), "city mismatch");
    	Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:ProviderLocationNameAddressAuditList:tbody_element']/tr/td[9]/span")).getText().equals(zip)), "zip mismatch");
    	Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:ProviderLocationNameAddressAuditList:tbody_element']/tr/td[22]/span")).getText().equals("BGENER00")), "user id mismatch");
    	Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:ProviderLocationNameAddressAuditList:tbody_element']/tr/td[24]/span")).getText().contains(Common.convertSysdate())), "date mismatch");
    	Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProviderLocationNameAddressPanel:ProviderLocationNameAddressAuditPanel:ProviderLocationNameAddressAuditList:tbody_element']/tr/td[25]/span")).getText().equals("U")), "action mismatch");
 
	}
	
	@Test
	public void test23133() throws Exception {
		TestNGCustom.TCNo="23133";
    	log("//TC 23133");
    	
    	//Already submitted claim for prov 110026858B in TC 23116, so will just check the date for him on day 2
    	String dateprov="110026858";
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(dateprov);
	    Common.search();
	    //Select SVC loc B
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_1:_id16")).click();
	    Assert.assertTrue((driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:ProviderInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[24]/td[2]")).getText().equals(Common.convertSysdatecustom(-1))), "Provider's Last Claim Submission date mismatch");
	}
	
	@Test
	public void test23134() throws Exception {
		TestNGCustom.TCNo="23134";
    	log("//TC 23134");
    	String taxID = "042651776";
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderSearchResult_TaxId")).sendKeys(taxID);
	    Common.search();
	    Assert.assertTrue((driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProviderSearchResults:tbody_element']/tr/td[4]")).getText().contains("GATRA")), "GATRA prov was not returned");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_McProgramList"))).selectByVisibleText("HEBREW REHABILITATION");
	    Common.search();
	    Assert.assertTrue((driver.findElement(By.cssSelector("span.redreg")).getText().equals("***No records found***")), "Provider was returned in search. No prov should have returned");
	}
	
    @Test
	public void test23098() throws Exception {
		TestNGCustom.TCNo="23098";
    	log("//TC 23098");
    	
    	String certSpec = "ZZZ";
    	
    	//Add new Cert Spec
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n11")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSpecialtyCodePanel:ProviderSpecialtyCodeDataPanel_SpecialtyCode")).sendKeys(certSpec);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSpecialtyCodePanel:ProviderSpecialtyCodeDataPanel_ProviderSpecialtyDescription")).sendKeys("AUTOMATION REGRESSION");
		Common.save();
		Common.cancelAll();
		log("Cert Spec "+certSpec+"-AUTOMATION REGRESSION was added");
		
		//Select THERAPY in type cert spec and add above cert spec
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n25")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyCodeSearchResults_6:ProviderTypeSpecialtyCodeBean_ColValue_typeCode")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:SpecialtySearchID_CMD_SEARCH")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:_id75:SpecialtySearchCriteriaPanel:Type")).sendKeys(certSpec);
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:_id75:SpecialtySearchResults_0:column1Value")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:TaxonomySearchID_CMD_SEARCH")).click();
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:_id75:TaxonomySearchResults_0:column1Value")).click();
		Common.save();
		
		//Go to Reference-Procedure
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Reference")).click();
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Procedure")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureSearchBean_CriteriaPanel:ProcedureSearchResultDataPanel_Procedure")).sendKeys("99293");
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureSearchResults_0:Procedure")).click();
		//Enter Restriction
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureHCPCSNavigatorPanel:ProcedureHCPCSNavigator:GRP_g100")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureHCPCSNavigatorPanel:ProcedureHCPCSNavigator:ITM_n113")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureLimitsList_0:ProcedureLimitsBean_ColValue_effectiveDate")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:ProcedureSpecialtyLim_NewButtonClay:ProcedureSpecialtyLimList_newAction_btn")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:RefProcedureRestrictionBaseInfoSpecialityCodeSearchControl_CMD_SEARCH")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:_id25:DiagProvSpecSearchCriteriaPanel:SpecCodeFrom")).sendKeys(certSpec);
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:_id25:DiagProvSpecSearchCriteriaPanel:SEARCH")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:_id25:DiagProvSpecSearchResults_0:column1Value")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:ProcedureSpecialityLimEndDateSpacer")).sendKeys(Common.convertSysdatecustom(1));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.update();
		Common.save();
		Common.cancelAll();
		
		//Delete everything for next test
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Provider")).click();
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Reference")).click();
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Procedure")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureSearchBean_CriteriaPanel:ProcedureSearchResultDataPanel_Procedure")).sendKeys("99293");
		Common.search();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureSearchResults_0:Procedure")).click();
		//Enter Restriction
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureHCPCSNavigatorPanel:ProcedureHCPCSNavigator:GRP_g100")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureHCPCSNavigatorPanel:ProcedureHCPCSNavigator:ITM_n113")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureLimitsList_0:ProcedureLimitsBean_ColValue_effectiveDate")).click();
		//Sort on Cert Spec desc
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:ProcedureSpecialityLimitList:ProcedureSpecialtyLimBean_ColHeader_endDate")).click(); //Sort on end date
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:ProcedureSpecialityLimitList:ProcedureSpecialtyLimBean_ColHeader_prSpecCde_specialtyCode")).click(); //Cert Spec sort asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:ProcedureSpecialityLimitList:ProcedureSpecialtyLimBean_ColHeader_prSpecCde_specialtyCode")).click(); //Cert Spec sort desc
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:ProcedureSpecialityLimitList_0:ProcedureSpecialtyLimBean_ColValue_prSpecCde_specialtyCode")).getText().equals(certSpec)), "Did not select ZZZ for deletion at Proc code restriction. please delete manually before next test");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:ProcedureSpecialityLimitList_0:ProcedureSpecialtyLimBean_ColValue_prSpecCde_specialtyCode")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProcedureLimitsPanel:ProcedureSpecialityLimPanel:ProcedureSpecialtyLimPanel_deleteAction_btn")).click();
		//Declare Alert to handle Popup
		alert = driver.switchTo().alert();
		System.out.println(alert.getText());
		alert.accept();
		Common.save();
		Common.cancelAll();
		
		//Delete type cert spec
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Provider")).click();
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n25")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyCodeSearchResults_6:ProviderTypeSpecialtyCodeBean_ColValue_typeCode")).click();
    	//Sort on Cert Spec desc
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:ProviderTypeSpecialtyBeanResults:ProviderTypeSpecialtyBean_ColHeader_PrTaxonomyCde_taxonomyCode")).click(); //TAXONOMY sort
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:ProviderTypeSpecialtyBeanResults:ProviderTypeSpecialtyBean_ColHeader_PrSpecCde_specialtyCode")).click(); //Cert Spec sort asc
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:ProviderTypeSpecialtyBeanResults:ProviderTypeSpecialtyBean_ColHeader_PrSpecCde_specialtyCode")).click(); //Cert Spec sort desc
		Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:ProviderTypeSpecialtyBeanResults_0:ProviderTypeSpecialtyBean_ColValue_PrSpecCde_specialtyCode")).getText().equals(certSpec)), "Did not select ZZZ for deletion at type cert spec. please delete manually before next test");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderTypeSpecialtyCodePanel:ProviderTypeSpecialtyPanel:ProviderTypeSpecialtyBeanResults_0:ProviderTypeSpecialtyBean_ColValue_PrSpecCde_specialtyCode")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Delete']")).click();
		//Declare Alert to handle Popup
		alert = driver.switchTo().alert();
		System.out.println(alert.getText());
		alert.accept();
		Common.save();
		Common.cancelAll();
		
		//Delete CERT spec
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRelatedDataNavigatorPanel:ProvRelatedDataNavigatorId:ITM_n11")).click();
    	//Sort on Cert Spec desc
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSpecialtyCodePanel:ProviderSpecialtyCodeSearchResults:ProviderSpecialtyCodeBean_ColHeader_ProviderSpecialtyDescription")).click(); //Sort description
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSpecialtyCodePanel:ProviderSpecialtyCodeSearchResults:ProviderSpecialtyCodeBean_ColHeader_SpecialtyCode")).click(); //Cert Spec sort asc
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSpecialtyCodePanel:ProviderSpecialtyCodeSearchResults:ProviderSpecialtyCodeBean_ColHeader_SpecialtyCode")).click(); //Cert Spec sort desc
    	Assert.assertTrue((driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSpecialtyCodePanel:ProviderSpecialtyCodeSearchResults_0:ProviderSpecialtyCodeBean_ColValue_SpecialtyCode")).getText().equals(certSpec)), "Did not select ZZZ for deletion at cert spec. please delete manually before next test");
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSpecialtyCodePanel:ProviderSpecialtyCodeSearchResults_0:ProviderSpecialtyCodeBean_ColValue_SpecialtyCode")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Delete']")).click();
		//Declare Alert to handle Popup
		alert = driver.switchTo().alert();
		System.out.println(alert.getText());
		alert.accept();
		String message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Save Successful."), "Save NOT successful Error Message: "+message+"...");
		
		log("Cert Spec "+certSpec+"-AUTOMATION REGRESSION was deleted");

    }
	
	@Test
	public void test22472() throws Exception {
		TestNGCustom.TCNo="22472";
    	log("//TC 22472");
    
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRptsAndLettersNavigatorPanel:ProviderReportsNavigator:GRP_g2")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProvRptsAndLettersNavigatorPanel:ProviderReportsNavigator:ITM_n104")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ChangeLetterPanel:ChangeLetterBean_CriteriaPanel:ProviderSearchResultDataPanel_ProviderId")).sendKeys("110000050");
		Common.search();
		
		driver.findElement(By.id("MMISForm:MMISBodyContent:ChangeLetterPanel:ChangeLetterResults_0:ChangeLetterBean_ColValue_providerID")).click();
		//Verify Update request letter panel is returned
		Assert.assertTrue((driver.findElement(By.cssSelector("h4.panel-header")).getText().equals(" Update Request Letter")), "Update request letter panel did not show up");
		
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:ChangeLetterPanel:RTPLetterPRV9009RPanel:ReasonTextId")).sendKeys("PRV 9009R Letter generation test by selenium");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Create RTP Letter']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Generate and Print']")).click();
		log("PRV 9009R Letter File name is: "+Common.fileName());

	}
	
	@Test
	public void test23108() throws Exception {
		TestNGCustom.TCNo="23108";
    	log("//TC 23108");

    	//REQUESTED
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ApplicationSearch")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("01 - REQUESTED");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_RequestTypeCode"))).selectByVisibleText("Mail");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_ReceivedDate")).sendKeys(Common.convertSysdate());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderAppSpacertName")).sendKeys(Common.generateRandomName());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Street1")).sendKeys("101 FEDERAL ST");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_City")).sendKeys("BOSTON");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_State"))).selectByVisibleText("MA");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_ZipCode")).sendKeys("02110");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_PhoneNumber")).sendKeys("6176176177");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_ContactName")).sendKeys("AG");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_AddressEmail")).sendKeys("ansh90@gmail.com");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_CommPrefCode"))).selectByVisibleText("email");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_RelationshipEntityType"))).selectByVisibleText("0001 Medical Service Provider");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplication_CdeProviderType"))).selectByVisibleText("01 PHYSICIAN");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_TaxIDNumber")).sendKeys(Common.generateRandomTaxID());
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_TaxIDType"))).selectByVisibleText("FEIN");
		Common.save();
		
		//Store ATN
		String baseATN = driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Sak")).getText();
		log("ATN is: "+baseATN);
		//Ready For Review
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("02 - READY FOR REVIEW");
	    Common.save();
		
		//In review
	    //Adding a 5 minute delay because WI not shoing up right away
	    Thread.sleep(300000);
	    enrlWrklistNew("UNASSIGNED",baseATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("04 - IN REVIEW");
	    Common.save();
		
		//Credentialing
	    enrlWrklistNew("CREDENTIALING",baseATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("05 - CREDENTIALING COMPLETE");
	    Common.save();
		
		//QA
	    enrlWrklistNew("QA",baseATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("18 - QA COMPLETE");
	    Common.save();
		
		//Ready to enroll
	    enrlWrklistNew("APPROVAL",baseATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("33 - READY TO ENROLL");
	    Common.save();
		
		//ID Issued
	    enrlWrklistNew("APPROVAL",baseATN);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:id_EnrollProv")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_OwnershipType"))).selectByVisibleText("Corporation");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_DelegatedCredentIndicator"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ManagedCareGroup"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_BillingAgent"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ManagedCareOrganization"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_HospitalAffiliation"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ProviderLegalEntityType"))).selectByVisibleText("BUSINESS CORPORATION");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_CommercialInsurance"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_ProviderOwnershipClass"))).selectByVisibleText("COUNTY");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollBaseInformationForEnrollPanel:ProviderDataPanel_HospitalAffiliation"))).selectByVisibleText("No");
	    
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_CityTownCode"))).selectByVisibleText("ACTON");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_ProviderOrganizationType"))).selectByVisibleText("CHAIN");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_UcpIndicator"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_Coverage24hr"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_BypassTPL"))).selectByVisibleText("No");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_OrganizationCode"))).selectByVisibleText("Corporation");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollServiceLocationFromBasePanel:ProviderServiceLocationDataPanel_AcceptNewMembers"))).selectByVisibleText("No");
	   
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:ProviderEnrollPublicHealthProgramEligibility_NewButtonClay:ProviderEnrollPublicHealthProgramEligibilityList_newAction_btn")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:EnrollProgramDropDown_2"))).selectByVisibleText("MANAGED CARE SITE");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderEnrollPublicHealthProgramEligibilityPanel:ProviderPublicHealthProgramEligibilityDataPanel_PrEnrollStatus"))).selectByVisibleText("ACTIVE - Pay");
	    
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:ProviderSpecialtyAdd_NewButtonClay:ProviderSpecialtyAddList_newAction_btn")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:ProviderSpecialtySearchControl_CMD_SEARCH")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderTypeAddPanel:ProviderSpecialtyAddPanel:_id149:TypeSpecialitiySearchResults_0:column1Value")).click();

	    //IRS Tax Maintenance panel
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationTaxIDPanel:IrsW9InfoNameID")).sendKeys(Common.generateRandomName());
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationTaxIDPanel:IrsW9InfoDataPanel_MailStrt1")).sendKeys("101 FEDERAL ST");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationTaxIDPanel:IrsW9InfoDataPanel_MailCity")).sendKeys("BOSTON");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationTaxIDPanel:IrsW9InfoDataPanel_MailZip")).sendKeys("02110");
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationTaxIDPanel:IrsW9InfoDataPanel_MailState"))).selectByVisibleText("MA");

	    Common.save();
		
		//Enrolled
	    enrlWrklistNew("ENROLLMENT",baseATN);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplicationDataPanel_Status1Code"))).selectByVisibleText("34 - ENROLLED");
	    Common.save();
		String enlProv=driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderApplicationPanel:ProviderApplProvIDSearchControl")).getAttribute("value");

    	//Verify provider comes in search results
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(enlProv);
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderMainSearchResultDataPanel_ProviderStatusList"))).selectByVisibleText("Active");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
		log("Enrolled Provider type 01. Provider ID is "+enlProv);
	    log("Program Eligibility of MANAGED CARE SITE was added.");

	    //Add MC program
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderNavigatorPanel:ProviderNavigator:GRP_g102")).click();
		driver.findElement(By.linkText("PMP")).click();
	    Assert.assertTrue(driver.findElement(By.cssSelector("table.nested.panel > thead > tr > th > table > tbody > tr > td > h2.panel-header")).getText().trim().equals("PMP"), "PMP panel not found");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    Assert.assertTrue(driver.findElement(By.cssSelector("h3.panel-header")).getText().trim().equals("PMP Maintenance"), "PMP Maintenance panel not found");
	    new Select(driver.findElement(By.xpath("//select[contains(@id,'McProgramList')]"))).selectByVisibleText("PCCP - A LIST OF SERVICES THAT REQUIRE REFERRAL");
	    driver.findElement(By.xpath("//input[contains(@id,'Pho24HourNumber')]")).sendKeys(Common.generateRandomTaxID()+"0");
	    new Select(driver.findElement(By.xpath("//select[contains(@id,'CurrentOnlyIndicator')]"))).selectByVisibleText("No");
	    Common.saveAll();
	    log("PCCP MC program was added");
	    
	    Common.cancelAll();
	    //ADD PMP Panel Restrictions
		driver.findElement(By.linkText("PMP")).click();
		driver.findElement(By.linkText("PCCP")).click(); //This selects the first record that you just created
		driver.findElement(By.linkText("PMP Panel Restrictions")).click();
	    Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISContentTable']/tbody/tr/td/div[3]/table/thead/tr/th/table/tbody/tr/td/h2")).getText().trim().equals("PMP Panel Restrictions"), "PMP Panel Restrictions panel not found");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:PmpPanelRestrictPanel:PmpPanelRestrictBean_DataPanel']/thead/tr/td/table/tbody/tr/td/h3")).getText().trim().equals("PMP Panel Restrictions Maintenance"), "PMP Panel Restrictions Maintenance panel not found");
	    new Select(driver.findElement(By.xpath("//select[contains(@id,'GenderRstrctnType')]"))).selectByVisibleText("Inclusion");
	    new Select(driver.findElement(By.xpath("//select[contains(@id,'GenderRstrctnCode')]"))).selectByVisibleText("Male");
	    Common.multiElements("//input[contains(@id,'EffectiveDate')]").sendKeys(Common.convertSysdate());
	    Common.multiElements("//input[contains(@id,'EndDate')]").sendKeys(Common.convertSysdatecustom(2));
	    Common.saveAll();
	    log("PMP panel restriction was added");
	    
	    Common.cancelAll();
	    //ADD PMP Panel Restrictions
		driver.findElement(By.linkText("PMP")).click();
		driver.findElement(By.linkText("PCCP")).click(); //This selects the first record that you just created
		driver.findElement(By.linkText("PMP Panel Size Maintenance")).click();
	    Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISContentTable']/tbody/tr/td/div[3]/table/thead/tr/th/table/tbody/tr/td/h2")).getText().trim().equals("PMP Panel Size"), "PMP Panel Size panel not found");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:PmpPanelSizePanel:PmpPanelSizeBean_DataPanel']/thead/tr/td/table/tbody/tr/td/h3")).getText().trim().equals("PMP Panel Size Maintenance"), "PMP Panel Size Maintenance panel not found");
	    driver.findElement(By.xpath("//input[contains(@id,'MaxRecipsNumber')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'MaxRecipsNumber')]")).sendKeys("50");
	    Common.saveAll();
	    log("PMP panel size was added");

	    Common.cancelAll();
	    //ADD PMP Performance Maintenance and History
		driver.findElement(By.linkText("PMP")).click();
		driver.findElement(By.linkText("PCCP")).click(); //This selects the first record that you just created
		driver.findElement(By.linkText("PMP Performance Maintenance and History")).click();
	    Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISContentTable']/tbody/tr/td/div[3]/table/thead/tr/th/table/tbody/tr/td/h2")).getText().trim().equals("PMP Performance Maintenance and History"), "PMP Performance Maintenance and History panel not found");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:PmpPerformanceHistoryMaintenancePanel:PmpPerformanceHistoryBean_DataPanel']/thead/tr/td/table/tbody/tr/td/h3")).getText().trim().equals("PMP Performance Maintenance"), "PMP Performance Maintenance panel not found");
	    driver.findElement(By.xpath("//input[contains(@id,'pmpperformhistcde')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'pmpperformhistcde')]")).sendKeys(Common.generateRandomTaxID().substring(6));
	    driver.findElement(By.xpath("//input[contains(@id,'PmpPerformanceHistoryDataPanel_DscPerform')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'PmpPerformanceHistoryDataPanel_DscPerform')]")).sendKeys(Common.generateRandomName().substring(0, 2)+" TEST");
	    Common.multiElements("//input[contains(@id,'EffectiveDate')]").clear();
	    Common.multiElements("//input[contains(@id,'EffectiveDate')]").sendKeys(Common.convertSysdate());
	    Common.multiElements("//input[contains(@id,'EndDate')]").clear();
	    Common.multiElements("//input[contains(@id,'EndDate')]").sendKeys(Common.convertSysdatecustom(2));
	    Common.saveAll();
	    log("PMP Performance Maintenance and History was added");
	    
	    Common.cancelAll();
	    //ADD PMP Conversion Maintenance and History
		driver.findElement(By.linkText("PMP")).click();
		driver.findElement(By.linkText("PCCP")).click(); //This selects the first record that you just created
		driver.findElement(By.linkText("PMP Conversion Maintenance and History")).click();
	    Assert.assertTrue(driver.findElement(By.cssSelector("div.hscroll > table.nested.panel > thead > tr > th > table > tbody > tr > td > h2.panel-header")).getText().trim().equals("PMP Conversion Maintenance and History"), "PMP Conversion Maintenance and History panel not found");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	    Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:ProvPmpConversionHistoryPanel:ProvPmpConversionHistoryBean_DataPanel']/thead/tr/td/table/tbody/tr/td/h3")).getText().trim().equals("PMP Conversion Selection Criteria"), "PMP Conversion Selection Criteria panel not found");
	    new Select(driver.findElement(By.xpath("//select[contains(@id,'ConversionType')]"))).selectByVisibleText("PCC to PCC");
	    driver.findElement(By.xpath("//input[contains(@id,'PmpId')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'PmpId')]")).sendKeys("110000037");
	    driver.findElement(By.xpath("//input[contains(@id,'SvcLoc')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'SvcLoc')]")).sendKeys("C");
	    driver.findElement(By.xpath("//input[contains(@id,'PreviousConversionMonthsNumber')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'PreviousConversionMonthsNumber')]")).sendKeys("1");
	    driver.findElement(By.xpath("//input[contains(@id,'FileTransferDate')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'FileTransferDate')]")).sendKeys(Common.convertSysdate());
	    driver.findElement(By.xpath("//input[contains(@id,'MailedDate')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'MailedDate')]")).sendKeys(Common.convertSysdatecustom(2));
	    driver.findElement(By.xpath("//input[contains(@id,'ConversionEffectiveDate')]")).clear();
	    driver.findElement(By.xpath("//input[contains(@id,'ConversionEffectiveDate')]")).sendKeys(Common.convertSysdate());
	    new Select(driver.findElement(By.xpath("//select[contains(@id,'DisenrollmentReasonCodeList')]"))).selectByValue("08");
	    Common.saveAll();
	    log("PMP Conversion Maintenance and History was added");
	    
	    Common.cancelAll();
	    //ADD PMP Capitation History
		driver.findElement(By.linkText("PMP")).click();
		driver.findElement(By.linkText("PCCP")).click(); //This selects the first record that you just created
		driver.findElement(By.linkText("PMP Capitation History")).click();
	    Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISContentTable']/tbody/tr/td/div[3]/table/thead/tr/th/table/tbody/tr/td/h2")).getText().trim().equals("PMP Capitation History"), "PMP Capitation History panel not found");
	    new Select(driver.findElement(By.xpath("//select[contains(@id,'CapCategoryList')]"))).selectByVisibleText("MST MCO_ESSENTIAL");
	    driver.findElement(By.xpath("//input[contains(@id,'CapitationDate')]")).sendKeys(Common.convertSysdate().substring(0, 2)+Common.convertSysdate().substring(5));
	    Common.multiElements("//input[@class='buttonImage' and @alt='Search']").click();
	    Assert.assertTrue(driver.findElement(By.cssSelector("span.redreg")).getText().trim().equals("***No records found***"), "***No records found*** message not found");
	    Common.cancelAll();
	    log("PMP Capitation History panel fields were tested. No record was added.");

	}
	
    @Test
	public void test23481a() throws Exception {
		TestNGCustom.TCNo="23481a";
    	log("//TC 23481a");

		//Reset rel entity Address in Base
		String idProvider="110076470";
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelationshipEntity")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchBean_CriteriaPanel:ProvRelationshipEntitySearchCrit_ID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchBean_CriteriaPanel:ProvRelationshipEntitySearchCrit_ID")).sendKeys(idProvider);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchResults_0:_id17")).click();
	    //Select Loc Name Address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityNavigatorPanel:relationshipentitynavigator:ITM_n10601")).click();
	    //Click on DBA address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:ProviderRelationshipEntityAddressList_1:ProviderRelationshipEntityAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Maintain Address']")).click();
		//Enter the provider address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:address1ID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:address1ID")).sendKeys("133 MAPLE STREET");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:cityID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:cityID")).sendKeys("SPRINGFIELD");
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:zipID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:zipID")).sendKeys("01105");
	    Common.update();
		Common.save();

		//Go to portal
		String provList="td.leftPadding.leftAlign > span";
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Provider Information")).click();
		driver.findElement(By.linkText("Business Partners (non Provider)")).click();
		driver.findElement(By.linkText("Update Business Partner Profile")).click();
	    Assert.assertTrue(driver.findElement(By.cssSelector(provList)).getText().equals("Please select the Relationship Entity you wish to update."));
		int i=0;
		int j=0;
		int a=1;
		int b=2;

		String pName = "SMU ASSOCIATES";
		for (;a<b; a++){
			for (;i<=j; i++){
				driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
				if ((driver.findElements(By.xpath("//*[contains(@id,'"+i+":name')]")).size())>0) { 
					if (pName.equals(driver.findElement(By.xpath("//*[contains(@id,'"+i+":name')]")).getText())) { 
						driver.findElement(By.xpath("//*[contains(@id,'"+i+":name')]")).click();
							refound=true;
					}
					else
						j=j+1;
				}
			}
			if ((!refound) && ((driver.findElements(By.xpath("//*[contains(@id,'providerList:paginatoridx"+b+"')]")).size())>0)) {
				driver.findElement(By.xpath("//*[contains(@id,'providerList:paginatoridx"+b+"')]")).click();
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
			    Assert.assertTrue(driver.findElement(By.cssSelector(provList)).getText().equals("Please select the Relationship Entity you wish to update."));
				b=b+1;
				i=i-1;
			}
		}
		if (!refound)
			log("I couldnt find relationship entity, exiting now");
		
		//Perform the profile update
		
	    //Change address
		driver.findElement(By.xpath("//input[contains(@id,'line1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'line1')]")).sendKeys("101 FEDERAL STREET");
		driver.findElement(By.xpath("//input[contains(@id,'city')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'city')]")).sendKeys("BOSTON");
		driver.findElement(By.xpath("//input[contains(@id,'zip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'zip')]")).sendKeys("02110");
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'email')]")).sendKeys("ansh90@gmail.com");
	    
	    //Just to prevent any errors, enter Info address email as well- this goes away at data refresh so need to add
		driver.findElement(By.xpath("//input[contains(@id,'infoAddressEmail')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'infoAddressEmail')]")).sendKeys("ansh90@gmail.com");
	    
	    driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
	    Common.getPageError("//table[contains(@id,'infoNPForm:updateBusinessPartnerProfile_2_id0')]/tbody/tr/td[2]/div/div[2]/table[2]/tbody/tr");
		Common.portalLogout();

	}
    
    @Test
	public void test23481b() throws Exception {
		TestNGCustom.TCNo="23481b";
    	log("//TC 23481b");
	
		//Navigate to profile update npanel
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ProfileUpdateWorklist")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklist_DropDownQueueType"))).selectByIndex(2);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    
	    //Check image
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults_0:_id20")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList:ProviderImagesSearchResultBean_SortColHeader_receiptDate")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList:ProviderImagesSearchResultBean_SortColHeader_receiptDate")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_0:_id105")).click();

	    //Click on WI
	    driver.findElement(By.id("workList[0]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Review']")).click();
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:ProviderRelationshipEntityAddressList_1:ProviderRelationshipEntityAddressBean_ColValue_status")).getText().equals("Updated"), "The DBA adddress did not come as updated"); 
		driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:ProviderRelationshipEntityAddressList_1:ProviderRelationshipEntityAddressBean_ColValue_status")).click();
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:address1ID")).getAttribute("value").equals("101 FEDERAL STREET"), "The adddress1 did not come as updated"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:cityID")).getAttribute("value").equals("BOSTON"), "The city did not come as updated"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:zipID")).getAttribute("value").equals("02110"), "The zip did not come as updated"); 
	    driver.findElement(By.id("ProviderRelationshipEntityAddressPanel_cancelAction_btn")).click();

		//Change status to IN PROCESS
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderworkflowProfileUpdateREInfoStatusPanel:WorkflowStatusdropdown"))).selectByVisibleText("IN PROCESS");
	    Common.saveAll();
//	    df30872_saveAll(); //remove after DF 20872 is fixed, and uncomment above line of Common.saveAll()
	    
	    //Select The WI again from PROFILE UPDATE queue
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ProfileUpdateWorklist")).click();
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklist_DropDownQueueType"))).selectByIndex(3);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    //Click on WI
	    driver.findElement(By.id("workList[0]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Review']")).click();
		//Change status to COMPLETE
	    new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderworkflowProfileUpdateREInfoStatusPanel:WorkflowStatusdropdown"))).selectByVisibleText("COMPLETE");
	    Common.saveAll();
//	    df30872_saveAll(); //remove after DF 20872 is fixed, and uncomment above line of Common.saveAll()
	    
		//Verify rel entity address is changed
		String idProvider="110076470";
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelationshipEntity")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchBean_CriteriaPanel:ProvRelationshipEntitySearchCrit_ID")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchBean_CriteriaPanel:ProvRelationshipEntitySearchCrit_ID")).sendKeys(idProvider);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntitySearchResults_0:_id17")).click();
	    //Select Loc Name Address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityNavigatorPanel:relationshipentitynavigator:ITM_n10601")).click();
	    //Click on DBA address
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:ProviderRelationshipEntityAddressList_1:ProviderRelationshipEntityAddressBean_ColValue_prAddrCode_addressUsageDescription")).click();
		//Verify provider address
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:address1ID")).getAttribute("value").equals("101 FEDERAL STREET"), "The adddress1 update failed"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:cityID")).getAttribute("value").equals("BOSTON"), "The city update failed"); 
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderRelationshipEntityAddressPanel:zipID")).getAttribute("value").equals("02110"), "The zip update failed"); 
		Common.cancelAll();
		
	}
    
    @Test
	public void test22928a() throws Exception {
		TestNGCustom.TCNo="22928a";
    	log("//TC "+TestNGCustom.TCNo);
    	
    	String recredProvSSN = "013686499";
    	String recredProvName = "SMITH JONATHAN";

    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Admin")).click();
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_imaging")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImagingNavigatorPanel:ImagingMaintenance_id:GRP_provider")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImagingNavigatorPanel:ImagingMaintenance_id:ITM_n109")).click();
    	
    	//create WI for image
    	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocumentDataPanel_DocumentType"))).selectByVisibleText("PEC - RECREDENTIALING APPLICATION");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocument_ReceiptDate")).sendKeys(Common.convertSysdate());
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocument_UploadFileName")).sendKeys(System.getProperty("user.dir")+"\\testngMO.xml");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocumentDataPanel_ImageProviderDocumentTaxID")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocumentDataPanel_ImageProviderDocumentTaxID")).sendKeys(recredProvSSN);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:ImageProviderDocumentDataPanel_ImageProviderDocumentTaxID_CMD_SEARCH")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:ImageProviderDocumentPanel:_id285:ImageProviderDocumentSearchResults_0:column1Value")).click();
    	Common.saveAll();
    	
    	//check WI and image in recred worklist unassigned queue
    	Thread.sleep(10000);
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Provider")).click();
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RecredWorklist")).click();
    	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklist_DropDownQueueType"))).selectByIndex(2);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:_id40")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:_id40")).click();
	    
	    //Check that only 1 WI is created in the recred worklist queue for the given date- We do this by checking the date on the second WI 
	    //First make sure there is more than 1 WI
		driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
	    if (driver.findElements(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:tbody_element']/tr[2]/td[5]")).size()>0) {
	    	Assert.assertTrue(!(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:tbody_element']/tr[2]/td[5]")).getText().equals(Common.convertSysdate())), "There was more than one WI found in today's date in the recred worklist. Please check manually and do tc manually"); 
	    }
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

		//Check that the first WI is for our provider id and for today's date
    	Assert.assertTrue(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:tbody_element']/tr/td[5]")).getText().equals(Common.convertSysdate()), "No WI found in today's date in recred worklist"); 
    	Assert.assertTrue(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:tbody_element']/tr/td[7]")).getText().equals(recredProvID), "WI not found for our recred provider"); 

    	//Check that no WI is created in the profile update worklist
    	Common.resetBase();
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Provider")).click();
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ProfileUpdateWorklist")).click();
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
	  
	    //Count the no. of WIs on the page using date as target
	    int count =  driver.findElements(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:tbody_element']/*/td[5]")).size();
	    
	    //check the last WI's date, if its today's date, perform the test manually
	    if (count>1)
	    	Assert.assertTrue(!(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:tbody_element']/tr["+count+"]/td[5]")).getText().equals(Common.convertSysdate())), "There were lots of WIs found in today's date in the profile update worklist. Please check manually and do tc manually"); 

	    //Make sure our recred provider has not created a WI
    	Assert.assertTrue(!(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:tbody_element']/tr/td[8]")).getText().equals(recredProvID)), "Recred provider ID was found in profile update worklist"); 
	    if (count>1) {
		    for (int i=2;i<=count; i++)
		    	Assert.assertTrue(!(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:tbody_element']/tr["+count+"]/td[8]")).getText().equals(recredProvID)), "Recred provider ID was found in profile update worklist"); 
	    }

	    //Log on to portal and perform profile update
		String provList="td.leftPadding.leftAlign > span";
	    Common.resetPortal();
		driver.findElement(By.linkText("Manage Provider Information")).click();
		driver.findElement(By.linkText("Maintain Profile")).click();
		driver.findElement(By.linkText("Update Your MassHealth Profile")).click();
	    Assert.assertTrue(driver.findElement(By.cssSelector(provList)).getText().equals("Please select the provider you wish to update."));
		//driver.wait(5000);
		int i=0;
		int j=0;
		int a=1;
		int b=2;

		String pName = recredProvName;
		for (;a<b; a++){
			for (;i<=j; i++){
				driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
				if ((driver.findElements(By.xpath("//*[contains(@id,'"+i+":name')]")).size())>0) { 
					if (pName.equals(driver.findElement(By.xpath("//*[contains(@id,'"+i+":name')]")).getText())) { 
						driver.findElement(By.xpath("//*[contains(@id,'"+i+":name')]")).click();
							test22928foundit=true;
					}
					else
						j=j+1;
				}
			}
			if ((!test22928foundit) && ((driver.findElements(By.xpath("//*[contains(@id,'providerList:paginatoridx"+b+"')]")).size())>0)) {
				driver.findElement(By.xpath("//*[contains(@id,'providerList:paginatoridx"+b+"')]")).click();
				driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
			    Assert.assertTrue(driver.findElement(By.cssSelector(provList)).getText().equals("Please select the provider you wish to update."));
				b=b+1;
				i=i-1;
			}
		}
		if (!test22928foundit)
			System.out.println("I couldnt find prov, exiting now");
	    
		//Perform the profile update
		//Enter legal entity data
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityContact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityContact')]")).sendKeys("me");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_line1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_line1')]")).sendKeys("133 MAPLE STREET");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_city')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_city')]")).sendKeys("SPRINGFIELD");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'legalEntityAddress_state')]"))).selectByVisibleText("Massachusetts");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_zip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_zip')]")).sendKeys("01105");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_email')]")).sendKeys("ansh90@gmail.com");
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'legalEntity_legalEntityAddress_phoneNumber')]")).sendKeys("4137329201");
	    
	    //Change address
		driver.findElement(By.xpath("//*[contains(@id,'MENUITEM_provPrflAddressType')]")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:dbaName')]")).click();
		driver.findElement(By.linkText("Remittance Address")).click();
		driver.findElement(By.xpath("//input[contains(@id,'contact')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'contact')]")).sendKeys(recredProvName);
		driver.findElement(By.xpath("//input[contains(@id,'address_line1')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_line1')]")).sendKeys("101 FEDERAL STREET");
		driver.findElement(By.xpath("//input[contains(@id,'address_city')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_city')]")).sendKeys("BOSTON");
		new Select(driver.findElement(By.xpath("//select[contains(@id,'address_state')]"))).selectByVisibleText("Massachusetts");
		driver.findElement(By.xpath("//input[contains(@id,'address_zip')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_zip')]")).sendKeys("02110");
		driver.findElement(By.xpath("//input[contains(@id,'address_email')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_email')]")).sendKeys("ansh90@gmail.com");
		driver.findElement(By.xpath("//input[contains(@id,'address_phoneNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'address_phoneNumber')]")).sendKeys("41"+Common.convertDatetoInt(Common.convertSysdate())); //Make the last 8 digits of the phone no. to be todays date. This is done to verify that image is produced correctly for today's date.
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @alt='Update']")).click();

		//Submit the profile update
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		driver.findElement(By.xpath("//input[contains(@id,'agreementAcceptanceIndicator')]")).click();
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
    	
	}	
    
    @Test
	public void test22928b() throws Exception {
		TestNGCustom.TCNo="22928b";
    	log("//TC "+TestNGCustom.TCNo);
		if (!test22928foundit) 
			Assert.assertTrue(false, "Not continuing with Profile recred test as it failed on portal for address change or failed on Base");

		else {
			//check WI and image in recred worklist unassigned queue
		    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RecredWorklist")).click();
	    	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklist_DropDownQueueType"))).selectByIndex(2);
		    Common.search();
		    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:_id40")).click();
		    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:_id40")).click();
		    
		    //Check that only 1 WI is created in the recred worklist queue for the given date- We do this by checking the date on the second WI 
		    //First make sure there is more than 1 WI
			driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
		    if (driver.findElements(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:tbody_element']/tr[2]/td[5]")).size()>0) {
		    	Assert.assertTrue(!(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:tbody_element']/tr[2]/td[5]")).getText().equals(Common.convertSysdate())), "There was more than one WI found in today's date in the recred worklist. Please check manually and do tc manually"); 
		    }
			driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

			//Check that the first WI is for our provider id and for today's date
	    	Assert.assertTrue(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:tbody_element']/tr/td[5]")).getText().equals(Common.convertSysdate()), "No WI found in today's date in recred worklist"); 
	    	Assert.assertTrue(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults:tbody_element']/tr/td[7]")).getText().equals(recredProvID), "WI not found for our recred provider"); 

	    	//Get Images
		    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderRecredWorkflowWorklistResults_0:_id20")).click();
		    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList:ProviderImagesSearchResultBean_ColHeader_receiptDate")).click();
		    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList:ProviderImagesSearchResultBean_ColHeader_receiptDate")).click();

		    //Make sure the first two dates are today's date
			Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_0:ProviderImagesSearchResultBean_ColValue_receiptDate")).getText().equals(Common.convertSysdate()), "The first image is not in today's date"); 
			Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_1:ProviderImagesSearchResultBean_ColValue_receiptDate")).getText().equals(Common.convertSysdate()), "The second image is not in today's date"); 
			
			//Make sure the third image (if present) is not in today's date
			driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
		    if (driver.findElements(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_2:ProviderImagesSearchResultBean_ColValue_receiptDate")).size()>0) {
		    	Assert.assertTrue(!(driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_2:ProviderImagesSearchResultBean_ColValue_receiptDate")).getText().equals(Common.convertSysdate())), "There were more than 2 images found in today's date in the recred worklist image list. Please check manually and do tc manually"); 
		    }
			driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
			
			//Download the two Images
		    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_0:_id105")).click();
		    driver.findElement(By.id("MMISForm:MMISBodyContent:RecredWorkflowWorklistPanel:ProviderImagesWorkflowSearchResultPanel:ProviderImagesSearchResultList_1:_id105")).click();

	    	//Check that no WI is created in the profile update worklist
	    	Common.resetBase();
	    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Provider")).click();
	    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_ProfileUpdateWorklist")).click();
		    Common.search();
		    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
		    driver.findElement(By.id("MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:_id40")).click();
		  
		    //Count the no. of WIs on the page using date as target
		    int count =  driver.findElements(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:tbody_element']/*/td[5]")).size();
		    
		    //check the last WI's date, if its today's date, perform the test manually
		    if (count>1)
		    	Assert.assertTrue(!(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:tbody_element']/tr["+count+"]/td[5]")).getText().equals(Common.convertSysdate())), "There were lots of WIs found in today's date in the profile update worklist. Please check manually and do tc manually"); 

		    //Make sure our recred provider has not created a WI
	    	Assert.assertTrue(!(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:tbody_element']/tr/td[8]")).getText().equals(recredProvID)), "Recred provider ID was found in profile update worklist"); 
		    if (count>1) {
			    for (int i=2;i<=count; i++)
			    	Assert.assertTrue(!(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:ProfileUpdateWorkflowWorklistPanel:ProviderProfileUpdateWorkflowWorklistResults:tbody_element']/tr["+count+"]/td[8]")).getText().equals(recredProvID)), "Recred provider ID was found in profile update worklist"); 
		    }
		}
    	
    	
    }
    
	public static void searchProv(String prov) {
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).clear();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderMainSearchBean_CriteriaPanel:ProviderIdPopUpSearchControl_providermainsearch")).sendKeys(prov);
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:ProviderSearchResults_0:_id16")).click();
	}
	
	public static void df30872_saveAll() {
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
		if ((driver.findElements(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).size())>0) {
			if (env.equals("POC"))
				driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Skip Change']")).click(); //This is because address validation server is not available in POC
			else
				driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).click();
		}
		if (driver.findElements(By.cssSelector("td.message-text")).size()==0) //This if loop is added if address validation does not return save successful
			driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		String message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Workitem Status Update Successful."), "Save NOT successful Error Message: "+message+"..."); //Assert modified by Priya to include Login failure message in reports
	}
}
