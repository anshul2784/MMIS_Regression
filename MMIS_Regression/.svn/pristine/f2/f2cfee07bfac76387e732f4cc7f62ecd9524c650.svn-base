package newMMIS_Subsystems;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.sql.Statement;
import java.util.Calendar;
import java.util.Date;
import java.util.List;
import java.util.Locale;
import java.util.concurrent.TimeUnit;


import org.apache.commons.io.FileUtils;
import org.apache.commons.lang3.StringUtils;
import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.Select;
import org.testng.Assert;
import org.testng.SkipException;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Listeners;
import org.testng.annotations.Test;

import ch.ethz.ssh2.Connection;
import ch.ethz.ssh2.Session;
import ch.ethz.ssh2.StreamGobbler;

//On 5/19/2015, this suite was modified and all test cases were changed to have the elig eff date <> dob anymore. Elig eff date was now calculated using the
//newly developed function getEligeffDT(). The code was modified for getNewMember() function, and elig eff date=dob and date appl=dob was changed at all xml strings prior to calling getCustomMember() function.
//Assert Statements involving checks for elig eff date were changed for following 6 TCs: 22528, 22531, 22538, 26281, 22553_23372, 23373 
//A copy of previous Member.java file without the above changes is maintained at Z:\Regression\Automation Scripts\Always Keep\Member
@Listeners({ newMMIS_Subsystems.TestNGCustom.class })
public class Member extends Login{
	
	public static String otherid, fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, fileMem = " ", lastName = "MAZDAZ", beginDate="", openRsn="01", caseStatus="1", eligStatus = "1", errorMessage="", errorCode="", result_type="";
	public static boolean endElig = false;
	//Set Portal Page error target
	public static String mmqTarget = "//form[contains(@id,'mmq')]/div/table[2]/tbody/tr";
	public static Date refEffDt,effDt;
	

	
	
	@BeforeTest
    public void memberStartup() throws Exception {
    	log("Starting Member Subsystem......");
    	this.refEffDt = DT("09/30/2015"); //this is the ICD 9 to 10 cut off date
    }
	
	@BeforeMethod
	public void LoginCheck() throws Exception {
		Common.resetBase();
		testCheckDBLoginSuccessful();	
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
	}
	
    @Test
    public void test22528() throws Exception{
    	TestNGCustom.TCNo="22528";
    	log("//TC 22528");
    	
    	//Get Father ID
    	otherid = Common.generateRandomTaxID();
    	fname="F"+Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1985-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DTA";
        String Fid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Get Son ID
    	otherid = Common.generateRandomTaxID();
    	fname="S"+Common.generateRandomName();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2007-10-22";
        dep="01";
        aid="03";
        String Sid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Get Daughter ID
    	otherid = Common.generateRandomTaxID();
    	fname="D"+Common.generateRandomName();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2009-10-22";
        dep="02";
        aid="07";
        String Did = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log ("Father ID: "+Fid+" Son ID: "+Sid+" Daughter ID: "+ Did);
        
        //Verify Member case history for all 3 ids
        verifyCaseHist(Fid,Fid,Sid,Did);
        verifyCaseHist(Sid,Fid,Sid,Did);
        verifyCaseHist(Did,Fid,Sid,Did);
        
        //Verify Daughter information
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(Did),"Member ID Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("MAZDAZ, "+fname),"Name Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(ssn.substring(0, 3)+"-"+ssn.substring(3, 5)+"-"+ssn.substring(5, 9)),"SSN Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[8]/td[2]")).getText().equals(dob.substring(5, 7)+"/"+dob.substring(8, 10)+"/"+dob.substring(0, 4)),"DoB Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[11]/td[2]")).getText().equals("WHITE"),"Race Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText().equals("UNKNOW"),"Ethnicity Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[13]/td[2]")).getText().equals("C"),"Citizen Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[14]/td[2]")).getText().equals("ENG"),"Language Spoken Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[15]/td[2]")).getText().equals("ENG"),"Language Written Mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyName")).getText().equals("DEPT OF TRANSITIONAL ASSISTANCE"),"Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(otherid),"Other ID Mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"Benefit Plan Mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("07 Disabled"),"Aid Cat Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid Cat effective date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid Cat end date Mismatch");
    }
    
    @Test
    public void test22529() throws Exception{
    	TestNGCustom.TCNo="22529";
    	log("//TC 22529");

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1975-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DTA";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Add aid cat 08 with DSS, and change address
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        aid="08";
        agency="DSS";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member:"+Mid);
        
        memberSearch(Mid);
        
        //Verify current address
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        
        //Verify Previuos address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals("101 FEDERAL ST"),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals("BOSTON"),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals("02110"),"Previous zip mismatch");
    	
    	//Click on Member Case History link
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_aidCategory")).getText().equals("02"),"Aid cat 02 not present, added bt DTA");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_1:RecipientCaseBean_ColValue_aidCategory")).getText().equals("08"),"Aid cat 08 not present, added bt DSS");
    }
    
    @Test
    public void test22530() throws Exception{
    	TestNGCustom.TCNo="22530";
    	log("//TC 22530");

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1975-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DSS";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Change address with DTA
        String adr2="100 HANCOCK ST";
        String city2="QUINCY";
        String zip2="02171";
        agency="DTA";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr2,city2,zip2,dep,aid,agency);
        
        log("Member:"+Mid);
        
        memberSearch(Mid);
        
        //Verify current address is same as old one, ie address achange has not occured
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        
        //Verify no records found in Previuos address
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressNoRecordsMessage")).getText().equals("***No records found***"),"Records found in previous address");

    }
    
    @Test
    public void test22531() throws Exception{
    	TestNGCustom.TCNo="22531";
    	log("//TC 22531");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1955-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DTA";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Add aid cat 08 with DSS, and change address
        aid="08";
        casenum=Common.generateRandomTaxID();
        agency="DSS";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 08
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member:"+Mid);
        
        //Verify Panels- Member Information
        memberSearch(Mid);
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText().equals("STD "+dateXMLtoPanel(getEligeffDT(dob))+" - 12/31/2299"),"Benefit plan got end dated");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).selectByIndex(1);
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText().equals("08 "+dateXMLtoPanel(getEligeffDT(dob))+" - "+Common.convertSysdate()),"Aid cat did not ge end dated");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_agencyAffiliation"))).selectByIndex(1);
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_agencyAffiliation"))).getFirstSelectedOption().getText().equals("DSS "+dateXMLtoPanel(getEligeffDT(dob))+" - "+Common.convertSysdate()),"Agency did not ge end dated");

        //Member benefit plan/Aid category
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Benefit Plan got get end dated");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
        //Sort on aid cat end date
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid Cat did not get end dated");
    	
    	//Click on Member Case History link
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
        //Sort on aid cat
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList:RecipientCaseBean_ColHeader_aidCategory")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList:RecipientCaseBean_ColHeader_aidCategory")).click();
        //Click on case number
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Case Elig not closed");

    }
    
    @Test
    public void test22532() throws Exception{
    	TestNGCustom.TCNo="22532";
    	log("//TC 22532");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1945-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DTA";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Change SSN
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member:"+Mid);
        
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(ssn.substring(0, 3)+"-"+ssn.substring(3, 5)+"-"+ssn.substring(5, 9)),"SSN Mismatch");

        //Change Name
        fileMem = Mid;
    	fname=Common.generateRandomName();
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("MAZDAZ, "+fname),"Name Mismatch");

    }
    
    @Test
    public void test22534() throws Exception{
    	TestNGCustom.TCNo="22534";
    	log("//TC 22534");

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1946-09-20";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="TV";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member:"+Mid);
        
        //Verify Benefit Plans BASF and LIM
        memberSearch(Mid);
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("BASF  MASSHEALTH BASIC FEE FOR SERVICE"),"BASF Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("LIM   MASSHEALTH LIMITED"),"LIM Benefit Plan Mismatch");
    }
    
    @Test
    public void test22538() throws Exception{
    	TestNGCustom.TCNo="22538";
    	log("//TC 22538");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1976-03-03";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="TT";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log(" Member: "+Mid+" First Name: "+fname+" Last Name: P Other ID: "+otherid+" Address "+adr1+" "+city+" "+zip);

        //Store other ID for verification
        String MHOotherid = otherid;
        
        //Verify member Data
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("MAZDAZ, "+fname),"Name Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("BASF  MASSHEALTH BASIC FEE FOR SERVICE"),"BASF Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("LIM   MASSHEALTH LIMITED"),"LIM Benefit Plan Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
    	//Verify Other ID
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyName")).getText().equals("MA21 MASSHEALTH ORGANIZATION"),"MHO Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(MHOotherid),"MHO Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"MHO begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");
    	
        //Add aid cat 04 and different other ID, change agency to DTA, change last name and change address
    	otherid = Common.generateRandomTaxID();
        aid="04";
        agency="DTA";
        lastName="Q";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        beginDate="1977-04-09";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log(" 2nd other ID: "+otherid+" Changed Last Name: "+lastName+" Changed Address: "+adr1+" "+city+" "+zip);
        //Verify member Data
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("Q, "+fname),"Name Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("BASF  MASSHEALTH BASIC FEE FOR SERVICE"),"BASF Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("EAEDC EMERG AID TO ELDERLY DISABLED AND CHILDR"),"EAEDC Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).getText().equals("LIM   MASSHEALTH LIMITED"),"LIM Benefit Plan Mismatch");
    	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("04 EAEDC"),"Aid Cat 04 Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("DTA"),"Agency Source DTA Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals("04/09/1977"),"Aid cat 04 eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
        //Verify current address
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        
        //Verify Previuos address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals("101 FEDERAL ST"),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals("BOSTON"),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals("02110"),"Previous zip mismatch");
    	
    	//Verify Other ID
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyName")).getText().equals("DEPT OF TRANSITIONAL ASSISTANCE"),"DTA Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(otherid),"DTA Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"DTA begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");

    	
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyName")).getText().equals("MA21 MASSHEALTH ORGANIZATION"),"MHO Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyId")).getText().equals(MHOotherid),"MHO Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"MHO begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");
    	
        //Add aid cat 03 and different other ID=SSN, change agency to SSA, change last name and change address
        aid="03";
        agency="SSA";
        adr1="101 GAS LIGHT DR";
        city="WEYMOUTH";
        zip="02190";
        beginDate="1979-05-09";
        Mid = getNewMemebr(ssn,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log(" other ID same as ssn: "+ssn+" Changed Address again: "+adr1+" "+city+" "+zip);


        //Verify member Data
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("Q, "+fname),"Name Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("BASF  MASSHEALTH BASIC FEE FOR SERVICE"),"BASF Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("EAEDC EMERG AID TO ELDERLY DISABLED AND CHILDR"),"EAEDC Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).getText().equals("LIM   MASSHEALTH LIMITED"),"LIM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_3:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("04 EAEDC"),"Aid Cat 04 Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("DTA"),"Agency Source DTA Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals("04/09/1977"),"Aid cat 04 eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_3:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("03 SSI Disabled"),"Aid Cat 03 Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("SSA"),"Agency Source SSA Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals("05/09/1979"),"Aid cat 03 eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");

        //Verify current address
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals("100 HANCOCK ST"),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText().equals("QUINCY"),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().equals("02171-0000"),"Zip Mismatch");
        
        //Verify Previuos addresses (no change as SSA can't change address)
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals("101 FEDERAL ST"),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals("BOSTON"),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals("02110"),"Previous zip mismatch");

    	//Verify Other ID
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyName")).getText().equals("DEPT OF TRANSITIONAL ASSISTANCE"),"DTA Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(otherid),"DTA Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"DTA begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");

    	
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyName")).getText().equals("MA21 MASSHEALTH ORGANIZATION"),"MHO Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyId")).getText().equals(MHOotherid),"MHO Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"MHO begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");

        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_2:OtherIdBean_ColValue_agencyName")).getText().equals("SOCIAL SECURITY ADMINISTRATION"),"SSA Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_2:OtherIdBean_ColValue_agencyId")).getText().equals(ssn),"SSA Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_2:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"SSA begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_2:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");
    	
    }
    
    @Test
    public void test22539() throws Exception{
    	TestNGCustom.TCNo="22539";
    	log("//TC 22539");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2013-06-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //End date 02 with end date = sysdate-5 on panel
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-5));
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-5));
    	Common.saveAll();
        
        //Add aid cat CN
		beginDate = Common.convertSysdatecustom(-4).substring(6, 10)+"-"+Common.convertSysdatecustom(-4).substring(0, 2)+"-"+Common.convertSysdatecustom(-4).substring(3, 5);
        aid="CN";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);

        Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Eligibility")).click();
		driver.findElement(By.linkText("Verify Member Eligibility")).click();
		
		//Select Provider
		new Select(driver.findElement(By.xpath("//select[contains(@id,'eligInquireSearchProviderID')]"))).selectByIndex(1);
		//Enter Member ID for search
		driver.findElement(By.xpath("//input[contains(@id,'member_memberID')]")).sendKeys(Mid);
		
		//Enter Dates
		driver.findElement(By.xpath("//input[contains(@id,'member_fromDOS')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'member_fromDOS')]")).sendKeys(Common.convertSysdatecustom(-10));
		driver.findElement(By.xpath("//input[contains(@id,'member_toDOS')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'member_toDOS')]")).sendKeys(Common.convertSysdate());

		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		//Set Page error target
		String peTarget = "//form[@id='form1']/div/table[2]/tbody/tr";
		Common.getPageError(peTarget);
		//Verify two rows of elig are present
		driver.findElement(By.id("MemberTab:_MENUITEM_EligTab")).click();
		Common.getPageError(peTarget);
    	Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'coverageList:0:status')]")).getText().equals("MASSHEALTH STANDARD"),"MH elig not present");
    	Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'coverageList:1:status')]")).getText().equals("MASSHEALTH STANDARD"),"MH elig not present");
		
        Common.portalLogout();
        
    }
    
    @Test
    public void test22541() throws Exception{
    	TestNGCustom.TCNo="22541";
    	log("//TC 22541");
    	
    	//Get any member
    	sqlStatement = "Select id_medicaid from T_RE_BASE b where ind_active = 'Y'  and not exists (select 1 from T_RE_LOCKIN_PERIOD p where b.sak_recip=p.sak_recip ) and rownum<2";
    	colNames.add("ID_MEDICAID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
        log("Member: "+colValues.get(0));
    	
        memberSearch(colValues.get(0));
        
        //Add new lockin detail
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n116")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinPeriodDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinPeriodDataPanel_ReLockEnt"))).selectByVisibleText("01 - MULTIPLE PHYSICIANS");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinProviderRestrictionPanel:LockinInfoBean_providerID")).sendKeys("110020937");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinProviderRestrictionPanel:LockinInfoBean_SvcLoc")).sendKeys("A");
		Common.saveAll();
    }
    
    @Test
    public void test22549() throws Exception{
    	TestNGCustom.TCNo="22549";
    	log("//TC 22549");
    	
    	String[] memcase = new String[2];
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
    	memcase[0]=casenum;
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1982-07-09";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //End Elig 40
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Reopen elig 40 in a different case- same aid category, same agency source with overlapping eligibility periods.
    	casenum=Common.generateRandomTaxID();
    	memcase[1]=casenum;
    	beginDate = "2002-07-09";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        
        //Open member in member panel
        memberSearch(Mid);
        //verify only one benefit plan is there
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'EligBean_ColValue_benefitPlan')]")).size()==1,"More than one benefit plan present");
    	//verify 2 aid cat 40s are present
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'AidEligBean_ColValue_aidDes')]")).size()==2,"More than 2 aid cats present");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("40 Family"),"Aid Cat Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_aidDes")).getText().equals("40 Family"),"Aid Cat Mismatch");
    	//Verify 2 cases are present in member case history
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'RecipientCaseBean_ColValue_caseNumber')]")).size()==2,"More than 2 Case numbers present");
    	for (int i=0;i<2;i++) {
    		if (!(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).getText().equals(memcase[i]))) {
    			if (!(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_1:RecipientCaseBean_ColValue_caseNumber")).getText().equals(memcase[i])))
    		    	Assert.assertTrue(false,memcase[i]+" not present");
    		}
    	}
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_aidCategory")).getText().equals("40"),"Aid Cat Mismatch in member case history");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_1:RecipientCaseBean_ColValue_aidCategory")).getText().equals("40"),"Aid Cat Mismatch in member case history");
    }
   
    @Test
    public void test23393() throws Exception{
    	TestNGCustom.TCNo="23393";
    	log("//TC 23393");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1970-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="20";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 20
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat 20
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in Eot, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23394() throws Exception{
    	TestNGCustom.TCNo="23394";
    	log("//TC 23394");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="21";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 21
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat 21
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in Eot, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23395() throws Exception{
    	TestNGCustom.TCNo="23395";
    	log("//TC 23395");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1972-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="22";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 22
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat 22
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23396() throws Exception{
    	TestNGCustom.TCNo="23396";
    	log("//TC 23396");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1971-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="25";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 25
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat 25
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23397() throws Exception{
    	TestNGCustom.TCNo="23397";
    	log("//TC 23397");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1971-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="AL";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig AL
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat AL
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23407() throws Exception{
    	TestNGCustom.TCNo="23407";
    	log("//TC 23407");
    	
    	//Get any member
    	sqlStatement = "Select id_medicaid from T_RE_BASE b where ind_active = 'Y'  and not exists (select 1 from T_RE_LOCKIN_PERIOD p where b.sak_recip=p.sak_recip ) and rownum<2";
    	colNames.add("ID_MEDICAID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
        memberSearch(colValues.get(0));
        
        log("Member: "+colValues.get(0));
        
        //Add new lockin detail
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n116")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinPeriodDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinPeriodDataPanel_ReLockEnt"))).selectByVisibleText("01 - MULTIPLE PHYSICIANS");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinProviderRestrictionPanel:LockinInfoBean_providerID")).sendKeys("110000256");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinProviderRestrictionPanel:LockinInfoBean_SvcLoc")).sendKeys("A");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
    	Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("Provider ID/Service Location must be a Pharmacy."),"Did not get the edit \"Provider ID/Service Location must be a Pharmacy.\"");

    }
    
    @Test
    public void test23384() throws Exception{
    	TestNGCustom.TCNo="23384";
    	log("//TC 23384");
    	
    	sqlStatement="Select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, e.agency_id  from T_RE_BASE b, t_re_other_id e where ind_active = 'Y'  and exists (select p.sak_recip from T_RE_ID_CARD p where b.sak_recip=p.sak_recip group by p.sak_recip having count(sak_recip) = 1 ) and b.sak_recip = e.sak_Recip and e.cde_agency = 'MHO' and e.end_date = '22991231' and b.nam_first NOT LIKE '%-%' and b.adr_state = 'MA' and rownum<2";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colNames.add("AGENCY_ID");   //8
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//get member ID card details
        memberSearch(colValues.get(0));
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		String dteIssue = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText();
		String idAction = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText();
		String issueRsn = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText();
		String clerkID = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText();
		String source = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText();
		String dteReq = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText();
		
		
		//insert special char in name
    	otherid = colValues.get(8).trim();
    	fname=colValues.get(3).trim()+"-";
    	lastName = colValues.get(4).trim();
    	String lName= lastName; //Store lastname again in different variable because it will change to P after xml is executed
    	casenum= Common.generateRandomTaxID();
        ssn=colValues.get(1).trim();
        dob =colValues.get(2).trim().substring(0, 4)+"-"+colValues.get(2).trim().substring(4, 6)+"-"+colValues.get(2).trim().substring(6, 8);
        adr1=colValues.get(5).trim();
        city=colValues.get(6).trim();
        zip=colValues.get(7).trim();
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        if (!(Mid.equals(colValues.get(0))))
        	  Assert.assertTrue(false,"Member generated for first name change is not the same as one selected from DB");
        
        log("Member: "+Mid);
        
        //Verify member name has special char, and verify no change in ID card info
        memberSearch(colValues.get(0));
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(lName+", "+fname),"Special char addition to First name failed");
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		if (!(driver.findElements(By.xpath("//span[contains(@id, 'IDCardBean_ColValue_issueDate')]")).size()==1))
      	  Assert.assertTrue(false,"Looks like another row for member ID card got added");

        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText().equals(dteIssue),"dteIssue on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText().equals(idAction),"idAction on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText().equals(issueRsn),"issueRsn on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText().equals(clerkID),"clerkID on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText().equals(source),"source on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText().equals(dteReq),"dteReq on ID card mismatch");

    }
    
    @Test
    public void test23385() throws Exception{
    	TestNGCustom.TCNo="23385";
    	log("//TC 23385");
    	
    	sqlStatement="Select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, e.agency_id  from T_RE_BASE b, t_re_other_id e where ind_active = 'Y'  and exists (select p.sak_recip from T_RE_ID_CARD p where b.sak_recip=p.sak_recip group by p.sak_recip having count(sak_recip) = 1 ) and b.sak_recip = e.sak_Recip and e.cde_agency = 'MHO' and e.end_date = '22991231' and b.nam_last NOT LIKE '%-%' and b.adr_state = 'MA' and rownum<2";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colNames.add("AGENCY_ID");   //8
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//get member ID card details
        memberSearch(colValues.get(0));
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		String dteIssue = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText();
		String idAction = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText();
		String issueRsn = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText();
		String clerkID = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText();
		String source = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText();
		String dteReq = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText();
		
		
		//insert special char in name
    	otherid = colValues.get(8).trim();
    	fname=colValues.get(3).trim();
    	lastName = colValues.get(4).trim()+"-";
    	String lName= lastName; //Store lastname again in different variable because it will change to P after xml is executed
    	casenum= Common.generateRandomTaxID();
        ssn=colValues.get(1).trim();
        dob =colValues.get(2).trim().substring(0, 4)+"-"+colValues.get(2).trim().substring(4, 6)+"-"+colValues.get(2).trim().substring(6, 8);
        adr1=colValues.get(5).trim();
        city=colValues.get(6).trim();
        zip=colValues.get(7).trim();
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        if (!(Mid.equals(colValues.get(0))))
        	  Assert.assertTrue(false,"Member generated for first name change is not the same as one selected from DB");
        
        log("Member: "+Mid);
        
        //Verify member name has special char, and verify no change in ID card info
        memberSearch(colValues.get(0));
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(lName+", "+fname),"Special char addition to Last name failed");
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		if (!(driver.findElements(By.xpath("//span[contains(@id, 'IDCardBean_ColValue_issueDate')]")).size()==1))
      	  Assert.assertTrue(false,"Looks like another row for member ID card got added");

        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText().equals(dteIssue),"dteIssue on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText().equals(idAction),"idAction on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText().equals(issueRsn),"issueRsn on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText().equals(clerkID),"clerkID on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText().equals(source),"source on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText().equals(dteReq),"dteReq on ID card mismatch");

    }
    
    @Test
    public void test24487() throws Exception{
    	TestNGCustom.TCNo="24487";
    	log("//TC 24487");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1970-01-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"BUGS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" mail_adr_city=\"WEYMOUTH\" mail_adr_state=\"MA\" mail_adr_street_1=\"101 GAS LIGHT DRIVE\" mail_adr_street_2=\" \" mail_adr_zip_code=\"02190\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        
        
        //Check Panels
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        //Check residential and mailing address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n131")).click();
    	//Sort
    	driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList:OtherAddressBean_ColHeader_addressInd")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressLine1")).getText().equals("101 GAS LIGHT DRIVE"),"Mailing adr1 mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressCity")).getText().equals("WEYMOUTH"),"Mailing city mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressZip")).getText().equals("02190"),"Mailing zip mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressInd")).getText().equals("MM"),"Mailing address Indicator mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressLine1")).getText().equals(adr1),"Res adr1 mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressCity")).getText().equals(city),"Res city mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressZip")).getText().equals(zip),"Res zip mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressInd")).getText().equals("MR"),"Res adr Indicator mismatch");
        //Verify no records found in Previous address
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressNoRecordsMessage")).getText().equals("***No records found***"),"Records found in previous address");

        //Change res adr
        adr1="100 HANCOCK STREET";
        city="QUINCY";
        zip="02171";
    	
    	//Get Member ID
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"BUGS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" mail_adr_city=\"WEYMOUTH\" mail_adr_state=\"MA\" mail_adr_street_1=\"101 GAS LIGHT DRIVE\" mail_adr_street_2=\" \" mail_adr_zip_code=\"02190\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");
        Mid = getCustomMemebr(xml);      
        
        //Check Panels
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        //Check residential and mailing address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n131")).click();
    	//Sort
    	driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList:OtherAddressBean_ColHeader_addressInd")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressLine1")).getText().equals("101 GAS LIGHT DRIVE"),"Mailing adr1 mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressCity")).getText().equals("WEYMOUTH"),"Mailing city mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressZip")).getText().equals("02190"),"Mailing zip mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressInd")).getText().equals("MM"),"Mailing address Indicator mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressLine1")).getText().equals(adr1),"Res adr1 mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressCity")).getText().equals(city),"Res city mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressZip")).getText().equals(zip),"Res zip mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressInd")).getText().equals("MR"),"Res adr Indicator mismatch");
        //Verify Previuos address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals("101 FEDERAL ST"),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals("BOSTON"),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals("02110"),"Previous zip mismatch");

//    	Common.cancelAll();

    }
    
    @Test
    public void test26281() throws Exception{
    	TestNGCustom.TCNo="26281";
    	log("//TC 26281");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1969-03-11";
        adr1="4 FALKLAND ST";
        city="BRIGHTON";
        zip="02135";
    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"03\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<mfp cde_type=\"HSP\" dte_effective=\""+getEligeffDT(dob)+"\" dte_end=\"2299-12-31\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("MFP   MONEY FOLLOWS THE PERSON"),"MFP Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n418")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_mfpCde")).getText().equals("HOSPITAL"),"MFP TYPE Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"MFP Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_endDate")).getText().equals("12/31/2299"),"MFP End Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_status1Code")).getText().equals("Active"),"MFP Status Code Mismatch");

    }
    
    @Test
    public void test26282() throws Exception{
    	TestNGCustom.TCNo="26282";
    	log("//TC 26282");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1980-04-11";
        adr1="4 FALKLAND ST";
        city="BRIGHTON";
        zip="02135";
        String wEffDate = "2013-01-01";
        String wEndDate = "2013-12-31";
        String mfpEffDate = "2013-03-01";
        String mfpEndDate = "2013-08-31";
        String mfp2EffDate = "2013-04-01";
        String mfp2EndDate = "2013-06-30";
    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<waiver cde_type_waiver=\"M\" dte_effective=\""+wEffDate+"\" dte_end=\""+wEndDate+"\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("HCBSM STANDARD PLUS MRC/TBI HCBS WAIVER"),"HCBSM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n134")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_waiverType")).getText().equals("TRAUMATIC BRAIN INJURY"),"HCBS Waiver Type Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(wEffDate)),"HCBS Waiver Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)),"HCBS Waiver End Date Mismatch");
    	Common.cancelAll();
    	
    	//Add MFP info
    	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<mfp cde_type=\"HSP\" dte_effective=\""+mfpEffDate+"\" dte_end=\""+mfpEndDate+"\" />\n</EligibilityRequest>");
    	
    	Mid = getCustomMemebr(xml);
    	
    	//Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("HCBSM STANDARD PLUS MRC/TBI HCBS WAIVER"),"HCBSM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("MFP   MONEY FOLLOWS THE PERSON"),"MFP Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n134")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_waiverType")).getText().equals("TRAUMATIC BRAIN INJURY"),"HCBS Waiver Type Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(wEffDate)),"HCBS Waiver Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)),"HCBS Waiver End Date Mismatch");
    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n418")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_mfpCde")).getText().equals("HOSPITAL"),"MFP TYPE Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(mfpEffDate)),"MFP Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(mfpEndDate)),"MFP End Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_status1Code")).getText().equals("Active"),"MFP Status Code Mismatch");
//    	Assert.assertTrue(driver.findElement(By.id("")).getText().equals("")," Mismatch");

    }
    
    @Test
    public void test26280() throws Exception{
    	TestNGCustom.TCNo="26280";
    	log("//TC 26280");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1976-03-03";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="08";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Store prev case number
        String prevCasenum = casenum;
        
        //Add another case number
    	casenum=Common.generateRandomTaxID();
    	Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
    	
    	log("Member: "+Mid);
        
        //Verify member Data
        memberSearch(Mid);
        //verify only one benefit plan is there
     	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
     	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'EligBean_ColValue_benefitPlan')]")).size()==1,"More than one benefit plan present");
     	//verify 2 aid cat 08s are present, and have different case numbers
     	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
     	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'AidEligBean_ColValue_aidDes')]")).size()==2,"More than 2 aid cats present");
     	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_aidDes")).getText().equals("08 Multi Assistance Unit"),"Aid Cat Mismatch");
     	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("08 Multi Assistance Unit"),"Aid Cat Mismatch");
     	String panelCase;
     	for (int i=0;i<2;i++) {
     		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_"+i+":AidEligBean_ColValue_aidDes")).click();
         	panelCase = driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_CaseNumber")).getAttribute("value").trim();;
         	if (!panelCase.equals(prevCasenum) && !panelCase.equals(casenum))
         		Assert.assertTrue(false,"The two case numbers are not associated with the aid cat");
     	}
     	
     	//Verify 2 cases are present in member case history
         driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
     	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'RecipientCaseBean_ColValue_caseNumber')]")).size()==2,"More than 2 case numbers present");
     	for (int i=0;i<2;i++) {
         	panelCase = driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_"+i+":RecipientCaseBean_ColValue_caseNumber")).getText();
         	if (!panelCase.equals(prevCasenum) && !panelCase.equals(casenum))
         		Assert.assertTrue(false,"The two case numbers are not present");
     	}
    
    }
    
    @Test
    public void test24485() throws Exception{
    	TestNGCustom.TCNo="24485";
    	log("//TC 24485");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1991-05-11";
        adr1="4 FALKLAND ST";
        city="BRIGHTON";
        zip="02135";
        String wEffDate = "2013-01-01";
        String wEndDate = "2299-12-31";

    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<waiver cde_type_waiver=\"M\" dte_effective=\""+wEffDate+"\" dte_end=\""+wEndDate+"\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("HCBSM STANDARD PLUS MRC/TBI HCBS WAIVER"),"HCBSM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	//Verify HSBSM End date
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)), "HCBSM End date Mismatch");

    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n134")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_waiverType")).getText().equals("TRAUMATIC BRAIN INJURY"),"HCBS Waiver Type Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(wEffDate)),"HCBS Waiver Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)),"HCBS Waiver End Date Mismatch");
    	Common.cancelAll();
    	
    	//Future End date HCBSM Waiver
        wEndDate = fileSysdateCustom(7);
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
			"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
			"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
			"<waiver cde_type_waiver=\"M\" dte_effective=\""+wEffDate+"\" dte_end=\""+wEndDate+"\" />\n</EligibilityRequest>");
        Mid = getCustomMemebr(xml);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("HCBSM STANDARD PLUS MRC/TBI HCBS WAIVER"),"HCBSM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	//Verify HSBSM End date
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)), "HCBSM End date Mismatch");
    	//verify STD plan is not end dated
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_endDate")).getText().equals("12/31/2299"), "STD End date Mismatch");

    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n134")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_waiverType")).getText().equals("TRAUMATIC BRAIN INJURY"),"HCBS Waiver Type Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(wEffDate)),"HCBS Waiver Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)),"HCBS Waiver End Date Mismatch");
    	Common.cancelAll();
    	
    }
    
    @Test
    public void test22554a_23403() throws Exception{
    	TestNGCustom.TCNo="22554a_23403";
    	log("//TC 22554a_23403");
    	
    	//Get 1st Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1966-03-09";
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        String inactMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1966-02-09";
        adr1="729 BRIDGE STREET";
        city="WEYMOUTH";
        zip="02191";
        dep="00";
        aid="08";
        agency="MHO";
        String actMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Inactive Member: "+inactMem+" Active Member: "+actMem);
        
        //Link 2 members
        memberSearch(actMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_Navi1")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.xpath("//img[@alt='Link ID From pop-up search']")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:CurrentID")).sendKeys(inactMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:SEARCH")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchResults_0:column1Value")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();

		//Store members in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_MEMBERLINK";
		colNames.add("INACTIVE_ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_MEMBERLINK";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_MEMBERLINK values ('"+inactMem+"','"+actMem+"', '"+"MAZDAZ"+"', '"+fname+"', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    }
    
    @Test
    public void test23387() throws Exception{
    	TestNGCustom.TCNo="23387";
    	log("//TC 23387");
    	
    	sqlStatement = "select B.ID_MEDICAID, B.NAM_LAST, B.NAM_FIRST, O.AGENCY_ID,  O.CDE_AGENCY, B.ADR_STREET_1, B.ADR_CITY, B.NUM_SSN, B.DTE_BIRTH, B.ADR_ZIP_CODE  from t_re_base b, t_re_aid_elig e, t_re_other_id o where b.ind_active = 'Y' and e.dte_end < 20120701 and e.sak_cde_Aid = 182 and B.ADR_STATE = 'MA' and B.DTE_DEATH = 0 and  e.sak_recip = b.sak_recip and b.sak_recip = o.sak_recip and O.CDE_AGENCY<>'DMR' and e.sak_recip in  (select sak_recip from t_re_aid_elig  group by (sak_recip) having count(sak_recip) = 1) and b.num_ssn <> ' ' and rownum < 2";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NAM_LAST");	 //1
    	colNames.add("NAM_FIRST");	 //2
    	colNames.add("AGENCY_ID");	 //3
    	colNames.add("CDE_AGENCY");	 //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");	 //6
    	colNames.add("NUM_SSN");	 //7
    	colNames.add("DTE_BIRTH");	 //8
    	colNames.add("ADR_ZIP_CODE");//9
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	

    	//Get Member ID
    	otherid = colValues.get(3);
    	fname=colValues.get(2);
    	lastName = colValues.get(1);
    	casenum=Common.generateRandomTaxID();
        ssn=colValues.get(7);
        dob =colValues.get(8).substring(0, 4)+"-"+colValues.get(8).substring(4, 6)+"-"+colValues.get(8).substring(6, 8);;
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(9);
        dep="00";
        aid="03";
        agency=colValues.get(4);
        beginDate = fileSysdateCustom(0);
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //verify that we got aid cat added to same member
        if (!(Mid.equals(colValues.get(0))))
        	Assert.assertTrue(false, "Same member not reopened");
        
        log("Member: "+Mid);
        
        //Verify member Data and Id card
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNewMessage")).getText().equals("--- Unprocessed Card requests exists for this member - Date Requested = "+Common.convertSysdate()+" by SSA"),"Did not receive Unprocessed ID card message");

    }
    
    @Test
    public void test23391() throws Exception{
    	TestNGCustom.TCNo="23391";
    	log("//TC 23391");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1987-09-14";
        adr1="44 BROADWAY";
        city="SOMERVILLE";
        zip="02145";
        String pEffDate =fileSysdateCustom(30);

    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<patientpay amt_patnt_pay=\"10.15\" dte_effective=\""+pEffDate+"\" cde_type=\"N\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        //Add 2nd PPA
        pEffDate =fileSysdateCustom(60);
    	
    	//Get Member ID
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<patientpay amt_patnt_pay=\"12.15\" dte_effective=\""+pEffDate+"\" cde_type=\"N\" />\n</EligibilityRequest>");

        Mid = getCustomMemebr(xml);
        
        //Add 3rd PPA
        pEffDate =fileSysdateCustom(90);
    	
    	//Get Member ID
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<patientpay amt_patnt_pay=\"14.15\" dte_effective=\""+pEffDate+"\" cde_type=\"N\" />\n</EligibilityRequest>");

        Mid = getCustomMemebr(xml);
        
        //Add 4th PPA
        pEffDate =fileSysdateCustom(212);
    	
    	//Get Member ID
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<patientpay amt_patnt_pay=\"15.15\" dte_effective=\""+pEffDate+"\" cde_type=\"N\" />\n</EligibilityRequest>");

        Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        log("The output file to check the PPA effective date warning message is: "+Common.fileName());
        
        //Verify Warning message
        if (!(errorMessage.equals("Patient pay effective date cannot be greater than 6 months into the future.")))
    		Assert.assertTrue(false, "Did not get Warning message 'Patient pay effective date cannot be greater than 6 months into the future.'");
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n125")).click();
    	if (!(driver.findElements(By.xpath("//span[contains(@id, 'PatLiabilityBean_ColValue_patntLiabilityAmount')]")).size()==3))
    		Assert.assertTrue(false, "Patient pay effective date greater than 6 months into the future got added.");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_0:PatLiabilityBean_ColValue_patntLiabilityAmount")).getText().equals("$10.15"),"First PPA amount mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_1:PatLiabilityBean_ColValue_patntLiabilityAmount")).getText().equals("$12.15"),"Second PPA amount mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_2:PatLiabilityBean_ColValue_patntLiabilityAmount")).getText().equals("$14.15"),"Third PPA amount mismatch");
    	for (int i=0;i<3;i++)
        	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_"+i+":PatLiabilityBean_ColValue_patLiabilityCode")).getText().equals("Nursing Home/ICF/Chronic"), i+"th PPA type mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_2:PatLiabilityBean_ColValue_endDate")).getText().equals("12/31/2299"),"Third PPA end date mismatch");

    }
    
    @Test
    public void test23392() throws Exception{
    	TestNGCustom.TCNo="23392";
    	log("//TC 23392");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1976-04-09";
        adr1="1149 HINGHAM STREET";
        city="ROCKLAND";
        zip="02370";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
        
        //Search Member
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n125")).click();

        //Add PPA 1
        addPPA("10.15", 30);
		Common.saveAll();
		
        //Add PPA 2
        addPPA("12.15", 60);
		Common.saveAll();
		
        //Add PPA 3
        addPPA("14.15", 90);
		Common.saveAll();
		
        //Add PPA 4
        addPPA("15.15", 212);
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		if (!(driver.findElement(By.cssSelector("td.message-text")).getText().equals("Effective Date cannot be a future date greater than 6 months from the current date.")))
    		Assert.assertTrue(false, "Did not get Error message 'Patient pay effective date cannot be greater than 6 months into the future.'");
		
    }
    
    @Test
    public void test23366() throws Exception{
    	TestNGCustom.TCNo="23366";
    	log("//TC 23366");
    	
    	//Add MMQ Prov, SL
    	String[][] mmqprov = new String[3][3];
    	
    	//MMQ Prov A
    	mmqprov[0][0] = "110000034"; 
    	mmqprov[0][1] = "D";
    	mmqprov[0][2] = "A"; //MMQ CYCle
    	
    	//MMQ Prov B
    	mmqprov[1][0] = "110025765";
    	mmqprov[1][1] = "A";
    	mmqprov[1][2] = "B"; //MMQ CYCLE
    	
    	//MMQ Prov B
    	mmqprov[2][0] = "110025810";
    	mmqprov[2][1] = "A";
    	mmqprov[2][2] = "C"; // MMQ CYCLE
    	
    	//Get Member ID
    	for (int i=0;i<3;i++) {
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1977-05-1"+i;
        adr1="135 PEARL STREET";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
        
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(mmqprov[i][0]);
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys(mmqprov[i][1]);
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains(mmqprov[i][0])) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Perform Negative testing here as well for one of the MMQs for Personal Information
		if (mmqprov[i][2].equals("A")) {
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(5));
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate());

			//Certified Statement
			driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_certifiedStatementTab")).click();
			Common.getPageError("//form[contains(@id,'mmqPersonalInfoForm')]/div/table[2]/tbody/tr"); //Cannot use mmqTarget here because the on submit page, mmqTarget is present even though there is no page error
			driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_rnEvaluator")).sendKeys(Common.generateRandomName());
			driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_evaluationDate")).sendKeys(Common.convertSysdate());
			driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_nameOfAdmin")).sendKeys(Common.generateRandomName());
			new Select(driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_affiliation"))).selectByVisibleText("1 - Nursing Facility Staff");
			
			//Submit MMQ
			driver.findElement(By.xpath("//input[@class='buttonCommand' and @value='Submit']")).click();
	    	Assert.assertTrue(driver.findElement(By.xpath("//form[@id='mmqCertifiedStatementForm']/div/table[2]/tbody/tr[3]/td[2]")).getText().equals("Admission Date cannot be in the Future. Please correct Date of Admission."),"Date of Admission negative test failed");

			driver.findElement(By.id("mmqCertifiedStatementForm:_MENUITEM_personalInfoTab")).click();
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdate());
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(1));
			
			//Certified Statement
			driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_certifiedStatementTab")).click();
			Common.getPageError("//form[contains(@id,'mmqPersonalInfoForm')]/div/table[2]/tbody/tr"); //Cannot use mmqTarget here because the on submit page, mmqTarget is present even though there is no page error
			
			//Submit MMQ
			driver.findElement(By.xpath("//input[@class='buttonCommand' and @value='Submit']")).click();
	    	Assert.assertTrue(driver.findElement(By.xpath("//form[@id='mmqCertifiedStatementForm']/div/table[2]/tbody/tr[3]/td[2]")).getText().equals("Effective Date cannot be in the Future. Please correct Effective Date."),"Effective Date negative test failed");
	    	
	    	//Cancel Service
			driver.findElement(By.xpath("//input[@class='buttonCommand' and @value='Cancel Service']")).click();
			
			//Search for member again
			list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
			for (WebElement j:list) 
				if ((j.getText()).contains(mmqprov[i][0])) {
					j.click();
					break;
				}
			driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
			driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
			driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
			new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
			driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
			Common.getPageError(mmqTarget);
			
			//driver.findElement(By.id("mmqCertifiedStatementForm:_MENUITEM_personalInfoTab")).click();

		}
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate());
		effDt=DT(Common.convertSysdate());
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch");
    	if (mmqprov[i][2].equals("A"))
        	if(!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("06/30"))&&!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("12/31")))
        		Assert.assertTrue(false, "LoC A End date mismatch");
    	else if (mmqprov[i][2].equals("B"))
    		if(!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("07/31"))&&!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("01/31")))
        		Assert.assertTrue(false, "LoC B End date mismatch");
    	else if (Integer.parseInt(Common.convertSysdate().substring(6, 10))%4==0) //Leap year check
        	if(!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("08/31"))&&!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("02/29")))
        		Assert.assertTrue(false, "LoC C End date mismatch");
    	else
        	if(!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("08/31"))&&!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("02/28")))
        		Assert.assertTrue(false, "LoC C End date mismatch");
    	
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
	
    	}

    }
    
    @Test
    public void test23380() throws Exception{
    	TestNGCustom.TCNo="23380";
    	log("//TC 23380");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1979-08-17";
        adr1="740 MIDDLE STREET";
        city="WEYMOUTH";
        zip="02188";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-60));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);

		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		effDt = DT(Common.convertSysdatecustom(-60));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();

		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 3
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("3 - Semiannual category change and significant change");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);

		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate().substring(0, 2)+"/01/"+Common.convertSysdate().substring(6, 10));
		effDt = DT(Common.convertSysdate().substring(0, 2)+"/01/"+Common.convertSysdate().substring(6, 10));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("2 - Daily Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("3 - Totally Dependent");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("2 - Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();

		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Category Change"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void test22536() throws Exception{
    	TestNGCustom.TCNo="22536";
    	log("//TC 22536");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1979-08-17";
        adr1="428 WASHINGTON STREET";
        city="WEYMOUTH";
        zip="02188";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-365));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		effDt=DT(Common.convertSysdatecustom(-365));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 2
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("2 - Conversion");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-1));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate());
		effDt=DT(Common.convertSysdate());
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("2 - Daily Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("3 - Totally Dependent");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("2 - Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Conversion"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void test23408() throws Exception{
    	TestNGCustom.TCNo="23408";
    	log("//TC 23408");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1975-09-19";
        adr1="653 SOUTHERN ARTERY";
        city="QUINCY";
        zip="02169";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		effDt=DT("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 3
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("4 - semiannual score change");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys("09/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		effDt=DT("09/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("2 - Daily Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("3 - Totally Dependent");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("2 - Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	//Sort on MMQ Summary-Reason For Submission
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_submitReason_reasonDescription")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Code/Score Change"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void test23472a() throws Exception{
    	TestNGCustom.TCNo="23472a";
    	log("//TC 23472a");
    	
    	String pid = "110025810";
    	String sl = "A";
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1974-03-15";
        adr1="59 POND STREET";
        city="ASHLAND";
        zip="01721";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(pid);
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys(sl);
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Set Portal Page error target
		String mmqBatchTarget = "//form[@id='uploadBatchFiles']/div/table[2]/tbody/tr";
		
		//Prepare MMQ File
		String submitDT = fileSysdateCustom(0).substring(0,4)+fileSysdateCustom(0).substring(5,7)+fileSysdateCustom(0).substring(8,10);
		
		//Figure out the right Diag code
		String batchMMQdiag="";
		effDt=DT(Common.convertSysdate());
		if (effDt.after(refEffDt))
			batchMMQdiag = "A200"; //ICD10
		else
			batchMMQdiag = "496"; //ICD 9
		
		String batchMMQ="<submitMemberMMQRequests>"+
				 "	<submitMemberMMQRequest>"+
				 "		<MEMBER_SUBMIT>"+
				 "			<MMQ_ACTION_IND>PROC_MMQ</MMQ_ACTION_IND>"+
				 "			<PERSONAL_INFO>"+
				 "				<PROVIDER_ID>"+pid+"</PROVIDER_ID>"+
				 "				<SERVICE_LOCATION>"+sl+"</SERVICE_LOCATION>"+
				 "				<MEMBER_ID>"+mem+"</MEMBER_ID>"+
				 "				<FACILITY_NAME/>"+
				 "				<DTE_ADMIT>"+submitDT+"</DTE_ADMIT>"+
				 "				<LAST_NAME>P</LAST_NAME>"+
				 "				<FIRST_NAME>"+fname+"</FIRST_NAME>"+
				 "				<BIRTH_DTE>"+dob.substring(0,4)+dob.substring(5,7)+dob.substring(8,10)+"</BIRTH_DTE>"+
				 "				<DTE_EFF>"+submitDT+"</DTE_EFF>"+
				 "				<SUBMIT_REASON>1</SUBMIT_REASON>"+
				 "			</PERSONAL_INFO>"+
				 "			<SERVICE_SECTION_1>"+
				 "				<DISP_MEDS_SCORE>1</DISP_MEDS_SCORE>"+
				 "				<SKILLED_OBSERV_DAILIY_CODE>1</SKILLED_OBSERV_DAILIY_CODE>"+
				 "				<SKILLED_OBSERV_DAILIY_SCORE/>"+
				 "				<PERS_HYG_BATH_CODE>3</PERS_HYG_BATH_CODE>"+
				 "				<PERS_HYG_BATH_SCORE/>"+
				 "				<PERS_HYG_GROOM_CODE>3</PERS_HYG_GROOM_CODE>"+
				 "				<PERS_HYG_GROOM_SCORE/>"+
				 "				<DRESSING_CODE>3</DRESSING_CODE>"+
				 "				<DRESSING_SCORE/>"+
				 "				<MOBILITY_CODE>4</MOBILITY_CODE>"+
				 "				<MOBILITY_SCORE/>"+
				 "				<EATING_CODE>2</EATING_CODE>"+
				 "				<EATING_SCORE/>"+
				 "				<CONT_CATH_BLAD_CODE>3</CONT_CATH_BLAD_CODE>"+
				 "				<CONT_CATH_BLAD_SCORE/>"+
				 "				<CONT_CATH_BOWEL_CODE>1</CONT_CATH_BOWEL_CODE>"+
				 "				<CONT_CATH_BOWEL_SCORE/>"+
				 "				<BLAD_BOWEL_RETRAIN_CODE>1</BLAD_BOWEL_RETRAIN_CODE>"+
				 "				<BLAD_BOWEL_RETRAIN_SCORE/>"+
				 "				<POSITIONING_CODE>2</POSITIONING_CODE>"+
				 "				<POSITIONING_SCORE/>"+
				 "				<PRES_ULCER_PREV_CODE>2</PRES_ULCER_PREV_CODE>"+
				 "				<PRES_ULCER_PREV_SCORE/>"+
				 "				<SPROC_DAILY_PRES_ULCER_FREQ>0</SPROC_DAILY_PRES_ULCER_FREQ>"+
				 "				<SPROC_DAILY_PRES_ULCER_SCORE/>"+
				 "				<SPD_PU_STG1_CODE>0</SPD_PU_STG1_CODE>"+
				 "				<SPD_PU_STG2_CODE>0</SPD_PU_STG2_CODE>"+
				 "				<SPD_PU_STG3_CODE>0</SPD_PU_STG3_CODE>"+
				 "				<SPD_PU_STG4_CODE>0</SPD_PU_STG4_CODE>"+
				 "				<SPTD_OTHER_FREQ>1</SPTD_OTHER_FREQ>"+
				 "				<SPTD_OTHER_SCORE/>"+
				 "				<SPTD_OTHER_PROC1_CODE>07</SPTD_OTHER_PROC1_CODE>"+
				 "				<SPTD_OTHER_PROC2_CODE>00</SPTD_OTHER_PROC2_CODE>"+
				 "				<SPTD_OTHER_PROC3_CODE>00</SPTD_OTHER_PROC3_CODE>"+
				 "				<SUBTOTAL/>"+
				 "			</SERVICE_SECTION_1>"+
				 "			<SERVICE_SECTION_2>"+
				 "				<SPEC_ATT_IMMOBIL_CODE>1</SPEC_ATT_IMMOBIL_CODE>"+
				 "				<SPEC_ATT_SEV_SPASTIC_CODE>0</SPEC_ATT_SEV_SPASTIC_CODE>"+
				 "				<SPEC_ATT_BEH_PROB_CODE>0</SPEC_ATT_BEH_PROB_CODE>"+
				 "				<SPEC_ATT_ISOLATION_CODE>0</SPEC_ATT_ISOLATION_CODE>"+
				 "				<SPEC_ATT_SCORE/>"+
				 "				<REST_NRSNG_TYPE1_CODE>0</REST_NRSNG_TYPE1_CODE>"+
				 "				<REST_NRSNG_TYPE2_CODE>0</REST_NRSNG_TYPE2_CODE>"+
				 "				<REST_NRSNG_TYPE3_CODE>0</REST_NRSNG_TYPE3_CODE>"+
				 "				<REST_NRSNG_SCORE/>"+
				 "				<GRAND_TOTAL/>"+
				 "				<CATEGORY>S</CATEGORY>"+
				 "			</SERVICE_SECTION_2>"+
				 "			<EXTRA_QUESTIONS>"+
				 "				<TOILET_USE>2</TOILET_USE>"+
				 "				<TRANSFER>2</TRANSFER>"+
				 "				<MENTAL_STAT>2</MENTAL_STAT>"+
				 "				<RESTRAINT>1</RESTRAINT>"+
				 "				<ACTIVITY_PART>2</ACTIVITY_PART>"+
				 "				<CONSULTATION1_FREQ>0</CONSULTATION1_FREQ>"+
				 "				<CONSULTATION1_TYPE>88</CONSULTATION1_TYPE>"+
				 "				<CONSULTATION2_FREQ>0</CONSULTATION2_FREQ>"+
				 "				<CONSULTATION2_TYPE>88</CONSULTATION2_TYPE>"+
				 "				<CONSULTATION3_FREQ>0</CONSULTATION3_FREQ>"+
				 "				<CONSULTATION3_TYPE>88</CONSULTATION3_TYPE>"+
				 "				<MED1_MED>3</MED1_MED>"+
				 "				<MED1_FREQ>1</MED1_FREQ>"+
				 "				<MED2_MED>0</MED2_MED>"+
				 "				<MED2_FREQ>0</MED2_FREQ>"+
				 "				<MED3_MED>0</MED3_MED>"+
				 "				<MED3_FREQ>0</MED3_FREQ>"+
				 "				<MED4_MED>0</MED4_MED>"+
				 "				<MED4_FREQ>0</MED4_FREQ>"+
				 "				<ACW_ACCIDENT>2</ACW_ACCIDENT>"+
				 "				<ACW_CONTRACTURE>2</ACW_CONTRACTURE>"+
				 "				<ACW_WEIGHT_CHG>2</ACW_WEIGHT_CHG>"+
				 "				<PRIM_DIAGNOSIS>"+batchMMQdiag+"</PRIM_DIAGNOSIS>"+
				 "			</EXTRA_QUESTIONS>"+
				 "			<CERT_STATEMENT>"+
				 "				<RN_EVAL>N.SIROIS/P.LAYDEN</RN_EVAL>"+
				 "				<EVAL_DATE>"+submitDT+"</EVAL_DATE>"+
				 "				<ADMINISTRATOR>M.CORBETT</ADMINISTRATOR>"+
				 "				<AFFILIATION>1</AFFILIATION>"+
				 "				<DISCHARGE_REASON/>"+
				 "				<DISCHARGE_DATE/>"+
				 "			</CERT_STATEMENT>"+
				 "		</MEMBER_SUBMIT>"+
				 "	</submitMemberMMQRequest>"+
				 "</submitMemberMMQRequests>";
		
    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(batchMMQ);
    	out.close();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Upload MMQ Batch Files")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("uploadBatchFiles:uploadBatchFilesPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains(pid)) {
				j.click();
				break;
			}
		
		new Select(driver.findElement(By.id("uploadBatchFiles:uploadBatchFilesPanel:transactionType"))).selectByVisibleText("MMQ Questionnaire");
    	driver.findElement(By.id("uploadBatchFiles:uploadBatchFilesPanel:File")).sendKeys(fileName);
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Upload File']")).click();
		Common.getPageError(mmqBatchTarget);
    	Assert.assertTrue(driver.findElement(By.xpath("//form[@id='uploadBatchFilesConfirmation']/table/tbody/tr[2]/td/span")).getText().equals("Your file was successfully received. The following tracking number should be retained for your records."),"MMQ batch File upload did not happen");
    	String trkNo = driver.findElement(By.xpath("//form[@id='uploadBatchFilesConfirmation']/table/tbody/tr[4]/td/span[7]")).getText();
    	
		//Store trkNo, and other info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_MMQ";
		colNames.add("TRKNO");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_MMQ";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_MMQ values ('"+trkNo+"', '"+mem+"', '"+pid+sl+"', '"+submitDT+"', '"+fname+"')";
		statement.executeQuery(sqlStatement);
    	
    	Common.portalLogout();
    }
    
    @Test
    public void test23389() throws Exception{
    	TestNGCustom.TCNo="23389";
    	log("//TC 23389");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1979-08-17";
        adr1="740 MIDDLE STREET";
        city="WEYMOUTH";
        zip="02188";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-60));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		effDt=DT(Common.convertSysdatecustom(-60));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 3
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("3 - Semiannual category change and significant change");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate().substring(0, 2)+"/01/"+Common.convertSysdate().substring(6, 10));
		effDt=DT(Common.convertSysdate().substring(0, 2)+"/01/"+Common.convertSysdate().substring(6, 10));

		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("3 - Totally Dependent");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Category Change"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void test24486() throws Exception{
    	TestNGCustom.TCNo="24486";
    	log("//TC 24486");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1975-04-10";
        adr1="63 SALEM STREET";
        city="BOSTON";
        zip="02113";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-60));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		effDt=DT(Common.convertSysdatecustom(-60));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//End MMQ using Elig XML
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"MAZDAZ\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<nursingfacility id_provider=\"110025810A\" dte_discharge=\""+fileSysdateCustom(-59)+"\" dte_loc_end=\""+fileSysdateCustom(-59)+"\" cde_reason_discharge=\"HS\" />\n</EligibilityRequest>");

		mem = getCustomMemebr(xml);
		
		//Verify Panels
		memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals(Common.convertSysdatecustom(-59)),"LoC end date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_dischargeDate")).getText().equals(Common.convertSysdatecustom(-59)),"LoC discharge date mismatch");

		
		
    }
    
    @Test
    public void test26277() throws Exception{
    	TestNGCustom.TCNo="26277";
    	log("//TC 26277");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-06-11";
        adr1="1 IKEA WAY";
        city="STOUGHTON";
        zip="02072";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-365));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		effDt=DT(Common.convertSysdatecustom(-365));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//End MMQ using Elig XML with end date after MMQ cycle
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"MAZDAZ\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<nursingfacility id_provider=\"110025810A\" dte_discharge=\""+fileSysdateCustom(0)+"\" dte_loc_end=\""+fileSysdateCustom(0)+"\" cde_reason_discharge=\"HS\" />\n</EligibilityRequest>");

		mem = getCustomMemebr(xml);
		
        //Verify Warning message
        if (!(errorCode.equals("3040")))
    		Assert.assertTrue(false, "Did not get Error Code '3040'");
		
        if (!(errorMessage.equals("LOC End Date cannot be past MMQ Cycle")))
    		Assert.assertTrue(false, "Did not get Error message 'LOC End Date cannot be past MMQ Cycle'. Instead got "+errorMessage);
		
        //Verify the LoC end date is not updated on base
        validateMMQ(mem,loc,score);
		
    }
    
    @Test
    public void test26278() throws Exception{
    	TestNGCustom.TCNo="26278";
    	log("//TC 26278");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-06-11";
        adr1="1 IKEA WAY";
        city="STOUGHTON";
        zip="02072";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-365));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		effDt=DT(Common.convertSysdatecustom(-365));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		Common.cancelAll();
		
		//Change MMQ End date to future
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_providerID")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("The LOC end date cannot be greater than the end of the selected MMQ reporting cycle."), "Did not get Error Message 'The LOC end date cannot be greater than the end of the selected MMQ reporting cycle.'");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-364));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		Common.saveAll();
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals(Common.convertSysdatecustom(-364)), "LoC end date did not get updated correctly");

		//Change eff/end dates to be out of current cycle
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_providerID")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(1));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("This LOC end date cannot be accepted because the provider has not submitted a valid MMQ that covers this entire LOC period."), "Did not get Error Message 'This LOC end date cannot be accepted because the provider has not submitted a valid MMQ that covers this entire LOC period.'");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-363));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		Common.saveAll();
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals(Common.convertSysdatecustom(-363)), "LoC end date did not get updated correctly");
		
		//Add overlapping NF segment for same provider
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-364));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-364));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("The same Provider ID's date range segments can not overlap."), "Did not get Error Message 'The same Provider ID's date range segments can not overlap.'");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		Common.saveAll();
		
    }
    
    @Test
    public void test22550() throws Exception{
    	TestNGCustom.TCNo="22550";
    	log("//TC 22550");
    	
    	String[] prov = new String[2];
    	String[] loc = new String[3];
    	
    	prov[0] = "110025810";
    	prov[1] = "110025765";
    	loc[0] = "NF - NURSING FACILITY";
    	loc[1] = "3S - Level III ICF/MR Type C (State School)";
    	loc[2] = "NF - NURSING FACILITY";


    	
    	for (int i=0;i<2;i++) {
        	//Get Member ID
        	otherid = Common.generateRandomTaxID();
        	fname=Common.generateRandomName();
        	casenum=Common.generateRandomTaxID();
            ssn="1"+Common.generateRandomTaxID().substring(0,8);
            dob ="1971-1"+i+"-11";
            adr1="50"+i+" COMMONWEALTH AV";
            city="BOSTON";
            zip="02215";
            dep="00";
            aid="40";
            agency="MHO";
            String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
            
            log(" Member"+(i+1)+": "+mem);
        	
            //Search Member and Add NF/3S
            memberSearch(mem);
        	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(prov[0]);
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
    		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText(loc[i]);
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-365));
    		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
    		Common.saveAll();
    		
    		//Add 3S/NF with same provider
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(prov[0]);
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
    		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText(loc[i+1]);
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
    		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
    		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("The same Provider ID's date range segments can not overlap."), "Did not get Error Message 'The same Provider ID's date range segments can not overlap.'");

    		//Add 3S/NF with a different Provider
        	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(prov[1]);
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
    		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("Overlapping LOC Dates greater than one day are not allowed for different Provider ID/Svc Locs"), "Did not get Error Message 'Overlapping LOC Dates greater than one day are not allowed for different Provider ID/Svc Locs'");

    		//End NF/3S and save both records
        	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_status")).click();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-360));
    		Common.saveAll();
    	}

    }
    
    @Test
    public void test22551() throws Exception{
    	TestNGCustom.TCNo="22551";
    	log("//TC 22551");
    	
    	String idM[] = new String[4];
    	casenum=Common.generateRandomTaxID();
    	
    	for (int i=0;i<4;i++) {
        	//Get Member ID
        	otherid = Common.generateRandomTaxID();
        	fname="A"+i+Common.generateRandomName();
            ssn="1"+Common.generateRandomTaxID().substring(0,8);
            dob ="195"+i+"-0"+(i+1)+"-1"+i;
            adr1="40"+i+" COMMONWEATH AV";
            city="BOSTON";
            zip="02115";
            dep="0"+i;
            aid="0"+(i+2);
            agency="DSS";
            idM[i] = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
            
            //End Elig 08
            caseStatus="4";
            endElig = true;
            idM[i] = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
            
            log(" Member"+(i+1)+": "+idM[i]);
        
    	}
    	
    	//Reopen last member'e elig
    	caseStatus="2";
    	eligStatus="2";
    	idM[3] = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        memberSearch(idM[3]);
       	//Click on Member Case History link
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
        //Click on case number
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
        //verify all but 1 eligs are in closed status
    	for (int i=0;i<3;i++) {
    		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_"+i+":MemberCaseDataBean_ColValue_medicaidID")).getText().equals(idM[i]), "Member "+(i+1)+" '"+idM[i]+"' not found in member case history");
    		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_"+i+":MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"), "Member "+(i+1)+" '"+idM[i]+"' elig status in not closed");
    	}
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_3:MemberCaseDataBean_ColValue_medicaidID")).getText().equals(idM[3]), "Member "+(3+1)+" '"+idM[3]+"' not found in member case history");
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_3:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"), "Member "+(3+1)+" '"+idM[3]+"' elig status in not reopened");
  
    }
    
    @Test
    public void test22552() throws Exception{
    	TestNGCustom.TCNo="22552";
    	log("//TC 22552");
    	
    	//Get Member ID
    	otherid = "1"+Common.generateRandomTaxID().substring(0, 8);
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-06-11";
        adr1="115 WATER ST";
        city="BOSTON";
        zip="02109";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Store Agency ID for comparison
        String otherid0 = otherid;
        //Change Last name and Agency ID
        lastName = "Q";
    	otherid = "2"+Common.generateRandomTaxID().substring(0, 8);
        String mem1 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);


        
        //verify that we got aid cat added to same member
        if (!(mem.equals(mem1)))
        	Assert.assertTrue(false, "Same member not updated");
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("Q, "+fname),"Name Mismatch");
        //Verify 2 agency IDs are present
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(otherid0),"The First other id '"+otherid0+"' is missing");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyId")).getText().equals(otherid),"The Second other id '"+otherid+"' is missing");
        //Verify Previous Name
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n123")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataNamePanel:NameXrefList_0:NameXrefBean_ColValue_lastName")).getText().equals("MAZDAZ"),"Previous last name mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataNamePanel:NameXrefList_0:NameXrefBean_ColValue_firstName")).getText().equals(fname),"First name mismatch");

    }
    
    
    @Test
    public void test22553_23372() throws Exception{
    	TestNGCustom.TCNo="22553_23372";
    	log("//TC 22553_23372");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1972-07-17";
        adr1="348 CONGRESS STREET";
        city="BOSTON";
        zip="02228";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Submit 2nd file ending aid cat 40, and adding aid cat TV
        dob ="1975-07-17";
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        
        String 	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"MAZDAZ\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"4\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\"01\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" dte_end_elig=\""+fileSysdateCustom(-1)+"\" family_size=\"07\" />"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"03\" cde_elig_status=\"1\" cde_line=\"01\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+fileSysdateCustom(0)+"\" dte_begin_elig=\""+fileSysdateCustom(0)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);

        //verify that we got same member
        if (!(mem.equals(Mid)))
        	Assert.assertTrue(false, "Same member not updated");
        
        log("Member: "+mem);
        
      //Search Member
      memberSearch(mem);
      
      Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(ssn.substring(0, 3)+"-"+ssn.substring(3, 5)+"-"+ssn.substring(5, 9)),"SSN Mismatch");

      driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"Benefit Plan Mismatch");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Benefit Plan effective date Mismatch");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Benefit Plan end date Mismatch");
      	
      driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("03 SSI Disabled"),"Aid Cat Mismatch. New Aid cat was not added");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"New Aid Cat effective date Mismatch");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"New Aid Cat end date Mismatch");
      
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_aidDes")).getText().equals("40 Family"),"Aid Cat Mismatch. Old aid cat not present");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob)))," Old Aid Cat effective date Mismatch");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdatecustom(1)),"Old Aid Cat end date Mismatch");
      
      //Verify Dependent number
      driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).click();
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_DepNumber")).getAttribute("value").equals("01"),"New Dependent number mismatch");

      driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_aidDes")).click();
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_DepNumber")).getAttribute("value").equals("00"),"Old Dependent number mismatch");

      //Verify Case history panel
      driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();

      for (int i=0;i<2;i++) {
          driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_"+i+":RecipientCaseBean_ColValue_caseNumber")).click();

          //Sort by aid cat descending
          driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList:MemberCaseDataBean_ColHeader_aidCategoryCode")).click();
          driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList:MemberCaseDataBean_ColHeader_aidCategoryCode")).click();

          
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Previous Aid cat not closed");
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("1 - New"),"New Aid cat not opened");

          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_aidCategoryCode")).getText().equals("40"),"Previous Aid cat 40 not present");
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_aidCategoryCode")).getText().equals("03"),"New Aid cat 03 not present");
          
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_depNumber")).getText().equals("00"),"Previous dependent number not present");
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_depNumber")).getText().equals("01"),"New dependent number not present");

      }
      
    }
    
    @Test
    public void test23365() throws Exception{
    	TestNGCustom.TCNo="23365";
    	log("//TC 23365");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-06-11";
        adr1="115 WATER STREET";
        city="BOSTON";
        zip="02109";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		
		//Add Patient Pay
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n125")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiability_NewButtonClay:PatLiabilityList_newAction_btn")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatntLiabilityAmount")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatntLiabilityAmount")).sendKeys("1200");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatLiabilityCode"))).selectByVisibleText("Nursing Home/ICF/Chronic");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();

		//Save both records
		Common.saveAll();
		
		//Click on both records
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_0:PatLiabilityBean_ColValue_status")).click();
		
    }
    
    @Test
    public void test23373() throws Exception{
    	TestNGCustom.TCNo="23373";
    	log("//TC 23373");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1983-02-10";
        adr1="138 NEWBURY STREET";
        city="BOSTON";
        zip="02116";
        dep="00";
        aid="BB";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member
        memberSearch(mem);
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("CCRLM COMMONWEALTH CARE WITH LIMITED"),"Benefit Plan Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Benefit Plan effective date Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Benefit Plan end date Mismatch");
        	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("BB SF Commonwealth Care + Limited LE 100% FPL"),"Aid Cat Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid Cat effective date Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid Cat end date Mismatch");
    }
    
    @Test
    public void test23375a() throws Exception{
    	TestNGCustom.TCNo="23375a";
    	log("//TC 23375a");
    	
    	//Get Parent Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-5475); //15 year old
        adr1="3 CENTER PLZ";
        city="BOSTON";
        zip="02108";
        String nameContact=Common.generateRandomName();
        String nameCare=Common.generateRandomName();
        String idContact=Common.generateRandomTaxID();


    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"DSS\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"BURNS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BURNS\" num_case=\""+casenum+"\"/>\n"+
				"<contacts id_contact=\""+idContact+"\" nam_contact=\""+nameContact+"\" cde_contact_type=\"DSS\" nam_care_of=\""+nameCare+"\" adr_street_1=\"101 FEDERAL STREET\" adr_street_2=\" \" adr_city=\"BOSTON\" adr_state=\"MA\" adr_zip_code=\"02110\" dte_begin_contact=\""+fileSysdateCustom(0)+"\" dte_end_contact=\"2299-12-31\"/>\n"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"06\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");    	
        String mem = getCustomMemebr(xml);
        
        log("Member: "+mem);

		//Search Member
        memberSearch(mem);
        
        //Click HIPAA Privacy subsystem tab
        driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_HP")).click();
        driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberSearch")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:HpRecipientSearchBean_CriteriaPanel:HpMemberSearch_MemberID")).sendKeys(mem);
        Common.search();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchResults_0:_id13")).click();
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(mem),"Member ID Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[3]/td[2]")).getText().equals("BURNS, "+fname),"Name Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[6]/td[2]")).getText().equals(city+"  MA  "+zip+"-0000"),"City/Sate/Zip Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[7]/td[2]")).getText().equals(dob.substring(5, 7)+"/"+dob.substring(8, 10)+"/"+dob.substring(0, 4)),"DoB Mismatch");

        //Select Member Auth REP/PSI
        driver.findElement(By.id("MMISForm:MMISBodyContent:HPMemberNavigatorPanel:HPMemberNavigatorId:ITM_n3")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_caseIDNumber")).getText().equals(casenum),"Case Number mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_hhName")).getText().equals("BURNS                "+fname),"Name mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_psiName")).getText().equals(nameContact),"Name Contact mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_careOf")).getText().equals(nameCare),"Name Care of mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_contactType")).getText().equals("DSS"),"Agency mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"Date Received mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_endDate")).getText().equals("12/31/2299"),"End Date mismatch");
        
        String adrcityzip= (driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_cityStateZip")).getText());
        Assert.assertTrue(adrcityzip.equals("BOSTON                         MA 02110"),"City/Sate/Zip1 Mismatch");

        //Click on the record and verify data
        driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_caseIDNumber")).click();
        
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HPHouseHdrInformationPanel:HPHouseHdrInfoBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals("BURNS, "+fname),"Name Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HPHouseHdrInformationPanel:HPHouseHdrInfoBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[3]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HPHouseHdrInformationPanel:HPHouseHdrInfoBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(city+"             / MA / "+zip+"-0000"),"City/Sate/Zip Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HPHouseHdrInformationPanel:HPHouseHdrInfoBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(casenum),"Case ID mismatch");
        
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_mbrNameFull")).getText().equals("BURNS, "+fname),"Name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_conName")).getText().equals(nameContact),"Name Contact Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_mbrIdMedicaid")).getText().equals(mem),"Member ID mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_mbrDOB")).getText().equals(dob.substring(5, 7)+"/"+dob.substring(8, 10)+"/"+dob.substring(0, 4)),"DoB Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"Date Effective mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_contactType")).getText().equals("DSS"),"Agency mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_endDate")).getText().equals("12/31/2299"),"Date End mismatch");

//        //Select Member subsystem
//	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
//        //Enroll Child member
//    	otherid = Common.generateRandomTaxID();
//    	fname=Common.generateRandomName();
//        ssn="1"+Common.generateRandomTaxID().substring(0,8);
//        dob =fileSysdateCustom(-60); //less than 1 year old
//        adr1="3 CENTER PLZ";
//        city="BOSTON";
//        zip="02108";
//        
//		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
//				"id_other=\""+otherid+"\" id_source=\"DSS\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"BURNS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
//				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BURNS\" num_case=\""+casenum+"\"/>\n"+
//				"<contacts id_contact=\""+idContact+"\" nam_contact=\""+nameContact+"\" cde_contact_type=\"DSS\" nam_care_of=\""+nameCare+"\" adr_street_1=\"101 FEDERAL STREET\" adr_street_2=\" \" adr_city=\"BOSTON\" adr_state=\"MA\" adr_zip_code=\"02110\" dte_begin_contact=\""+fileSysdateCustom(0)+"\" dte_end_contact=\"2299-12-31\"/>\n"+
//				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"06\" cde_elig_status=\"1\" cde_line=\"01\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");    	
//        String memChild = getCustomMemebr(xml);
        
        //Store Member in DB for EPSDT letter for Day 2
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_EPSDT_LETTER";
		colNames.add("MEMBER");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_EPSDT_LETTER";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_EPSDT_LETTER values ('"+mem+"')";
		statement.executeQuery(sqlStatement);
		
    }
    
    @Test
    public void test23376a() throws Exception{
    	TestNGCustom.TCNo="23376a";
    	log("//TC 23376a");
    	
    	//Get Parent Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-6935); 
        adr1="3 CENTER PLZ";
        city="BOSTON";
        zip="02108";
        String nameContact=Common.generateRandomName();
        String nameCare=Common.generateRandomName();
        String idContact=Common.generateRandomTaxID();


    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"DSS\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"ELGJD012\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"ELGJD012\" num_case=\""+casenum+"\"/>\n"+
				"<contacts id_contact=\""+idContact+"\" nam_contact=\""+nameContact+"\" cde_contact_type=\"DSS\" nam_care_of=\""+nameCare+"\" adr_street_1=\"101 FEDERAL STREET\" adr_street_2=\" \" adr_city=\"BOSTON\" adr_state=\"MA\" adr_zip_code=\"02110\" dte_begin_contact=\""+fileSysdateCustom(0)+"\" dte_end_contact=\"2299-12-31\"/>\n"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"02\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");    	
        String mem = getCustomMemebr(xml);

        log("Member: "+mem);

        //Enroll 2nd member with same case, elig and dep 
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-60); 
        adr1="3 CENTER PLZ";
        city="BOSTON";
        zip="02108";
        
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"DSS\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"ELGJD012\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"ELGJD012\" num_case=\""+casenum+"\"/>\n"+
				"<contacts id_contact=\""+idContact+"\" nam_contact=\""+nameContact+"\" cde_contact_type=\"DSS\" nam_care_of=\""+nameCare+"\" adr_street_1=\"101 FEDERAL STREET\" adr_street_2=\" \" adr_city=\"BOSTON\" adr_state=\"MA\" adr_zip_code=\"02110\" dte_begin_contact=\""+fileSysdateCustom(0)+"\" dte_end_contact=\"2299-12-31\"/>\n"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"02\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");    	
        String memChild = getCustomMemebr(xml);
        if (!(errorMessage.equals("Case/Aid Cat/Dep NUM combo already exists on DB for a different Member ID")))
    		Assert.assertTrue(false, "Did not get Warning message 'Case/Aid Cat/Dep NUM combo already exists on DB for a different Member ID'");
        
        //Store  Member in DB for ELGJD012 error report
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_MEMBER_ELGJD012";
		colNames.add("PARENT_MEMBER");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_MEMBER_ELGJD012";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_MEMBER_ELGJD012 values ('"+mem+"', '"+Common.convertSysdatecustom(1)+"', '"+"ELGJD012"+"', '"+fname+"', '"+ssn+"', '"+dateXMLtoPanel(dob)+"', '"+casenum+"', '"+"02"+"', '"+"00"+"')";
		statement.executeQuery(sqlStatement);
		
    }
    
    @Test
    public void test23388a() throws Exception{
    	TestNGCustom.TCNo="23388a";
    	log("//TC 23388a");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1977-04-03";
        adr1="1297 BROADWAY";
        city="SOMERVILLE";
        zip="02144";
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Store  Member in DB for ELGJD040 member ID card report
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_MEMBER_ELGJD040";
		colNames.add("MEMBER");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_MEMBER_ELGJD040";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_MEMBER_ELGJD040 values ('"+Mid+"', '"+fname+"', '"+Common.convertSysdatecustom(1)+"', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
        
    }
    
    @Test
    public void test24488() throws Exception{
    	TestNGCustom.TCNo="24488";
    	log("//TC 24488");
    	
    	sqlStatement="Select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, e.agency_id  from T_RE_BASE b, t_re_other_id e where b.ind_active = 'Y' and b.cde_sex='F' and exists (select p.sak_recip from T_RE_ID_CARD p where b.sak_recip=p.sak_recip group by p.sak_recip having count(sak_recip) = 1 ) and b.sak_recip = e.sak_Recip and e.cde_agency = 'MHO' and e.end_date = '22991231' and b.nam_first NOT LIKE '%-%' and b.adr_state = 'MA' and rownum<2";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colNames.add("AGENCY_ID");   //8
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//get member ID card details
        memberSearch(colValues.get(0));
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		String dteIssue = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText();
		String idAction = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText();
		String issueRsn = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText();
		String clerkID = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText();
		String source = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText();
		String dteReq = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText();
		
		
		//change last name
    	otherid = colValues.get(8).trim();
    	fname=colValues.get(3).trim();
    	lastName = "SMITH";
    	String lName= lastName; //Store lastname again in different variable because it will change to P after xml is executed
    	casenum= Common.generateRandomTaxID();
        ssn=colValues.get(1).trim();
        dob =colValues.get(2).trim().substring(0, 4)+"-"+colValues.get(2).trim().substring(4, 6)+"-"+colValues.get(2).trim().substring(6, 8);
        adr1=colValues.get(5).trim();
        city=colValues.get(6).trim();
        zip=colValues.get(7).trim();
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member from DB: "+colValues.get(0));
        log("Member generated from query: "+Mid);

        
        if (!(Mid.equals(colValues.get(0))))
        	  Assert.assertTrue(false,"Member generated for last name change is not the same as one selected from DB");
               
        //Verify member name has changed, and verify no change in ID card info
        memberSearch(colValues.get(0));
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(lName+", "+fname),"Special char addition to First name failed");
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		if (!(driver.findElements(By.xpath("//span[contains(@id, 'IDCardBean_ColValue_issueDate')]")).size()==1))
      	  Assert.assertTrue(false,"Looks like another row for member ID card got added");

        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText().equals(dteIssue),"dteIssue on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText().equals(idAction),"idAction on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText().equals(issueRsn),"issueRsn on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText().equals(clerkID),"clerkID on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText().equals(source),"source on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText().equals(dteReq),"dteReq on ID card mismatch");

    }
    
    @Test
    public void test23382() throws Exception{
    	TestNGCustom.TCNo="23382";
    	log("//TC 23382");
    	
    	Common.portalLogin();
    	
    	//Get inactive and active member
    	sqlStatement = "select binac.id_medicaid , bac.id_medicaid ACTM from t_re_base binac, t_re_base bac, T_RECIP_LINK_XREF xref where binac.sak_recip = xref.SAK_RCP_PURGED  and bac.sak_recip = xref.SAK_RECIP and xref.CDE_STATUS = 'L' and rownum = 1";
    	colNames.add("ID_MEDICAID");
    	colNames.add("ACTM");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String inactMem = colValues.get(0);
    	String actMem = colValues.get(1);
    	log("Inactive member: "+inactMem+" Active member: "+actMem);

    	//Search for inactive member elig
    	EVS.RMreset(sqlStatement);
    	
    	//Verify active member is returned
    	Assert.assertTrue(driver.findElement(By.cssSelector("td.leftAlign > span")).getText().equals("Click on the Date Range to view Eligibility information for Member ID "+actMem),"The elig check did not return active member");
    	
    	Common.portalLogout();
    }
    
    @Test
    public void test23381() throws Exception{
    	TestNGCustom.TCNo="23381";
    	log("//TC 23381");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1970-10-12";
        adr1="120 UNION PART STREET";
        city="BOSTON";
        zip="02118";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		effDt=DT("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 3
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("5 - Semiannual no change");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys("09/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		effDt=DT("09/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		String loc1 = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score1 = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		//Verify we got same MMQ category value and MMQ score
		Assert.assertTrue(loc1.equals(loc), "loc mismatch");
		Assert.assertTrue(score1.equals(score), "score mismatch");
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	if (!(driver.findElements(By.xpath("//span[contains(@id, 'LevelOfCareBean_ColValue_endDate')]")).size()==1))
    		Assert.assertTrue(false, "Another row got added for LoC");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	if (Integer.parseInt(Common.convertSysdate().substring(6, 10))%4==0) //Leap year check
    		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals("02/29/"+Common.convertSysdate().substring(6, 10)), "LoC end date not updated");
    	else
    		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals("02/28/"+Common.convertSysdate().substring(6, 10)), "LoC end date not updated");
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("No Change"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void testunix() throws Exception{
    	TestNGCustom.TCNo="unix";
		String command, error;

		//Get Desired Filename
		command = "ls -ltr /customer/dsma/mod/rpt/eld04006.rpt.* | grep '"+Common.monthUNIX("08/09/2013")+"  "+Common.dayUNIX("08/09/2013")+"'";
		error = "There was no report file found";
		String fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);

		//Verify member data in file
		command = "grep 100208588804 "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired member";
		String outputText = Common.connectUNIX(command, error);

		Assert.assertTrue(outputText.contains("100208588804"), "Member id not found in file");
		Assert.assertTrue(outputText.contains("TEST"), "Member First name not found in file");
		Assert.assertTrue(outputText.contains("INVALID"), "Member Last name not found in file");
    }
    
    @Test
    public void test32960a() throws Exception{
    	TestNGCustom.TCNo="32960a";
    	log("//TC 32960a");
    	
    	//Get 1st Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1966-03-09";
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        String inactMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1966-02-09";
        adr1="729 BRIDGE STREET";
        city="WEYMOUTH";
        zip="02191";
        dep="00";
        aid="08";
        agency="MHO";
        String actMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Inactive Member: "+inactMem+" Active Member: "+actMem);
        
        //Add clinical profile to inactive member
        String ServiceRequestCode="PACE";
        String AssessmentDate=Common.convertSysdate();
        String EvalReason="N";
        String AssessmentReason="1";
        String PaceApprovalDate=Common.convertSysdate();

        memberSearch(inactMem);
    	driver.findElement(By.linkText("Clinical Information")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		new Select(driver.findElement(By.xpath("//select[contains(@id,'ServiceRequestCode')]"))).selectByValue(ServiceRequestCode);
		driver.findElement(By.xpath("//input[contains(@id,'AssessmentDate')]")).sendKeys(AssessmentDate);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'EvalReason')]"))).selectByValue(EvalReason);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'AssessmentReason')]"))).selectByValue(AssessmentReason);
		driver.findElement(By.xpath("//input[contains(@id,'PaceApprovalDate')]")).sendKeys(PaceApprovalDate);
		Common.save();
        log("Clinical information data for Inactive member as below");
        log("ServiceRequestCode: "+ServiceRequestCode+" AssessmentDate: "+AssessmentDate+" EvalReason: "+EvalReason+" AssessmentReason: "+AssessmentReason+" PaceApprovalDate: "+PaceApprovalDate);

		LoginCheck();
        
        //Link 2 members
        memberSearch(actMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_Navi1")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.xpath("//img[@alt='Link ID From pop-up search']")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:CurrentID")).sendKeys(inactMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:SEARCH")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchResults_0:column1Value")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();

        //Store Member info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		//INACTIVE MEMBER
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='Inactive member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='Inactive member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+inactMem+"', 'Inactive member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//ACTIVE MEMBER
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='active member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='active member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+actMem+"', 'active member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//CLINICAL INFORMATION
		//ServiceRequestCode
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='ServiceRequestCode'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='ServiceRequestCode'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+ServiceRequestCode+"', 'ServiceRequestCode', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//AssessmentDate
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='AssessmentDate'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='AssessmentDate'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+AssessmentDate+"', 'AssessmentDate', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//EvalReason
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='EvalReason'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='EvalReason'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+EvalReason+"', 'EvalReason', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//AssessmentReason
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='AssessmentReason'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='AssessmentReason'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+AssessmentReason+"', 'AssessmentReason', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//PaceApprovalDate
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='PaceApprovalDate'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='PaceApprovalDate'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+PaceApprovalDate+"', 'PaceApprovalDate', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
				
    }
    
//    @Test
//    public void test32959a() throws Exception{
//    	TestNGCustom.TCNo="32959a";
//    	log("//TC 32959a - Member link with ICO optout Test Case");
//   
//    	int ageDays1=-23360; //64 y.o. must be less than 65 for ico
//    	int ageDays2=-23360+35;
//
//    	
//    	//Get 1st Member ID
//    	otherid = Common.generateRandomTaxID();
//    	fname=Common.generateRandomName();
//    	casenum=Common.generateRandomTaxID();
//        ssn="1"+Common.generateRandomTaxID().substring(0,8);
//        dob =fileSysdateCustom(ageDays1);
//        adr1="101 FEDERAL ST";
//        city="BOSTON";
//        zip="02110";
//        dep="00";
//        aid="03";
//        agency="MHO";
//        String inactMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//                
//        //Add aid cat 50 for COM BP
//        aid="50";
//        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//		Assert.assertTrue(Mid.equals(inactMem), "Aid cat 50 not added to same member");
//		
//        String dob1=dob; //will be used later in this tc to add medicare
//        
//    	//Get 2nd Member ID
//    	otherid = Common.generateRandomTaxID();
//    	fname=Common.generateRandomName();
//    	casenum=Common.generateRandomTaxID();
//        ssn="1"+Common.generateRandomTaxID().substring(0,8);
//        dob =fileSysdateCustom(ageDays2);
//        adr1="99 FEDERAL ST";
//        city="BOSTON";
//        zip="02110";
//        dep="00";
//        aid="03";
//        agency="MHO";
//        String actMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//        
//        //Add aid cat 50 for COM BP
//        aid="50";
//        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//		Assert.assertTrue(Mid.equals(actMem), "Aid cat 50 not added to same member");
//		
//        String dob2=dob; //will be used later in this tc to add medicare
//
//        
//        log("Inactive Member: "+inactMem+" Active Member: "+actMem);
//        
//        String medicareID1=Common.generateRandomTaxID();
//        String medicareID2=Common.generateRandomTaxID();
//
//        //Add medicare A and B to inactive member
//        memberSearch(inactMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	
//    	//Medicare ID
//    	driver.findElement(By.linkText("Medicare ID")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		driver.findElement(By.xpath("//input[contains(@id,'MedicareID')]")).sendKeys(medicareID1);
//		Common.save();
//		
//		//Medicare A
//		LoginCheck();
//        memberSearch(inactMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	driver.findElement(By.linkText("Medicare A Coverage")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'MedicareID')]"))).selectByIndex(1);
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys("01/01/"+getEligeffDT(dob1).substring(0, 4));
//		driver.findElement(By.xpath("//input[contains(@id,'EndDate')]")).sendKeys("12/31/2299");
//		driver.findElement(By.xpath("//input[contains(@id,'HIOptionCodeSearch')]")).sendKeys("E");
//		driver.findElement(By.xpath("//input[contains(@id,'PremPayorCodeSearch')]")).sendKeys("CIVIL");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'CdeEntitleRsn')]"))).selectByValue("5");
//		Common.save();
//		
//		//Medicare B
//		LoginCheck();
//        memberSearch(inactMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	driver.findElement(By.linkText("Medicare B Coverage")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'MedicareID')]"))).selectByIndex(1);
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys("01/01/"+getEligeffDT(dob1).substring(0, 4));
//		driver.findElement(By.xpath("//input[contains(@id,'EndDate')]")).sendKeys("12/31/2299");
//		driver.findElement(By.xpath("//input[contains(@id,'SMIOptionCodeSearch')]")).sendKeys("N");
//		driver.findElement(By.xpath("//input[contains(@id,'PremPayorCodeSearch')]")).sendKeys("CIVIL");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'CdeEntitleRsn')]"))).selectByValue("5");
//		Common.save();
//		
//		log("Medicare A and B added to Inactive Member. Medicare id: "+medicareID1);
//		
//	    //Add medicare A and B to active member
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	
//    	//Medicare ID
//    	driver.findElement(By.linkText("Medicare ID")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		driver.findElement(By.xpath("//input[contains(@id,'MedicareID')]")).sendKeys(medicareID2);
//		Common.save();
//		
//		//Medicare A
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	driver.findElement(By.linkText("Medicare A Coverage")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'MedicareID')]"))).selectByIndex(1);
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys("01/01/"+getEligeffDT(dob2).substring(0, 4));
//		driver.findElement(By.xpath("//input[contains(@id,'EndDate')]")).sendKeys("12/31/2299");
//		driver.findElement(By.xpath("//input[contains(@id,'HIOptionCodeSearch')]")).sendKeys("E");
//		driver.findElement(By.xpath("//input[contains(@id,'PremPayorCodeSearch')]")).sendKeys("CIVIL");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'CdeEntitleRsn')]"))).selectByValue("5");
//		Common.save();
//		
//		//Medicare B
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	driver.findElement(By.linkText("Medicare B Coverage")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'MedicareID')]"))).selectByIndex(1);
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys("01/01/"+getEligeffDT(dob2).substring(0, 4));
//		driver.findElement(By.xpath("//input[contains(@id,'EndDate')]")).sendKeys("12/31/2299");
//		driver.findElement(By.xpath("//input[contains(@id,'SMIOptionCodeSearch')]")).sendKeys("N");
//		driver.findElement(By.xpath("//input[contains(@id,'PremPayorCodeSearch')]")).sendKeys("CIVIL");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'CdeEntitleRsn')]"))).selectByValue("5");
//		Common.save();
//		
//		log("Medicare A and B added to Active Member. Medicare id: "+medicareID2);
//		
//		//Add ICO opt out to Inactive member
//		String icoOptoutEffDt= Common.convertSysdate();
//		LoginCheck();
//        memberSearch(inactMem);
//    	driver.findElement(By.linkText("ICO Opt Out")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).clear();;
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys(icoOptoutEffDt);
//		Common.save();
//		log("ICO opt out added to (FROM) member, start date: "+icoOptoutEffDt+" ,End date: 12/31/2299");
//
//		//Add ICO assignment to Active member
//		String ICOProv = "110031450";
//		String ICOSvcLoc = "B";
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.linkText("PMP Assignment History - SU")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'McProgramList')]"))).selectByValue("ICO");
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).clear();
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys(Common.convertSysdatecustom(-35));
//		driver.findElement(By.xpath("//input[contains(@id,'PmpSvcLoc')]")).sendKeys(ICOProv);
//		driver.findElement(By.xpath("//input[contains(@id,'RePmpHisDistanceSearchHis')]")).sendKeys(ICOSvcLoc);
//		//Somehow, the ICOProv is not getting entered sometimes here, so we enter again
//		driver.findElement(By.xpath("//input[contains(@id,'PmpSvcLoc')]")).clear();
//		driver.findElement(By.xpath("//input[contains(@id,'PmpSvcLoc')]")).sendKeys(ICOProv);
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'StartReasonDropDownEntries')]"))).selectByValue("80");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'StopReasonDropDownEntries')]"))).selectByValue("80");
//		Common.save();
//		String mcEffdt = driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
//		log("ICO assignment added to (TO) member, start date: "+mcEffdt+" ,End date: 12/31/2299");
//
//        //Link 2 members
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_Navi1")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		driver.findElement(By.xpath("//img[@alt='Link ID From pop-up search']")).click();
//    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:CurrentID")).sendKeys(inactMem);
//    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:SEARCH")).click();
//    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchResults_0:column1Value")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
//		Common.saveAll();
//
//        //Store Member info in DB for Day 2
//		Statement statement = Common.connection1.createStatement();
//		//INACTIVE MEMBER
//		sqlStatement = "select * from r_day2 where TC = '32959' and DES='Inactive member'";
//		colNames.add("ID");
//		colValues = Common.executeQuery1(sqlStatement, colNames);
//		if (!(colValues.get(0).equals("null"))) {
//			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='Inactive member'";
//			statement.executeQuery(sqlStatement);
//		}
//		sqlStatement = "insert into  r_day2 values ('32959', '"+inactMem+"', 'Inactive member', '"+Common.convertSysdate()+"')";
//		statement.executeQuery(sqlStatement);
//		
//		//ACTIVE MEMBER
//		sqlStatement = "select * from r_day2 where TC = '32959' and DES='active member'";
//		colNames.add("ID");
//		colValues = Common.executeQuery1(sqlStatement, colNames);
//		if (!(colValues.get(0).equals("null"))) {
//			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='active member'";
//			statement.executeQuery(sqlStatement);
//		}
//		sqlStatement = "insert into  r_day2 values ('32959', '"+actMem+"', 'active member', '"+Common.convertSysdate()+"')";
//		statement.executeQuery(sqlStatement);
//		
//		//icoOptoutEffDt
//		sqlStatement = "select * from r_day2 where TC = '32959' and DES='icoOptoutEffDt'";
//		colNames.add("ID");
//		colValues = Common.executeQuery1(sqlStatement, colNames);
//		if (!(colValues.get(0).equals("null"))) {
//			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='icoOptoutEffDt'";
//			statement.executeQuery(sqlStatement);
//		}
//		sqlStatement = "insert into  r_day2 values ('32959', '"+icoOptoutEffDt+"', 'icoOptoutEffDt', '"+Common.convertSysdate()+"')";
//		statement.executeQuery(sqlStatement);
//
//				
//    }
    
    @Test
    public void test32959a() throws Exception{
    	TestNGCustom.TCNo="32959a";
    	log("//TC 32959a - Member link with ICO optout Test Case");
   
    	int ageDays1=-16060; //around 40-45
    	int ageDays2=-14020;

    	//Get 1st Member ID
    	sqlStatement="select b.id_medicaid from t_re_base b, t_re_opt_out o "+
    			"where b.sak_recip=o.sak_recip and ind_active='Y' and dte_death='0' "+
    			"and o.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between o.dte_effective and o.dte_end "+
    			"and b.cde_sex='F' and dte_birth between '"+DBSysdateCustom(ageDays1)+"' and '"+DBSysdateCustom(ageDays2)+"' "+
    			"and rownum < 2";
    	
    	System.out.println(sqlStatement);
    	    	
    	colNames.add("ID_MEDICAID");

    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String inactMem = colValues.get(0);
        
    	//Get 2nd Member ID
    	sqlStatement="select b.id_medicaid, p.dte_effective, p.dte_end from t_re_base b, t_re_pmp_assign p "+
    			"where b.sak_recip=p.sak_recip and ind_active='Y' and dte_death='0' "+
    			"and p.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between p.dte_effective and p.dte_end "+
    			"and p.sak_pub_hlth=91 "+
    			"and b.cde_sex='F' and b.dte_birth between '"+DBSysdateCustom(ageDays1)+"' and '"+DBSysdateCustom(ageDays2)+"' "+
    			"and exists (select pmp.sak_recip from t_re_pmp_assign pmp where pmp.sak_recip = p.sak_recip  group by pmp.sak_recip having count(pmp.sak_recip)=1) "+
    			"and rownum < 2";
    	
    	System.out.println(sqlStatement);
    	    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_EFFECTIVE");
    	colNames.add("DTE_END");

    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String actMem = colValues.get(0);
    	String pmpEffDt = dateDBtoPanel(colValues.get(1));
    	String pmpEndDt = dateDBtoPanel(colValues.get(2));
    	
        log("Inactive Member:"+inactMem+" Active Member:"+actMem);
    	
    	log("TO member ICO MC program Effective Date:"+pmpEffDt+" End Date:"+pmpEndDt);

		//Get ICO opt out info from Inactive member
		LoginCheck();
        memberSearch(inactMem);
    	driver.findElement(By.linkText("ICO Opt Out")).click();
    	String icoOptoutEffDt =	driver.findElement(By.xpath("//*[contains(@id,'MemberOptOutPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
    	String icoOptoutEndDt =	driver.findElement(By.xpath("//*[contains(@id,'MemberOptOutPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
    	String icoOptoutStatus = driver.findElement(By.xpath("//*[contains(@id,'MemberOptOutPanel') and contains(@id,'0:') and contains(@id,'optOutStatusDescription')]")).getText();

		log("ICO opt out information (FROM) member, Effective date: "+icoOptoutEffDt+" ,End date: "+icoOptoutEndDt+" ,Status: "+icoOptoutStatus);

        //Link 2 members
		LoginCheck();
        memberSearch(actMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_Navi1")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.xpath("//img[@alt='Link ID From pop-up search']")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:CurrentID")).sendKeys(inactMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:SEARCH")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchResults_0:column1Value")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();

        //Store Member info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		//INACTIVE MEMBER
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='Inactive member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='Inactive member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+inactMem+"', 'Inactive member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//ACTIVE MEMBER
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='active member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='active member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+actMem+"', 'active member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//icoOptoutEffDt
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='icoOptoutEffDt'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='icoOptoutEffDt'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+icoOptoutEffDt+"', 'icoOptoutEffDt', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//icoOptoutEndDt
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='icoOptoutEndDt'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='icoOptoutEndDt'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+icoOptoutEndDt+"', 'icoOptoutEndDt', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//icoOptoutStatus
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='icoOptoutStatus'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='icoOptoutStatus'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+icoOptoutStatus+"', 'icoOptoutStatus', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//pmpEffDt
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='pmpEffDt'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='pmpEffDt'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+pmpEffDt+"', 'pmpEffDt', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);

				
    }
    
    
//    @Test
//    public void test28552() throws Exception{
//    	TestNGCustom.TCNo="28552";
//    	log("//TC 28552");
//    	
//    	//Scenario 1
//    	log ("**Scenario 1");
//    	
//    	sqlStatement="Select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, e.agency_id, e.CDE_AGENCY  from T_RE_BASE b, t_re_other_id e where b.sak_recip = e.sak_Recip and b.adr_state = 'MA' and b.sak_recip = "+
//    				"(select base.sak_recip from t_re_base base, t_re_other_id o where base.sak_recip=o.sak_recip and base.ind_active='Y' and base.dte_death='0' and not exists (select 1 from t_re_aid_elig elig, t_cde_aid a where elig.sak_recip=base.sak_recip and elig.cde_status1 <> 'H' and to_char(sysdate,'YYYYMMDD') between elig.dte_effective and elig.dte_end and elig.sak_cde_aid=a.sak_cde_aid and a.ind_id_card='Y') and rownum < 2)";
//    	colNames.add("ID_MEDICAID"); //0
//    	colNames.add("NUM_SSN");  	 //1
//    	colNames.add("DTE_BIRTH");   //2
//    	colNames.add("NAM_FIRST");   //3
//    	colNames.add("NAM_LAST");    //4
//    	colNames.add("ADR_STREET_1");//5
//    	colNames.add("ADR_CITY");    //6
//    	colNames.add("ADR_ZIP_CODE");//7
//    	colNames.add("AGENCY_ID");   //8
//    	colNames.add("CDE_AGENCY");   //9
//    	colValues = Common.executeQuery(sqlStatement, colNames);
//    	
//    	String mem = colValues.get(0);
//        ssn=colValues.get(1);
//        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
//    	fname=colValues.get(3);
//    	lastName = colValues.get(4);
//        adr1=colValues.get(5);
//        city=colValues.get(6);
//        zip=colValues.get(7);
//    	otherid = colValues.get(8);
//        agency=colValues.get(9);
//        
//        log("Existing DB Member: "+mem);
//    	
//		//Add aid cat HA to this member
//    	casenum= Common.generateRandomTaxID();
//        dep="00";
//        aid="HA";
//        agency="HCF";
//        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//        
//        if (!(Mid.equals(mem)))
//        	  Assert.assertTrue(false,"DB Member "+mem+" not the same as uploaded member "+Mid);
//        
//        log("Successful upload and download of I/P file with agency HCF and aid cat HA");
//
//        
//        memberSearch(mem);
//        String BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
//        String aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
//        Assert.assertTrue(BP.contains("HSNS"),"BP is not HSNS. It is "+BP);
//        Assert.assertTrue(aidCat.contains("HA"),"Aid Cat is not HA. It is "+aidCat);
//        log("BP is "+BP);
//        log("Aid Cat is "+aidCat);
//        
//        //Validate agency name
//    	driver.findElement(By.linkText("Member ID Cross Reference")).click();
//    	//Sort on eff date desc
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'agencyName')]")).click();
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
//    	String agencyName =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'agencyName')]")).getText();
//    	String effDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
//    	String endDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
//        Assert.assertTrue(agencyName.equals("HEALTHCARE FINANCE"),"agencyName is not HEALTHCARE FINANCE. It is "+agencyName);
//        Assert.assertTrue(effDT.equals(Common.convertSysdate()),"effDT is not "+Common.convertSysdate()+". It is "+effDT);
//        Assert.assertTrue(endDT.equals("12/31/2299"),"endDT is not 12/31/2299. It is "+endDT);
//        log("Validated that agencyName: "+agencyName);
//        log("Validated that effDT: "+effDT);
//        log("Validated that endDT: "+endDT);
//
//        //Validate Member ID cards
//    	Common.cancelAll();
//    	driver.findElement(By.linkText("Member ID Cards")).click();
//    	String panelMsg=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNoRecordsMessage")).getText();
//        Assert.assertTrue(panelMsg.equals("***No records found***"),"Member ID Cards panel message is not ***No records found***. It is "+panelMsg);
//        log("Member ID Cards panel message is "+panelMsg);
//        
//    	//Scenario 2
//    	log ("\n**Scenario 2");
//    	LoginCheck();
//    	
//    	//Get Member ID
//    	otherid = Common.generateRandomTaxID();
//    	fname=Common.generateRandomName();
//    	casenum=Common.generateRandomTaxID();
//        ssn="1"+Common.generateRandomTaxID().substring(0,8);
//        dob =fileSysdateCustom(-9025);
//        adr1="228 QUINCY AVE";
//        city="BRAINTREE";
//        zip="02184";
//        dep="00";
//        aid="HA";
//        agency="HCF";
//        String Mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//        log("Member ID is: "+Mem);
//        
//        memberSearch(Mem);
//        BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
//        aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
//        Assert.assertTrue(BP.contains("HSNS"),"BP is not HSNS. It is "+BP);
//        Assert.assertTrue(aidCat.contains("HA"),"Aid Cat is not HA. It is "+aidCat);
//        log("BP is "+BP);
//        log("Aid Cat is "+aidCat);
//        
//        //Validate agency name
//    	driver.findElement(By.linkText("Member ID Cross Reference")).click();
//    	//Sort on eff date desc
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'agencyName')]")).click();
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
//    	agencyName =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'agencyName')]")).getText();
//    	effDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
//    	endDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
//        Assert.assertTrue(agencyName.equals("HEALTHCARE FINANCE"),"agencyName is not HEALTHCARE FINANCE. It is "+agencyName);
//        Assert.assertTrue(effDT.equals(Common.convertSysdate()),"effDT is not "+Common.convertSysdate()+". It is "+effDT);
//        Assert.assertTrue(endDT.equals("12/31/2299"),"endDT is not 12/31/2299. It is "+endDT);
//        log("Validated that agencyName: "+agencyName);
//        log("Validated that effDT: "+effDT);
//        log("Validated that endDT: "+endDT);
//
//        //Validate Member ID cards
//    	Common.cancelAll();
//    	driver.findElement(By.linkText("Member ID Cards")).click();
//    	panelMsg=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNoRecordsMessage")).getText();
//        Assert.assertTrue(panelMsg.equals("***No records found***"),"Member ID Cards panel message is not ***No records found***. It is "+panelMsg);
//        log("Member ID Cards panel message is "+panelMsg);
//
//
//    }
    
    @Test
    public void test28552() throws Exception{
    	TestNGCustom.TCNo="28552";
    	log("//TC 28552-HCF sends MA21 txn to add Aid Cat HA/HB/HC/HD Test Case");
    	
    	//Scenario 1
    	log ("**Scenario 1");
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where ind_active='Y' and dte_death='0' and num_ssn<>' '"+
    			"and not exists (select 1 from t_re_aid_elig e, t_cde_aid a "+
    			"where e.sak_recip=b.sak_recip and e.cde_status1 <> 'H' "+
    			"and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and e.sak_cde_aid=a.sak_cde_aid and a.ind_id_card='Y') "+
    			"and not exists (select 1 from t_re_aid_elig e1 "+
    			"where e1.sak_recip=b.sak_recip and e1.cde_status1 <> 'H' "+
    			"and to_char(sysdate,'YYYYMMDD') between e1.dte_effective and e1.dte_end "+
    			"and e1.sak_cde_aid between 218 and 221) "+
    			"and rownum < 2";

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
        
        log("Existing DB Member: "+mem);
    	
		//Add aid cat HA to this member
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="HA";
    	otherid = Common.generateRandomTaxID();
        agency="HCF";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"DB Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with agency HCF and aid cat HA");

        
        memberSearch(mem);
        String BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        Assert.assertTrue(BP.contains("HSNS"),"BP is not HSNS. It is "+BP);
        Assert.assertTrue(aidCat.contains("HA"),"Aid Cat is not HA. It is "+aidCat);
        log("BP is "+BP);
        log("Aid Cat is "+aidCat);
        
        //Validate agency name
    	driver.findElement(By.linkText("Member ID Cross Reference")).click();
    	//Sort on eff date desc
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'agencyName')]")).click();
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
    	String agencyName =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'agencyName')]")).getText();
    	String effDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
    	String endDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
        Assert.assertTrue(agencyName.equals("HEALTHCARE FINANCE"),"agencyName is not HEALTHCARE FINANCE. It is "+agencyName);
        Assert.assertTrue(effDT.equals(Common.convertSysdate()),"effDT is not "+Common.convertSysdate()+". It is "+effDT);
        Assert.assertTrue(endDT.equals("12/31/2299"),"endDT is not 12/31/2299. It is "+endDT);
        log("Validated that agencyName: "+agencyName);
        log("Validated that effDT: "+effDT);
        log("Validated that endDT: "+endDT);

        //Validate Member ID cards
    	Common.cancelAll();
    	driver.findElement(By.linkText("Member ID Cards")).click();
    	String panelMsg=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNoRecordsMessage")).getText();
        Assert.assertTrue(panelMsg.equals("***No records found***"),"Member ID Cards panel message is not ***No records found***. It is "+panelMsg);
        log("Member ID Cards panel message is "+panelMsg);
        
    	//Scenario 2
    	log ("\n**Scenario 2");
    	LoginCheck();
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-9025);
        adr1="228 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="HA";
        agency="HCF";
        String Mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log("Member ID is: "+Mem);
        
        memberSearch(Mem);
        BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        Assert.assertTrue(BP.contains("HSNS"),"BP is not HSNS. It is "+BP);
        Assert.assertTrue(aidCat.contains("HA"),"Aid Cat is not HA. It is "+aidCat);
        log("BP is "+BP);
        log("Aid Cat is "+aidCat);
        
        //Validate agency name
    	driver.findElement(By.linkText("Member ID Cross Reference")).click();
    	//Sort on eff date desc
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'agencyName')]")).click();
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
    	agencyName =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'agencyName')]")).getText();
    	effDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
    	endDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
        Assert.assertTrue(agencyName.equals("HEALTHCARE FINANCE"),"agencyName is not HEALTHCARE FINANCE. It is "+agencyName);
        Assert.assertTrue(effDT.equals(Common.convertSysdate()),"effDT is not "+Common.convertSysdate()+". It is "+effDT);
        Assert.assertTrue(endDT.equals("12/31/2299"),"endDT is not 12/31/2299. It is "+endDT);
        log("Validated that agencyName: "+agencyName);
        log("Validated that effDT: "+effDT);
        log("Validated that endDT: "+endDT);

        //Validate Member ID cards
    	Common.cancelAll();
    	driver.findElement(By.linkText("Member ID Cards")).click();
    	panelMsg=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNoRecordsMessage")).getText();
        Assert.assertTrue(panelMsg.equals("***No records found***"),"Member ID Cards panel message is not ***No records found***. It is "+panelMsg);
        log("Member ID Cards panel message is "+panelMsg);


    }
    
    @Test
    public void test28553() throws Exception{
    	TestNGCustom.TCNo="28553";
    	log("//TC 28553-HCF sends MA21 txn to update member's demographic info Test Case");
    	
    	//Scenario 1
    	log ("**Scenario 1");
    	
    	sqlStatement="select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from t_re_base b, t_re_aid_elig e " +
    				"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and num_ssn<>' ' and b.cde_race<>'WHITE'" +
    				"and e.cde_status1 <> 'H' and e.cde_agency='HCF' " +
    				"and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end " +
    				"and not exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip " +
    				"and cde_status1 <> 'H' and cde_agency <> e.cde_agency " +
    				"and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end) " +
    				"and b.sak_recip > dbms_random.value * 6300000 " +
    				"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
        
        log("Existing DB Member: "+mem);
        
        //Get member details
        memberSearch(mem);
        String adr1_prev=adr1;
        String city_prev=city;
        String zip_prev=zip;
        String dob_prev=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[8]/td[2]")).getText();
        String race_prev=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[11]/td[2]")).getText();
        
        log("Current adr1: "+adr1_prev);
        log("Current city: "+city_prev);
        log("Current zip: "+zip_prev);
        log("Current dob: "+dob_prev);
        log("Current race: "+race_prev);

        //change data 
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        int age=-23360;
        dob =fileSysdateCustom(age); //64 y.o.

        
    	//Now get HCF agency ID for this member
        sqlStatement="select AGENCY_ID from t_re_other_id where cde_agency='HCF' and sak_recip=(select sak_recip from t_re_base where id_medicaid = '"+mem+"')";
    	colNames.add("AGENCY_ID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	otherid = colValues.get(0);
    	
		//Add aid cat HA to this member
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="HA";
        agency="HCF";

        LoginCheck();
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"DB Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with agency HCF and aid cat HA");

        
        memberSearch(mem);
        String adr1_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText();
        String city_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText();
        String zip_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().substring(0, 5);
        String dob_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[8]/td[2]")).getText();
        String race_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[11]/td[2]")).getText();
        
        Assert.assertTrue(adr1_new.equals(adr1),"adr1 is not updated. It is "+adr1_new);
        Assert.assertTrue(city_new.equals(city),"city is not updated. It is "+city_new);
        Assert.assertTrue(zip_new.equals(zip),"zip is not updated. It is "+zip_new);
        Assert.assertTrue(dob_new.equals(Common.convertSysdatecustom(age)),"age is not updated. It is "+dob_new);
        Assert.assertTrue(race_new.equals("WHITE"),"race is not updated. It is "+race_new);


        log("Demographics are updated according to I/P File. New Demographics are below:");
        log("New adr1: "+adr1_new);
        log("New city: "+city_new);
        log("New zip: "+zip_new);
        log("New dob: "+dob_new);
        log("New race: "+race_new);
        
        //Verify Previuos address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals(adr1_prev),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals(city_prev),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals(zip_prev),"Previous zip mismatch");

        log("Verified that Previous Address panel contains the previous address");
        
    	//Scenario 2
    	log ("\n**Scenario 2");
    	LoginCheck();
    	
       	sqlStatement="select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from t_re_base b, t_re_aid_elig e " +
				"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and num_ssn<>' ' and b.cde_race<>'WHITE'" +
				"and e.cde_status1 <> 'H' and e.cde_agency='HCF' " +
				"and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end " +
				"and exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip " +
				"and cde_status1 <> 'H' and cde_agency <> e.cde_agency " +
				"and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end) " +
				"and b.sak_recip > dbms_random.value * 6300000 " +
				"and rownum < 2";
	
       	colNames.add("ID_MEDICAID"); //0
       	colNames.add("NUM_SSN");  	 //1
       	colNames.add("DTE_BIRTH");   //2
		colNames.add("NAM_FIRST");   //3
		colNames.add("NAM_LAST");    //4
		colNames.add("ADR_STREET_1");//5
		colNames.add("ADR_CITY");    //6
		colNames.add("ADR_ZIP_CODE");//7
		colValues = Common.executeQuery(sqlStatement, colNames);
		
		mem = colValues.get(0);
	    ssn=colValues.get(1);
	    dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
		fname=colValues.get(3);
		lastName = colValues.get(4);
	    adr1=colValues.get(5);
	    city=colValues.get(6);
	    zip=colValues.get(7);
	    
	    log("Existing DB Member: "+mem);
	    
	    //Get member details
	    memberSearch(mem);
	    adr1_prev=adr1;
	    city_prev=city;
	    zip_prev=zip;
	    dob_prev=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[8]/td[2]")).getText();
	    race_prev=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[11]/td[2]")).getText();

    
	    log("Current adr1: "+adr1_prev);
	    log("Current city: "+city_prev);
	    log("Current zip: "+zip_prev);
	    log("Current dob: "+dob_prev);
	    log("Current race: "+race_prev);

	    //change data 
	    adr1="13 FULLER RD";
	    city="FOXBORO";
	    zip="02035";
	    age=-23360;
	    dob =fileSysdateCustom(age); //64 y.o.

    
		//Now get HCF agency ID for this member
	    sqlStatement="select AGENCY_ID from t_re_other_id where cde_agency='HCF' and sak_recip=(select sak_recip from t_re_base where id_medicaid = '"+mem+"')";
		colNames.add("AGENCY_ID");
		colValues = Common.executeQuery(sqlStatement, colNames);
		otherid = colValues.get(0);
		
		//Add aid cat HA to this member
		casenum= Common.generateRandomTaxID();
	    dep="00";
	    aid="HA";
	    agency="HCF";

	    LoginCheck();
	    Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
	    
	    if (!(Mid.equals(mem)))
	    	  Assert.assertTrue(false,"DB Member "+mem+" not the same as uploaded member "+Mid);
	    
	    log("Successful upload and download of I/P file with agency HCF and aid cat HA");
	    
//        //Verify Warning message
//	    String errCde="2347"; //maybe 2002
//	    String errMsg="Agency is not authorized to submit data in this field: cde_ethnicity       ";
//	    
//        if (!(result_type.equals("W")))
//    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);
//
//        if (!(errorCode.equals(errCde)))
//    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
//		
//        if (!(errorMessage.equals(errMsg)))
//    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
//        
//	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

    
	    memberSearch(mem);
	    adr1_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText();
	    city_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText();
	    zip_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().substring(0, 5);
	    dob_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[8]/td[2]")).getText();
	    race_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[11]/td[2]")).getText();

    
	    Assert.assertTrue(adr1_new.equals(adr1_prev),"adr1 is updated. It is "+adr1_new);
	    Assert.assertTrue(city_new.equals(city_prev),"city is updated. It is "+city_new);
	    Assert.assertTrue(zip_new.equals(zip_prev),"zip is updated. It is "+zip_new);
	    Assert.assertTrue(dob_new.equals(dob_prev),"age is updated. It is "+dob_new);
	    Assert.assertTrue(race_new.equals(race_prev),"race is updated. It is "+race_new);
	
	
	    log("Demographics are not updated according to I/P File. New Demographics are same as old ones below:");
	    log("New adr1: "+adr1_new);
	    log("New city: "+city_new);
	    log("New zip: "+zip_new);
	    log("New dob: "+dob_new);
	    log("New race: "+race_new);

    }
    
    @Test
    public void test28554() throws Exception{
    	TestNGCustom.TCNo="28554";
    	log("//TC 28554-Eligibility Verification Request - 270 and web portal Test Case");
    	//Scenario1
    	log("**Scenario 1");
		EVS evs=new EVS();
		evs.LoginCheck();
        //Get member
		sqlStatement="select b.id_medicaid from t_re_base b, t_re_aid_elig e"+
					 " where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0'"+
					 " and e.cde_status1 <> 'H' and e.cde_agency='HCF'"+
					 " and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end"+
					 " and not exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip"+
					 " and cde_status1 <> 'H' and cde_agency <> e.cde_agency"+
					 " and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end)"+
					 " and rownum < 2";

		evs.RMreset(sqlStatement);
		
		//Verify RM
		String scenarioMessage="Member is not eligible";
		String scenarioTarget="//*[contains(@id,'0:status')]";
		evs.rmCommon(scenarioMessage, scenarioTarget); 
		log("Successfully validated message - "+scenarioMessage);

    	//Scenario2
    	log("**Scenario 2");
		evs.LoginCheck();
        //Get member
		sqlStatement="select id_medicaid from t_re_base b, t_re_aid_elig e"+
					 " where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0'"+
					 " and e.cde_status1 <> 'H' and e.cde_agency='HCF'"+
					 " and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end"+
					 " and exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip"+
					 " and cde_status1 <> 'H' and cde_agency <> e.cde_agency"+
					 " and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end)"+
					 " and rownum < 2";


		evs.RMreset(sqlStatement);
		
		//Verify RM
		scenarioMessage="HEALTH SAFETY NET";
		String actualMessage = driver.findElement(By.xpath(scenarioTarget)).getText();
		Assert.assertTrue(!(actualMessage.contains(scenarioMessage)), "Status message has the message - "+scenarioMessage);
		log("Successfully validated that status message does not contain - '"+scenarioMessage+"'. It is '"+actualMessage+"'");
    	
    	//Scenario3
    	log("**Scenario 3");
		evs.LoginCheck();
        //Get member
		sqlStatement="select id_medicaid, e1.dte_effective HSN_EFF, e1.dte_end HSN_END, e2.dte_effective OTH_EFF, e2.dte_end OTH_END"+
					 " from t_re_base b, t_re_elig e1, t_re_elig e2, t_re_aid_elig a"+
					 " where b.sak_recip=e1.sak_recip and b.sak_recip=e2.sak_recip and ind_active='Y' and dte_death='0'"+
					 " and a.sak_recip=b.sak_recip and a.sak_pgm_elig=e1.sak_pgm_elig and a.cde_agency='HCF'"+
					 " and e1.cde_status1 <> 'H' and e2.cde_status1 <> 'H'"+
					 " and e1.sak_pub_hlth in (7,85,86,87,88) and e2.sak_pub_hlth not in (7,85,86,87,88)"+
					 " and e2.dte_effective between to_char(to_date(e1.dte_end, 'YYYYMMDD')+1,'YYYYMMDD')"+
					 " and to_char(to_date(e1.dte_end,'YYYYMMDD')+10, 'YYYYMMDD')"+
					 " and e2.dte_effective between to_char(add_months(sysdate,-3*12),'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD')"+
					 " and not exists (select 1 from t_re_elig e where e.sak_recip=b.sak_recip and e.sak_pub_hlth <> e1.sak_pub_hlth and"+
					 " e.sak_pub_hlth <> e2.sak_pub_hlth"+
					 " and e.dte_effective between to_char(add_months(sysdate,-3*12),'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD'))"+
					 " and rownum < 2";

		evs.RMreset(sqlStatement); //This step is only done so we can click the 'Perform another elig check' button
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Perform Another Eligibility Check']")).click();
		Assert.assertTrue(driver.findElement(By.cssSelector("h2")).getText().equals("Check Member Eligibility"),"Did not get the 'Check Member Eligibility' message");
		
		//Select Provider
		new Select(driver.findElement(By.xpath("//select[contains(@id, 'eligInquireSearchProviderID')]"))).selectByIndex(1);
		colNames.add("ID_MEDICAID");
		colNames.add("HSN_END");
		colNames.add("OTH_EFF");
		colValues=Common.executeQuery(sqlStatement, colNames);
		
		if (colValues.get(0).equals("null")) {
			new Select(driver.findElement(By.xpath("//select[contains(@id, 'eligInquireSearchProviderID')]"))).selectByIndex(0);
			log("Member: Skipping this because no member found for this RM");
		    throw new SkipException("Skipping this because no member found for this RM");
		}

		String mem=colValues.get(0);
		String hsnEnd=Common.convertDate(colValues.get(1));
		String othEff=Common.convertDate(colValues.get(2));
		
		log("Member: "+mem);
		driver.findElement(By.xpath("//input[contains(@id, 'memberID')]")).sendKeys(mem);
		driver.findElement(By.xpath("//input[contains(@id, 'fromDOS')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id, 'fromDOS')]")).sendKeys(hsnEnd);
		driver.findElement(By.xpath("//input[contains(@id, 'toDOS')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id, 'toDOS')]")).sendKeys(othEff);

		evs.submit();
		Common.getPageError(evs.peTarget);
		
		//Select Eligibility Tab
		driver.findElement(By.xpath("//*[contains(@id, 'MENUITEM_EligTab')]")).click();
		
		//Verify 2 rows are present
		int count = driver.findElements(By.xpath("//*[contains(@id,'coverageList:') and contains(@id, ':dateRange_Link')]")).size();
		Assert.assertTrue(count==2,"Did not get 2 rows of date range in Eligibility tab, got only "+count+" row.");
		log("Successfully got 2 rows of date range in Eligibility tab");
		
		//Verify 1 of the row has Elig Status as 'Member is not eligible'
		String status1 = driver.findElement(By.xpath("//*[contains(@id,'coverageList:0:status')]")).getText();
		String status2 = driver.findElement(By.xpath("//*[contains(@id,'coverageList:1:status')]")).getText();
		if (status1.equals("Member is not eligible"))
				Assert.assertTrue(!(status2.equals("Member is not eligible")),"Both Status messages are '"+status1+"'");
		else if (status2.equals("Member is not eligible")) 
				Assert.assertTrue(!(status1.equals("Member is not eligible")),"Both Status messages are '"+status1+"'");
		else
			Assert.assertTrue(false,"Neither of the 2 Status messages are 'Member is not eligible'");
		
		log("Successfully validated that only one of the status messages is 'Member is not eligible'. The 2nd status message is something other than the message 'Member is not eligible'.");

    }
    
    @Test
    public void test32913a() throws Exception{
    	TestNGCustom.TCNo="32913a";
    	log("//TC 32913-Auto link the duplicate member IDs - 1 Test Case--Part A");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get 1st Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        
        String ssn1=ssn; //store for later update to member 2
        String mem1 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log ("The first member is: "+mem1+", SSN: "+ssn1+", Elig end date: 12/31/2299");
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
    	casenum=Common.generateRandomTaxID();

        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem2 = getCustomMemebr(xml);
        Assert.assertFalse(mem1.equals(mem2), "The sceond member is same as the first member: "+mem1);
        
        log ("The second member is: "+mem2);
        
        //Update member SSN and Elig end date - Idea is member with the most recent transaction update will be selected
        memberSearch(mem2);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
		
		driver.findElement(By.linkText("Base Information")).click();
		driver.findElement(By.xpath("//input[contains(@id,'SsnNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'SsnNumber')]")).sendKeys(ssn1);
		Common.saveAll();
		
		log("2nd member was successfully updated with same SSN as first member. Second member Elig end date cut short to 12/31/2298");
		
        //Store Member info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		//First MEMBER
		sqlStatement = "select * from r_day2 where TC = '32913' and DES='first member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32913' and DES='first member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32913', '"+mem1+"', 'first member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Second MEMBER
		sqlStatement = "select * from r_day2 where TC = '32913' and DES='second member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32913' and DES='second member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32913', '"+mem2+"', 'second member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Last name
		sqlStatement = "select * from r_day2 where TC = '32913' and DES='last name'";
		String lastName="MAZDAZ";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32913' and DES='last name'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32913', '"+lastName+"', 'last name', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//First name
		sqlStatement = "select * from r_day2 where TC = '32913' and DES='first name'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32913' and DES='first name'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32913', '"+fname+"', 'first name', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);

    }
    
    @Test
    public void test32914a() throws Exception{
    	TestNGCustom.TCNo="32914a";
    	log("//TC 32914-Auto link the duplicate member IDs - 2 Test Case--Part A");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get 1st Member ID -  no SSN
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        dob =fileSysdateCustom(ageDays1);
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem1 = getCustomMemebr(xml);
        log ("The first member is: "+mem1);
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
    	casenum=Common.generateRandomTaxID();

        
    	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem2 = getCustomMemebr(xml);
        Assert.assertFalse(mem1.equals(mem2), "The sceond member is same as the first member: "+mem1);
        
        log ("The second member is: "+mem2);
  
        //Store Member info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		//First MEMBER
		sqlStatement = "select * from r_day2 where TC = '32914' and DES='first member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32914' and DES='first member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32914', '"+mem1+"', 'first member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Second MEMBER
		sqlStatement = "select * from r_day2 where TC = '32914' and DES='second member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32914' and DES='second member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32914', '"+mem2+"', 'second member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
    }
    
    @Test
    public void test32937() throws Exception{
    	TestNGCustom.TCNo="32937";
    	log("//TC 32937-Invalid SSN in MA21 Eligibility transaction Test Case");
    	
    	int ageDays=-10950; //30 y.o.
    	
    	//Get 1st Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="666"+Common.generateRandomTaxID().substring(0,6);
        dob =fileSysdateCustom(ageDays);
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";

        String mem1 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log ("The first member is: "+mem1+", SSN in input file: "+ssn);
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,2)+"00"+Common.generateRandomTaxID().substring(0,4);
        dob =fileSysdateCustom(ageDays);
        adr1="17 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";

        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log ("The second member is: "+mem2+", SSN in input file: "+ssn);
        
    	//Get 3rd Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,4)+"0000";
        dob =fileSysdateCustom(ageDays);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";

        String mem3 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log ("The third member is: "+mem3+", SSN in input file: "+ssn);
        
        //Check base app to make sure none of the members have SSN
	    //Select first member
        LoginCheck();
        memberSearch(mem1);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(" "),"The first member has SSN written into DB. Member ID is: "+mem1);
        
        //Select second member
        LoginCheck();
        memberSearch(mem2);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(" "),"The second member has SSN written into DB. Member ID is: "+mem2);
       
        //Select third member
        LoginCheck();
        memberSearch(mem3);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(" "),"The third member has SSN written into DB. Member ID is: "+mem3);
       
        log("Verified that none of the members have SSN written into the DB");
    }
    
    @Test
    public void test32939() throws Exception{
    	TestNGCustom.TCNo="32939";
    	log("//TC 32939-MA21 transaction match criteria 1 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid filled up     
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" mail_adr_city=\"WEYMOUTH\" mail_adr_state=\"MA\" mail_adr_street_1=\"101 GAS LIGHT DRIVE\" mail_adr_street_2=\" \" mail_adr_zip_code=\"02190\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem2 = getCustomMemebr(xml);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid filled up. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32940() throws Exception{
    	TestNGCustom.TCNo="32940";
    	log("//TC 32940-MA21 transaction match criteria 2 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   

    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32941() throws Exception{
    	TestNGCustom.TCNo="32941";
    	log("//TC 32941-MA21 transaction match criteria 3 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   
    	otherid = Common.generateRandomTaxID();
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32942() throws Exception{
    	TestNGCustom.TCNo="32942";
    	log("//TC 32942-MA21 transaction match criteria 4 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   
    	otherid = Common.generateRandomTaxID();
        dob=Common.convertSysdatecustom(-9125).substring(6, 10)+dob.substring(4, 10); //25 y o but with same month and date
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32943() throws Exception{
    	TestNGCustom.TCNo="32943";
    	log("//TC 32943-MA21 transaction match criteria 5 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname="BD"+Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   
    	otherid = Common.generateRandomTaxID();
    	fname="BCQ"+Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32944() throws Exception{
    	TestNGCustom.TCNo="32944";
    	log("//TC 32944-MA21 transaction match criteria 6 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname="BDCVLJ"+Common.generateRandomName().substring(0,4);
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   
    	otherid = Common.generateRandomTaxID();
    	fname="BDCVR"+Common.generateRandomName().substring(0,3);
        dob=Common.convertSysdatecustom(-9125).substring(6, 10)+dob.substring(4, 10); //25 y o but with same month and date
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32945() throws Exception{
    	TestNGCustom.TCNo="32945";
    	log("//TC 32945-MA21 transaction match criteria 7 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname="GHUQLJ"+Common.generateRandomName().substring(0,4);
    	lastName="GAMGEE";
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space
    	fname="GHUQR"+Common.generateRandomName().substring(0,3);
    	lastName="LEE";
    	otherid = Common.generateRandomTaxID();
        dob=Common.convertSysdatecustom(-9125).substring(6, 10)+dob.substring(4, 10); //25 y o but with same month and date
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32946() throws Exception{
    	TestNGCustom.TCNo="32946";
    	log("//TC 32946-MA21 transaction match criteria 8 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get 1st Member ID -  no SSN
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        dob =fileSysdateCustom(ageDays1);
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"PETERS\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem = getCustomMemebr(xml);
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
        adr1="215 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
    	casenum=Common.generateRandomTaxID();

        
    	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"PETERS\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem2 = getCustomMemebr(xml);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");
    }
    
    @Test
    public void test32947() throws Exception{
    	TestNGCustom.TCNo="32947";
    	log("//TC 32947-MA21 updates demographic data for an inactive member Test Case");
    	
    	//Get the 2 members
    	sqlStatement="select t.id_medicaid TO_MID, f.id_medicaid FROM_MID from t_recip_link_xref l, t_re_base t, t_re_base f "+
    			"where l.sak_recip=t.sak_recip and l.sak_rcp_purged=f.sak_recip and f.cde_race='UNKNOW' and t.cde_race='UNKNOW' and t.num_ssn<>' ' and f.num_ssn<>' ' "+
    			"and l.cde_status='L'  "+
    			"and dte_processed between to_char(sysdate-90,'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD') "+
    			"and rownum < 2";
    	
    	colNames.add("FROM_MID");
    	colNames.add("TO_MID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String inactmem = colValues.get(0);
    	String actmem = colValues.get(1);
    	
        log("Inactive Member: "+inactmem);
        log("Active Member: "+actmem);

    	//get Inactive member details
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+inactmem;


    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
        String inactDoB = dob;
        
        log("Inactive member DoB: "+inactDoB);
        log("Inactive member Race: UNKNOW");

    	
		//Change dob and race (race would automatically update to WHITE as we seelcted UNKNOW in SQL)
    	int ageDays1=-10950; //30 y.o.
        dob =fileSysdateCustom(ageDays1);
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="40";
    	otherid = Common.generateRandomTaxID();
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Inactive member new DoB: "+dob);
        log("Inactive member new Race: WHITE");

        
        if (!(Mid.equals(actmem)))
        	  Assert.assertTrue(false,"DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with new DoB and new race");

		//Verify member link is still there
        driver.findElement(By.xpath("//*[@id='MMISForm:MMISMenu:_MENUITEM_Search']")).click();
        driver.findElement(By.xpath("//*[@id='MMISForm:MMISMenu:_MENUITEM_Search']")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:RecipientSearchResultDataPanel_MedicaidID")).clear();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:RecipientSearchResultDataPanel_MedicaidID")).sendKeys(inactmem);
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:SEARCH")).click();
        Assert.assertTrue(driver.findElement(By.cssSelector("span.listTextBlack")).getText().equals("This Member ["+inactmem+" ] is linked to another member whose Member ID is: ["+actmem+" ]"),"Existing Member link did not present");
        log("Verified statement on panel: "+driver.findElement(By.cssSelector("span.listTextBlack")).getText());
        
        //Select Inactive member
        LoginCheck();
        Member.memberSearch(inactmem);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[16]/td[2]")).getText().equals("Inactive"),"Inactive member link status is not Inactive");
        log("The Link Status on the Member Information panel is displayed as 'Inactive', for member "+inactmem);
        //Check DoB and Race is not updated
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[8]/td[2]")).getText().equals(inactDoB.substring(5, 7)+"/"+inactDoB.substring(8, 10)+"/"+inactDoB.substring(0, 4)),"DoB Mismatch. Check DoB might have been updated");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[11]/td[2]")).getText().equals("UNKNOW"),"Race Mismatch. Check DoB might have been updated");
        
        
        //Select Active member
        LoginCheck();
        Member.memberSearch(actmem);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[16]/td[2]")).getText().equals("Active"),"Active member link status is not Active");
        log("The Link Status on the Member Information panel is displayed as 'Active', for member "+actmem);
        //Check DoB and Race is updated
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[8]/td[2]")).getText().equals(dob.substring(5, 7)+"/"+dob.substring(8, 10)+"/"+dob.substring(0, 4)),"DoB Mismatch. Check DoB might not have been updated");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[11]/td[2]")).getText().equals("WHITE"),"Race Mismatch. Check DoB might not have been updated");
        
        log("Successfully validated that DoB and Race are not updated on the inactive member.");
        log("Successfully validated that DoB and Race are  updated on the active member.");


    }
    
    @Test
    public void test32948() throws Exception{
    	TestNGCustom.TCNo="32948";
    	log("//TC 32948-MA21 updates demographic data for an inactive member Test Case");
    	
    	//Scenario1
    	log("**Scenario1**");
    	sqlStatement="select id_medicaid, e.dte_effective, e.dte_end, e.cde_agency from t_re_base b, t_re_aid_elig e "+
    			"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and b.num_ssn<>' ' "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and e.cde_agency in ('DSS', 'DYS') and e.sak_cde_aid=55 "+
    			"and dte_birth > to_char(add_months(sysdate,-12*19), 'YYYYMMDD') "+
    			"and not exists (select 1 from t_re_cust_status where sak_recip=b.sak_recip and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end) "+
    			"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_EFFECTIVE");
    	colNames.add("DTE_END");
    	colNames.add("CDE_AGENCY");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String mem = colValues.get(0);
    	String DTE_EFFECTIVE = colValues.get(1);
    	String DTE_END = colValues.get(2);
    	String CDE_AGENCY = colValues.get(3);
    	
    	DTE_EFFECTIVE=Common.convertDate(DTE_EFFECTIVE);
    	DTE_END=Common.convertDate(DTE_END);
    	
        log("Member: "+mem+" Aid cat DTE_EFFECTIVE: "+DTE_EFFECTIVE+" Aid cat DTE_END: "+DTE_END+" Aid cat CDE_AGENCY: "+CDE_AGENCY);
        
    	String cde_cat_care="";
    	if (CDE_AGENCY.equals("DSS"))
    		cde_cat_care="FOS";
    	else
    		cde_cat_care="DET";

    	DTE_EFFECTIVE=Common.convertSysdate();
    	DTE_END=Common.convertGivendatecustom(DTE_END, -2);

        log("We will add cde_cat_care: "+cde_cat_care+" category of care DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" CDE_AGENCY: "+CDE_AGENCY);

    	//get member details
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+mem;


    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);

		//Add Category of care
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="08";
    	otherid = Common.generateRandomTaxID();
        agency=CDE_AGENCY;
    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
    	DTE_END=datePanelToXML(DTE_END);
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);

        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with the above category of care values");

		//Verify Category of care is added
        LoginCheck();
        Member.memberSearch(mem);
        driver.findElement(By.linkText("Category Of Care")).click();
        //Sort on end date
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        
        String panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
        String panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
        String panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
        String panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
    	DTE_END=dateXMLtoPanel(DTE_END);

        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not added for CDE_AGENCY from XML on Category of care panel, for Scenario 1. Instead, "+panel_CDE_AGENCY+" was added");
        Assert.assertTrue(panel_cde_cat_care.equals(cde_cat_care), cde_cat_care+" was not added for cde_cat_care from XML on Category of care panel, for Scenario 1. Instead, "+panel_cde_cat_care+" was added");
        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(DTE_EFFECTIVE), DTE_EFFECTIVE+" was not added for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 1. Instead, "+panel_DTE_EFFECTIVE+" was added");
        Assert.assertTrue(panel_DTE_END.equals(DTE_END), DTE_END+" was not added for DTE_END from XML on Category of care panel, for Scenario 1. Instead, "+panel_DTE_END+" was added");

        log("Successfully verified that above category of care values were added on the panel.");
        
    	//Scenario3
    	log("**Scenario3**");
   	
        log("Member: "+mem+" Cde cat DTE_EFFECTIVE: "+DTE_EFFECTIVE+" Cde cat DTE_END: "+DTE_END+" Cde cat CDE_AGENCY: "+CDE_AGENCY+" Cde cat care: "+cde_cat_care);
        		
       //Create new dates and cat of care
    	DTE_EFFECTIVE=Common.convertGivendatecustom(DTE_EFFECTIVE, -2);
    	DTE_END=Common.convertGivendatecustom(DTE_END, 1);

        log("We will add cde_cat_care: "+cde_cat_care+" category of care DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" CDE_AGENCY: "+CDE_AGENCY);

		//Add Category of care
    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
    	DTE_END=datePanelToXML(DTE_END);
        
		 xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");

         Mid = getCustomMemebr(xml);

        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with the above category of care values");

		//Verify Category of care is added
        LoginCheck();
        Member.memberSearch(mem);
        driver.findElement(By.linkText("Category Of Care")).click();
        //Sort on end date
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        
        panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
        panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
        panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
        panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
    	DTE_END=dateXMLtoPanel(DTE_END);

        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not added for CDE_AGENCY from XML on Category of care panel, for Scenario 3. Instead, "+panel_CDE_AGENCY+" was added");
        Assert.assertTrue(panel_cde_cat_care.equals(cde_cat_care), cde_cat_care+" was not added for cde_cat_care from XML on Category of care panel, for Scenario 3. Instead, "+panel_cde_cat_care+" was added");
        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(DTE_EFFECTIVE), DTE_EFFECTIVE+" was not added for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 3. Instead, "+panel_DTE_EFFECTIVE+" was added");
        Assert.assertTrue(panel_DTE_END.equals(DTE_END), DTE_END+" was not added for DTE_END from XML on Category of care panel, for Scenario 3. Instead, "+panel_DTE_END+" was added");

        log("Successfully verified that above category of care values were not added on the panel.");
        
    	//Scenario4
    	log("**Scenario4**");
   	
        log("Member: "+mem+" Cde cat DTE_EFFECTIVE: "+DTE_EFFECTIVE+" Cde cat DTE_END: "+DTE_END+" Cde cat CDE_AGENCY: "+CDE_AGENCY+" Cde cat care: "+cde_cat_care);
        
        //Store previous date EFF, Date End and Cat of Care
        String PREV_DTE_EFFECTIVE = DTE_EFFECTIVE;
        String PREV_DTE_END = DTE_END;
        String PREV_cde_cat_care = cde_cat_care;
        		
       //Create new dates and cat of care
    	DTE_EFFECTIVE=Common.convertGivendatecustom(DTE_EFFECTIVE, 3);
    	DTE_END=Common.convertGivendatecustom(DTE_END, -3);
    	
        if (cde_cat_care.equals("FOS"))
    		cde_cat_care="MAO";
    	else
    		cde_cat_care="RES";

        log("We will add cde_cat_care: "+cde_cat_care+" category of care DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" CDE_AGENCY: "+CDE_AGENCY);

		//Add Category of care
    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
    	DTE_END=datePanelToXML(DTE_END);
        
		 xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");

         Mid = getCustomMemebr(xml);

        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with the above category of care values");
        
        //Verify Warning message
	    String errCde="2243";
	    String errMsg="Category of Care segment cannot overlap existing segment";
	    
	    if (!(result_type.equals("W")))
  		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
      
	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

		//Verify Category of care is not added
        LoginCheck();
        Member.memberSearch(mem);
        driver.findElement(By.linkText("Category Of Care")).click();
        //Sort on end date
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        
        panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
        panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
        panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
        panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
    	DTE_END=dateXMLtoPanel(DTE_END);

        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not present for CDE_AGENCY on Category of care panel, for Scenario 4. Instead, "+panel_CDE_AGENCY+" was added");
        Assert.assertTrue(panel_cde_cat_care.equals(PREV_cde_cat_care), PREV_cde_cat_care+" was not present for cde_cat_care from XML on Category of care panel, for Scenario 4. Instead, "+panel_cde_cat_care+" was added");
        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(PREV_DTE_EFFECTIVE), PREV_DTE_EFFECTIVE+" was not present for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 4. Instead, "+panel_DTE_EFFECTIVE+" was added");
        Assert.assertTrue(panel_DTE_END.equals(PREV_DTE_END), PREV_DTE_END+" was not present for DTE_END from XML on Category of care panel, for Scenario 4. Instead, "+panel_DTE_END+" was added");

        log("Successfully verified that above category of care values were not added on the panel.");
        
    	//Scenario2
    	log("**Scenario2**");
    	sqlStatement="select id_medicaid, c.dte_effective, c.dte_end, o.cde_agency, cde_off_status from t_re_base b, t_re_cust_status c, t_re_off_stat o, t_re_aid_elig e "+
    			"where b.sak_recip=c.sak_recip and ind_active='Y' and dte_death='0' "+
    			"and c.dte_end between to_char(add_months(sysdate, -12*2), 'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD') "+
    			"and c.sak_off_stat=o.sak_off_stat "+
    			"and e.sak_recip=b.sak_recip and e.cde_status1 <> 'H' and e.cde_agency=o.cde_agency "+
    			"and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and dte_birth > to_char(add_months(sysdate, -12*19),'YYYYMMDD') "+
    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_effective > c.dte_end and sak_off_stat=c.sak_off_stat) "+
    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_effective > c.dte_end and sak_off_stat <> c.sak_off_stat) "+
    			"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_EFFECTIVE");
    	colNames.add("DTE_END");
    	colNames.add("CDE_AGENCY");
    	colNames.add("CDE_OFF_STATUS");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	mem = colValues.get(0);
    	DTE_EFFECTIVE = colValues.get(1);
    	DTE_END = colValues.get(2);
    	CDE_AGENCY = colValues.get(3);
    	cde_cat_care = colValues.get(4);

    	DTE_EFFECTIVE=Common.convertDate(DTE_EFFECTIVE);
    	DTE_END=Common.convertDate(DTE_END);
    	
        log("Member: "+mem+" category of care:"+cde_cat_care+" DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" Aid cat CDE_AGENCY: "+CDE_AGENCY);
        
    	DTE_END=Common.convertSysdatecustom(2);
    	
        log("We will update cde_cat_care DTE_END: "+DTE_END);

    	//get member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+mem;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);

		//Add Category of care
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="08";
    	otherid = Common.generateRandomTaxID();
        agency=CDE_AGENCY;
    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
    	DTE_END=datePanelToXML(DTE_END);
        
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");

       Mid = getCustomMemebr(xml);

        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with the above category of care values");

		//Verify Category of care end date is updated.
        LoginCheck();
        Member.memberSearch(mem);
        driver.findElement(By.linkText("Category Of Care")).click();
        //Sort on end date
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        
        panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
        panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
        panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
        panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
    	DTE_END=dateXMLtoPanel(DTE_END);

        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not found for CDE_AGENCY from XML on Category of care panel, for Scenario 2. Instead, "+panel_CDE_AGENCY+" was found");
        Assert.assertTrue(panel_cde_cat_care.equals(cde_cat_care), cde_cat_care+" was not found for cde_cat_care from XML on Category of care panel, for Scenario 2. Instead, "+panel_cde_cat_care+" was found");
        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(DTE_EFFECTIVE), DTE_EFFECTIVE+" was not found for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 2. Instead, "+panel_DTE_EFFECTIVE+" was found");
        Assert.assertTrue(panel_DTE_END.equals(DTE_END), DTE_END+" was not updated for DTE_END from XML on Category of care panel, for Scenario 2. Instead, "+panel_DTE_END+" was present");

        log("Successfully verified that above category of care values were found on the panel, and date end was updated.");
        
//    	//Scenario3
//    	log("**Scenario3**");
//    	sqlStatement="select id_medicaid, c.dte_effective, c.dte_end, o.cde_agency, cde_off_status, e.dte_effective as ELIG_DTE_EFFECTIVE from t_re_base b, t_re_cust_status c, t_re_off_stat o, t_re_aid_elig e "+
//    			"where b.sak_recip=c.sak_recip and ind_active='Y' and dte_death='0' "+
//    			"and c.dte_end between to_char(add_months(sysdate, -12*2), 'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD') "+
//    			"and c.sak_off_stat=o.sak_off_stat "+
//    			"and e.sak_recip=b.sak_recip and e.cde_status1 <> 'H' and e.cde_agency=o.cde_agency "+
//    			"and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
//    			"and dte_birth > to_char(add_months(sysdate, -12*19),'YYYYMMDD') "+
//    			"and c.dte_effective > e.dte_effective "+
//    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_effective=to_char(to_date(c.dte_end, 'YYYYMMDD')+1,'YYYYMMDD') and sak_off_stat=c.sak_off_stat) "+
//    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_effective=to_char(to_date(c.dte_end, 'YYYYMMDD')+1,'YYYYMMDD') and sak_off_stat <> c.sak_off_stat) "+
//    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_end=to_char(to_date(c.dte_effective,'YYYYMMDD')-1, 'YYYYMMDD')) "+
//    			"and rownum < 2";
//
//    	
//    	colNames.add("ID_MEDICAID");
//    	colNames.add("DTE_EFFECTIVE");
//    	colNames.add("DTE_END");
//    	colNames.add("CDE_AGENCY");
//    	colNames.add("CDE_OFF_STATUS");
//    	colNames.add("ELIG_DTE_EFFECTIVE");
//    	colValues = Common.executeQuery(sqlStatement, colNames);
//    	mem = colValues.get(0);
//    	DTE_EFFECTIVE = colValues.get(1);
//    	DTE_END = colValues.get(2);
//    	CDE_AGENCY = colValues.get(3);
//    	cde_cat_care = colValues.get(4);
//    	String ELIG_DTE_EFFECTIVE = colValues.get(5);
//
//    	DTE_EFFECTIVE=Common.convertDate(DTE_EFFECTIVE);
//    	DTE_END=Common.convertDate(DTE_END);
//    	
//        log("Member: "+mem+" category of care:"+cde_cat_care+" DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" Aid cat CDE_AGENCY: "+CDE_AGENCY);
//        
//        DTE_EFFECTIVE=Common.convertGivendatecustom(DTE_EFFECTIVE, -2);
//    	DTE_END=Common.convertSysdatecustom(2);
//    	
//        log("We will update cde_cat_care DTE_EFFECTIVE: "+DTE_EFFECTIVE+" DTE_END: "+DTE_END);
//
//    	//get member details
//    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
//    			"where b.id_medicaid = "+mem;
//
//    	colNames.add("ID_MEDICAID"); //0
//    	colNames.add("NUM_SSN");  	 //1
//    	colNames.add("DTE_BIRTH");   //2
//    	colNames.add("NAM_FIRST");   //3
//    	colNames.add("NAM_LAST");    //4
//    	colNames.add("ADR_STREET_1");//5
//    	colNames.add("ADR_CITY");    //6
//    	colNames.add("ADR_ZIP_CODE");//7
//    	colValues = Common.executeQuery(sqlStatement, colNames);
//    	
//        ssn=colValues.get(1);
//        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
//    	fname=colValues.get(3);
//    	lastName = colValues.get(4);
//        adr1=colValues.get(5);
//        city=colValues.get(6);
//        zip=colValues.get(7);
//
//		//Add Category of care
//    	casenum= Common.generateRandomTaxID();
//        dep="00";
//        aid="08";
//    	otherid = Common.generateRandomTaxID();
//        agency=CDE_AGENCY;
//    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
//    	DTE_END=datePanelToXML(DTE_END);
//        
//		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
//				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
//				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
//				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");
//
//       Mid = getCustomMemebr(xml);
//
//        
//        if (!(Mid.equals(mem)))
//        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
//        
//        log("Successful upload and download of I/P file with the above category of care values");
//
//		//Verify Category of care end date is updated.
//        LoginCheck();
//        Member.memberSearch(mem);
//        driver.findElement(By.linkText("Category Of Care")).click();
//        //Sort on end date
//        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
//        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
//        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
//        
//        panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
//        panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
//        panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
//        panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
//    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
//    	DTE_END=dateXMLtoPanel(DTE_END);
//
//        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not found for CDE_AGENCY from XML on Category of care panel, for Scenario 3. Instead, "+panel_CDE_AGENCY+" was found");
//        Assert.assertTrue(panel_cde_cat_care.equals(cde_cat_care), cde_cat_care+" was not found for cde_cat_care from XML on Category of care panel, for Scenario 3. Instead, "+panel_cde_cat_care+" was found");
//        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(DTE_EFFECTIVE), DTE_EFFECTIVE+" was not found for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 3. Instead, "+panel_DTE_EFFECTIVE+" was found");
//        Assert.assertTrue(panel_DTE_END.equals(DTE_END), DTE_END+" was not updated for DTE_END from XML on Category of care panel, for Scenario 3. Instead, "+panel_DTE_END+" was present");
//
//        log("Successfully verified that above category of care values were found on the panel, and date effective and date end was updated.");

    }
    
    @Test
    public void test32949() throws Exception{
    	TestNGCustom.TCNo="32949";
    	log("//TC 32949-Batch Error Message - 2347 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get 1st Member ID -  no SSN
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        dob =fileSysdateCustom(ageDays1);
        adr1="19 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="SSA";
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_ethnicity=\"AMER\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"PETERS\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem = getCustomMemebr(xml);
        log ("Member is:"+mem+ " cde_ethnic=AMER for agency=SSA was entered in XML");
        
      //Verify Warning message
	    String errCde="2347";
	    String errMsg="Agency is not authorized to submit data in this field: cde_ethnicity";
	    
	    if (!(result_type.equals("W")))
  		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
      
	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);
	    
        //Check Cde_ethnicity is blank
	    
        memberSearch(mem);
		String ethnic=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText();
		Assert.assertTrue(ethnic.equals(" "), "Ethnicity was updated to "+ethnic);
        log ("Successfully validated that Ethnicity is blank");
    }
    
    @Test
    public void test32950() throws Exception{
    	TestNGCustom.TCNo="32950";
    	log("//TC 32950-Batch Error Message - 2039, 2042 Test Case");
    	
    	int ageDays1=-365; //1 y.o.
    	int eligDays = -400; //before DoB
    	String elig_start = fileSysdateCustom(eligDays);
    	String elig_end = fileSysdateCustom(eligDays+2);
    	
    	//Get 1st Member ID -  no SSN
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        dob =fileSysdateCustom(ageDays1);
        adr1="15 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_ethnicity=\"AMER\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"PETERS\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+elig_start+"\" dte_end_elig=\""+elig_end+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem = getCustomMemebr(xml);
        log ("Member is:"+mem+ " Following was entered in XML. DoB:"+dob+" elig_start:"+elig_start+" elig_end:"+elig_end);
        
        //Verify Error messages
		String fileName=tempDirPath+Common.fileName();
        String output=FileUtils.readFileToString(new File(fileName));
//        log(output);
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
//        for(int i=0;i<l;i++)
//        	System.out.println("valuesInQuotes["+i+"] "+valuesInQuotes[i]);
        
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        errorMessage=valuesInQuotes[l-1].trim();
        errorCode=valuesInQuotes[l-2].trim();
        
        //Validate 1st error message
	    String errCde="2039";
	    String errMsg="Eligibility begin date cannot be before date of birth";
	    
	    if (!(result_type.equals("E")))
  		Assert.assertTrue(false, "Did not get Result Type E. Instead got Result Type "+result_type);

	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
      
	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);
	    
	    //Validate 2nd error message
        errorMessage=valuesInQuotes[l-3].trim();
        errorCode=valuesInQuotes[l-4].trim();
        
	    errCde="2042";
	    errMsg="Eligibility end date cannot be before date of birth";
	    
	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
	    
	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);
	    
	    //Check Member id is blank
  		Assert.assertTrue(id_medicaid.equals(" "), "Did not get Member id as Blank. Instead got "+id_medicaid);
	    log("Successfully validated that Member id is Blank in the response file");

    }
    
    @Test
    public void test32951() throws Exception{
    	TestNGCustom.TCNo="32951";
    	log("//TC 32951-Batch Error Message - 2040 Test Case");
    	
    	//Get the members with DoD
    	sqlStatement="select id_medicaid, dte_death from t_re_base "+
    			"where ind_active='Y' and dte_death > to_char(add_months(sysdate, -8),'YYYYMMDD') "+
    			"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_DEATH");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String expiredMem = colValues.get(0);
    	String DTE_DEATH = colValues.get(1);
    	DTE_DEATH=Common.convertDate(DTE_DEATH);
    	
        log("Expired Member: "+expiredMem);
        log("DTE_DEATH: "+DTE_DEATH);
        
        //Select Expired member and get current BP and Aid cat
        LoginCheck();
        Member.memberSearch(expiredMem);
        String oldBP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String oldaidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();        

    	//get expired member details
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+expiredMem;


    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
    	

    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="40";
    	otherid = Common.generateRandomTaxID();
        agency="MHO";
        beginDate=fileSysdateCustom(0);
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        
        if (!(Mid.equals(expiredMem)))
        	  Assert.assertTrue(false,"DB Member "+expiredMem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with Elig Effective date = "+Common.convertSysdate());

        //Verify Error messages
		String fileName=tempDirPath+Common.fileName();
        String output=FileUtils.readFileToString(new File(fileName));

        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;

        
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        errorMessage=valuesInQuotes[l-1].trim();
        errorCode=valuesInQuotes[l-2].trim();
        
        //Verify Error message
  	    String errCde="2040";
  	    String errMsg="Eligibility begin date cannot be after date of death";
  	    
  	    if (!(result_type.equals("E")))
    		Assert.assertTrue(false, "Did not get Result Type E. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);

        //Select Expired member
        LoginCheck();
        Member.memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText().equals(DTE_DEATH),"DTE_DEATH is not displayed on panel");
        log("The DTE_DEATH is successfully displayed on the panel");
        //Check Elig is not added
        String BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        Assert.assertFalse(BP.contains("12/31/2299"),"BP was added. It is "+BP);
        Assert.assertFalse(aidCat.contains("12/31/2299"),"Aid Cat was added. It is "+aidCat);
        Assert.assertTrue(BP.equals(oldBP),"BP was changed. It is "+BP);
        Assert.assertTrue(aidCat.equals(oldaidCat),"Aid Cat was changed. It is "+aidCat);
        log("Verified that Elig is not added");

        
    }
    
    @Test
    public void test32952() throws Exception{
    	TestNGCustom.TCNo="32952";
    	log("//TC 32952-Batch Error Message - 2043 Test Case");
    	
    	//Get the members with DoD
    	sqlStatement="select id_medicaid, dte_death from t_re_base "+
    			"where ind_active='Y' and dte_death > to_char(add_months(sysdate, -8),'YYYYMMDD') "+
    			"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_DEATH");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String expiredMem = colValues.get(0);
    	String DTE_DEATH = colValues.get(1);
    	DTE_DEATH=Common.convertDate(DTE_DEATH);
    	
        log("Expired Member: "+expiredMem);
        log("DTE_DEATH: "+DTE_DEATH);
        
        //Select Expired member and get current BP and Aid cat
        LoginCheck();
        Member.memberSearch(expiredMem);
        String oldBP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String oldaidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();        

    	//get expired member details
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+expiredMem;


    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
    	

    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="40";
    	otherid = Common.generateRandomTaxID();
        agency="MHO";
        beginDate=Common.convertGivendatecustom(DTE_DEATH, -2);
        beginDate=datePanelToXML(beginDate);
        String elig_end = "2298-12-31";

		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" dte_end_elig=\""+elig_end+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);        
        
        if (!(Mid.equals(expiredMem)))
        	  Assert.assertTrue(false,"DB Member "+expiredMem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with Elig Effective date = "+dateXMLtoPanel(beginDate)+" End Date = "+dateXMLtoPanel(elig_end));

        //Verify Error messages
		String fileName=tempDirPath+Common.fileName();
        String output=FileUtils.readFileToString(new File(fileName));

        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;

        
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        errorMessage=valuesInQuotes[l-1].trim();
        errorCode=valuesInQuotes[l-2].trim();
        
        //Verify Error message
  	    String errCde="2043";
  	    String errMsg="Eligibility end date cannot be after date of death";
  	    
  	    if (!(result_type.equals("E")))
    		Assert.assertTrue(false, "Did not get Result Type E. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);

        //Select Expired member
        LoginCheck();
        Member.memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText().equals(DTE_DEATH),"DTE_DEATH is not displayed on panel");
        log("The DTE_DEATH is successfully displayed on the panel");
        //Check Elig is not added
        String BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        Assert.assertFalse(BP.contains("12/31/2298"),"BP was added. It is "+BP);
        Assert.assertFalse(aidCat.contains("12/31/2298"),"Aid Cat was added. It is "+aidCat);
        Assert.assertTrue(BP.equals(oldBP),"BP was changed. It is "+BP);
        Assert.assertTrue(aidCat.equals(oldaidCat),"Aid Cat was changed. It is "+aidCat);
        log("Verified that Elig is not added");

        
    }
    
    @Test
    public void test32953() throws Exception{
    	TestNGCustom.TCNo="32953";
    	log("//TC 32953-Batch Error Message - 2333 Test Case");
    	
    	//This is the aid cat to be added everytime    	
        aid="D1";
    	
    	//Get the member which doesn't have above aid cat
    	sqlStatement="select id_medicaid, c.num_case, x.dep_num, ce.cde_aid_category, x1.dep_num DIFF_DEP, ce1.cde_aid_category DIFF_AID "+
    			"from t_re_base b, t_re_aid_elig e, t_re_case_xref x, t_re_case c, t_re_case_xref x1, t_re_aid_elig e1, T_CDE_AID ce, t_cde_aid ce1 "+
    			"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and b.num_ssn <> ' ' "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and e.sak_aid_elig=x.sak_aid_elig and e.sak_recip=x.sak_recip and x.sak_case=c.sak_case "+
    			"and e.sak_cde_aid <> 245 and e.cde_agency='MHO' "+
    			"and dte_birth > to_char(add_months(sysdate, -12*60), 'YYYYMMDD') "+
    			"and x1.sak_case=x.sak_case and x1.dep_num <> x.dep_num and x1.sak_aid_elig=e1.sak_aid_elig and x1.sak_recip <> b.sak_recip "+
    			"and e1.sak_cde_aid <> e.sak_cde_aid "+
    			"and ce.sak_cde_aid = e.sak_cde_aid and ce1.sak_cde_aid = e1.sak_cde_aid and b.id_medicaid <> '100207238419'"+
    			"and rownum < 2";
    	    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_CASE");
    	colNames.add("DEP_NUM");
    	colNames.add("CDE_AID_CATEGORY");
    	colNames.add("DIFF_DEP");
    	colNames.add("DIFF_AID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String memBer = colValues.get(0);
        String NUM_CASE=colValues.get(1);
        String DEP_NUM=colValues.get(2);
        String CDE_AID_CATEGORY=colValues.get(3);
        String DIFF_DEP=colValues.get(4);
        String DIFF_AID=colValues.get(5);

        log("Member: "+memBer);
        log("We will use this for 2333 Aid cat/case/dep cumbo error NUM_CASE:"+NUM_CASE+" Dependent number:"+DIFF_DEP+" Aid CAT:"+DIFF_AID);
      
    	//get member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);

    	casenum= Common.generateRandomTaxID();
        dep="00";
    	otherid = Common.generateRandomTaxID();
        agency="MHO";
        adr1="19 FULLER RD";
        city="FOXBORO";
        zip="02035";
        String elig_end = fileSysdateCustom(0);
        
        //get current aid cat, to end it in xml
        LoginCheck();
        Member.memberSearch(memBer);
        String curr_aid_row =new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        if (curr_aid_row.contains(DIFF_AID)) { //If current row is DIFF_AID, select the next active one
        	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).selectByIndex(1);
        	curr_aid_row= new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        }
        String curr_aid =curr_aid_row.substring(0,2);

        log("We will use this to end existing aid cat. NUM_CASE:"+casenum+" Dependent number:"+dep+" Aid CAT:"+curr_aid);

		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+NUM_CASE+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+curr_aid+"\" cde_elig_status=\"1\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\"01\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" dte_end_elig=\""+elig_end+"\" family_size=\"07\" />"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+DIFF_AID+"\" cde_elig_status=\"1\" cde_line=\""+DIFF_DEP+"\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);        
        
        //Verify Error message
  	    String errCde="2333";
  	    String errMsg="Case/Aid Cat/Dep NUM combo already exists on DB for a different Member ID";
  	    
  	    if (!(result_type.equals("E")))
    		Assert.assertTrue(false, "Did not get Result Type E. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);

        //Verify that current member aid cat is not end dated, and is still the same.
        LoginCheck();
        Member.memberSearch(memBer);
        String postRun_curr_aid_row =new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        if (postRun_curr_aid_row.contains(DIFF_AID)) { //If current row is DIFF_AID, select the next active one
        	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).selectByIndex(1);
        	postRun_curr_aid_row= new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        }
        
        Assert.assertTrue(postRun_curr_aid_row.equals(curr_aid_row), "Aid cat was end dated. Current row is "+postRun_curr_aid_row);
        log("Verified that current aid cat was not ended");
        //Verify new Aid cat is not added
        boolean aidFound=false;
		List<WebElement> list = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getOptions();
		for (WebElement j:list){
			String currEligRow = j.getText();
			if (currEligRow.contains(DIFF_AID)) {
				aidFound=true;
				break;
			}
		}
        Assert.assertFalse(aidFound,"Aid Cat "+DIFF_AID+" was added");
        log("Verified that Aid Cat "+DIFF_AID+" was not added");
      

    }
    
    @Test
    public void test32954() throws Exception{
    	TestNGCustom.TCNo="32954";
    	log("//TC 32954-Demographic updates hierarchy Test Case");
    	
    	//This is the aid cat to be added everytime    	
        aid="D1";
    	
    	//Get the member which doesn't have above aid cat
    	sqlStatement="select /*+RULE*/ b.id_medicaid, o.address_line_1, o.adr_city, o.adr_zip_code from t_re_base b, t_re_aid_elig e, t_re_other_address o "+
    			"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and b.num_ssn<>' ' "+
    			"and b.sak_recip=o.sak_recip and e.cde_status1 <> 'H' and e.cde_agency='DSS' "+
    			"and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and o.cde_agency='DSS' and o.cde_addr_usage='MR' and o.address_line_2=' ' "+
    			"and not exists (Select 1 from t_re_address prev where prev.sak_recip = b.sak_recip) "+
				"and not exists (Select 1 from t_re_aid_elig e1, t_cde_aid aid where e1.sak_recip = b.sak_recip and e1.sak_cde_aid=aid.sak_cde_aid  and aid.cde_aid_category = '"+aid+"') " +
    			"and rownum < 2";
    	
    	System.out.println(sqlStatement);
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("ADDRESS_LINE_1");
    	colNames.add("ADR_CITY");
    	colNames.add("ADR_ZIP_CODE");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String memBer = colValues.get(0);
        String curr_adr1=colValues.get(1);
        String curr_city=colValues.get(2);
        String curr_zip=colValues.get(3);
    	
        log("Member: "+memBer);
        log("Current Address: "+curr_adr1+" "+curr_city+" "+curr_zip);
   
    	//get member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);

    	casenum= Common.generateRandomTaxID();
        dep="00";
    	otherid = Common.generateRandomTaxID();
        agency="HIX";
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        beginDate = fileSysdateCustom(-2);
        String addedBeginDate = beginDate; //this is stored because beginDate gets reset to "" after file run

        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);      
        
        if (!(Mid.equals(memBer)))
        	  Assert.assertTrue(false,"DB Member "+memBer+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with agency = "+agency+", Address = "+adr1+" "+city+" "+zip);

        //Verify Warning messages
        
//        //Verify Error message
//  	    String errCde="2043";
//  	    String errMsg="Eligibility end date cannot be after date of death";
//  	    
//  	    if (!(result_type.equals("W")))
//    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);
//
//  	    if (!(errorCode.equals(errCde)))
//    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
//  		
//  	    if (!(errorMessage.equals(errMsg)))
//    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
//        
//  	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);

        //Select  member
        LoginCheck();
        Member.memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(curr_adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[6]/td[2]")).getText().equals(curr_city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[8]/td[2]")).getText().equals(curr_zip+"-0000"),"Zip Mismatch");        //Check Elig is added
        //Verify Aid cat is added
        boolean aidFound=false;
		List<WebElement> list = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getOptions();
		for (WebElement j:list){
			String currEligRow = j.getText();
			if ((currEligRow.contains(aid) && currEligRow.contains(dateXMLtoPanel(addedBeginDate)) && currEligRow.contains("12/31/2299"))) {
				aidFound=true;
				break;
			}
		}
        Assert.assertTrue(aidFound,"Aid Cat "+aid+" was not found");
        log("Verified that Aid Cat "+aid+" was added");
        //Verify member address panel
        driver.findElement(By.linkText("Member Address")).click();
        //sort on Address indicator
        driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'addressZip') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'addressInd') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'addressInd') ]")).click();
        
        String panel_adr_type = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'addressInd') ]")).getText();
        String panel_adr_source = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'cdeAgency') ]")).getText();
        String panel_adr_line_1 = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'addressLine1') ]")).getText();
        String panel_city = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'addressCity') ]")).getText();
        String panel_zip = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'addressZip') ]")).getText();

        Assert.assertTrue(panel_adr_type.equals("MR"), "MR is not the address type on member address panel. It is "+panel_adr_type);
        Assert.assertTrue(panel_adr_source.equals("DSS"), "DSS is not the agency on member address panel. It is "+panel_adr_source);
        Assert.assertTrue(panel_adr_line_1.equals(curr_adr1), curr_adr1+" is not the address line 1 on member address panel. It is "+panel_adr_line_1);
        Assert.assertTrue(panel_city.equals(curr_city), curr_city+" is not the city on member address panel. It is "+panel_city);
        Assert.assertTrue(panel_zip.equals(curr_zip), curr_zip+" is not the zip code on member address panel. It is "+panel_zip);
        
        log("Verified that MR address was not updated on member address panel");
        
        //Verify previous address panel.
        Common.cancelAll();
        driver.findElement(By.linkText("Previous Data - Address")).click();
        String no_rec_found = driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressNoRecordsMessage")).getText();
        Assert.assertTrue(no_rec_found.equals("***No records found***"), "***No records found*** message was not found on previous address panel. Instead "+no_rec_found+"was");
        
        log("Verified that no address present on previous address panel");

    }
    
    @Test
    public void test32955a() throws Exception{
    	TestNGCustom.TCNo="32955a";
    	log("//TC 32955a-Crossed MID detected - original MID existing Test Case");
    	
    	
    	//Get Crossed_memBer
    	sqlStatement="select b.id_medicaid, c.num_case, x.dep_num, ce.cde_aid_category, e.cde_agency, o.agency_id "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and rownum < 2";
        	
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_CASE");
    	colNames.add("DEP_NUM");
    	colNames.add("CDE_AID_CATEGORY");
    	colNames.add("CDE_AGENCY");
    	colNames.add("AGENCY_ID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String Crossed_memBer = colValues.get(0);
        String NUM_CASE=colValues.get(1);
        String DEP_NUM=colValues.get(2);
        String CDE_AID_CATEGORY=colValues.get(3);
        String CDE_AGENCY=colValues.get(4);
        String AGENCY_ID=colValues.get(5);
    	   
    	//get crossed member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+Crossed_memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
    	
        //Get crossed member's current Elig
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		String current_aid_crossed = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
		
		Assert.assertTrue(current_aid_crossed.contains(CDE_AID_CATEGORY), "DB returned aid cat may not be the member's first aid cat");
		
		log("Crossed Member ID:"+Crossed_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_crossed);
		
		//Get the 2nd original member
    	sqlStatement="select b.id_medicaid "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.dte_end < to_char(sysdate, 'YYYYMMDD') "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and exists (select num_ssn from t_re_base b1 where b1.num_ssn = b.num_ssn group by b1.num_ssn having count(b1.num_ssn) = 1) "+
    			"and ce.cde_aid_category<>'"+CDE_AID_CATEGORY+"' "+
    			"and rownum < 2";
    	    	    	
    	colNames.add("ID_MEDICAID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String original_memBer = colValues.get(0);
    	
    	//get original member details
    	sqlStatement="select  b.num_ssn, b.dte_birth, b.nam_last, b.nam_first from T_RE_BASE b "+
    			"where b.id_medicaid = "+original_memBer;
    	
    	colNames.add("NUM_SSN");  	 //0
    	colNames.add("DTE_BIRTH");   //1
    	colNames.add("NAM_LAST");    //2
    	colNames.add("NAM_FIRST");   //3
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//This will update SSN, DOB, Lastname and FirstName in the I/P file
        ssn=colValues.get(0);
        dob =colValues.get(1).substring(0, 4)+"-"+colValues.get(1).substring(4, 6)+"-"+colValues.get(1).substring(6, 8);
    	lastName = colValues.get(2);
    	fname=colValues.get(3);
    	
        //Get original member's current Elig
    	LoginCheck();
        Member.memberSearch(original_memBer);
		String current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
				
		log("Original Member ID:"+original_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_original+" Last Name:"+lastName+" First Name:"+fname+" DoB:"+dob);
		
		//Create I/P file
    	casenum= NUM_CASE;
        dep=DEP_NUM;
    	otherid = AGENCY_ID;
        agency=CDE_AGENCY;
        aid=CDE_AID_CATEGORY;
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        beginDate = fileSysdateCustom(0);
        String addedBeginDate = beginDate; //this is stored because beginDate gets reset to "" after file run
        String addedlastName = lastName; //this is stored because lastName gets reset to P after file run

        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);      
        
        if (!(Mid.equals(original_memBer)))
        	  Assert.assertTrue(false,"Original Member "+original_memBer+" not the same as Member received in response file "+Mid);
        
        log("Successful upload and download of I/P file Original Member SSN:"+ssn+" Last Name:"+addedlastName+" First Name:"+fname+" DoB:"+dob);
        log("The response File contains the Original Member ID:"+original_memBer);

        //Verify Warning messages
        
  	    String errCde="2388";
  	    String errMsg="Warning Member ID on txn is crossed with id_medicaid retrieved";
  	    
  	    if (!(result_type.equals("W")))
    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

        //Check that Crossed member's current Elig is gone
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory")).size();
		Assert.assertTrue(size==0, "Original member still has Elig. Maybe the Elig was not historied.");
		size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans")).size();
		Assert.assertTrue(size==0, "Original member still has BP. Maybe the BP was not historied.");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		String histStatus = driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "BP is not Historied. It is "+histStatus);
		
		driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		histStatus = driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "Aid cat is not Historied. It is "+histStatus);
				
		log("Successfully verified that Crossed Member ID:"+Crossed_memBer+" Aid cat and BP are historied");
		
		// Check that Original member has the Elig Added
    	LoginCheck();
        Member.memberSearch(original_memBer);
		current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
		Assert.assertTrue(current_aid_original.equals(CDE_AID_CATEGORY+" "+dateXMLtoPanel(addedBeginDate)+" - 12/31/2299"), CDE_AID_CATEGORY+" was not Added. Instead, this Aid was found: "+current_aid_original);

		log("Successfully verified that Original Member ID:"+original_memBer+" has the following AId cat added: "+current_aid_original);
		log("Please check Member Benefit plan/Aid Cat dropdown and panels manually");
		
		//Check T_RE_CROSSED_MID Table
		sqlStatement="select ORIGINAL_MID, CROSSED_MID,  to_char(DTE_INSERT, 'MM/DD/YYYY') as DTE from T_RE_CROSSED_MID where CROSSED_MID = "+Crossed_memBer;
    	colNames.add("ORIGINAL_MID"); //0
    	colNames.add("CROSSED_MID");  //1
    	colNames.add("DTE");   //2
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String table_original_memBer = colValues.get(0);
    	String table_Crossed_memBer = colValues.get(1);
    	String table_dte = colValues.get(2);
    	
		Assert.assertTrue(table_original_memBer.equals(original_memBer), "Original Member not found in T_RE_CROSSED_MID. Instead found "+table_original_memBer);
		Assert.assertTrue(table_Crossed_memBer.equals(Crossed_memBer), "Crossed Member not found in T_RE_CROSSED_MID. Instead found "+table_Crossed_memBer);
		Assert.assertTrue(table_dte.equals(Common.convertSysdate()), "Insert date not equal to today's date in T_RE_CROSSED_MID. Instead it is "+table_dte);
		
		log("Successfully verified entry into T_RE_CROSSED_MID table.");
		
		//Store Members for Day 2
		Statement statement = Common.connection1.createStatement();

		//Original Member
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='original_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='original_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+original_memBer+"', 'original_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Crossed Member
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='Crossed_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='Crossed_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+Crossed_memBer+"', 'Crossed_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Aid Cat
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='CDE_AID_CATEGORY'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='CDE_AID_CATEGORY'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+CDE_AID_CATEGORY+"', 'CDE_AID_CATEGORY', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//SSN
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='SSN'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='SSN'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+ssn+"', 'SSN', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Case No.
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='CASENUM'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='CASENUM'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+casenum+"', 'CASENUM', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    }
    
    @Test
    public void test32956a() throws Exception{
    	TestNGCustom.TCNo="32956a";
    	log("//TC 32956a-Crossed MID detected - no match found Test Case");
    	
    	
    	//Get Crossed_memBer
    	sqlStatement="select b.id_medicaid, c.num_case, x.dep_num, ce.cde_aid_category, e.cde_agency, o.agency_id "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and rownum < 2";
        	
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_CASE");
    	colNames.add("DEP_NUM");
    	colNames.add("CDE_AID_CATEGORY");
    	colNames.add("CDE_AGENCY");
    	colNames.add("AGENCY_ID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String Crossed_memBer = colValues.get(0);
        String NUM_CASE=colValues.get(1);
        String DEP_NUM=colValues.get(2);
        String CDE_AID_CATEGORY=colValues.get(3);
        String CDE_AGENCY=colValues.get(4);
        String AGENCY_ID=colValues.get(5);
    	   
    	//get crossed member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+Crossed_memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
    	
        //Get crossed member's current Elig
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		String current_aid_crossed = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
		
		Assert.assertTrue(current_aid_crossed.contains(CDE_AID_CATEGORY), "DB returned aid cat may not be the member's first aid cat");
		
		log("Crossed Member ID:"+Crossed_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_crossed);
		
//		//Get the 2nd original member
//    	sqlStatement="select b.id_medicaid "+
//    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
//    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
//    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
//    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
//    			"and e.dte_end < to_char(sysdate, 'YYYYMMDD') "+
//    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
//    			"and exists (select num_ssn from t_re_base b1 where b1.num_ssn = b.num_ssn group by b1.num_ssn having count(b1.num_ssn) = 1) "+
//    			"and ce.cde_aid_category<>'"+CDE_AID_CATEGORY+"' "+
//    			"and rownum < 2";
//    	    	    	
//    	colNames.add("ID_MEDICAID");
//    	colValues = Common.executeQuery(sqlStatement, colNames);
//    	
//    	String original_memBer = colValues.get(0);
//    	
//    	//get original member details
//    	sqlStatement="select  b.num_ssn, b.dte_birth, b.nam_last, b.nam_first from T_RE_BASE b "+
//    			"where b.id_medicaid = "+original_memBer;
//    	
//    	colNames.add("NUM_SSN");  	 //0
//    	colNames.add("DTE_BIRTH");   //1
//    	colNames.add("NAM_LAST");    //2
//    	colNames.add("NAM_FIRST");   //3
//    	colValues = Common.executeQuery(sqlStatement, colNames);
	
    	//This will update SSN, DOB, Lastname and FirstName in the I/P file
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-700);
    	lastName = Common.generateRandomName();
//    	fname=colValues.get(3);
    	
//        //Get original member's current Elig
//    	LoginCheck();
//        Member.memberSearch(original_memBer);
//		String current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
//
//		driver.findElement(By.linkText("Member Benefit Plan")).click();
//		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
//		bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
//		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
//		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
//		
//		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
//		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
//		aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
//		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
//		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
				
		log("The following is replaced in file as SSN:"+ssn+" Last Name:"+lastName+" DoB:"+dob);
		
		//Create I/P file
    	casenum= NUM_CASE;
        dep=DEP_NUM;
    	otherid = AGENCY_ID;
        agency=CDE_AGENCY;
        aid=CDE_AID_CATEGORY;
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        beginDate = fileSysdateCustom(0);
        String addedBeginDate = beginDate; //this is stored because beginDate gets reset to "" after file run
        String addedlastName = lastName; //this is stored because lastName gets reset to P after file run

        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);      
        
        if ((Mid.equals(Crossed_memBer)))
        	  Assert.assertTrue(false,"New Member was not created. Crossed Member received in response file, which is "+Crossed_memBer);
        
        log("Successful upload and download of I/P file with New Member SSN:"+ssn+" Last Name:"+addedlastName+" DoB:"+dob);
        log("The response File contains the New Member ID:"+Mid);

        //Verify Warning messages
        
  	    String errCde="2388";
  	    String errMsg="Warning Member ID on txn is crossed with id_medicaid retrieved";
  	    
  	    if (!(result_type.equals("W")))
    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

        //Check that Crossed member's current Elig is gone
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory")).size();
		Assert.assertTrue(size==0, "Original member still has Elig. Maybe the Elig was not historied.");
		size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans")).size();
		Assert.assertTrue(size==0, "Original member still has BP. Maybe the BP was not historied.");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		String histStatus = driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "BP is not Historied. It is "+histStatus);
		
		driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		histStatus = driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "Aid cat is not Historied. It is "+histStatus);
				
		log("Successfully verified that Crossed Member ID:"+Crossed_memBer+" Aid cat and BP are historied");
		
		// Check that Original member has the Elig Added
    	LoginCheck();
        Member.memberSearch(Mid);
		String current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
		Assert.assertTrue(current_aid_original.equals(CDE_AID_CATEGORY+" "+dateXMLtoPanel(addedBeginDate)+" - 12/31/2299"), CDE_AID_CATEGORY+" was not Added. Instead, this Aid was found: "+current_aid_original);

		log("Successfully verified that New Member ID:"+Mid+" has the following AId cat added: "+current_aid_original);
		log("Please check Member Benefit plan/Aid Cat dropdown and panels manually");
		
		//Check T_RE_CROSSED_MID Table
		sqlStatement="select ORIGINAL_MID, CROSSED_MID,  to_char(DTE_INSERT, 'MM/DD/YYYY') as DTE from T_RE_CROSSED_MID where CROSSED_MID = "+Crossed_memBer;
    	colNames.add("ORIGINAL_MID"); //0
    	colNames.add("CROSSED_MID");  //1
    	colNames.add("DTE");   //2
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String table_original_memBer = colValues.get(0);
    	String table_Crossed_memBer = colValues.get(1);
    	String table_dte = colValues.get(2);
    	
		Assert.assertTrue(table_original_memBer.equals(Mid), "Original Member not found in T_RE_CROSSED_MID. Instead found "+table_original_memBer);
		Assert.assertTrue(table_Crossed_memBer.equals(Crossed_memBer), "Crossed Member not found in T_RE_CROSSED_MID. Instead found "+table_Crossed_memBer);
		Assert.assertTrue(table_dte.equals(Common.convertSysdate()), "Insert date not equal to today's date in T_RE_CROSSED_MID. Instead it is "+table_dte);
		
		log("Successfully verified entry into T_RE_CROSSED_MID table.");
		
		//Store Members for Day 2
		Statement statement = Common.connection1.createStatement();

		//Original Member
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='original_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='original_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+Mid+"', 'original_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Crossed Member
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='Crossed_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='Crossed_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+Crossed_memBer+"', 'Crossed_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Aid Cat
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='CDE_AID_CATEGORY'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='CDE_AID_CATEGORY'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+CDE_AID_CATEGORY+"', 'CDE_AID_CATEGORY', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//SSN
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='SSN'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='SSN'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+ssn+"', 'SSN', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Case No.
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='CASENUM'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='CASENUM'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+casenum+"', 'CASENUM', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    }
    
    @Test
    public void test32957a() throws Exception{
    	TestNGCustom.TCNo="32957a";
    	log("//TC 32957a-Inactive MID on txn, crossed MID detected for the active member Test Case");
    	
    	
    	//Get Crossed_memBer
    	sqlStatement="select b.id_medicaid, c.num_case, x.dep_num, ce.cde_aid_category, e.cde_agency, o.agency_id, b.sak_recip "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and b.ind_active = 'N' "+
    			"and rownum < 2";
        	
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_CASE");
    	colNames.add("DEP_NUM");
    	colNames.add("CDE_AID_CATEGORY");
    	colNames.add("CDE_AGENCY");
    	colNames.add("AGENCY_ID");
    	colNames.add("SAK_RECIP"); //This is to get the active member id later
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String Crossed_memBer = colValues.get(0);
        String NUM_CASE=colValues.get(1);
        String DEP_NUM=colValues.get(2);
        String CDE_AID_CATEGORY=colValues.get(3);
        String CDE_AGENCY=colValues.get(4);
        String AGENCY_ID=colValues.get(5);
        String INACTIVE_SAK_RECIP=colValues.get(6);
   
    	//get crossed member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+Crossed_memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
    	
        //Get crossed member's current Elig
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		String current_aid_crossed = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
		
		Assert.assertTrue(current_aid_crossed.contains(CDE_AID_CATEGORY), "DB returned aid cat may not be the member's first aid cat");
		
		log("Crossed(Inactive) Member ID:"+Crossed_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_crossed);
		
		//Get Active member ID
		sqlStatement="select a.id_medicaid from t_re_base a, t_recip_link_xref x where x.sak_recip = a.sak_recip and x.sak_rcp_purged = "+INACTIVE_SAK_RECIP;
    	colNames.add("ID_MEDICAID"); //0
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String active_mem = colValues.get(0);
		log("Crossed(Active) Member ID:"+active_mem);
		
		//Get the 2nd original member
    	sqlStatement="select b.id_medicaid "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.dte_end < to_char(sysdate, 'YYYYMMDD') "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and exists (select num_ssn from t_re_base b1 where b1.num_ssn = b.num_ssn group by b1.num_ssn having count(b1.num_ssn) = 1) "+
    			"and ce.cde_aid_category<>'"+CDE_AID_CATEGORY+"' "+
    			"and rownum < 2";
    	    	    	
    	colNames.add("ID_MEDICAID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String original_memBer = colValues.get(0);
    	
    	//get original member details
    	sqlStatement="select  b.num_ssn, b.dte_birth, b.nam_last, b.nam_first from T_RE_BASE b "+
    			"where b.id_medicaid = "+original_memBer;
    	
    	colNames.add("NUM_SSN");  	 //0
    	colNames.add("DTE_BIRTH");   //1
    	colNames.add("NAM_LAST");    //2
    	colNames.add("NAM_FIRST");   //3
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//This will update SSN, DOB, Lastname and FirstName in the I/P file
        ssn=colValues.get(0);
        dob =colValues.get(1).substring(0, 4)+"-"+colValues.get(1).substring(4, 6)+"-"+colValues.get(1).substring(6, 8);
    	lastName = colValues.get(2);
    	fname=colValues.get(3);
    	
        //Get original member's current Elig
    	LoginCheck();
        Member.memberSearch(original_memBer);
		String current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
				
		log("Original Member ID:"+original_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_original+" Last Name:"+lastName+" First Name:"+fname+" DoB:"+dob);
		
		//Create I/P file
    	casenum= NUM_CASE;
        dep=DEP_NUM;
    	otherid = AGENCY_ID;
        agency=CDE_AGENCY;
        aid=CDE_AID_CATEGORY;
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        beginDate = fileSysdateCustom(0);
        String addedBeginDate = beginDate; //this is stored because beginDate gets reset to "" after file run
        String addedlastName = lastName; //this is stored because lastName gets reset to P after file run

        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);      
        
        if (!(Mid.equals(original_memBer)))
        	  Assert.assertTrue(false,"Original Member "+original_memBer+" not the same as Member received in response file "+Mid);
        
        log("Successful upload and download of I/P file Original Member SSN:"+ssn+" Last Name:"+addedlastName+" First Name:"+fname+" DoB:"+dob);
        log("The response File contains the Original Member ID:"+original_memBer);

//        //Verify Warning messages
//        
//  	    String errCde="2388";
//  	    String errMsg="Warning Member ID on txn is crossed with id_medicaid retrieved";
//  	    
//  	    if (!(result_type.equals("W")))
//    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);
//
//  	    if (!(errorCode.equals(errCde)))
//    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
//  		
//  	    if (!(errorMessage.equals(errMsg)))
//    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
//        
//  	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);
  	    
  	    
        //Verify Error messages
		String fileName=tempDirPath+Common.fileName();
        String output=FileUtils.readFileToString(new File(fileName));
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
        
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        errorMessage=valuesInQuotes[l-1].trim();
        errorCode=valuesInQuotes[l-2].trim();
        
        //Validate 1st error message
        String errCde="2317";
        String errMsg="Warning Member ID is invalid, use Member ID on response file";
	    
	    if (!(result_type.equals("W")))
  		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
      
	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);
	    
	    //Validate 2nd error message
	    errCde="2388";
	    errMsg="Warning Member ID on txn is crossed with id_medicaid retrieved";
	    
        errorMessage=valuesInQuotes[l-3].trim();
        errorCode=valuesInQuotes[l-4].trim();
	    
	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
	    
	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

        //Check that Crossed member's current Elig is gone
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory")).size();
		Assert.assertTrue(size==0, "Crossed member still has Elig. Maybe the Elig was not historied.");
		size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans")).size();
		Assert.assertTrue(size==0, "Crossed member still has BP. Maybe the BP was not historied.");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		String histStatus = driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "BP is not Historied. It is "+histStatus);
		
		driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		histStatus = driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "Aid cat is not Historied. It is "+histStatus);
				
		log("Successfully verified that Crossed Member ID:"+Crossed_memBer+" Aid cat and BP are historied");
		
		// Check that Original member has the Elig Added
    	LoginCheck();
        Member.memberSearch(original_memBer);
		current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
		Assert.assertTrue(current_aid_original.equals(CDE_AID_CATEGORY+" "+dateXMLtoPanel(addedBeginDate)+" - 12/31/2299"), CDE_AID_CATEGORY+" was not Added to Original Member. Instead, this Aid was found: "+current_aid_original);

		log("Successfully verified that Original Member ID:"+original_memBer+" has the following AId cat added: "+current_aid_original);
		log("Please check Member Benefit plan/Aid Cat dropdown and panels manually");
		
		//Check T_RE_CROSSED_MID Table
		sqlStatement="select ORIGINAL_MID, CROSSED_MID,  to_char(DTE_INSERT, 'MM/DD/YYYY') as DTE from T_RE_CROSSED_MID where CROSSED_MID = "+Crossed_memBer;
    	colNames.add("ORIGINAL_MID"); //0
    	colNames.add("CROSSED_MID_ACTIVE");  //1
    	colNames.add("DTE");   //2
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String table_original_memBer = colValues.get(0);
    	String table_Crossed_memBer_active = colValues.get(1);
    	String table_dte = colValues.get(2);
    	
		Assert.assertTrue(table_original_memBer.equals(original_memBer), "Original Member not found in T_RE_CROSSED_MID. Instead found "+table_original_memBer);
		Assert.assertTrue(table_Crossed_memBer_active.equals(active_mem), "Crossed Member(Active) not found in T_RE_CROSSED_MID. Instead found "+table_Crossed_memBer_active);
		Assert.assertTrue(table_dte.equals(Common.convertSysdate()), "Insert date not equal to today's date in T_RE_CROSSED_MID. Instead it is "+table_dte);
		
		log("Successfully verified entry into T_RE_CROSSED_MID table.");
		
		//Store Members for Day 2
		Statement statement = Common.connection1.createStatement();

		//Original Member
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='original_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='original_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+original_memBer+"', 'original_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Crossed Member
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='Crossed_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='Crossed_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+Crossed_memBer+"', 'Crossed_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Aid Cat
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='CDE_AID_CATEGORY'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='CDE_AID_CATEGORY'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+CDE_AID_CATEGORY+"', 'CDE_AID_CATEGORY', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//SSN
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='SSN'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='SSN'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+ssn+"', 'SSN', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Case No.
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='CASENUM'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='CASENUM'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+casenum+"', 'CASENUM', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    }
    
    
    public void addPPA(String amount, int days) {
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatntLiabilityAmount")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatntLiabilityAmount")).sendKeys(amount);
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatLiabilityCode"))).selectByVisibleText("Nursing Home/ICF/Chronic");
		driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(days));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
    }
        
    public String getNewMemebr(String otherid, String fname, String ssn, String casenum, String dob, String adr1, String city, String zip, String dep, String aid, String agency) throws Exception {
    	
    	String xml;
    	//Check if SSN 4th and 5th digit <>00
    	if ((ssn.substring(3, 5).equals("00")) && !(TestNGCustom.TCNo.equals("32937"))) {
//    		ssn=ssn.substring(0, 3)+"47"+ssn.substring(5, 9);//any randon value at 4 and 5 except 00
    		throw new SkipException ("SSN 4th and 5th digit were 00, so retry this TC. SSN:"+ssn);
    	}
    	//unless set something else, Set begindate = dob 
    	if (beginDate.equals(""))
    		beginDate = getEligeffDT(dob);
    	if (!endElig) {
    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
    					"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
    					"<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\""+eligStatus+"\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" family_size=\"07\" />\n</EligibilityRequest>");    	//filename is same as otherid for uniqueness
    	} else {
    		endElig = false; //for next time
    		Date sysdate=new Date();
    		SimpleDateFormat sdf= new SimpleDateFormat("yyyy-MM-dd");
    		String sys = sdf.format(sysdate).toString(); //this is the elig end date
    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/2.9/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
						"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
						"<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"4\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+beginDate+"\" dte_end_elig=\""+sys+"\" family_size=\"07\" />\n</EligibilityRequest>");    	//filename is same as otherid for uniqueness	
    	}
    	
    	//Reset id_medicaid in input file to " " for next run
    	if (!(fileMem.equals(" ")))
    		fileMem=" ";
    	//Reset last name in input file to "MAZDAZ" for next run
    	if (!(lastName.equals("MAZDAZ")))
    		lastName="MAZDAZ";
    	//Reset begin date in input file to "" for next run
    	if (!(beginDate.equals("")))
    		beginDate="";
    	//Reset open reason to 01, if its not 01
    	if (!(openRsn.equals("01")))
    		openRsn="01";
    	//Reset case status to 1, if its not 1
    	if (!(caseStatus.equals("1")))
    		caseStatus="1";
    	//Reset elig status to 1, if its not 1
    	if (!(eligStatus.equals("1")))
    		eligStatus="1";
    	
    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
        Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
    	log("The MA21 download File name is: "+Common.fileName());
    	//Press Clear button to reset the screen
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

        String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
        if(l>5)
        {
        	errorMessage=valuesInQuotes[l-1].trim();
        	errorCode=valuesInQuotes[l-2].trim();
        }
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
     if(result_type.equals("S"))
        {
        	System.out.println("The Member Eligibility file upload is Successfull");
        }
        else{
            System.out.println("Upload successfull but data issue "+errorMessage);
        }
    	
    	return id_medicaid;
    }
    
public static String getCustomMemebr(String xml) throws Exception {
    	
		String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
        Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
    	Thread.sleep(2000);
    	//Press Clear button to reset the screen
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

        String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
        if(l>5)
        {
        	errorMessage=valuesInQuotes[l-1].trim();
        	errorCode=valuesInQuotes[l-2].trim();
        }
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
     if(result_type.equals("S"))
        {
        	System.out.println("The Member Eligibility file upload is Successfull");
        }
        else{
            System.out.println("Upload successfull but data issue "+errorMessage);
        }
    	
    	return id_medicaid;
    }
    
    public void verifyCaseHist(String searchID, String Fid,String Sid,String Did) {
    	
      memberSearch(searchID);

      //Click on Member Case History link
      driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
      //Click on case number
      driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
      Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(casenum),"Case Number Mismatch");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_medicaidID")).getText().equals(Did),"Daughter ID not listed in member case history");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_medicaidID")).getText().equals(Fid),"Father ID not listed in member case history");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_2:MemberCaseDataBean_ColValue_medicaidID")).getText().equals(Sid),"Son ID not listed in member case history");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_depNumber")).getText().equals("02"),"Daughter Dep number mismatch");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_depNumber")).getText().equals("00"),"Father Dep number mismatch");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_2:MemberCaseDataBean_ColValue_depNumber")).getText().equals("01"),"Son Dep number mismatch");

  	  Common.cancelAll();
    	
    }
    
    public static void memberSearch(String memberID) {
        driver.findElement(By.xpath("//*[@id='MMISForm:MMISMenu:_MENUITEM_Search']")).click();
        driver.findElement(By.xpath("//*[@id='MMISForm:MMISMenu:_MENUITEM_Search']")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:RecipientSearchResultDataPanel_MedicaidID")).clear();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:RecipientSearchResultDataPanel_MedicaidID")).sendKeys(memberID);
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:SEARCH")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchResults_0:_id21")).click();
    }
    

	//Get system date +/- days in yyyy-MM-dd format
	public static String fileSysdateCustom(int i) {
		SimpleDateFormat sdf= new SimpleDateFormat("yyyy-MM-dd");
		Calendar cal = Calendar.getInstance();     
		cal.add( Calendar.DATE, i );    
		return (sdf.format(cal.getTime()).toString());
	} 
	
	//Get system date +/- days in yyyyMMdd format
	public static String DBSysdateCustom(int i) {
		SimpleDateFormat sdf= new SimpleDateFormat("yyyyMMdd");
		Calendar cal = Calendar.getInstance();     
		cal.add( Calendar.DATE, i );    
		return (sdf.format(cal.getTime()).toString());
	} 
	
	//Get date string from yyyy-MM-dd to MM/dd/YYYY format
	public static String dateXMLtoPanel(String xmlDate) {
		return xmlDate.substring(5, 7)+"/"+xmlDate.substring(8, 10)+"/"+xmlDate.substring(0, 4);
	}
	
	//Get date string from MM/dd/YYYY to yyyy-MM-dd format
	public static String datePanelToXML(String panelDate) {
		return panelDate.substring(6, 10)+"-"+panelDate.substring(0, 2)+"-"+panelDate.substring(3, 5);
	}
	
	//Get date string from yyyyMMdd to MM/dd/YYYY format
	public static String dateDBtoPanel(String xmlDate) {
		return xmlDate.substring(4, 6)+"/"+xmlDate.substring(6, 8)+"/"+xmlDate.substring(0, 4);
	}
	
	public void enterMMQcommon(String mmqTarget) {
		//Service Questions 13-14
		driver.findElement(By.id("mmqFirstServiceQuestionForm:_MENUITEM_secondServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_specialAttImmobility"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_specialAttSeverSpasRigidity"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_specialAttBehaviourProb"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_specialAttIsolation"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_restNursingCodeType1"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_restNursingCodeType2"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_restNursingCodeType3"))).selectByVisibleText("0 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();

		//Additional Questions
		driver.findElement(By.id("mmqSecondServiceQuestionForm:_MENUITEM_additionalQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_toiletUse"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_transfer"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_mentalStatus"))).selectByVisibleText("1 - Oriented");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_restraint"))).selectByVisibleText("1 - Not Ordered");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_activitiesParticipation"))).selectByVisibleText("1 - Always Active");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationType1"))).selectByVisibleText("00 - 00 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationType2"))).selectByVisibleText("00 - 00 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationType3"))).selectByVisibleText("00 - 00 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationFreq1"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationFreq2"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationFreq3"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationMed1"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationMed2"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationMed3"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationMed4"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationFreq1"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationFreq2"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationFreq3"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationFreq4"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:AccidentsPanel:mmqAdditionalQuestionVO_accidContWeightAccidents"))).selectByVisibleText("Yes");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:AccidentsPanel:mmqAdditionalQuestionVO_accidContWeightContracture"))).selectByVisibleText("Yes");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:AccidentsPanel:mmqAdditionalQuestionVO_accidContWeightWeightChange"))).selectByVisibleText("No");
		//Enter Diag code
		driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_primaryICDDiagnosis")).clear();
        System.out.println("effDt "+effDt);
        System.out.println("refEffDt "+refEffDt);

		if (effDt.after(refEffDt))
			driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_primaryICDDiagnosis")).sendKeys("A200"); //ICD 10
		else
			driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_primaryICDDiagnosis")).sendKeys("4019"); //ICD 9


		
		//Certified Statement
		driver.findElement(By.id("mmqAdditionalQuestionForm:_MENUITEM_certifiedStatementTab")).click();
		Common.getPageError("//form[contains(@id,'mmqAdditionalQuestionForm')]/div/table[2]/tbody/tr"); //Cannot use mmqTarget here because the on submit page, mmqTarget is present even though there is no page error
		driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_rnEvaluator")).sendKeys(Common.generateRandomName());
		driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_evaluationDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_nameOfAdmin")).sendKeys(Common.generateRandomName());
		new Select(driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_affiliation"))).selectByVisibleText("1 - Nursing Facility Staff");
		
		//Submit MMQ
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @value='Submit']")).click();
		Common.getPageError(mmqTarget);
	}
	
	public static void validateMMQ(String member, String loc, String score) throws Exception {
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(member);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Admission"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
	}

	//Get system date from String to Date  format
	public static Date DT(String inputStrDt) throws Exception {
		Date date =new SimpleDateFormat("MM/dd/yyyy").parse(inputStrDt);
		return date;
	}
	
	//This function was developed on 5/11/2015 when Gloria identified that we are setting Elig Eff DT = member DoB, which is not correct.
	//This function looks at Member's DoB and adds addyears(a certain no. of years, see below) to it, and makes it the Members Elig start date
	//Later, we removed the addyears logic(however, still kept as comments below as might be useful later). Current logic is if dob < 2 years, Elig start date= dob, else elig start date = sysdate-1 year
	public static String getEligeffDT(String memDoB) throws Exception {
		String alterMemDoB=memDoB;
		String eligEffDt;
		//int addyears = 3;
		SimpleDateFormat sdf1= new SimpleDateFormat("yyyy-MM-dd");
		Date eligEffDate;

		
		//get DoB in actual Date format
		Date dobDate = sdf1.parse(alterMemDoB);
		
		//Get today's date
		Date sysDT = new Date();
		int NineteenHundredSysDT = sysDT.getYear();
		int NineteenHundredAge =  dobDate.getYear();
		
		if ((NineteenHundredSysDT-NineteenHundredAge)<=1)
			eligEffDt=memDoB;
		else {
//			dobDate.setYear((NineteenHundredAge+addyears));
			dobDate.setYear((NineteenHundredSysDT-1));
			eligEffDate=dobDate;
			eligEffDt = sdf1.format(eligEffDate).toString();
		}
		
		return eligEffDt;
	}
	
    @Test
    public void demo() throws Exception{
    	String dob = "2015-05-11";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));
    	
    	dob="2014-05-11";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));

    	dob="2015-05-17";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));

    	dob="2013-05-18";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));

    	dob="2015-05-19";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));

    }

		
}
