package newMMIS_Subsystems;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.sql.Statement;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.concurrent.TimeUnit;

import org.apache.commons.io.FileUtils;
import org.apache.commons.lang3.StringUtils;
import org.openqa.selenium.By;
import org.openqa.selenium.support.ui.Select;
import org.testng.Assert;
import org.testng.SkipException;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Listeners;
import org.testng.annotations.Test;

@Listeners({ newMMIS_Subsystems.TestNGCustom.class })
public class TPL extends Login{
	
	@BeforeTest
    public void tplStartup() throws Exception {
    	log("Starting TPL Subsystem......");
    }
	
	@BeforeMethod
	public void LoginCheck() throws Exception {
		Common.resetBase();
		testCheckDBLoginSuccessful();	
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	}
	
    @Test
    public void test22455a() throws Exception{
    	TestNGCustom.TCNo="22455a";
    	log("//TC 22455a");
    	
    	String target;
    	String fieldName;
    	Boolean textProperty;
    	
    	searchTPLMem("100004650981");
    	
    	target="//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[3]/td[2]";
    	fieldName = "Member Name";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[3]/td[2]";
    	fieldName = "Carrier Name";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);

    	//Coverage
        driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n103")).click();
    	for (int i=0;i<3;i++){
        	target="//span[@id='MMISForm:MMISBodyContent:CoveragePanel:CoverageList_"+i+":CoverageXrefBean_ColValue_otherInsurancePlanCode']";
        	fieldName = "OI plan no."+(i+1);
        	textProperty = true;
        	verifyField(target, fieldName, textProperty);
    	}
    	
    	//Dependents of policy
        driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n104")).click();
        
    	target="//span[@id='MMISForm:MMISBodyContent:DependentsofPolicyPanel:DependentsofPolicyList_0:DependentsofPolicyBean_ColValue_savedStatus']";
    	fieldName = "Dependents of policy: Record Status:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
        
    	target="//span[@id='MMISForm:MMISBodyContent:DependentsofPolicyPanel:DependentsofPolicyList_0:DependentsofPolicyBean_ColValue_medicaidID']";
    	fieldName = "Dependents of policy: Member:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//span[@id='MMISForm:MMISBodyContent:DependentsofPolicyPanel:DependentsofPolicyList_0:DependentsofPolicyBean_ColValue_lastName']";
    	fieldName = "Dependents of policy: Member Last Name:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//span[@id='MMISForm:MMISBodyContent:DependentsofPolicyPanel:DependentsofPolicyList_0:DependentsofPolicyBean_ColValue_firstName']";
    	fieldName = "Dependents of policy: Member First Name:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//span[@id='MMISForm:MMISBodyContent:DependentsofPolicyPanel:DependentsofPolicyList_0:DependentsofPolicyBean_ColValue_ssnNumber']";
    	fieldName = "Dependents of policy: Member SSN:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//span[@id='MMISForm:MMISBodyContent:DependentsofPolicyPanel:DependentsofPolicyList_0:DependentsofPolicyBean_ColValue_birthDate']";
    	fieldName = "Dependents of policy: Member DoB:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	//Additional policies- Already have TC 23310 for it.
    	
    	//Related Data - HIPAA Service/Coverage
    	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataXref")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n45")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:HIPAAServiceCoverageTypePanel:HIPAAServiceCoverageTypeSearchResults_0:HipaaCoverageXrefBean_ColValue_status")).click();
	 	
	 	Assert.assertTrue(driver.findElement(By.cssSelector("h3.panel-header")).getText().trim().equals("HIPAA Service-Coverage Maintenance"), "HIPAA Service-Coverage Maintenance Panel did not open");

	 	target="//input[@id='MMISForm:MMISBodyContent:HIPAAServiceCoverageTypePanel:HipaaCoverageXref_CoverageType']";
    	fieldName = "HIPAA Service/Coverage: Coverage Type:";
    	textProperty = false;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//input[@id='MMISForm:MMISBodyContent:HIPAAServiceCoverageTypePanel:HipaaCoverageXref_SvcType']";
    	fieldName = "HIPAA Service/Coverage: HIPAA Service Type:";
    	textProperty = false;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//textarea[@id='MMISForm:MMISBodyContent:HIPAAServiceCoverageTypePanel:HipaaCoverageXrefDataPanel_ServTypeDescription']";
    	fieldName = "HIPAA Service/Coverage: HIPAA Service Description:";
    	textProperty = false;
    	verifyField(target, fieldName, textProperty);
    	
    	//Related Data - Carrier
    	//Search by name
    	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierBean_CriteriaPanel:TplCarrierDataPanel_BusName")).sendKeys("BLUE");
	 	Common.search();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_status")).click();
	 	
	 	//Search by id
    	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierBean_CriteriaPanel:TplCarrierDataPanel_CarrierCode")).sendKeys("0027033");
	 	Common.search();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_status")).click();
	 	
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierBean_DataPanel']/thead/tr/td/table/tbody/tr/td/h3")).getText().trim().equals("Carrier Maintenance"), "Carrier Maintenance Panel did not open");
    	
	 	target="//input[@id='MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_CarrierCode']";
    	fieldName = "Carrier Number";
    	textProperty = false;
    	verifyField(target, fieldName, textProperty);
    	
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TplCarrierPanel:TplCorrAddressBean_DataPanel']/thead/tr/td/table/tbody/tr/td/h3")).getText().trim().equals("Correspondence Address Maintenance"), "Correspondence Address Maintenance Panel did not open");
    	
	 	target="//input[@id='MMISForm:MMISBodyContent:TplCarrierPanel:Address_1']";
    	fieldName = "Carrier Coresspondence Address: Address 1";
    	textProperty = false;
    	verifyField(target, fieldName, textProperty);
    	
	 	target="//input[@id='MMISForm:MMISBodyContent:TplCarrierPanel:Address_3']";
    	fieldName = "Carrier Coresspondence Address: City";
    	textProperty = false;
    	verifyField(target, fieldName, textProperty);
    	
	 	target="//select[@id='MMISForm:MMISBodyContent:TplCarrierPanel:Address_4']/option[@selected='selected']";
    	fieldName = "Carrier Coresspondence Address: State";
    	textProperty = false;
    	verifyField(target, fieldName, textProperty);
    	
	 	target="//input[@id='MMISForm:MMISBodyContent:TplCarrierPanel:Address_5']";
    	fieldName = "Carrier Coresspondence Address: Zip";
    	textProperty = false;
    	verifyField(target, fieldName, textProperty);
    	
    	//Carrier to OI Plan
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/div[2]/table/thead/tr/th/table/tbody/tr/td/h3")).getText().trim().equals("Carrier to OI Plan"), "Carrier to OI Plan Panel did not open");
    	for (int i=0;i<3;i++){
        	target="//span[@id='MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:TplCarrierPlanXrefList_"+i+":TplCarrierToOIPlanBean_ColValue_otherInsurancePlanToCoverage_otherInsurancePlanCode']";
        	fieldName = "Carrier to OI Plan: OI plan no."+(i+1);
        	textProperty = true;
        	verifyField(target, fieldName, textProperty);
    	}
    	
    	//Employers For Carrier Search
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/div[3]/table/thead/tr/th/table/tbody/tr/td/h3")).getText().trim().equals("Employers For Carrier Search"), "Employers For Carrier Search Panel did not open");
	 	Assert.assertTrue(driver.findElement(By.cssSelector("h4.panel-header")).getText().trim().equals("Search Criteria"), "Search Criteria Panel did not open");
	 	
	 	target="//span[@id='MMISForm:MMISBodyContent:TplCarrierPanel:EmpCarrierXrefPanel:TplEmpCarrierXrefNoRecordsMessage']";
    	fieldName = "Carrier to Employer Xref: ***No records found***";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	//Status
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/div[4]/table/thead/tr/th/table/tbody/tr/td/h3")).getText().trim().equals("Status"), "Status Panel did not open");

    	target="//span[@id='MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatusList_0:TplCarrierStatusBean_ColValue_status']";
    	fieldName = "Status: Record Status:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//span[@id='MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatusList_0:TplCarrierStatusBean_ColValue_statusIndicator']";    	
    	fieldName = "Status: Status:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//span[@id='MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatusList_0:TplCarrierStatusBean_ColValue_effectiveDate']";    	
    	fieldName = "Status:  Effective Date:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
    	
    	target="//span[@id='MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatusList_0:TplCarrierStatusBean_ColValue_endDate']";    	
    	fieldName = "Status: End Date:";
    	textProperty = true;
    	verifyField(target, fieldName, textProperty);
	 	
    	
    	//Carriers by Employer
    	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TPLReportsNavigatorPanel:TPLReportsNavigator:ITM_n100")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CarriersByEmployerPanel:CarriersByEmployerBean_CriteriaPanel:EmployerID")).sendKeys("0008803");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Batch Print']")).click();
		String message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Save Successful."), "Save NOT successful Error Message: "+message+"...");
		
		//Employers by Carrier
    	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TPLReportsNavigatorPanel:TPLReportsNavigator:ITM_n103")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:EmployersByCarrierPanel:EmployersByCarrierBean_CriteriaPanel:CarrierCodeID")).sendKeys("0027000");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Batch Print']")).click();
		message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Save Successful."), "Save NOT successful Error Message: "+message+"...");
		
		//Carriers by member
    	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TPLReportsNavigatorPanel:TPLReportsNavigator:ITM_n101")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CarriersByRecipientPanel:CarriersByRecipientBean_CriteriaPanel:MemberID")).sendKeys("100004650981");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Batch Print']")).click();
		message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Save Successful."), "Save NOT successful Error Message: "+message+"...");
		
		//Members By Carrier
    	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TPLReportsNavigatorPanel:TPLReportsNavigator:ITM_n104")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientsByCarrierPanel:RecipientsByCarrierBean_CriteriaPanel:CarrierCodeID")).sendKeys("0027033");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Batch Print']")).click();
		message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Save Successful."), "Save NOT successful Error Message: "+message+"...");
		

		
    }
    
    @Test
    public void test22456() throws Exception{
    	TestNGCustom.TCNo="22456";
    	log("//TC 22456");

    	//Get TPL member
    	sqlStatement = "select /*+RULE*/ b.id_medicaid, b.num_ssn, h.nam_first, h.nam_last, b.nam_first NAM_FIRST_M, b.nam_last NAM_LAST_M from t_tpl_resource r, t_re_base b, t_policy_holder h, t_coverage_xref xref"+
    				   " where r.sak_recip = b.sak_recip  and h.sak_pol_hold = r.sak_policy_ownr and b.ind_active = 'Y' and b.num_ssn <> ' ' and r.sak_tpl_resource = xref.sak_tpl_resource and xref.dte_end = 22991231 and b.nam_mid_init = ' '"+
    				   " and exists (select r1.sak_recip from t_tpl_resource r1 where r1.sak_recip = r.sak_recip group by r1.sak_recip having count(r1.sak_recip) = 1 )"+
    				   " and exists (select r2.sak_policy_ownr from t_tpl_resource r2 where r2.sak_policy_ownr = r.sak_policy_ownr group by r2.sak_policy_ownr having count(r2.sak_policy_ownr) = 5 )"+
    				   " and b.num_ssn not in ('011848497')"+ //Excluding these SSNs as they have multiple members with same ssn. Creating problems for script.
    				   " and rownum < 2";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN"); 	//1
    	colNames.add("NAM_FIRST"); 	//2
    	colNames.add("NAM_LAST"); 	//3
    	colNames.add("NAM_FIRST_M");	//4
    	colNames.add("NAM_LAST_M"); 	//5
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	log(" TPL Member: "+colValues.get(0)+" SSN: "+colValues.get(1)+" FName: "+colValues.get(2)+" LName: "+colValues.get(3)+" PolFname "+colValues.get(4)+" PolLname "+colValues.get(5));
    	
    	//Search by member ID
    	searchTPLMem(colValues.get(0));
	 	
	 	//Select the member and get TPL info
	 	String idMem = driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText();
	 	String numPol = driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText();
	 	String  numCarrier= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[2]/td[2]")).getText();
	 	String  nameMember= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[3]/td[2]")).getText();
	 	String  namePolHold= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[3]/td[2]")).getText();
	 	String  nameCarrier= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[3]/td[2]")).getText();
	 	String  ssnMem= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[4]/td[2]")).getText();
	 	String  ssnPol= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText();
	 	String  minEff= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[4]/td[2]")).getText();
	 	String  maxEnd= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[5]/td[2]")).getText();
	 	String  polType= driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[5]/td[2]")).getText();
	 	Common.cancelAll();
	 	
	 	//Search by SSN
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchBean_CriteriaPanel:TplSearchResultDataPanel_RecipientSSN")).sendKeys(colValues.get(1));
	 	Common.search();
	 	Common.searchRecords(colValues.get(0));
	 	
	 	//Verify TPL info
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchResults_0:_id14")).click();
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(idMem), "idMem mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(numPol), "numPol mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[2]/td[2]")).getText().equals(numCarrier), "numCarrier mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[3]/td[2]")).getText().equals(nameMember), "nameMember mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[3]/td[2]")).getText().equals(namePolHold), "namePolHold mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[3]/td[2]")).getText().equals(nameCarrier), "nameCarrier mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[4]/td[2]")).getText().equals(ssnMem), "ssnMem mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(ssnPol), "ssnPol mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[4]/td[2]")).getText().equals(minEff), "minEff mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[5]/td[2]")).getText().equals(maxEnd), "maxEnd mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[5]/td[2]")).getText().equals(polType), "polType mismatch");
	 	Common.cancelAll();
	 	
	 	//Search by Policyholder Name
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchBean_CriteriaPanel:TplSearchResultDataPanel_PolicyholderLastName")).sendKeys(colValues.get(3));
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchBean_CriteriaPanel:TplSearchResultDataPanel_PolicyholderFirstName")).sendKeys(colValues.get(2));
	 	Common.search();
	 	Common.searchRecords(colValues.get(0));
	 	boolean found= false;
	 	for (int i=0;i<5;i++) {
	 		if (driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchResults_"+i+":_id14")).getText().equals(colValues.get(0))) {
	 			driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchResults_"+i+":_id14")).click();
	 			i=5;
	 			found = true;
	 		}
	 	}
	 	if (!found)
		 	Assert.assertTrue(false, "Unable to get member by policyholdername");

	 	
	 	//Verify TPL info
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(idMem), "idMem mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(numPol), "numPol mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[2]/td[2]")).getText().equals(numCarrier), "numCarrier mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[3]/td[2]")).getText().equals(nameMember), "nameMember mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[3]/td[2]")).getText().equals(namePolHold), "namePolHold mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[3]/td[2]")).getText().equals(nameCarrier), "nameCarrier mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[4]/td[2]")).getText().equals(ssnMem), "ssnMem mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(ssnPol), "ssnPol mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[4]/td[2]")).getText().equals(minEff), "minEff mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[5]/td[2]")).getText().equals(maxEnd), "maxEnd mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:TPLInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[5]/td[2]")).getText().equals(polType), "polType mismatch");
	 	Common.cancelAll();

	 	//verify member information panels
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();

	 	Member.memberSearch(colValues.get(0));	 	
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(idMem), "idMem mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(colValues.get(5)+", "+colValues.get(4)), "nameMember mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(ssnMem), "ssnMem mismatch");
	 	Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[6]/td[2]")).getText().equals("Yes"), "TPL indicator expected YES but found NO");

    }
    
    public static void searchTPLMem(String member) throws Exception {
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchBean_CriteriaPanel:TplSearchResultDataPanel_CurrentID")).sendKeys(member);
	 	Common.search();
	 	Common.searchRecords(member);
	 	if (driver.findElements(By.id("MMISForm:MMISBodyContent:TplSearchResults_0:_id14")).size()==0)
	 		throw new SkipException("Skipping this test because the TPL member you are trying to search for was not found");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchResults_0:_id14")).click();

    }
    
    @Test
    public void test22459() throws Exception{
    	TestNGCustom.TCNo="22459";
    	log("//TC 22459");
    	
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	    //Select Other
	    driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	    //Select carrier
	    driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierBean_CriteriaPanel:TplCarrierDataPanel_CarrierCode")).sendKeys("0027014");
	    Common.search();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_carrierCode")).click();
	    
	 	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id,'TplCarrierToOIPlanBean_ColValue_status')]")).size()>1, "Multiple and concurrent OI plan profiles are not displayed for carrier");
    }
    
    @Test
    public void test23291a() throws Exception{
    	TestNGCustom.TCNo="23291a";
    	log("//TC 23291a");
    	
    	sqlStatement="Select  A.Id_Medicaid, A.Num_Ssn, A.Nam_First, A.Nam_Last, A.Dte_Birth, C.Agency_Id From T_Re_Base A, T_Re_Other_Id C Where A.Ind_Active = 'Y' and num_ssn <>' ' And A.Sak_Recip=C.Sak_Recip And C.Cde_Agency = 'MHO' And C.End_Date = 22991231 and A.sak_recip not in (select sak_recip from t_tpl_resource) and Rownum < 2";
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_SSN");
    	colNames.add("NAM_FIRST");
    	colNames.add("NAM_LAST");
    	colNames.add("DTE_BIRTH");
    	colNames.add("AGENCY_ID");

    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String member = colValues.get(0);
    	String ssn = colValues.get(1);
    	String f = colValues.get(2);
    	String l = colValues.get(3);
    	String dob = colValues.get(4);
    	String agID = colValues.get(5);
    	
    	log("Member: "+ member);
    	
    	//Store Member in table
    	Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_DAY2 where tc = '23291'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_DAY2 where tc = '23291'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_DAY2 values ('23291', '"+member+"', 'TPL-9007-D Letter', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    	
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<MA21TPLs\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"schema\\MultipleMA21tpl.xsd\">\n\n<MA21TPL>\n <memberid id_medicaid=\""+member+"\" "+
				"id_other=\""+agID+"\" id_source=\"MHO\">\n<policyowner tpl_status=\"U\" cde_carrier=\"0027000\" polc_type_cd=\"H\" ma21_id=\""+Common.generateRandomTaxID()+"\" nam_last=\""+l+"\" nam_first=\""+f+"\" nam_mid_init=\" \" gender=\"M\" dob=\""+dob.substring(0, 4)+"-"+dob.substring(4, 6)+"-"+dob.substring(6, 8)+"\" num_ssn=\""+ssn+"\" group_no=\" \" family_indv_cd=\"I\" family_indv_cd_desc=\"INDIVIDUAL\" polc_number_reported=\""+Common.generateRandomTaxID()+"\" tpl_confirmed_polc_no=\""+Common.generateRandomTaxID()+Common.generateRandomTaxID().substring(0, 4)+"\" polc_source_type_ind=\"E\" polc_verified_ind=\"S\" polc_begin_dte=\"2013-06-06\" polc_end_dte=\"2299-12-31\" phip_begin_dte=\"2013-06-06\" phip_end_dte=\"2299-12-31\" tpl_subsidy_pay_status=\"NP\" polc_dma_pays_begin_dte=\"2013-06-06\" polc_dma_pays_end_dte=\"2299-12-31\"\n/>"+
				"\n</memberid>\n</MA21TPL>\n</MA21TPLs>");    	//filename is same as otherid for uniqueness
		
    	String dir="";
    	if (env.equals("MO"))
    		dir="MA21";
    	else
    		dir="MA21UAT";

    	String fileName=tempDirPath+agID+Common.generateRandomName().substring(0,3)+".xml";
    	String fileNameZ="Z:\\"+dir+"\\"+agID+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileNameZ);
    	out.println(xml);
    	out.close();
    	
    	//Create copy at local temp folder
    	out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	String tplCMD;
    	if (env.equals("MO"))
    		tplCMD = "runtestTPL "+fileNameZ;
    	else
    		tplCMD = "runtestTPL_TR "+fileNameZ;
    	System.out.println (tplCMD);
    	log("\r\n"+tplCMD);
    	
    	try {
    	    // Execute command
    	    String command[] = new String[3];
    	    command[0] = "cmd";
    	    command[1] = "/c";
    	    command[2] = "Z: && cd "+dir+" && "+tplCMD;
    	    Process child = Runtime.getRuntime().exec(command);
    	    
    	    BufferedReader input = new BufferedReader(new InputStreamReader(child.getInputStream()));

            String line=null;

            while((line=input.readLine()) != null) {
                System.out.println(line);
                log("\r\n"+line);
            }

            BufferedReader stdInput = new BufferedReader(new InputStreamReader(child.getInputStream()));
            BufferedReader stdError = new BufferedReader(new InputStreamReader(child.getErrorStream()));
            String Error;

            while ((Error = stdError.readLine()) != null) {
            System.out.println(Error);
            }
            while ((Error = stdInput.readLine()) != null) {
            System.out.println(Error);
            }
            
            log("\r\nError: "+Error );
            
            int exitVal = child.waitFor();
            System.out.println("Exited with error code "+exitVal);

    	    
    	} catch (IOException e) {
    	}
    	
    	//Make sure this member has been enrolled into TPL subsystem
    	searchTPLMem(member);
		
    }
    
    //Day 2
    
    @Test
    public void test22455b() throws Exception{
    	TestNGCustom.TCNo="22455b";
    	log("//TC 22455b");
    	
        //Verify TPL-0017-R unix report
		String command, error;

		//Get Desired Filename
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt/tpl01701.rpt.* | grep '"+Common.monthUNIX(Common.convertSysdatecustom(-1))+" "+Common.dayUNIX(Common.convertSysdatecustom(-1))+"'";
		error = "There was no report file found";
		String fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);
		log(" The CARRIERS BY EMPLOYER report filename is: "+fileName);

		//Verify Employee ID in file
		command = "grep 0008803 "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Employer ID";
		log("\r\n"+Common.connectUNIX(command, error));
		
		//Verify Employee Name in file
		command = "grep 'AMTRAK TRAVEL CO' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Employer Name";
		log("\r\n"+Common.connectUNIX(command, error));
		
        //Verify TPL-0018-R unix report
		//Get Desired Filename
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt/tpl01801.rpt.* | grep '"+Common.monthUNIX(Common.convertSysdatecustom(-1))+" "+Common.dayUNIX(Common.convertSysdatecustom(-1))+"'";
		error = "There was no report file found";
		fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);
		log(" The EMPLOYERS BY CARRIER report filename is: "+fileName);

		//Verify Carrier ID in file
		command = "grep 'CARRIER NUMBER   0027000' "+fileName+" | tail -1";
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Carrier ID";
		log("\r\n"+Common.connectUNIX(command, error));
		
		//Verify Carrier Name in file
		command = "grep 'CARRIER NAME     BLUE CROSS BLUE SHIELD OF MA' "+fileName+" | tail -1";
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Carrier Name";
		log("\r\n"+Common.connectUNIX(command, error));
		
		//Verify Employer data in file
		command = "grep '0000084' "+fileName+" | tail -1";
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Employer ID";
		log("\r\n"+Common.connectUNIX(command, error));
		
		command = "grep 'LOWELL PUBLIC SCHOOL' "+fileName+" | tail -1";
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Employer Name";
		log("\r\n"+Common.connectUNIX(command, error));
		
		command = "grep '375 MERRIMACK ST RM 19' "+fileName+" | tail -1";
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Employer Address";
		log("\r\n"+Common.connectUNIX(command, error));
		
        //Verify TPL-0019-R unix report
		//Get Desired Filename
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt/tpl01901.rpt.* | grep '"+Common.monthUNIX(Common.convertSysdatecustom(-1))+" "+Common.dayUNIX(Common.convertSysdatecustom(-1))+"'";
		error = "There was no report file found";
		fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);
		log(" The MEMBERS BY CARRIER report filename is: "+fileName);

		//Verify Carrier ID in file
		command = "grep 'CARRIER NUMBER   0027033' "+fileName+" | tail -1";
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Carrier ID";
		log("\r\n"+Common.connectUNIX(command, error));
		
		//Verify Carrier Name in file
		command = "grep 'CARRIER NAME     BLUE CROSS DENTAL OF RI' "+fileName+" | tail -1";
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Carrier Name";
		log("\r\n"+Common.connectUNIX(command, error));
		
		//Verify Member Data in file
		command = "grep 'MEMBER ID     MEMBER NAME                              POLICY NUMBER     OI PLAN  OI PLAN DESCRIPTION' "+fileName+" | tail -1";
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Member header information";
		log("\r\n"+Common.connectUNIX(command, error));
		
		command = "grep '100003606272' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Member ID";
		log("\r\n"+Common.connectUNIX(command, error));
		
        //Verify TPL-0020-R unix report
		//Get Desired Filename
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt/tpl02001.rpt.* | grep '"+Common.monthUNIX(Common.convertSysdatecustom(-1))+" "+Common.dayUNIX(Common.convertSysdatecustom(-1))+"'";
		error = "There was no report file found";
		fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);
		log(" The CARRIERS BY MEMBER report filename is: "+fileName);

		//Verify Member ID in file
		command = "grep 'MEMBER ID    100004650981' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Member ID";
		log("\r\n"+Common.connectUNIX(command, error));
		
		//Verify Member Name in file
		command = "grep 'MEMBER NAME  SARRUDA             , WILLIAM         A' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Member Name";
		log("\r\n"+Common.connectUNIX(command, error));
		
		//Verify Carrier Data in file
		command = "grep 'CARRIER NUMBER:  0027000' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Carrier ID";
		log("\r\n"+Common.connectUNIX(command, error));
		
		command = "grep 'CARRIER NAME     BLUE CROSS BLUE SHIELD OF MA' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Carrier Name";
		log("\r\n"+Common.connectUNIX(command, error));
		
		command = "grep 'CARRIER ADDRESS  PO BOX 986015' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Carrier Address- Street";
		log("\r\n"+Common.connectUNIX(command, error));
		
		command = "grep 'BOSTON         , MA 02298-6015' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Carrier Address- City, State, Zip";
		log("\r\n"+Common.connectUNIX(command, error));
    }
    
    @Test
    public void test23291b() throws Exception{
    	TestNGCustom.TCNo="23291b";
    	log("//TC 23291b");
    	
	 	//get the member for TPL 9007 Letter
		sqlStatement = "select * from R_DAY2 where tc = '23291'";
		colNames.add("ID");
		colNames.add("DATE_REQUESTED");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no member enrolled for TPL 9007 letter");

		String Mem = colValues.get(0);
		String DateR = colValues.get(1);
		
		//Got to letter request search panel
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:TPLReportsNavigatorPanel:TPLReportsNavigator:GRP_g2")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:TPLReportsNavigatorPanel:TPLReportsNavigator:ITM_n105")).click();
	    
	    //Search for the letter with the member ID
	    driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterRequestBean_CriteriaPanel:LetterRequestDataPanel_MemberId")).sendKeys(Mem);
	    Common.search();
	 	Assert.assertTrue(driver.findElements(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults_0:_id30")).size()>0, "There is no letter produced for this member");
	 	//Sort on end date
	    driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults:_id37")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults:_id37")).click();
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults_0:_id30")).getText().equals("TPL-9007-D"), "The 9007 letter is not produced");
	 	Assert.assertTrue(driver.findElement(By.xpath("//tbody[@id='MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults:tbody_element']/tr/td[2]")).getText().equals(DateR), "The 9007 letter is not for the one for the requested date.");
	 	
	    //Produce the letter
	    driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterSearchResults_0:_id30")).click();
	    driver.findElement(By.id("MMISForm:MMISBodyContent:LetterRequestSearchPanel:LetterRequestSearchPanel_generateAndPrintWithButtonDispReset_btn")).click();
    	
		log("The 9007 letter is produced for Member: "+Mem+". Please see Anshul Gandhi for the letter");
    }
    
    @Test
    public void test23310_22788() throws Exception{
    	TestNGCustom.TCNo="23310_22788";
    	log("//TC 23310_22788");

    	//Get TPL member
    	sqlStatement = "select b.id_medicaid from t_tpl_resource r, t_re_base b, t_coverage_xref xref"+
				   " where r.sak_recip = b.sak_recip  and b.ind_active = 'Y' and r.sak_tpl_resource = xref.sak_tpl_resource and xref.dte_end = 22991231"+
				   " and exists (select r1.sak_recip from t_tpl_resource r1 where r1.sak_recip = r.sak_recip group by r1.sak_recip having count(r1.sak_recip) > 4 ) and rownum < 2";
    	colNames.add("ID_MEDICAID"); //0
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String tplMem = colValues.get(0);
    	
    	log(" TPL Member: "+tplMem);
    	
    	//Search by member ID
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchBean_CriteriaPanel:TplSearchResultDataPanel_CurrentID")).sendKeys(tplMem);
	 	Common.search();
	 	Common.searchRecords(tplMem);
	 	//Order by end date desc to get 12/31/2299 on top
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchResults:_id53")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchResults:_id53")).click();
	 	//Select 1st record
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplSearchResults_0:_id14")).click();
	 	
	 	//Additional policies
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n101")).click();
	 	//order by pol no. desc
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AdditionalPoliciesPanel:AdditionalPoliciesList:AdditionalPoliciesBean_ColHeader_tplPolicyNumber")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AdditionalPoliciesPanel:AdditionalPoliciesList:AdditionalPoliciesBean_ColHeader_tplPolicyNumber")).click();
	 	//Verify >1 policies are present
	 	if (driver.findElements(By.xpath("//span[contains(@id, 'AdditionalPoliciesBean_ColValue_tplPolicyNumber')]")).size()<2)
	 		Assert.assertTrue(false, "Multiple Additional policies were not present");
	 	
	 	//Check overlapping coverage warning
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n103")).click();
	 	//Sort by end date desc to get 12/31/2299 on top
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageList:CoverageXrefBean_ColHeader_endDate")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageList:CoverageXrefBean_ColHeader_endDate")).click();
	 	//Copy latest coverage and oi plan
	 	String oi = driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageList_0:CoverageXrefBean_ColValue_otherInsurancePlanCode")).getText();
	 	String cov = driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageList_0:CoverageXrefBean_ColValue_otherInsurancePlanToCoverage_coverageCode")).getText();
	 	//Click New Button
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:Coverage_NewButtonClay:CoverageList_newAction_btn")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageDataPanel_CoverageCode")).sendKeys(cov);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageDataPanel_OIPlanCode")).sendKeys(oi);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageXrefDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageXrefDataPanel_EndDate")).sendKeys("12/31/2299");
        driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		String message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Near duplicate coverage identified, do you wish to continue with save?"), "Did not get duplicate coverage warning message. Instead got: "+message+"...");
    }
    
    @Test
    public void test31942() throws Exception{
    	
    	TestNGCustom.TCNo="31942 - Part D outbound file Test Case";
    	log("//TC "+TestNGCustom.TCNo);
    	log("Please verify the files checked below are produced for job run that occured after this regression cycle");
    	//Get latest ELGJM600 logs
		String command, error;
		command = "ls -ltr /customer/dsma/"+unixDir+"/logs/elgjm600.*.* | tail -1";
		error = "There was no log file found";
		String fileName = Common.connectUNIX(command, error);
		log("The Generate Part D Outgoing Request log file is: "+fileName);
		fileName = fileName.substring(fileName.indexOf("/"), fileName.length());
		
		//Verify job completed
		command = "grep 'JOB: /customer/dsma/"+unixDir+"/job/ELGJM600 completed' "+fileName;
		error = "Log file indicates there was an abend";
		String response= Common.connectUNIX(command, error);
		log("\r\n"+response);
		
		//Get the month for which the data is present in dat file
		String month = response.substring(response.length()-17, response.length()-15);
		String year = response.substring(response.length()-11, response.length()-9);
		String period = month+"20"+year;
		log("The extract has dat for month: "+period);
		
		//Get dat filename
		command = "grep 'elm60005.dat' "+fileName+" | head -1";
		error = "Didnt find any dat file with the name elm60005.dat.*";
		response= Common.connectUNIX(command, error);
		fileName=response.substring(response.indexOf("/"), response.length());
		log("\r\nThe Generate Part D Outgoing extract file filename is: "+fileName);
		
//		//Get dat file 
//		command = "ls "+response;
//		error = "There was no data file found with the filename: "+response;
//		fileName = Common.connectUNIX(command, error);
//		log("The Generate Part D Outgoing extract file is: "+fileName);
//		fileName = fileName.substring(fileName.indexOf("/"), fileName.length());
		
		//Verify data in extract file
		command = "grep 'DET' "+fileName+" | head -1";
		error = "Dat file does not contain any DET data";
		response= Common.connectUNIX(command, error);
		log("\r\n"+response);
		
		//Get member from the response
		String member = response.substring(35, 55).trim();
		log("Member id is: "+member);
		int count = Integer.parseInt(member.substring(0, 2));
    	Assert.assertTrue(count>0, "You did not find a member in extract. Instead you found '"+member+"' for member");
		
		//Get this members info from DB
		sqlStatement = "SELECT base.id_medicaid, "+
                "hib.id_medicare, "+
                "to_char(to_date(base.dte_birth, 'YYYYMMDD'), 'MMDDYYYY') as dte_birth, "+
                "base.cde_sex, "+
                "NVL(base.num_ssn, '999999999') as num_ssn, "+
                "base.nam_last, "+
                "base.nam_first "+
                "FROM "+
                "t_re_base base, "+
                "t_re_hib  hib "+
                "WHERE "+
                "hib.sak_recip = base.sak_recip "+
                "AND base.id_medicaid = "+member;
    	colNames.add("ID_MEDICAID");//0
    	colNames.add("ID_MEDICARE");//1
    	colNames.add("DTE_BIRTH");	//2
    	colNames.add("CDE_SEX");	//3
    	colNames.add("NUM_SSN"); 	//4
    	colNames.add("NAM_LAST"); 	//5
    	colNames.add("NAM_FIRST"); 	//6
    	colValues = Common.executeQuery(sqlStatement, colNames);	
    	
    	String ID_MEDICAID = colValues.get(0);
    	String ID_MEDICARE = colValues.get(1);
    	String DTE_BIRTH = colValues.get(2);
    	String CDE_SEX = colValues.get(3);
    	String NUM_SSN = colValues.get(4);
    	String NAM_LAST = colValues.get(5);
    	String NAM_FIRST = colValues.get(6);
    	
    	Assert.assertTrue(response.contains(ID_MEDICAID), "The selected line in dat file doe not contain ID_MEDICAID: "+ID_MEDICAID);
    	Assert.assertTrue(response.contains(ID_MEDICARE), "The selected line in dat file doe not contain ID_MEDICARE: "+ID_MEDICARE);
    	Assert.assertTrue(response.contains(DTE_BIRTH), "The selected line in dat file doe not contain DTE_BIRTH: "+DTE_BIRTH);
    	Assert.assertTrue(response.contains(CDE_SEX), "The selected line in dat file doe not contain CDE_SEX: "+CDE_SEX);
    	Assert.assertTrue(response.contains(NUM_SSN), "The selected line in dat file doe not contain NUM_SSN: "+NUM_SSN);
    	Assert.assertTrue(response.contains(NAM_LAST), "The selected line in dat file doe not contain NAM_LAST: "+NAM_LAST);
    	Assert.assertTrue(response.contains(NAM_FIRST), "The selected line in dat file doe not contain NAM_FIRST: "+NAM_FIRST);
    	
    	//Verify Report
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt01/elm60001.rpt.* | tail -1";
		error = "There was no report file found";
		fileName = Common.connectUNIX(command, error);
		log("The Generate Part D Outgoing extract file is: "+fileName);
		fileName = fileName.substring(fileName.indexOf("/"), fileName.length());
		
		//Verify data in extract file
		command = "grep 'TOTAL PART D TRANSACTIONS READ' "+fileName;
		error = "No data exists in report";
		response= Common.connectUNIX(command, error);
		response = response.trim();
		log("\r\n"+response);
		count = Integer.parseInt(response.substring(response.length()-2, response.length()));
    	Assert.assertTrue(count>0, "TOTAL PART D TRANSACTIONS READ count is 0");
    	
		command = "grep 'TOTAL PART D TRANSACTIONS WRITTEN TO OUTGOING FILE' "+fileName;
		error = "No data exists in report";
		response= Common.connectUNIX(command, error);
		response = response.trim();
		log("\r\n"+response);
		count = Integer.parseInt(response.substring(response.length()-2, response.length()));
    	Assert.assertTrue(count>0, "TOTAL PART D TRANSACTIONS WRITTEN TO OUTGOING FILE count is 0");
    	
    }
    
    
    @Test
    public void test31938a() throws Exception{
    	
    	TestNGCustom.TCNo="31938a - HMS TPL file Test Case Day 1";
    	log("//TC "+TestNGCustom.TCNo);
    	
    	//Get a member who does not have TPL
	    sqlStatement = "select /*+RULE*/ base.ID_MEDICAID from t_re_base base, t_pub_hlth_pgm pgm,t_pub_hlth_aid pubaid, T_Re_Other_Id C, " +
				"t_cde_aid aid,t_re_aid_elig elig where " +
				"elig.sak_recip=base.sak_recip " +
				"and pgm.SAK_PUB_HLTH=pubaid.SAK_PUB_HLTH " +
				"and pubaid.SAK_CDE_AID=aid.SAK_CDE_AID "  +
				"and  aid.SAK_CDE_AID= elig.SAK_CDE_AID "  +
				"and pgm. CDE_PGM_HEALTH='STD' " +
				"and elig.DTE_END='22991231' " + 
				"and elig.cde_status1<>'H' " +
				"and not exists ( select sak_recip from t_tpl_resource rs where rs.sak_recip=base.sak_recip) " +
				"and base.ind_active='Y' and base.Sak_Recip=C.Sak_Recip And C.Cde_Agency = 'MHO'  And C.End_Date = 22991231 "+ 
				"and not exists (select sak_recip from t_re_hib hib where hib.sak_recip=base.sak_recip ) " + //Added to not have any medicare records in tpl search panel post run of below tpl enrollment process
				"and base.sak_recip > dbms_random.value * 6300000 " +
				"and rownum<2 ";
	    
	    System.out.println(sqlStatement);
	    colNames.add("ID_MEDICAID");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    String mem=colValues.get(0);

	    //Add TPL to this member using soap
	    sqlStatement="Select  A.Id_Medicaid, A.Num_Ssn, A.Nam_First, A.Nam_Last, A.Dte_Birth, C.Agency_Id From T_Re_Base A, T_Re_Other_Id C Where A.Sak_Recip=C.Sak_Recip and a.id_medicaid = '"+mem+"'";
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_SSN");
    	colNames.add("NAM_FIRST");
    	colNames.add("NAM_LAST");
    	colNames.add("DTE_BIRTH");
    	colNames.add("AGENCY_ID");

    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String member = colValues.get(0);
    	String ssn = colValues.get(1);
    	String fi = colValues.get(2);
    	String l = colValues.get(3);
    	String dob = colValues.get(4);
    	String agID = colValues.get(5);
    	
    	log("Member: "+ member);

    	String bgDt = Common.convertSysdatecustom(-30).substring(6, 10)+"-"+Common.convertSysdatecustom(-30).substring(0, 2)+"-"+Common.convertSysdatecustom(-30).substring(3, 5);
    	String polNum = Common.generateRandomTaxID()+Common.generateRandomTaxID().substring(0, 4);
    	
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<MA21TPLs\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"schema\\MultipleMA21tpl.xsd\">\n\n<MA21TPL>\n <memberid id_medicaid=\""+member+"\" "+
				"id_other=\""+agID+"\" id_source=\"MHO\">\n<policyowner tpl_status=\"U\" cde_carrier=\"0101001\" polc_type_cd=\"H\" ma21_id=\""+Common.generateRandomTaxID()+"\" nam_last=\""+l+"\" nam_first=\""+fi+"\" nam_mid_init=\" \" gender=\"M\" dob=\""+dob.substring(0, 4)+"-"+dob.substring(4, 6)+"-"+dob.substring(6, 8)+"\" num_ssn=\""+ssn+"\" group_no=\" \" family_indv_cd=\"I\" family_indv_cd_desc=\"INDIVIDUAL\" polc_number_reported=\""+Common.generateRandomTaxID()+"\" tpl_confirmed_polc_no=\""+polNum+"\" polc_source_type_ind=\"E\" polc_verified_ind=\"S\" polc_begin_dte=\""+bgDt+"\" polc_end_dte=\"2299-12-31\" phip_begin_dte=\""+bgDt+"\" phip_end_dte=\"2299-12-31\" tpl_subsidy_pay_status=\"NP\" polc_dma_pays_begin_dte=\""+bgDt+"\" polc_dma_pays_end_dte=\"2299-12-31\"\n/>"+
				"\n<absentparent ma21_id=\"00003175501\" nam_last=\"WESSON\" nam_first=\"ROBERT\" nam_mid_init=\"Z\" num_ssn=\"100031759\" dte_birth=\"1992-10-11\" cde_sex=\"M\" adr_strt1=\"28444TH ST.\" adr_strt2=\"APT 31759\" adr_city=\"LOWELL\" adr_state=\"MA\" adr_zip=\"317591001\" nam_country=\"MEXICO\" num_phone=\"7815553291\" med_support_order_ind=\"Y\" cde_good_cause=\"INCEST\"/>"+
				"\n</memberid>\n</MA21TPL>\n</MA21TPLs>");    	//filename is same as otherid for uniqueness

    	String fileName=tempDirPath+agID+Common.generateRandomName().substring(0,3)+".xml";
    	String envMA21 = "";
    	if (env.equals("MO"))
    		envMA21 = "MA21";
    	else
    		envMA21 = "MA21UAT";
    			
    			
    	String fileNameZ="Z:\\"+envMA21+"\\"+agID+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileNameZ);
    	out.println(xml);
    	out.close();
    	
    	//Create copy at local temp folder
    	out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	String tplCMD;
    	if (env.equals("MO"))
    		tplCMD = "runtestTPL "+fileNameZ;
    	else
    		tplCMD = "runtestTPL_TR "+fileNameZ;
    	System.out.println (tplCMD);
    	log("\r\n"+tplCMD);
    	
    	try {
    	    // Execute command
    	    String command[] = new String[3];
    	    command[0] = "cmd";
    	    command[1] = "/c";
    	    command[2] = "Z: && cd "+envMA21+" && "+tplCMD;
    	    Process child = Runtime.getRuntime().exec(command);
    	    
    	    BufferedReader input = new BufferedReader(new InputStreamReader(child.getInputStream()));

            String line=null;

            while((line=input.readLine()) != null) {
                System.out.println(line);
                log("\r\n"+line);
            }

            BufferedReader stdInput = new BufferedReader(new InputStreamReader(child.getInputStream()));
            BufferedReader stdError = new BufferedReader(new InputStreamReader(child.getErrorStream()));
            String Error;

            while ((Error = stdError.readLine()) != null) {
            System.out.println(Error);
            }
            while ((Error = stdInput.readLine()) != null) {
            System.out.println(Error);
            }
            
            log("\r\nError: "+Error );
            
            int exitVal = child.waitFor();
            System.out.println("Exited with error code "+exitVal);

    	    
    	} catch (IOException e) {
    	}
    	
    	//Get sak_tpl_resource from t_tpl_resource
    	sqlStatement = "select sak_tpl_resource from t_tpl_resource where sak_recip = ( select sak_recip from t_re_base where id_medicaid = '"+mem+"')";
    	colNames.add("SAK_TPL_RESOURCE");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String sakTPLRes = colValues.get(0);
    	
    	//We will change the coverage dates in the I/P file to below
    	String effDT = Common.convertSysdatecustom(-1).substring(6, 10)+"-"+Common.convertSysdatecustom(-1).substring(0, 2)+"-"+Common.convertSysdatecustom(-1).substring(3, 5);
    	String endDT = Common.convertSysdatecustom(1).substring(6, 10)+"-"+Common.convertSysdatecustom(1).substring(0, 2)+"-"+Common.convertSysdatecustom(1).substring(3, 5);

    	//Store Member in day 2 table
    	Statement statement = Common.connection1.createStatement();
		sqlStatement = "delete from  R_DAY2 where tc = '31938'";
		statement.executeQuery(sqlStatement);
		sqlStatement = "insert into  R_DAY2 values ('31938', '"+mem+"', 'member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		sqlStatement = "insert into  R_DAY2 values ('31938', '"+sakTPLRes+"', 'sakTPLRes', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		sqlStatement = "insert into  R_DAY2 values ('31938', '"+polNum+"', 'polNum', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		sqlStatement = "insert into  R_DAY2 values ('31938', '"+effDT.replace("-", "")+"', 'effDT', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		sqlStatement = "insert into  R_DAY2 values ('31938', '"+endDT.replace("-", "")+"', 'endDT', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    	
    	//Now create I/P file for TPLJD930
    	String inputFileContent = "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n"+
    			"<resourceUpdates> \n"+
    			"<resourceUpdate> \n"+
    			       "<member id_medicaid=\""+mem+"\" ind_good_cause=\"N\"> "+
    			            "<resource  id_medicaid=\""+mem+"\"  resource_identifier=\""+sakTPLRes+"\"  \n"+
    			            "cde_carrier=\"0101001\"  "+
    			            "cde_policy_type=\"I\" num_tpl_policy=\""+polNum+"\"  num_group=\"02257761\"  \n"+
    			            "cde_relation=\"G8\" cde_suspect=\"1\"> "+
    			            	 "<coverage coverage_sequence=\"1\" resource_identifier=\""+sakTPLRes+"\"  \n"+
    			               "oi_plan_identifier=\"3\"  \n"+
    			               "dte_effective=\""+effDT+"\" dte_end=\""+endDT+"\"  \n"+
    			               "cde_pgm_health=\"OI02\" /> \n"+
    			            "</resource> \n"+
    			       "</member> \n"+
    			"</resourceUpdate> \n"+
    			"</resourceUpdates> ";
    	
    	log(inputFileContent);
    	
    	//Create I/P file in home dir 
//		String command[] = new String[4];
//		command[0] = "cd /home/angandhi/regression/tc31398";
//		command[1] = "cat > tpd093000.xml.0001";
//		command[2] = inputFileContent;
//		command[3] = "^D";
//		Common.connectUNIXmultiCommands(command);

		String command, error;
		command = "echo '"+inputFileContent+"' > /home/angandhi/regression/tc31938/tpd093000.xml.0001";
		error = "There was no input file found";
		Common.connectUNIX(command, error);
		
		command = "cp /home/angandhi/regression/tc31938/tpd093000.xml.0001 /customer/dsma/"+unixDir+"/data";
		error = "File copy not successful";
		Common.connectUNIX(command, error);
		
		command = "chmod 777 /customer/dsma/"+unixDir+"/data/tpd093000.xml.0001";
		error = "File permission change not successful";
		Common.connectUNIX(command, error);

    }
    
    @Test
    public void test31938b() throws Exception{
    	TestNGCustom.TCNo="31938b - HMS TPL file Test Case Day 2";
    	log("//TC "+TestNGCustom.TCNo);
    	
	 	//get data for tpl0930d.rpt
		sqlStatement = "select ID from R_DAY2 where tc = '31938' and DES = 'member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no member found for tpl0930d.rpt");
		String mem = colValues.get(0);
		
		sqlStatement = "select ID from R_DAY2 where tc = '31938' and DES = 'polNum'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no polNum found for tpl0930d.rpt");
		String polNum = colValues.get(0);
		
		sqlStatement = "select ID from R_DAY2 where tc = '31938' and DES = 'sakTPLRes'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no sakTPLRes found for tpl0930d.rpt");
		String sakTPLRes = colValues.get(0);
		
		sqlStatement = "select ID from R_DAY2 where tc = '31938' and DES = 'effDT'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no effDT found for tpl0930d.rpt");
		String effDT = colValues.get(0);
		
		sqlStatement = "select ID from R_DAY2 where tc = '31938' and DES = 'endDT'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no endDT found for tpl0930d.rpt");
		String endDT = colValues.get(0);
		
		//Get member name
		sqlStatement = "select NAM_LAST, NAM_FIRST from t_re_base where id_medicaid = '"+mem+"'";
		colNames.add("NAM_LAST");
		colNames.add("NAM_FIRST");
		colValues = Common.executeQuery(sqlStatement, colNames);
		String lName = colValues.get(0);
		String fName = colValues.get(1);

		
		//Get report
		String command, error;
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt01/tpl0930d.rpt.* | tail -1";
		error = "There was no report found";
		String fileName = Common.connectUNIX(command, error);
		log("The MASSHEALTH CONTRACTOR INTERFACE ERROR REPORT is: "+fileName);
		fileName = fileName.substring(fileName.indexOf("/"), fileName.length());
		
		String resp="";
		
		//Verify member in report
		command = "grep "+mem+" "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Member ID '"+mem+"'";
		resp = Common.connectUNIX(command, error).trim();
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains(lName), "Member last name '"+lName+"' not found in report");
		Assert.assertTrue(resp.contains(fName), "Member first name '"+fName+"' not found in report");
		
		command = "grep "+sakTPLRes+" "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired sakTPLRes '"+sakTPLRes+"'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("0101001"), "Carrier code 0101001 not found in report");
		Assert.assertTrue(resp.contains("POL TYPE : I"), "POL TYPE : I not found in report");
		Assert.assertTrue(resp.contains(polNum), "Policy Number '"+polNum+"' not found in report");
		
		command = "grep 02257761 "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired group no. 02257761";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("REL: G8"), "REL: G8 not found in report");

		command = "grep "+effDT+" "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired effDT '"+effDT+"'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("EFF DTE: "+effDT), "EFF DTE: "+effDT+" not found in report");
		Assert.assertTrue(resp.contains("END DTE: "+endDT), "END DTE: "+endDT+" not found in report");
		Assert.assertTrue(resp.contains("OI: OI02"), "OI: OI02 not found in report");
		
		command = "grep 'Coverage Updated' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the 'Coverage Updated' message";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		
		command = "grep 'SEGMENTS UPDATED FOR COVERAGES:' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the 'SEGMENTS UPDATED FOR COVERAGES:' message";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("1"), "SEGMENTS UPDATED FOR COVERAGES: was not set to 1 in report");

		//Got to TPL panel to verify coverage
		effDT=Common.convertDate(effDT);
		endDT=Common.convertDate(endDT);

    	searchTPLMem(mem);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n103")).click();
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageList_0:CoverageXrefBean_ColValue_effectiveDate")).getText().equals(effDT), "effDT mismatch");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageList_0:CoverageXrefBean_ColValue_endDate")).getText().equals(endDT), "endDT mismatch");
    	
    }
    
    @Test
    public void test31939a() throws Exception{
    	
    	TestNGCustom.TCNo="31939a - HIX TPL File Test Case Day 1";
    	log("//TC "+TestNGCustom.TCNo);
    	
    	//Get a member who does not have TPL
	    sqlStatement = "select /*+RULE*/  base.ID_MEDICAID from t_re_base base, t_pub_hlth_pgm pgm,t_pub_hlth_aid pubaid, T_Re_Other_Id C, " +
				"t_cde_aid aid,t_re_aid_elig elig where " +
				"elig.sak_recip=base.sak_recip " +
				"and pgm.SAK_PUB_HLTH=pubaid.SAK_PUB_HLTH " +
				"and pubaid.SAK_CDE_AID=aid.SAK_CDE_AID "  +
				"and  aid.SAK_CDE_AID= elig.SAK_CDE_AID "  +
				"and pgm. CDE_PGM_HEALTH='STD' " +
				"and elig.DTE_END='22991231' " + 
				"and elig.cde_status1<>'H' " +
				"and not exists ( select sak_recip from t_tpl_resource rs where rs.sak_recip=base.sak_recip) " +
				"and base.ind_active='Y' and base.Sak_Recip=C.Sak_Recip And C.Cde_Agency = 'HIX'  And C.End_Date = 22991231 "+ //notice change in agency ID to HIX
				"and not exists (select sak_recip from t_re_hib hib where hib.sak_recip=base.sak_recip ) " + //Added to not have any medicare records in tpl search panel post run of below tpl enrollment process
				"and base.num_ssn<>' ' " +
				"and base.sak_recip > dbms_random.value * 6300000 " +
				"and rownum<2 ";
	    
	    System.out.println(sqlStatement);
	    colNames.add("ID_MEDICAID");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    String mem=colValues.get(0);

	    //Add TPL to this member using TPLJD950
	    sqlStatement="Select  A.Id_Medicaid, A.Num_Ssn, A.Nam_First, A.Nam_Last, A.Dte_Birth, C.Agency_Id From T_Re_Base A, T_Re_Other_Id C Where A.Sak_Recip=C.Sak_Recip and C.Cde_Agency = 'HIX' and a.id_medicaid = '"+mem+"'";
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_SSN");
    	colNames.add("NAM_FIRST");
    	colNames.add("NAM_LAST");
    	colNames.add("DTE_BIRTH");
    	colNames.add("AGENCY_ID");

    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String member = colValues.get(0);
    	String ssn = colValues.get(1);
    	String fi = colValues.get(2);
    	String l = colValues.get(3);
    	String dob = colValues.get(4);
    	String agID = colValues.get(5);
    	
    	log("Member: "+ member);

    	String bgDt = Common.convertSysdatecustom(-30).substring(6, 10)+"-"+Common.convertSysdatecustom(-30).substring(0, 2)+"-"+Common.convertSysdatecustom(-30).substring(3, 5);
    	String polNum = Common.generateRandomTaxID()+Common.generateRandomTaxID().substring(0, 4);
    	String ma21ID = "00"+Common.generateRandomTaxID();
    	dob = dob.substring(0, 4)+"-"+dob.substring(4, 6)+"-"+dob.substring(6, 8);

    	//Store Member in day 2 table
    	Statement statement = Common.connection1.createStatement();
		sqlStatement = "delete from  R_DAY2 where tc = '31939'";
		statement.executeQuery(sqlStatement);
		sqlStatement = "insert into  R_DAY2 values ('31939', '"+mem+"', 'member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		sqlStatement = "insert into  R_DAY2 values ('31939', '"+polNum+"', 'polNum', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		sqlStatement = "insert into  R_DAY2 values ('31939', '"+bgDt.replace("-", "")+"', 'effDT', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
//		sqlStatement = "insert into  R_DAY2 values ('31939', '"+ma21ID+"', 'ma21ID', '"+Common.convertSysdate()+"')";
//		statement.executeQuery(sqlStatement);
    	
    	//Create I/P file for TPLJD950
    	String inputFileContent = "<TPLS> \n"+
    			"<TPL> \n"+
    			"<memberid id_medicaid=\""+mem+"\" id_other=\""+agID+"\" id_source=\"HIX\"> \n"+
    			"<policyowner tpl_status=\"I\" \n"+
    			"cde_carrier=\"0101001\" \n"+
    			"polc_type_cd=\"H\" \n"+
    			"ma21_id=\"11111111111\" \n"+
    			"nam_last=\""+l+"\" \n"+
    			"nam_first=\""+fi+"\" \n"+
    			"nam_mid_init=\"\" \n"+
    			"gender=\"M\" \n"+
    			"dob=\""+dob+"\" \n"+
    			"num_ssn=\""+ssn+"\" \n"+
    			"group_no=\"1111111E\" \n"+
    			"family_indv_cd=\"F\" \n"+
    			"family_indv_cd_desc=\"GROUP\" \n"+
    			"polc_number_reported=\"121212123\" \n"+
    			"tpl_confirmed_polc_no=\""+polNum+"\" \n"+
    			"polc_source_type_ind=\"E\" \n"+
    			"polc_verified_ind=\"S\" \n"+
    			"polc_begin_dte=\""+bgDt+"\" \n"+
    			"polc_end_dte=\"2299-12-31\" \n"+
    			"phip_begin_dte=\""+bgDt+"\" \n"+
    			"phip_end_dte=\"2299-12-31\" \n"+
    			"tpl_subsidy_pay_status=\"PP\" \n"+
    			"polc_dma_pays_begin_dte=\""+bgDt+"\" \n"+
    			"polc_dma_pays_end_dte=\"2299-12-31\"> \n"+
    			"<employer nam_bus=\"BEE FIBERGLASS\" \n"+
    			"adr_mail_strt1=\"536 DWIGHT ST SUITE 7\" \n"+
    			"addr_mail_city=\"HOLYOKE\" \n"+
    			"addr_mail_state=\"MA\" \n"+
    			"adr_mail_zip=\"01040\" \n"+
    			"adr_mail_zip_4=\"0000\" \n"+
    			"nam_country=\"USA\" \n"+
    			"num_phone=\"4133225555\" \n"+
    			"ein=\"000099423\"/> \n"+
    			"</policyowner> \n"+
    			"<absentparent \n"+
    			"ma21_id=\""+ma21ID+"\" \n"+
    			"nam_last=\"TESTA\" \n"+
    			"nam_first=\"MARY\" \n"+
    			"nam_mid_init=\"T\" \n"+
    			"num_ssn=\"071412375\" \n"+
    			"dte_birth=\"1975-02-18\" \n"+
    			"cde_sex=\"F\" \n"+
    			"cde_good_cause=\"ADOPTC\" \n"+
    			"empl_name=\"SMART TESTING\" \n"+
    			"empl_street_addr1=\"100 WINTER STREET\" \n"+
    			"empl_city=\"BOSTON\" \n"+
    			"empl_state=\"MA\" \n"+
    			"empl_zip=\"02110\" \n"+
    			"empl_zip_4=\"1234\" \n"+
    			"empl_phone=\"6175881293\" /> \n"+
    			"<accident tacc_accident_only_ind=\"Y\" \n"+
    			"tacc_oth_hi_ind=\"Y\" \n"+
    			"tacc_form_sent_ind=\"Y\" \n"+
    			"tacc_form_sent_dte=\"2013-09-23T04:00:00Z\" \n"+
    			"tacc_verified_ind=\"N\" \n"+
    			"tacc_tpl_complete_ind=\" \" /> \n"+
    			"</memberid> \n"+
    			"</TPL> \n"+
    			"</TPLS> \n";

    	
    	System.out.println(inputFileContent);

		String command, error;
		command = "echo '"+inputFileContent+"' > /home/angandhi/regression/tc31939/tpd09500.xml.0001";
		error = "There was no input file found";
		Common.connectUNIX(command, error);
		
		command = "cp /home/angandhi/regression/tc31939/tpd09500.xml.0001 /customer/dsma/"+unixDir+"/data";
		error = "File copy not successful";
		Common.connectUNIX(command, error);
		
		command = "chmod 777 /customer/dsma/"+unixDir+"/data/tpd09500.xml.0001";
		error = "File permission change not successful";
		Common.connectUNIX(command, error);

    }
    
    @Test
    public void test31939b() throws Exception{
    	TestNGCustom.TCNo="31939b - HIX TPL File Test Case Day 2";
    	log("//TC "+TestNGCustom.TCNo);
    	
	 	//get data for tpl0901d.rpt
		sqlStatement = "select ID from R_DAY2 where tc = '31939' and DES = 'member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no member found for tpl0901d.rpt");
		String mem = colValues.get(0);
		
		sqlStatement = "select ID from R_DAY2 where tc = '31939' and DES = 'polNum'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no polNum found for tpl0901d.rpt");
		String polNum = colValues.get(0);
		
		sqlStatement = "select ID from R_DAY2 where tc = '31939' and DES = 'effDT'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there was no effDT found for tpl0901d.rpt");
		String effDT = colValues.get(0);
		
		//Get member info
	    sqlStatement="Select  A.Id_Medicaid, A.Num_Ssn, A.Nam_First, A.Nam_Last, A.Dte_Birth, C.Agency_Id From T_Re_Base A, T_Re_Other_Id C Where A.Sak_Recip=C.Sak_Recip and C.Cde_Agency = 'HIX' and a.id_medicaid = '"+mem+"'";
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_SSN");
    	colNames.add("NAM_FIRST");
    	colNames.add("NAM_LAST");
    	colNames.add("DTE_BIRTH");
    	colNames.add("AGENCY_ID");

    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String member = colValues.get(0);
    	String ssn = colValues.get(1);
    	String fi = colValues.get(2);
    	String l = colValues.get(3);
    	String dob = colValues.get(4);
    	String agID = colValues.get(5);

		
		//Get report
		String command, error;
//		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt01/tpl0901d.rpt.* | grep '"+Common.monthUNIX(Common.convertSysdatecustom(-3))+" "+Common.dayUNIX(Common.convertSysdatecustom(-3))+"' | head -n 1"; // This is to grab the second last report because the job runs 2 times a day and produces 2 reports in one day, so capturing the earlier one.
//		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt01/tpl0901d.rpt.* | tail -2 | head -n 1"; // This is to grab the second last report because the job runs 2 times a day and produces 2 reports in one day, so capturing the earlier one.
//		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt01/tpl0901d.rpt.* | tail -1";//For TR UAT, the above process is not working. first, the first job is run at 5 pm, so if you enter data after 5, the 2nd job will pick up. Also, first run is getting archived, so unzipped it, but it becomes latest now, so tail -1
		command = "ls -ltr /customer/dsma/"+unixDir+"/rpt01/tpl0901d.rpt.* | tail -2 | head -n 1";//changed to pick the first file only. Its is zipped, so now added code to unzip it

		error = "There was no report found";
		String fileName = Common.connectUNIX(command, error);
		log("The MA21 INTERFACE REPORT is: "+fileName);
		fileName = fileName.substring(fileName.indexOf("/"), fileName.length());
		fileName = Common.chkCompress(fileName);
		String resp="";
		
		//Verify member in report
		command = "grep "+member+" "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Member ID '"+member+"'";
		resp = Common.connectUNIX(command, error).trim();
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains(l), "Member last name '"+l+"' not found in report");
		Assert.assertTrue(resp.contains(fi), "Member first name '"+fi+"' not found in report");
		Assert.assertTrue(resp.contains(fi), "Member MA21/Agency name '"+agID+"' not found in report");
		
		command = "grep "+dob+" "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired dob '"+dob+"'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		ssn=ssn.substring(0, 3)+"-"+ssn.substring(3, 5)+"-"+ssn.substring(5, 8);
		Assert.assertTrue(resp.contains(ssn), "SSN '"+ssn+"' not found in report");
		
		//Verify resource information in report
		command = "grep 'CONFIRMED POLICY: "+polNum+"' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired polNum '"+polNum+"'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);

		command = "grep "+effDT+" "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired effDT '"+effDT+"'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		
		//Verify Employer information in report
		command = "grep 'BEE FIBERGLASS' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Employer name 'BEE FIBERGLASS'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("ADDR: 536 DWIGHT ST SUITE 7"), "Employer Address 'ADDR: 536 DWIGHT ST SUITE 7' not found in report");

		command = "grep 'HOLYOKE' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired employer city 'HOLYOKE'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("01040"), "Employer Zip code '01040' not found in report");

		command = "grep '4133225555' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired employer phone '4133225555'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("EIN: 00-0099423"), "Employer 'EIN: 00-0099423' not found in report");
		
		//Verify Absent Parent information in report
		command = "grep 'TESTA' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired AP last name 'TESTA'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("FIRST NAME: MARY"), "AP 'FIRST NAME: MARY' not found in report");
		Assert.assertTrue(resp.contains("DOB: 19750218"), "AP 'DOB: 19750218' not found in report");

		command = "grep 'SSN: 071-41-2375' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired AP 'SSN: 071-41-2375'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);

		command = "grep 'GOOD CAUSE: ADOPTC' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired AP 'GOOD CAUSE: ADOPTC'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		
		//Verify Absent Parent Employer information in report
		command = "grep 'ABSENT PARENT EMPLOYER NAME: SMART TESTING' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired AP Employer name 'ABSENT PARENT EMPLOYER NAME: SMART TESTING'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);

		command = "grep 'ADDR: 100 WINTER STREET' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired AP Emp Street Adr 'ADDR: 100 WINTER STREET'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);

		command = "grep 'CITY: BOSTON' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired AP Emp city 'CITY: BOSTON'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("02110"), "AP Emp Zip '02110' not found in report");

		command = "grep 'PHONE: 6175881293' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired AP Emp phone 'PHONE: 6175881293'";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		
		//Verify Accident segment
		log("\r\n//Accident");
		command = "grep 'OTHER HEALTH INSURANCE: Y' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired Accident segment 'OTHER HEALTH INSURANCE: Y'";
		resp = Common.connectUNIX(command, error).trim();
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("A16/A17 FORM SENT: Y"), "Accident segment 'A16/A17 FORM SENT: Y' not found in report");
		
		//Verify no errors were there in the report 
		command = "grep 'ERRORS:' "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the 'ERRORS:' message";
		resp = Common.connectUNIX(command, error).trim();;
		log("\r\n"+resp);
		Assert.assertTrue(resp.contains("0"), "ERRORS: was not set to 0 in report");

		//Got to TPL panel to verify resource was added
    	searchTPLMem(member);
    	
    }
    
    @Test
    public void test31940() throws Exception{
    	
    	TestNGCustom.TCNo="31940 - Add update TPL data via panels Test Case";
    	log("//TC "+TestNGCustom.TCNo);
    	
    	String polHolderLname = Common.generateRandomName();
    	String polHolderFname = Common.generateRandomName();
    	String polHolderSSN = Common.generateRandomTaxID();
    	String polHolderDoB = Common.convertSysdatecustom(-12775);

    	//Add PolicyHolder
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n29")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_LastName")).sendKeys(polHolderLname);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_FirstName")).sendKeys(polHolderFname);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_SsnNumber")).sendKeys(polHolderSSN);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_BirthDate")).sendKeys(polHolderDoB);
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_GenderCode"))).selectByVisibleText("Male");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailStrt1")).sendKeys("101 FEDERAL ST");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailCity")).sendKeys("BOSTON");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_State"))).selectByVisibleText("MA");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailZip")).sendKeys("02110");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_OriginCode"))).selectByVisibleText("ABSENT PARENT");
        Common.saveAll();
        
        String polHolderID = driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_Sak")).getAttribute("value");
        log("PolicyHolder Successfully added. PolicyHolder ID is: "+polHolderID);
        
        //Update PolicyHolder- change address
        Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n29")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderBean_CriteriaPanel:PolicyHolder_sakString")).sendKeys(polHolderID);
	 	Common.search();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderList_0:PolicyHolderBean_ColValue_status")).click();
	 	
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailStrt1")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailStrt1")).sendKeys("100 HANCOCK ST");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailCity")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailCity")).sendKeys("QUINCY");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailZip")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailZip")).sendKeys("02171");
	 	Common.saveAll();
	 	
	 	//Verfiy changes
        Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n29")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderBean_CriteriaPanel:PolicyHolder_sakString")).sendKeys(polHolderID);
	 	Common.search();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderList_0:PolicyHolderBean_ColValue_status")).click();
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailStrt1")).getAttribute("value").equals("100 HANCOCK ST"), "Address 1 did not update");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailCity")).getAttribute("value").equals("QUINCY"), "City did not update");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PolicyHolderPanel:PolicyHolderDataPanel_MailZip")).getAttribute("value").equals("02171"), "Zip did not update");
	 	
        log("PolicyHolder Successfully updated");
	 	
	 	//Add Absent Parent
	 	
    	String absParentLname = Common.generateRandomName();
    	String absParentFname = Common.generateRandomName();
    	String absParentSSN = Common.generateRandomTaxID();
    	String absParentDoB = Common.convertSysdatecustom(-12775);
    	String absParentPhone = "1"+Common.generateRandomTaxID();
    	
        Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n33")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_LastName")).sendKeys(absParentLname);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_FirstName")).sendKeys(absParentFname);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_BirthDate")).sendKeys(absParentDoB);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_SsnNumber")).sendKeys(absParentSSN);
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_CdeSex"))).selectByVisibleText("Male");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_Country")).sendKeys("USA");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_Street1")).sendKeys("101 FEDERAL ST");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_Street2")).sendKeys("FL 9");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_City")).sendKeys("BOSTON");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_State"))).selectByVisibleText("MA");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_ZipCode")).sendKeys("02110");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_PhoneNum")).sendKeys(absParentPhone);
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_OriginCode"))).selectByVisibleText("ABSENT PARENT");
        Common.saveAll();
        
        String absParentID = driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_SakAbsentParent")).getText();
        log("Absent Parent Successfully added. Absent Parent ID is: "+absParentID);
        
        //Update Absent Parent- change address
        Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n33")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentBean_CriteriaPanel:AbsentParentDataPanel_SakAbsentParent")).sendKeys(absParentID);
	 	Common.search();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentList_0:AbsentParentBean_ColValue_status")).click();
	 	
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_Street1")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_Street1")).sendKeys("100 HANCOCK ST");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_City")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_City")).sendKeys("QUINCY");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_ZipCode")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_ZipCode")).sendKeys("02171");
	 	Common.saveAll();
	 	
	 	//Verfiy changes
        Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n33")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentBean_CriteriaPanel:AbsentParentDataPanel_SakAbsentParent")).sendKeys(absParentID);
	 	Common.search();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentList_0:AbsentParentBean_ColValue_status")).click();
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_Street1")).getAttribute("value").equals("100 HANCOCK ST"), "Address 1 did not update");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_City")).getAttribute("value").equals("QUINCY"), "City did not update");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:AbsentParentPanel:AbsentParentDataPanel_ZipCode")).getAttribute("value").equals("02171"), "Zip did not update");
        
        log("Absent Parent Successfully updated");
	 	
        //Add resource
    	//Get a member who does not have TPL
	    sqlStatement = "select base.ID_MEDICAID from t_re_base base, t_pub_hlth_pgm pgm,t_pub_hlth_aid pubaid, T_Re_Other_Id C, " +
				"t_cde_aid aid,t_re_aid_elig elig where " +
				"elig.sak_recip=base.sak_recip " +
				"and pgm.SAK_PUB_HLTH=pubaid.SAK_PUB_HLTH " +
				"and pubaid.SAK_CDE_AID=aid.SAK_CDE_AID "  +
				"and  aid.SAK_CDE_AID= elig.SAK_CDE_AID "  +
				"and pgm. CDE_PGM_HEALTH='STD' " +
				"and elig.DTE_END='22991231' " + 
				"and elig.cde_status1<>'H' " +
				"and not exists ( select sak_recip from t_tpl_resource rs where rs.sak_recip=base.sak_recip) " +
				"and base.ind_active='Y' and base.Sak_Recip=C.Sak_Recip And C.Cde_Agency = 'HIX'  And C.End_Date = 22991231 "+ //notice change in agency ID to HIX
				"and not exists (select sak_recip from t_re_hib hib where hib.sak_recip=base.sak_recip ) " + //Added to not have any medicare records in tpl search panel post run of below tpl enrollment process
				"and base.sak_recip > dbms_random.value * 6300000 " +
				"and rownum<2 ";
	    
	    System.out.println(sqlStatement);
	    colNames.add("ID_MEDICAID");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    String mem=colValues.get(0);
    	
    	//Add resource
        Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();

	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLCurrentId")).sendKeys(mem);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLcarrierNumber")).sendKeys("0101001");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SubContractorIndicator"))).selectByVisibleText("No");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLRelationship")).sendKeys("A");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLPolicyHolderSearch")).sendKeys(polHolderID);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_TplPolicyNumber")).sendKeys(Common.generateRandomTaxID());
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_CostAvoidIndicator"))).selectByVisibleText("No");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_OriginCode"))).selectByVisibleText("ABSENT PARENT");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_CdeInitOrg"))).selectByVisibleText("ABSENT PARENT");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SuspectCode"))).selectByVisibleText("VERIFIED");
        driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SuspectDate")).sendKeys(Common.convertSysdate());
        Common.saveAll();
        
        //Add Coverage
        driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n103")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:Coverage_NewButtonClay:CoverageList_newAction_btn")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageDataPanel_CoverageCode")).sendKeys("02");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageDataPanel_OIPlanCode")).sendKeys("OI02");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageXrefDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageXrefDataPanel_EndDate")).sendKeys("12/31/2299");
	 	Common.saveAll();
	 	
	 	//Add absent parent
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n106")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParent_NewButtonClay:MemberAbsentParentList_newAction_btn")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParent_SakAbsentParent_CMD_SEARCH")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:_id37:AbsentParentSearchCriteriaPanel:AbsentParentID")).sendKeys(absParentID);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:_id37:AbsentParentSearchCriteriaPanel:SEARCH")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:_id37:AbsentParentSearchResults_0:column1Value")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
	 	Common.saveAll();
	 	log("Resource successfully added for Member: "+mem);
	 	
	 	//Update resource- carrier and policy number
	 	String polNumber = Common.generateRandomTaxID();
        Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	searchTPLMem(mem);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n1")).click();
	 	
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLcarrierNumber")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLcarrierNumber")).sendKeys("0027000");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_TplPolicyNumber")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_TplPolicyNumber")).sendKeys(polNumber);
	 	Common.saveAll();
	 	
	 	//Veriy changes
        Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	searchTPLMem(mem);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n1")).click();

	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLcarrierNumber")).getAttribute("value").equals("0027000"), "Carrier did not update");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_TplPolicyNumber")).getAttribute("value").equals(polNumber), "Policy Number did not update");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLPolicyHolderSearch")).getAttribute("value").equals(polHolderID), "Policy Holder ID not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_PolicyHolderName")).getAttribute("value").equals(polHolderLname+" "+polHolderFname), "Policy Holder last name and first name not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SsnNumber")).getAttribute("value").equals(polHolderSSN), "Policy Holder SSN not found");

	 	//Verify absent parent data
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n106")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentList_0:MemberAbsentParentBean_ColValue_status")).click();
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParent_SakAbsentParent")).getAttribute("value").equals(absParentID), "Absent Parent ID not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_FirstName")).getAttribute("value").equals(absParentFname), "Absent Parent first name not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_LastName")).getAttribute("value").equals(absParentLname), "Absent Parent last name not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_Country")).getAttribute("value").equals("USA"), "Absent Parent country not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_Street1")).getAttribute("value").equals("100 HANCOCK ST"), "Absent Parent Adr 1 not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_Street2")).getAttribute("value").equals("FL 9"), "Absent Parent Adr 2 not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_City")).getAttribute("value").equals("QUINCY"), "Absent Parent City not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_StateCode")).getAttribute("value").equals("FL 9"), "Absent Parent State not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_ZipCode")).getAttribute("value").equals("02171"), "Absent Parent Zip not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_BirthDate")).getAttribute("value").equals(absParentDoB), "Absent Parent DoB not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_SexDescription")).getAttribute("value").equals("Male"), "Absent Parent Sex not found");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberAbsentParentPanel:MemberAbsentParentXrefDataPanel_PhoneNum")).getAttribute("value").equals(absParentPhone), "Absent Parent Phone no. not found");

	 	log("Resource successfully updated");

    }
    
    @Test
    public void test31941_22788() throws Exception{
    	
    	TestNGCustom.TCNo="31941 - Addupdate carrier data via panels Test Case and 22788 - Verify duplicate carrier message and Verify duplicate employer message";
    	log("//TC "+TestNGCustom.TCNo);
    	
    	String carrierID = Common.generateRandomTaxID().substring(0, 7);
    	String carrierName = Common.generateRandomName();
    	String carrierFEIN = Common.generateRandomTaxID();
    	
    	//Add Carrier
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_CarrierCode")).sendKeys(carrierID);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_BusNameCar")).sendKeys(carrierName);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_Ein")).sendKeys(carrierFEIN);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailStrt1")).sendKeys("101 FEDERAL ST");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailCity")).sendKeys("BOSTON");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_State"))).selectByVisibleText("MA");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailZip")).sendKeys("02110");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrier_SubContractorIndicator1"))).selectByVisibleText("Main");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_OriginCode"))).selectByVisibleText("ABSENT PARENT");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_IndMedCom"))).selectByVisibleText("Commercial");
        
        //Add correspondence address
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:Address_1")).sendKeys("127 gas light dr");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:Address_3")).sendKeys("WEYMOUTH");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:Address_4"))).selectByVisibleText("MA");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:Address_5")).sendKeys("02190");
	 	
	 	//Carrier to OI plan
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:TplCarrierToOIPlan_NewButtonClay:TplCarrierToOIPlanList_newAction_btn")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:TplCarrierToOIPlan_OIPlanCode_CMD_SEARCH")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:_id62:CoverageCodeSearchCriteriaPanel:OiPlanCode")).sendKeys("OI02");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:_id62:CoverageCodeSearchCriteriaPanel:SEARCH")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:_id62:CoverageCodePopupSearchResults_0:column1Value")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:TplCarrierPlanXrefDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:TplCarrierPlanXrefDataPanel_EndDate")).sendKeys("12/31/2299");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierToOIPlanPanel:TplCarrierToOIPlanPanelPanel_addAction_btn")).click();

	 	//Employers For Carrier
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:EmpCarrierXrefPanel:TplEmpCarrierXref_NewButtonClay:TplEmpCarrierXrefList_newAction_btn")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:EmpCarrierXrefPanel:TplEmpCarrierXrefDataPanel_EmployerCode")).sendKeys("0000006");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:EmpCarrierXrefPanel:EmpCarrierXrefPanelPanel_addAction_btn")).click();
	 	
	 	//Add Status
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatus_NewButtonClay:TplCarrierStatusList_newAction_btn")).click();
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatusDataPanel_StatusIndicator"))).selectByVisibleText("Active");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatusDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatusDataPanel_EndDate")).sendKeys("12/31/2299");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierStatusPanel:TplCarrierStatusPanel_addAction_btn")).click();
	 	
	 	//Recode after DF 30249 is fixed
//	 	Common.saveAll();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_status")).getText().equals("Saved"), "Save was not successfull");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_carrierCode")).getText().equals(carrierID), "Save was not successfull");
	 	log("Carrier Successfully Added. Carrier ID is: "+carrierID);
	 	
	 	//Update carrier - Change Address
	 	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierBean_CriteriaPanel:TplCarrierDataPanel_CarrierCode")).sendKeys(carrierID);
	 	Common.search();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_status")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailStrt1")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailStrt1")).sendKeys("100 HANCOCK ST");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailCity")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailCity")).sendKeys("QUINCY");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailZip")).clear();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailZip")).sendKeys("02171");
	 	
	 	Common.saveAll();
	 	
	 	//Verify Updates
	 	Common.resetBase();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierBean_CriteriaPanel:TplCarrierDataPanel_CarrierCode")).sendKeys(carrierID);
	 	Common.search();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_status")).click();

	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailStrt1")).getAttribute("value").equals("100 HANCOCK ST"), "Address 1 did not update");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailCity")).getAttribute("value").equals("QUINCY"), "City did not update");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailZip")).getAttribute("value").equals("02171"), "Zip did not update");
	 	
	 	log("Carrier Address successfully updated.");
	 	
	 	//TC 22788
	 	LoginCheck();
	 	carrierID = Common.generateRandomTaxID().substring(0, 7);
    	carrierName = Common.generateRandomName();
    	
    	//Add Carrier
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n22")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_CarrierCode")).sendKeys(carrierID);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_BusNameCar")).sendKeys(carrierName);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_Ein")).sendKeys(carrierFEIN);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailStrt1")).sendKeys("100 HANCOCK ST");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailCity")).sendKeys("QUINCY");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_State"))).selectByVisibleText("MA");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_MailZip")).sendKeys("02171");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrier_SubContractorIndicator1"))).selectByVisibleText("Main");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_OriginCode"))).selectByVisibleText("ABSENT PARENT");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierDataPanel_IndMedCom"))).selectByVisibleText("Commercial");
        
        //Save All and check for dulplicate warning message
        driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		String message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Exact duplicate carrier identified, do you wish to continue with save?"), "Did not get duplicate carrier warning message. Instead got: "+message+"...");

		//This is the Common.save() routine, but we can't use it because we do not get a save successful message in the end (only get a 'Saved' message), so pasting the code without it
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
	    driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		if (driver.findElements(By.xpath("//input[@type='checkbox' and contains(@name ,'Warnings')]")).size()>0){
			int length=(driver.findElements(By.xpath("//input[@type='checkbox' and contains(@name ,'Warnings')]"))).size();
	         for(int i=0;i<length;i++)
	        	 driver.findElements(By.xpath("//input[@type='checkbox' and contains(@name ,'Warnings')]")).get(i).click();
		     driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		}
		if ((driver.findElements(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).size())>0) 
			driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Accept Change']")).click();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		
		//Assert that we get the 'Saved' message and the carrier ID
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_status")).getText().equals("Saved"), "Save was not successfull");
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplCarrierPanel:TplCarrierList_0:TplCarrierBean_ColValue_carrierCode")).getText().equals(carrierID), "Save was not successfull");
		
	 	log("Duplicate alert message was successfully displayed, and duplicate carrier for same FEIN was saved successfully. Carrier ID is: "+carrierID);
	 	
	 	//Add employer and then add again with same FEIN. Verify duplicate message
	 	//Add employer record first
    	String empID = "";
    	String empName = Common.generateRandomName();
    	String empFEIN = Common.generateRandomTaxID();
    	
	 	LoginCheck();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n25")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_BusName")).sendKeys(empName);
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_Ein")).sendKeys(empFEIN);
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailStrt1")).sendKeys("100 HANCOCK ST");
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailCity")).sendKeys("QUINCY");
        new Select(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_State"))).selectByVisibleText("MA");
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailZip")).sendKeys("02171");
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_Country")).sendKeys("USA");
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_ContactName")).sendKeys(empName);
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_PhoneNumber")).sendKeys("9"+Common.generateRandomTaxID());
        new Select(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_ErisaIndicator"))).selectByVisibleText("No");
        new Select(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_Union"))).selectByVisibleText("No");
        Common.save();
        empID = driver.findElement(By.id("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerList_0:TplEmployerBean_ColValue_employerCode")).getText();
	 	
	 	//Verify Employer successfully saved
	 	LoginCheck();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n25")).click();
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerBean_CriteriaPanel:TplEmployerDataPanel_EmployerCode")).sendKeys(empID);
	 	Common.search();
	 	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerList_0:TplEmployerBean_ColValue_employerCode")).getText().equals(empID), "Save was not successfull");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerList_0:TplEmployerBean_ColValue_employerCode")).click();
	 	Assert.assertTrue(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_BusName")).getAttribute("value").equals(empName), "Emp Name not correct");
	 	Assert.assertTrue(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailStrt1")).getAttribute("value").equals("100 HANCOCK ST"), "Emp Street1 not correct");
	 	Assert.assertTrue(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailCity")).getAttribute("value").equals("QUINCY"), "Emp City not correct");
	 	Assert.assertTrue(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailZip")).getAttribute("value").equals("02171"), "Emp Zip not correct");
	 	
	 	log("Employer Successfully Added. Employer ID is: "+empID);


	 	//Create new employer record for test with same FEIN number. Verify Duplicate warning
	 	empName = Common.generateRandomName();
	 	
	 	LoginCheck();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:GRP_RelatedDataOther")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplRelatedDataNavigatorPanel:TplRelatedDataNavigatorId:ITM_n25")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_BusName")).sendKeys(empName);
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_Ein")).sendKeys(empFEIN);
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailStrt1")).sendKeys("101 FEDERAL ST");
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailCity")).sendKeys("BOSTON");
        new Select(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_State"))).selectByVisibleText("MA");
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_MailZip")).sendKeys("02110");
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_Country")).sendKeys("USA");
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_ContactName")).sendKeys(empName);
	 	driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_PhoneNumber")).sendKeys("9"+Common.generateRandomTaxID());
        new Select(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_ErisaIndicator"))).selectByVisibleText("No");
        new Select(driver.findElement(By.name("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerDataPanel_Union"))).selectByVisibleText("No");
        driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		message=driver.findElement(By.cssSelector("td.message-text")).getText();
		Assert.assertTrue(message.equals("Another employer with the same FEIN exists, please review"), "Did not get duplicate employer warning message. Instead got: "+message+"...");
		Common.save();
        empID = driver.findElement(By.id("MMISForm:MMISBodyContent:TplEmployerPanel:TplEmployerList_0:TplEmployerBean_ColValue_employerCode")).getText();
	 	log("Duplicate alert message was successfully displayed, and duplicate employer for same FEIN was saved successfully. Employer ID is: "+empID);

    }
    
    public void verifyField(String target, String fieldName, Boolean textProperty) throws Exception {
    	String fieldValue;
    	if (textProperty)
    	  fieldValue = driver.findElement(By.xpath(target)).getText().trim();
    	else
    	  fieldValue = driver.findElement(By.xpath(target)).getAttribute("value").trim();
	 	Assert.assertTrue(!(fieldValue.equals("")), "No value present for "+fieldName);
	 	log(fieldName+": "+fieldValue);


    }

}