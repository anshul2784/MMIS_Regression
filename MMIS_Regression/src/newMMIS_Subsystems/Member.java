package newMMIS_Subsystems;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.URL;
import java.net.URLConnection;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.List;
import java.util.Locale;
import java.util.concurrent.TimeUnit;


import org.apache.commons.io.FileUtils;
import org.apache.commons.lang3.StringUtils;
import org.apache.pdfbox.cos.COSDocument;
import org.apache.pdfbox.pdfparser.PDFParser;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.text.PDFTextStripper;
import org.apache.pdfbox.text.PDFTextStripperByArea;
import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.Select;
import org.testng.Assert;
import org.testng.SkipException;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Listeners;
import org.testng.annotations.Test;

import ch.ethz.ssh2.Connection;
import ch.ethz.ssh2.Session;
import ch.ethz.ssh2.StreamGobbler;

//On 5/19/2015, this suite was modified and all test cases were changed to have the elig eff date <> dob anymore. Elig eff date was now calculated using the
//newly developed function getEligeffDT(). The code was modified for getNewMember() function, and elig eff date=dob and date appl=dob was changed at all xml strings prior to calling getCustomMember() function.
//Assert Statements involving checks for elig eff date were changed for following 6 TCs: 22528, 22531, 22538, 26281, 22553_23372, 23373 
//A copy of previous Member.java file without the above changes is maintained at Z:\Regression\Automation Scripts\Always Keep\Member
@Listeners({ newMMIS_Subsystems.TestNGCustom.class })
public class Member extends Login{
	
	public static String otherid, fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, fileMem = " ", lastName = "MAZDAZ", beginDate="", openRsn="01", caseStatus="1", eligStatus = "1", errorMessage="", errorCode="", result_type="", mdsCutOffDt="10/01/2023", emailDemographic="QAtest@gmail.com";;
	public static boolean endElig = false;
	//Set Portal Page error target
	public static String mmqTarget = "//form[contains(@id,'mmq')]/div/table[2]/tbody/tr";
	public static Date refEffDt,effDt;
	public static List<String> errmsgs =new ArrayList<>();
	public static List<String> errcds =new ArrayList<>();
	
	public static String xml;
	public static String specificAidCat="";
	public static String endEligDate="", mid;
	public static boolean commPrefrenence=true;
	
	public static String openEligStatus="1";
	public static String closedEligStatus="4";
	
	public static String openEndDateFile="2299-12-31";
	
	@BeforeTest
    public void memberStartup() throws Exception {
    	log("Starting Member Subsystem......");
    	this.refEffDt = DT("09/30/2015"); //this is the ICD 9 to 10 cut off date
    }
	
	@BeforeMethod
	public void LoginCheck() throws Exception {
		Common.resetBase();
		testCheckDBLoginSuccessful();	
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
	}
	
    @Test
    public void test22528() throws Exception{
    	TestNGCustom.TCNo="22528";
    	log("//TC 22528");
    	
    	//Get Father ID
    	otherid = Common.generateRandomTaxID();
    	fname="F"+Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1985-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DTA";
        String Fid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Get Son ID
    	otherid = Common.generateRandomTaxID();
    	fname="S"+Common.generateRandomName();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2007-10-22";
        dep="01";
        aid="03";
        String Sid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Get Daughter ID
    	otherid = Common.generateRandomTaxID();
    	fname="D"+Common.generateRandomName();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2009-10-22";
        dep="02";
        aid="07";
        String Did = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log ("Father ID: "+Fid+" Son ID: "+Sid+" Daughter ID: "+ Did);
        
        //Verify Member case history for all 3 ids
        verifyCaseHist(Fid,Fid,Sid,Did);
        verifyCaseHist(Sid,Fid,Sid,Did);
        verifyCaseHist(Did,Fid,Sid,Did);
        
        //Verify Daughter information
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(Did),"Member ID Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("MAZDAZ, "+fname),"Name Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[6]/td[2]")).getText().equals(ssn.substring(0, 3)+"-"+ssn.substring(3, 5)+"-"+ssn.substring(5, 9)),"SSN Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText().equals(dob.substring(5, 7)+"/"+dob.substring(8, 10)+"/"+dob.substring(0, 4)),"DoB Mismatch");
//      Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText().equals("WHITE"),"Race Mismatch");
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_raceData"))).getFirstSelectedOption().getText().equals("WHITE"),"Race Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[13]/td[2]")).getText().equals(" "),"Ethnicity Mismatch"); //We are not sending Ethnicity in xml file, but Ethnicity is coming blank instead of UNKNOW after REAL SOGI changes.
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[15]/td[2]")).getText().equals("C"),"Citizen Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[16]/td[2]")).getText().equals("ENGDEF"),"Language Spoken Mismatch"); //Changed from END to ENGDEF after REAL SOGI changes.
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[17]/td[2]")).getText().equals("ENG"),"Language Written Mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyName")).getText().equals("DEPT OF TRANSITIONAL ASSISTANCE"),"Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(otherid),"Other ID Mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"Benefit Plan Mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("07 Disabled"),"Aid Cat Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid Cat effective date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid Cat end date Mismatch");
    }
    
    @Test
    public void test22529() throws Exception{
    	TestNGCustom.TCNo="22529";
    	log("//TC 22529");

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1975-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DTA";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Add aid cat 08 with DSS, and change address
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        aid="08";
        agency="DSS";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member:"+Mid);
        
        memberSearch(Mid);
        
        //Verify current address
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        
        //Verify Previuos address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals("101 FEDERAL ST"),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals("BOSTON"),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals("02110"),"Previous zip mismatch");
    	
    	//Click on Member Case History link
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_aidCategory")).getText().equals("02"),"Aid cat 02 not present, added bt DTA");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_1:RecipientCaseBean_ColValue_aidCategory")).getText().equals("08"),"Aid cat 08 not present, added bt DSS");
    }
    
    @Test
    public void test22530() throws Exception{
    	TestNGCustom.TCNo="22530";
    	log("//TC 22530");

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1975-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DSS";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Change address with DTA
        String adr2="100 HANCOCK ST";
        String city2="QUINCY";
        String zip2="02171";
        agency="DTA";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr2,city2,zip2,dep,aid,agency);
        
        log("Member:"+Mid);
        
        memberSearch(Mid);
        
        //Verify current address is same as old one, ie address achange has not occured
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        
        //Verify no records found in Previuos address
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressNoRecordsMessage")).getText().equals("***No records found***"),"Records found in previous address");

    }
    
    @Test
    public void test22531() throws Exception{
    	TestNGCustom.TCNo="22531";
    	log("//TC 22531");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1955-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DTA";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Add aid cat 08 with DSS, and change address
        aid="08";
        casenum=Common.generateRandomTaxID();
        agency="DSS";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 08
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member:"+Mid);
        
        //Verify Panels- Member Information
        memberSearch(Mid);
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText().equals("STD "+dateXMLtoPanel(getEligeffDT(dob))+" - 12/31/2299"),"Benefit plan got end dated");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).selectByIndex(1);
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText().equals("08 "+dateXMLtoPanel(getEligeffDT(dob))+" - "+Common.convertSysdate()),"Aid cat did not ge end dated");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_agencyAffiliation"))).selectByIndex(1);
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_agencyAffiliation"))).getFirstSelectedOption().getText().equals("DSS "+dateXMLtoPanel(getEligeffDT(dob))+" - "+Common.convertSysdate()),"Agency did not ge end dated");

        //Member benefit plan/Aid category
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Benefit Plan got get end dated");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
        //Sort on aid cat end date
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid Cat did not get end dated");
    	
    	//Click on Member Case History link
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
        //Sort on aid cat
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList:RecipientCaseBean_ColHeader_aidCategory")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList:RecipientCaseBean_ColHeader_aidCategory")).click();
        //Click on case number
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Case Elig not closed");

    }
    
    @Test
    public void test22532() throws Exception{
    	TestNGCustom.TCNo="22532";
    	log("//TC 22532");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1945-10-22";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="DTA";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Change SSN
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member:"+Mid);
        
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[6]/td[2]")).getText().equals(ssn.substring(0, 3)+"-"+ssn.substring(3, 5)+"-"+ssn.substring(5, 9)),"SSN Mismatch");

        //Change Name
        fileMem = Mid;
    	fname=Common.generateRandomName();
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("MAZDAZ, "+fname),"Name Mismatch");

    }
    
    @Test
    public void test22534() throws Exception{
    	TestNGCustom.TCNo="22534";
    	log("//TC 22534");

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1946-09-20";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="TV";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member:"+Mid);
        
        //Verify Benefit Plans BASF and LIM
        memberSearch(Mid);
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("BASF  MASSHEALTH BASIC FEE FOR SERVICE"),"BASF Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("LIM   MASSHEALTH LIMITED"),"LIM Benefit Plan Mismatch");
    }
    
    @Test
    public void test22538() throws Exception{
    	TestNGCustom.TCNo="22538";
    	log("//TC 22538");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1976-03-03";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="TT";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log(" Member: "+Mid+" First Name: "+fname+" Last Name: P Other ID: "+otherid+" Address "+adr1+" "+city+" "+zip);

        //Store other ID for verification
        String MHOotherid = otherid;
        
        //Verify member Data
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("MAZDAZ, "+fname),"Name Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("BASF  MASSHEALTH BASIC FEE FOR SERVICE"),"BASF Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("LIM   MASSHEALTH LIMITED"),"LIM Benefit Plan Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
    	//Verify Other ID
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyName")).getText().equals("MA21 MASSHEALTH ORGANIZATION"),"MHO Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(MHOotherid),"MHO Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"MHO begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");
    	
        //Add aid cat 04 and different other ID, change agency to DTA, change last name and change address
    	otherid = Common.generateRandomTaxID();
        aid="04";
        agency="DTA";
        lastName="Q";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        beginDate="1977-04-09";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log(" 2nd other ID: "+otherid+" Changed Last Name: "+lastName+" Changed Address: "+adr1+" "+city+" "+zip);
        //Verify member Data
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("Q, "+fname),"Name Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("BASF  MASSHEALTH BASIC FEE FOR SERVICE"),"BASF Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("EAEDC EMERG AID TO ELDERLY DISABLED AND CHILDR"),"EAEDC Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).getText().equals("LIM   MASSHEALTH LIMITED"),"LIM Benefit Plan Mismatch");
    	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("04 EAEDC"),"Aid Cat 04 Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("DTA"),"Agency Source DTA Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals("04/09/1977"),"Aid cat 04 eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
        //Verify current address
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        
        //Verify Previuos address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals("101 FEDERAL ST"),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals("BOSTON"),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals("02110"),"Previous zip mismatch");
    	
    	//Verify Other ID
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyName")).getText().equals("DEPT OF TRANSITIONAL ASSISTANCE"),"DTA Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(otherid),"DTA Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"DTA begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");

    	
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyName")).getText().equals("MA21 MASSHEALTH ORGANIZATION"),"MHO Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyId")).getText().equals(MHOotherid),"MHO Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"MHO begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");
    	
        //Add aid cat 03 and different other ID=SSN, change agency to SSA, change last name and change address
        aid="03";
        agency="SSA";
        adr1="101 GAS LIGHT DR";
        city="WEYMOUTH";
        zip="02190";
        beginDate="1979-05-09";
        Mid = getNewMemebr(ssn,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log(" other ID same as ssn: "+ssn+" Changed Address again: "+adr1+" "+city+" "+zip);


        //Verify member Data
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("Q, "+fname),"Name Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("BASF  MASSHEALTH BASIC FEE FOR SERVICE"),"BASF Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("EAEDC EMERG AID TO ELDERLY DISABLED AND CHILDR"),"EAEDC Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).getText().equals("LIM   MASSHEALTH LIMITED"),"LIM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_3:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");
    	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("04 EAEDC"),"Aid Cat 04 Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("DTA"),"Agency Source DTA Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals("04/09/1977"),"Aid cat 04 eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("TT Barred or PRUCOL Aged Aliens"),"Aid Cat TT Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("MHO"),"Agency Source MHO Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid cat TT eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");

        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_3:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("03 SSI Disabled"),"Aid Cat 03 Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_agencyCode")).getText().equals("SSA"),"Agency Source SSA Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals("05/09/1979"),"Aid cat 03 eff date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat end date Mismatch");

        //Verify current address
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals("100 HANCOCK ST"),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText().equals("QUINCY"),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().equals("02171-0000"),"Zip Mismatch");
        
        //Verify Previuos addresses (no change as SSA can't change address)
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals("101 FEDERAL ST"),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals("BOSTON"),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals("02110"),"Previous zip mismatch");

    	//Verify Other ID
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyName")).getText().equals("DEPT OF TRANSITIONAL ASSISTANCE"),"DTA Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(otherid),"DTA Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"DTA begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");

    	
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyName")).getText().equals("MA21 MASSHEALTH ORGANIZATION"),"MHO Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyId")).getText().equals(MHOotherid),"MHO Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"MHO begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");

        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_2:OtherIdBean_ColValue_agencyName")).getText().equals("SOCIAL SECURITY ADMINISTRATION"),"SSA Agency name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_2:OtherIdBean_ColValue_agencyId")).getText().equals(ssn),"SSA Other ID Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_2:OtherIdBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"SSA begin date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_2:OtherIdBean_ColValue_endDate")).getText().equals("12/31/2299"),"end date mismatch");
    	
    }
    
    @Test
    public void test22539() throws Exception{
    	TestNGCustom.TCNo="22539";
    	log("//TC 22539");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2013-06-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="02";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //End date 02 with end date = sysdate-5 on panel
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-5));
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-5));
    	Common.saveAll();
        
        //Add aid cat CN
		beginDate = Common.convertSysdatecustom(-4).substring(6, 10)+"-"+Common.convertSysdatecustom(-4).substring(0, 2)+"-"+Common.convertSysdatecustom(-4).substring(3, 5);
        aid="CN";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);

        Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Eligibility")).click();
		driver.findElement(By.linkText("Verify Member Eligibility")).click();
		
		//Select Provider
		new Select(driver.findElement(By.xpath("//select[contains(@id,'eligInquireSearchProviderID')]"))).selectByIndex(1);
		//Enter Member ID for search
		driver.findElement(By.xpath("//input[contains(@id,'member_memberID')]")).sendKeys(Mid);
		
		//Enter Dates
		driver.findElement(By.xpath("//input[contains(@id,'member_fromDOS')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'member_fromDOS')]")).sendKeys(Common.convertSysdatecustom(-10));
		driver.findElement(By.xpath("//input[contains(@id,'member_toDOS')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'member_toDOS')]")).sendKeys(Common.convertSysdate());

		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Submit']")).click();
		//Set Page error target
		String peTarget = "//form[@id='form1']/div/table[2]/tbody/tr";
		Common.getPageError(peTarget);
		//Verify two rows of elig are present
		driver.findElement(By.id("MemberTab:_MENUITEM_EligTab")).click();
		Common.getPageError(peTarget);
    	Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'coverageList:0:status')]")).getText().equals("MASSHEALTH STANDARD"),"MH elig not present");
//    	Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'coverageList:1:status')]")).getText().equals("MASSHEALTH STANDARD"),"MH elig not present"); //discussed with Usha B 11/27/2023 email title "22539 member reg" and updated to below
    	Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'coverageList:1:status')]")).getText().equals("COMMONWEALTH CARE"),"CommCare elig not present");

        Common.portalLogout();
        
    }
    
    @Test
    public void test22541() throws Exception{
    	TestNGCustom.TCNo="22541";
    	log("//TC 22541");
    	
    	//Get any member
    	sqlStatement = "Select id_medicaid from T_RE_BASE b where ind_active = 'Y' and dte_death = 0 and dte_birth > 19000101 and not exists (select 1 from T_RE_LOCKIN_PERIOD p where b.sak_recip=p.sak_recip ) and rownum<2";
    	colNames.add("ID_MEDICAID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
        log("Member: "+colValues.get(0));
    	
        memberSearch(colValues.get(0));
        
        //Add new lockin detail
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n116")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinPeriodDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinPeriodDataPanel_ReLockEnt"))).selectByVisibleText("01 - MULTIPLE PHYSICIANS");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinProviderRestrictionPanel:LockinInfoBean_providerID")).sendKeys("110020937");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinProviderRestrictionPanel:LockinInfoBean_SvcLoc")).sendKeys("A");
		Common.saveAll();
    }
    
    @Test
    public void test22549() throws Exception{
    	TestNGCustom.TCNo="22549";
    	log("//TC 22549");
    	
    	String[] memcase = new String[2];
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
    	memcase[0]=casenum;
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1982-07-09";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //End Elig 40
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Reopen elig 40 in a different case- same aid category, same agency source with overlapping eligibility periods.
    	casenum=Common.generateRandomTaxID();
    	memcase[1]=casenum;
    	beginDate = "2002-07-09";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        
        //Open member in member panel
        memberSearch(Mid);
        //verify only one benefit plan is there
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'EligBean_ColValue_benefitPlan')]")).size()==1,"More than one benefit plan present");
    	//verify 2 aid cat 40s are present
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'AidEligBean_ColValue_aidDes')]")).size()==2,"More than 2 aid cats present");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("40 Family"),"Aid Cat Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_aidDes")).getText().equals("40 Family"),"Aid Cat Mismatch");
    	//Verify 2 cases are present in member case history
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'RecipientCaseBean_ColValue_caseNumber')]")).size()==2,"More than 2 Case numbers present");
    	for (int i=0;i<2;i++) {
    		if (!(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).getText().equals(memcase[i]))) {
    			if (!(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_1:RecipientCaseBean_ColValue_caseNumber")).getText().equals(memcase[i])))
    		    	Assert.assertTrue(false,memcase[i]+" not present");
    		}
    	}
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_aidCategory")).getText().equals("40"),"Aid Cat Mismatch in member case history");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_1:RecipientCaseBean_ColValue_aidCategory")).getText().equals("40"),"Aid Cat Mismatch in member case history");
    }
   
    @Test
    public void test23393() throws Exception{
    	TestNGCustom.TCNo="23393";
    	log("//TC 23393");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1970-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="20";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 20
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat 20
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in Eot, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23394() throws Exception{
    	TestNGCustom.TCNo="23394";
    	log("//TC 23394");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="21";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 21
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat 21
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in Eot, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23395() throws Exception{
    	TestNGCustom.TCNo="23395";
    	log("//TC 23395");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1972-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="22";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 22
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat 22
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23396() throws Exception{
    	TestNGCustom.TCNo="23396";
    	log("//TC 23396");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1971-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="25";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig 25
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat 25
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23397() throws Exception{
    	TestNGCustom.TCNo="23397";
    	log("//TC 23397");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1971-11-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="AL";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //End Elig AL
        endElig = true;
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdate()),"Aid cat not end dated in sysdate");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Aid cat status not closed");
    	Common.cancelAll();
    	
    	//Reopen aid cat AL
    	beginDate=fileSysdateCustom(-1);
    	openRsn="02";
    	caseStatus="2";
    	eligStatus = "2";
        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid cat not end dated in EoT, not reopened");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"),"Aid cat status not reopened");
    	Common.cancelAll();

    }
    
    @Test
    public void test23407() throws Exception{
    	TestNGCustom.TCNo="23407";
    	log("//TC 23407");
    	
    	//Get any member
    	sqlStatement = "Select id_medicaid from T_RE_BASE b where ind_active = 'Y' and dte_death = 0 and dte_birth > 19000101 and not exists (select 1 from T_RE_LOCKIN_PERIOD p where b.sak_recip=p.sak_recip ) and rownum<2";
    	colNames.add("ID_MEDICAID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
        memberSearch(colValues.get(0));
        
        log("Member: "+colValues.get(0));
        
        //Add new lockin detail
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n116")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinPeriodDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinPeriodDataPanel_ReLockEnt"))).selectByVisibleText("01 - MULTIPLE PHYSICIANS");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinProviderRestrictionPanel:LockinInfoBean_providerID")).sendKeys("110000256");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LockinDetailsPanel:LockinProviderRestrictionPanel:LockinInfoBean_SvcLoc")).sendKeys("A");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
    	Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("Provider ID/Service Location must be a Pharmacy."),"Did not get the edit \"Provider ID/Service Location must be a Pharmacy.\"");

    }
    
    @Test
    public void test23384() throws Exception{
    	TestNGCustom.TCNo="23384";
    	log("//TC 23384");
    	
    	sqlStatement="Select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, e.agency_id  from T_RE_BASE b, t_re_other_id e where ind_active = 'Y'  and exists (select p.sak_recip from T_RE_ID_CARD p where b.sak_recip=p.sak_recip group by p.sak_recip having count(sak_recip) = 1 ) and b.sak_recip = e.sak_Recip and e.cde_agency = 'MHO' and e.end_date = '22991231' and b.nam_first NOT LIKE '%-%' and b.adr_state = 'MA' and b.dte_death = '0' and rownum<2";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colNames.add("AGENCY_ID");   //8
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//get member ID card details
        memberSearch(colValues.get(0));
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		String dteIssue = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText();
		String idAction = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText();
		String issueRsn = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText();
		String clerkID = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText();
		String source = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText();
		String dteReq = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText();
		
		
		//insert special char in name
    	otherid = colValues.get(8).trim();
    	fname=colValues.get(3).trim()+"-";
    	lastName = colValues.get(4).trim();
    	String lName= lastName; //Store lastname again in different variable because it will change to P after xml is executed
    	casenum= Common.generateRandomTaxID();
        ssn=colValues.get(1).trim();
        dob =colValues.get(2).trim().substring(0, 4)+"-"+colValues.get(2).trim().substring(4, 6)+"-"+colValues.get(2).trim().substring(6, 8);
        adr1=colValues.get(5).trim();
        city=colValues.get(6).trim();
        zip=colValues.get(7).trim();
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        if (!(Mid.equals(colValues.get(0))))
        	  Assert.assertTrue(false,"Member generated for first name change is not the same as one selected from DB");
        
        log("Member: "+Mid);
        
        //Verify member name has special char, and verify no change in ID card info
        memberSearch(colValues.get(0));
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(lName+", "+fname),"Special char addition to First name failed");
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		if (!(driver.findElements(By.xpath("//span[contains(@id, 'IDCardBean_ColValue_issueDate')]")).size()==1))
      	  Assert.assertTrue(false,"Looks like another row for member ID card got added");

        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText().equals(dteIssue),"dteIssue on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText().equals(idAction),"idAction on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText().equals(issueRsn),"issueRsn on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText().equals(clerkID),"clerkID on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText().equals(source),"source on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText().equals(dteReq),"dteReq on ID card mismatch");

    }
    
    @Test
    public void test23385() throws Exception{
    	TestNGCustom.TCNo="23385";
    	log("//TC 23385");
    	
    	sqlStatement="Select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, e.agency_id  from T_RE_BASE b, t_re_other_id e where ind_active = 'Y'  and exists (select p.sak_recip from T_RE_ID_CARD p where b.sak_recip=p.sak_recip group by p.sak_recip having count(sak_recip) = 1 ) and b.sak_recip = e.sak_Recip and e.cde_agency = 'MHO' and e.end_date = '22991231' and b.nam_last NOT LIKE '%-%' and b.adr_state = 'MA' and b.dte_death = '0' and rownum<2";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colNames.add("AGENCY_ID");   //8
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//get member ID card details
        memberSearch(colValues.get(0));
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		String dteIssue = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText();
		String idAction = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText();
		String issueRsn = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText();
		String clerkID = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText();
		String source = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText();
		String dteReq = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText();
		
		
		//insert special char in name
    	otherid = colValues.get(8).trim();
    	fname=colValues.get(3).trim();
    	lastName = colValues.get(4).trim()+"-";
    	String lName= lastName; //Store lastname again in different variable because it will change to P after xml is executed
    	casenum= Common.generateRandomTaxID();
        ssn=colValues.get(1).trim();
        dob =colValues.get(2).trim().substring(0, 4)+"-"+colValues.get(2).trim().substring(4, 6)+"-"+colValues.get(2).trim().substring(6, 8);
        adr1=colValues.get(5).trim();
        city=colValues.get(6).trim();
        zip=colValues.get(7).trim();
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        if (!(Mid.equals(colValues.get(0))))
        	  Assert.assertTrue(false,"Member generated for first name change is not the same as one selected from DB");
        
        log("Member: "+Mid);
        
        //Verify member name has special char, and verify no change in ID card info
        memberSearch(colValues.get(0));
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(lName+", "+fname),"Special char addition to Last name failed");
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		if (!(driver.findElements(By.xpath("//span[contains(@id, 'IDCardBean_ColValue_issueDate')]")).size()==1))
      	  Assert.assertTrue(false,"Looks like another row for member ID card got added");

        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText().equals(dteIssue),"dteIssue on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText().equals(idAction),"idAction on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText().equals(issueRsn),"issueRsn on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText().equals(clerkID),"clerkID on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText().equals(source),"source on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText().equals(dteReq),"dteReq on ID card mismatch");

    }
    
    @Test
    public void test24487() throws Exception{
    	TestNGCustom.TCNo="24487";
    	log("//TC 24487");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1970-01-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"BUGS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" mail_adr_city=\"WEYMOUTH\" mail_adr_state=\"MA\" mail_adr_street_1=\"101 GAS LIGHT DRIVE\" mail_adr_street_2=\" \" mail_adr_zip_code=\"02190\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        
        
        //Check Panels
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        //Check residential and mailing address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n131")).click();
    	//Sort
    	driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList:OtherAddressBean_ColHeader_addressInd")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressLine1")).getText().equals("101 GAS LIGHT DRIVE"),"Mailing adr1 mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressCity")).getText().equals("WEYMOUTH"),"Mailing city mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressZip")).getText().equals("02190"),"Mailing zip mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressInd")).getText().equals("MM"),"Mailing address Indicator mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressLine1")).getText().equals(adr1),"Res adr1 mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressCity")).getText().equals(city),"Res city mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressZip")).getText().equals(zip),"Res zip mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressInd")).getText().equals("MR"),"Res adr Indicator mismatch");
        //Verify no records found in Previous address
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressNoRecordsMessage")).getText().equals("***No records found***"),"Records found in previous address");

        //Change res adr
        adr1="100 HANCOCK STREET";
        city="QUINCY";
        zip="02171";
    	
    	//Get Member ID
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"BUGS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" mail_adr_city=\"WEYMOUTH\" mail_adr_state=\"MA\" mail_adr_street_1=\"101 GAS LIGHT DRIVE\" mail_adr_street_2=\" \" mail_adr_zip_code=\"02190\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");
        Mid = getCustomMemebr(xml);      
        
        //Check Panels
        memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText().equals(city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().equals(zip+"-0000"),"Zip Mismatch");
        //Check residential and mailing address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n131")).click();
    	//Sort
    	driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList:OtherAddressBean_ColHeader_addressInd")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressLine1")).getText().equals("101 GAS LIGHT DRIVE"),"Mailing adr1 mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressCity")).getText().equals("WEYMOUTH"),"Mailing city mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressZip")).getText().equals("02190"),"Mailing zip mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_0:OtherAddressBean_ColValue_addressInd")).getText().equals("MM"),"Mailing address Indicator mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressLine1")).getText().equals(adr1),"Res adr1 mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressCity")).getText().equals(city),"Res city mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressZip")).getText().equals(zip),"Res zip mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherAddressPanel:OtherAddressList_1:OtherAddressBean_ColValue_addressInd")).getText().equals("MR"),"Res adr Indicator mismatch");
        //Verify Previuos address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals("101 FEDERAL ST"),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals("BOSTON"),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals("02110"),"Previous zip mismatch");

//    	Common.cancelAll();

    }
    
    @Test
    public void test26281() throws Exception{
    	TestNGCustom.TCNo="26281";
    	log("//TC 26281");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1969-03-11";
        adr1="4 FALKLAND ST";
        city="BRIGHTON";
        zip="02135";
    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"03\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<mfp cde_type=\"HSP\" dte_effective=\""+getEligeffDT(dob)+"\" dte_end=\"2299-12-31\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("MFP   MONEY FOLLOWS THE PERSON"),"MFP Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n418")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_mfpCde")).getText().equals("HOSPITAL"),"MFP TYPE Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"MFP Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_endDate")).getText().equals("12/31/2299"),"MFP End Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_status1Code")).getText().equals("Active"),"MFP Status Code Mismatch");

    }
    
    @Test
    public void test26282() throws Exception{
    	TestNGCustom.TCNo="26282";
    	log("//TC 26282");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1980-04-11";
        adr1="4 FALKLAND ST";
        city="BRIGHTON";
        zip="02135";
//        String wEffDate = "2013-01-01";
//        String wEndDate = "2013-12-31";
//        String mfpEffDate = "2013-03-01";
//        String mfpEndDate = "2013-08-31";
//        String mfp2EffDate = "2013-04-01";
//        String mfp2EndDate = "2013-06-30";
        
        //changed below dates on 11/08/2023 as before setup was not adding HCBSM and MFP benefit plans
        String wEffDate = getEligeffDT(dob);
        String wEndDate = "2299-12-31";
        String mfpEffDate = getEligeffDT(dob);
        String mfpEndDate = "2299-12-31";
        String mfp2EffDate = getEligeffDT(dob);
        String mfp2EndDate = "2299-12-31";
    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<waiver cde_type_waiver=\"M\" dte_effective=\""+wEffDate+"\" dte_end=\""+wEndDate+"\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("HCBSM STANDARD PLUS MRC/TBI HCBS WAIVER"),"HCBSM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");

    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n134")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_waiverType")).getText().equals("TRAUMATIC BRAIN INJURY"),"HCBS Waiver Type Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(wEffDate)),"HCBS Waiver Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)),"HCBS Waiver End Date Mismatch");
    	Common.cancelAll();
    	
    	//Add MFP info
    	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<mfp cde_type=\"HSP\" dte_effective=\""+mfpEffDate+"\" dte_end=\""+mfpEndDate+"\" />\n</EligibilityRequest>");
    	
    	Mid = getCustomMemebr(xml);
    	
    	//Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("HCBSM STANDARD PLUS MRC/TBI HCBS WAIVER"),"HCBSM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("MFP   MONEY FOLLOWS THE PERSON"),"MFP Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_2:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n134")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_waiverType")).getText().equals("TRAUMATIC BRAIN INJURY"),"HCBS Waiver Type Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(wEffDate)),"HCBS Waiver Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)),"HCBS Waiver End Date Mismatch");
    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n418")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_mfpCde")).getText().equals("HOSPITAL"),"MFP TYPE Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(mfpEffDate)),"MFP Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(mfpEndDate)),"MFP End Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MFPDetailPanel:MFPDetailList_0:MFPDetailBean_ColValue_status1Code")).getText().equals("Active"),"MFP Status Code Mismatch");
//    	Assert.assertTrue(driver.findElement(By.id("")).getText().equals("")," Mismatch");

    }
    
    @Test
    public void test26280() throws Exception{
    	TestNGCustom.TCNo="26280";
    	log("//TC 26280");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1976-03-03";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="08";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Store prev case number
        String prevCasenum = casenum;
        
        //Add another case number
    	casenum=Common.generateRandomTaxID();
    	Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
    	
    	log("Member: "+Mid);
        
        //Verify member Data
        memberSearch(Mid);
        //verify only one benefit plan is there
     	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
     	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'EligBean_ColValue_benefitPlan')]")).size()==1,"More than one benefit plan present");
     	//verify 2 aid cat 08s are present, and have different case numbers
     	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
     	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'AidEligBean_ColValue_aidDes')]")).size()==2,"More than 2 aid cats present");
     	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_aidDes")).getText().equals("08 Multi Assistance Unit"),"Aid Cat Mismatch");
     	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("08 Multi Assistance Unit"),"Aid Cat Mismatch");
     	String panelCase;
     	for (int i=0;i<2;i++) {
     		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_"+i+":AidEligBean_ColValue_aidDes")).click();
         	panelCase = driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_CaseNumber")).getAttribute("value").trim();;
         	if (!panelCase.equals(prevCasenum) && !panelCase.equals(casenum))
         		Assert.assertTrue(false,"The two case numbers are not associated with the aid cat");
     	}
     	
     	//Verify 2 cases are present in member case history
         driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
     	Assert.assertTrue(driver.findElements(By.xpath("//span[contains(@id, 'RecipientCaseBean_ColValue_caseNumber')]")).size()==2,"More than 2 case numbers present");
     	for (int i=0;i<2;i++) {
         	panelCase = driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_"+i+":RecipientCaseBean_ColValue_caseNumber")).getText();
         	if (!panelCase.equals(prevCasenum) && !panelCase.equals(casenum))
         		Assert.assertTrue(false,"The two case numbers are not present");
     	}
    
    }
    
    @Test
    public void test24485() throws Exception{
    	TestNGCustom.TCNo="24485";
    	log("//TC 24485");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1991-05-11";
        adr1="4 FALKLAND ST";
        city="BRIGHTON";
        zip="02135";
        String wEffDate = "2013-01-01";
        String wEndDate = "2299-12-31";

    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<waiver cde_type_waiver=\"M\" dte_effective=\""+wEffDate+"\" dte_end=\""+wEndDate+"\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("HCBSM STANDARD PLUS MRC/TBI HCBS WAIVER"),"HCBSM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	//Verify HSBSM End date
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)), "HCBSM End date Mismatch");

    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n134")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_waiverType")).getText().equals("TRAUMATIC BRAIN INJURY"),"HCBS Waiver Type Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(wEffDate)),"HCBS Waiver Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)),"HCBS Waiver End Date Mismatch");
    	Common.cancelAll();
    	
    	//Future End date HCBSM Waiver
        wEndDate = fileSysdateCustom(7);
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
			"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
			"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
			"<waiver cde_type_waiver=\"M\" dte_effective=\""+wEffDate+"\" dte_end=\""+wEndDate+"\" />\n</EligibilityRequest>");
        Mid = getCustomMemebr(xml);
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("HCBSM STANDARD PLUS MRC/TBI HCBS WAIVER"),"HCBSM Benefit Plan Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"STD Benefit Plan Mismatch");
    	//Verify HSBSM End date
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)), "HCBSM End date Mismatch");
    	//verify STD plan is not end dated
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_1:EligBean_ColValue_endDate")).getText().equals("12/31/2299"), "STD End date Mismatch");

    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n134")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_waiverType")).getText().equals("TRAUMATIC BRAIN INJURY"),"HCBS Waiver Type Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(wEffDate)),"HCBS Waiver Begin Date Mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HCBSWaiverPanel:HcbsWaiverList_0:HCBSWaiverBean_ColValue_endDate")).getText().equals(dateXMLtoPanel(wEndDate)),"HCBS Waiver End Date Mismatch");
    	Common.cancelAll();
    	
    }
    
    @Test
    public void test22554a_23403() throws Exception{
    	TestNGCustom.TCNo="22554a_23403";
    	log("//TC 22554a_23403");
    	
    	//Get 1st Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1966-03-09";
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        String inactMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1966-02-09";
        adr1="729 BRIDGE STREET";
        city="WEYMOUTH";
        zip="02191";
        dep="00";
        aid="08";
        agency="MHO";
        String actMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Inactive Member: "+inactMem+" Active Member: "+actMem);
        
        //Link 2 members
        memberSearch(actMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_Navi1")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.xpath("//img[@alt='Link ID From pop-up search']")).click();
		driver.findElement(By.xpath("//input[contains(@id,'RecipientSearchCriteriaPanel:CurrentID')]")).sendKeys(inactMem);
		driver.findElement(By.xpath("//*[contains(@id,'RecipientSearchCriteriaPanel:SEARCH')]")).click();
		driver.findElement(By.xpath("//*[contains(@id,'RecipientSearchResults') and contains(@id,'0:column1Value')]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();

		//Store members in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_MEMBERLINK";
		colNames.add("INACTIVE_ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_MEMBERLINK";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_MEMBERLINK values ('"+inactMem+"','"+actMem+"', '"+"MAZDAZ"+"', '"+fname+"', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    }
    
    @Test
    public void test23387() throws Exception{
    	TestNGCustom.TCNo="23387";
    	log("//TC 23387");
    	
    	sqlStatement = "select B.ID_MEDICAID, B.NAM_LAST, B.NAM_FIRST, O.AGENCY_ID,  O.CDE_AGENCY, B.ADR_STREET_1, B.ADR_CITY, B.NUM_SSN, B.DTE_BIRTH, B.ADR_ZIP_CODE  from t_re_base b, t_re_aid_elig e, t_re_other_id o where b.ind_active = 'Y' and e.dte_end < 20120701 and e.sak_cde_Aid = 182 and B.ADR_STATE = 'MA' and B.DTE_DEATH = 0 and  e.sak_recip = b.sak_recip and b.sak_recip = o.sak_recip and O.CDE_AGENCY<>'DMR' and e.sak_recip in  (select sak_recip from t_re_aid_elig  group by (sak_recip) having count(sak_recip) = 1) and b.num_ssn <> ' ' and rownum < 2";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NAM_LAST");	 //1
    	colNames.add("NAM_FIRST");	 //2
    	colNames.add("AGENCY_ID");	 //3
    	colNames.add("CDE_AGENCY");	 //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");	 //6
    	colNames.add("NUM_SSN");	 //7
    	colNames.add("DTE_BIRTH");	 //8
    	colNames.add("ADR_ZIP_CODE");//9
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	

    	//Get Member ID
    	otherid = colValues.get(3);
    	fname=colValues.get(2);
    	lastName = colValues.get(1);
    	casenum=Common.generateRandomTaxID();
        ssn=colValues.get(7);
        dob =colValues.get(8).substring(0, 4)+"-"+colValues.get(8).substring(4, 6)+"-"+colValues.get(8).substring(6, 8);;
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(9);
        dep="00";
        aid="03";
        agency=colValues.get(4);
        beginDate = fileSysdateCustom(0);
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //verify that we got aid cat added to same member
        if (!(Mid.equals(colValues.get(0))))
        	Assert.assertTrue(false, "Same member not reopened");
        
        log("Member: "+Mid);
        
        //Verify member Data and Id card
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNewMessage")).getText().equals("--- Unprocessed Card requests exists for this member - Date Requested = "+Common.convertSysdate()+" by SSA"),"Did not receive Unprocessed ID card message");

    }
    
    @Test
    public void test23391() throws Exception{
    	TestNGCustom.TCNo="23391";
    	log("//TC 23391");
    	
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
    	dob = "1987-09-14";
        adr1="44 BROADWAY";
        city="SOMERVILLE";
        zip="02145";
        String pEffDate =fileSysdateCustom(30);

    	
    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<patientpay amt_patnt_pay=\"10.15\" dte_effective=\""+pEffDate+"\" cde_type=\"N\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);
        
        //Add 2nd PPA
        pEffDate =fileSysdateCustom(60);
    	
    	//Get Member ID
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<patientpay amt_patnt_pay=\"12.15\" dte_effective=\""+pEffDate+"\" cde_type=\"N\" />\n</EligibilityRequest>");

        Mid = getCustomMemebr(xml);
        
        //Add 3rd PPA
        pEffDate =fileSysdateCustom(90);
    	
    	//Get Member ID
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<patientpay amt_patnt_pay=\"14.15\" dte_effective=\""+pEffDate+"\" cde_type=\"N\" />\n</EligibilityRequest>");

        Mid = getCustomMemebr(xml);
        
        //Add 4th PPA
        pEffDate =fileSysdateCustom(212);
    	
    	//Get Member ID
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"TUBS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"TUBS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"05\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<patientpay amt_patnt_pay=\"15.15\" dte_effective=\""+pEffDate+"\" cde_type=\"N\" />\n</EligibilityRequest>");

        Mid = getCustomMemebr(xml);
        
        log("Member: "+Mid);
        log("The output file to check the PPA effective date warning message is: "+Common.fileName());
        
        //Verify Warning message
        if (!(errorMessage.equals("Patient pay effective date cannot be greater than 6 months into the future.")))
    		Assert.assertTrue(false, "Did not get Warning message 'Patient pay effective date cannot be greater than 6 months into the future.'");
        
        //Check Panels
        memberSearch(Mid);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n125")).click();
    	if (!(driver.findElements(By.xpath("//span[contains(@id, 'PatLiabilityBean_ColValue_patntLiabilityAmount')]")).size()==3))
    		Assert.assertTrue(false, "Patient pay effective date greater than 6 months into the future got added.");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_0:PatLiabilityBean_ColValue_patntLiabilityAmount")).getText().equals("$10.15"),"First PPA amount mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_1:PatLiabilityBean_ColValue_patntLiabilityAmount")).getText().equals("$12.15"),"Second PPA amount mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_2:PatLiabilityBean_ColValue_patntLiabilityAmount")).getText().equals("$14.15"),"Third PPA amount mismatch");
    	for (int i=0;i<3;i++)
        	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_"+i+":PatLiabilityBean_ColValue_patLiabilityCode")).getText().equals("Nursing Home/ICF/Chronic"), i+"th PPA type mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_2:PatLiabilityBean_ColValue_endDate")).getText().equals("12/31/2299"),"Third PPA end date mismatch");

    }
    
    @Test
    public void test23392() throws Exception{
    	TestNGCustom.TCNo="23392";
    	log("//TC 23392");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1976-04-09";
        adr1="1149 HINGHAM STREET";
        city="ROCKLAND";
        zip="02370";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
        
        //Search Member
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n125")).click();

        //Add PPA 1
        addPPA("10.15", 30);
		Common.saveAll();
		
        //Add PPA 2
        addPPA("12.15", 60);
		Common.saveAll();
		
        //Add PPA 3
        addPPA("14.15", 90);
		Common.saveAll();
		
        //Add PPA 4
        addPPA("15.15", 212);
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		if (!(driver.findElement(By.cssSelector("td.message-text")).getText().equals("Effective Date cannot be a future date greater than 6 months from the current date.")))
    		Assert.assertTrue(false, "Did not get Error message 'Patient pay effective date cannot be greater than 6 months into the future.'");
		
    }
    
    @Test
    public void test23366() throws Exception{
    	TestNGCustom.TCNo="23366";
    	log("//TC 23366");
    	
    	//Add MMQ Prov, SL
    	String[][] mmqprov = new String[3][3];
    	
    	//MMQ Prov A
    	mmqprov[0][0] = "110000034"; 
    	mmqprov[0][1] = "D";
    	mmqprov[0][2] = "A"; //MMQ CYCle
    	
    	//MMQ Prov B
    	mmqprov[1][0] = "110025765";
    	mmqprov[1][1] = "A";
    	mmqprov[1][2] = "B"; //MMQ CYCLE
    	
    	//MMQ Prov B
    	mmqprov[2][0] = "110025810";
    	mmqprov[2][1] = "A";
    	mmqprov[2][2] = "C"; // MMQ CYCLE
    	
    	//Get Member ID
    	for (int i=0;i<3;i++) {
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1977-05-1"+i;
        adr1="135 PEARL STREET";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
        
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(mmqprov[i][0]);
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys(mmqprov[i][1]);
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains(mmqprov[i][0])) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Perform Negative testing here as well for one of the MMQs for Personal Information
		if (mmqprov[i][2].equals("A")) {
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(5));
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate());

			//Certified Statement
			driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_certifiedStatementTab")).click();
			Common.getPageError("//form[contains(@id,'mmqPersonalInfoForm')]/div/table[2]/tbody/tr"); //Cannot use mmqTarget here because the on submit page, mmqTarget is present even though there is no page error
			driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_rnEvaluator")).sendKeys(Common.generateRandomName());
			driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_evaluationDate")).sendKeys(Common.convertSysdate());
			driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_nameOfAdmin")).sendKeys(Common.generateRandomName());
			new Select(driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_affiliation"))).selectByVisibleText("1 - Nursing Facility Staff");
			
			//Submit MMQ
			driver.findElement(By.xpath("//input[@class='buttonCommand' and @value='Submit']")).click();
	    	Assert.assertTrue(driver.findElement(By.xpath("//form[@id='mmqCertifiedStatementForm']/div/table[2]/tbody/tr[3]/td[2]")).getText().equals("Admission Date cannot be in the Future. Please correct Date of Admission."),"Date of Admission negative test failed");

			driver.findElement(By.id("mmqCertifiedStatementForm:_MENUITEM_personalInfoTab")).click();
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdate());
			driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(1));
			
			//Certified Statement
			driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_certifiedStatementTab")).click();
			Common.getPageError("//form[contains(@id,'mmqPersonalInfoForm')]/div/table[2]/tbody/tr"); //Cannot use mmqTarget here because the on submit page, mmqTarget is present even though there is no page error
			
			//Submit MMQ
			driver.findElement(By.xpath("//input[@class='buttonCommand' and @value='Submit']")).click();
	    	Assert.assertTrue(driver.findElement(By.xpath("//form[@id='mmqCertifiedStatementForm']/div/table[2]/tbody/tr[3]/td[2]")).getText().equals("Effective Date cannot be in the Future. Please correct Effective Date."),"Effective Date negative test failed");
	    	
	    	//Cancel Service
			driver.findElement(By.xpath("//input[@class='buttonCommand' and @value='Cancel Service']")).click();
			
			//Search for member again
			list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
			for (WebElement j:list) 
				if ((j.getText()).contains(mmqprov[i][0])) {
					j.click();
					break;
				}
			driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
			driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
			driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
			new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
			driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
			Common.getPageError(mmqTarget);
			
			//driver.findElement(By.id("mmqCertifiedStatementForm:_MENUITEM_personalInfoTab")).click();

		}
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate());
		effDt=DT(Common.convertSysdate());
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch");
    	if (mmqprov[i][2].equals("A"))
        	if(!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("06/30"))&&!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("12/31")))
        		Assert.assertTrue(false, "LoC A End date mismatch");
    	else if (mmqprov[i][2].equals("B"))
    		if(!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("07/31"))&&!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("01/31")))
        		Assert.assertTrue(false, "LoC B End date mismatch");
    	else if (Integer.parseInt(Common.convertSysdate().substring(6, 10))%4==0) //Leap year check
        	if(!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("08/31"))&&!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("02/29")))
        		Assert.assertTrue(false, "LoC C End date mismatch");
    	else
        	if(!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("08/31"))&&!(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().substring(0, 5).equals("02/28")))
        		Assert.assertTrue(false, "LoC C End date mismatch");
    	
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
	
    	}

    }
    
    @Test
    public void test23380() throws Exception{
    	TestNGCustom.TCNo="23380";
    	log("//TC 23380");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1979-08-17";
        adr1="740 MIDDLE STREET";
        city="WEYMOUTH";
        zip="02188";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-60));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);

		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		effDt = DT(Common.convertSysdatecustom(-60));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();

		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 3
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("3 - Semiannual category change and significant change");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);

		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate().substring(0, 2)+"/01/"+Common.convertSysdate().substring(6, 10));
		effDt = DT(Common.convertSysdate().substring(0, 2)+"/01/"+Common.convertSysdate().substring(6, 10));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("2 - Daily Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("3 - Totally Dependent");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("2 - Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();

		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	//Sort on submission reason
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_providerIDLoc")).click();
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_submitReason_reasonDescription")).click();
    	
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Category Change"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void testMMQpositive() throws Exception{
    	TestNGCustom.TCNo="testMMQpositive";
    	log("//TC testMMQpositive");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1979-08-17";
        adr1="740 MIDDLE STREET";
        city="WEYMOUTH";
        zip="02188";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertGivendatecustom(mdsCutOffDt, -365)); //10/01/2023 is the MDS cutover date
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertGivendatecustom(mdsCutOffDt, -365));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);

		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertGivendatecustom(mdsCutOffDt, -365));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertGivendatecustom(mdsCutOffDt, -365));
		effDt = DT(Common.convertGivendatecustom(mdsCutOffDt, -365));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();

		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		log ("Successfully received loc 4"+loc+" and mmq score "+score+" on portal");
    }
    
    @Test
    public void testMMQnegative() throws Exception{
    	TestNGCustom.TCNo="testMMQnegative";
    	log("//TC testMMQnegative");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1979-08-17";
        adr1="740 MIDDLE STREET";
        city="WEYMOUTH";
        zip="02188";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertGivendatecustom(mdsCutOffDt, -365)); //10/01/2023 is the MDS cutover date
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertGivendatecustom(mdsCutOffDt, -365));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);

		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertGivendatecustom(mdsCutOffDt, 0));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertGivendatecustom(mdsCutOffDt, 0));
		effDt = DT(Common.convertGivendatecustom(mdsCutOffDt, 0));

		
		//Validate page error
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		String mmqError = driver.findElement(By.xpath(mmqTarget)).getText();
		String expectedError="MMQ are no longer valid for service dates after October 1, 2023.";
		Assert.assertTrue(mmqError.equals(expectedError), "Did not get error \""+expectedError+"\". Instead gor error \""+mmqError+"\""); 
		log ("Successfully received the error \""+expectedError+"\" on portal.");
    }    
    
    @Test
    public void test22536() throws Exception{
    	TestNGCustom.TCNo="22536";
    	log("//TC 22536");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1979-08-17";
        adr1="428 WASHINGTON STREET";
        city="WEYMOUTH";
        zip="02188";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-365));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		effDt=DT(Common.convertSysdatecustom(-365));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 2
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("2 - Conversion");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-1));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate());
		effDt=DT(Common.convertSysdate());
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("2 - Daily Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("3 - Totally Dependent");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("2 - Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	//Sort on submission reason
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_providerIDLoc")).click();
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_submitReason_reasonDescription")).click();
    	
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Conversion"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void test23408() throws Exception{
    	TestNGCustom.TCNo="23408";
    	log("//TC 23408");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1975-09-19";
        adr1="653 SOUTHERN ARTERY";
        city="QUINCY";
        zip="02169";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		effDt=DT("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 3
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("4 - semiannual score change");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys("09/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		effDt=DT("09/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("2 - Daily Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("3 - Totally Dependent");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("2 - Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
			//Sort on submission reason
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_providerIDLoc")).click();
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_submitReason_reasonDescription")).click();
			
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Code/Score Change"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void test23472a() throws Exception{
    	TestNGCustom.TCNo="23472a";
    	log("//TC 23472a");
    	
    	String pid = "110025810";
    	String sl = "A";
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1974-03-15";
        adr1="59 POND STREET";
        city="ASHLAND";
        zip="01721";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(pid);
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys(sl);
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		Thread.sleep(10000);
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Set Portal Page error target
		String mmqBatchTarget = "//form[@id='uploadBatchFiles']/div/table[2]/tbody/tr";
		
		//Prepare MMQ File
		String submitDT = fileSysdateCustom(0).substring(0,4)+fileSysdateCustom(0).substring(5,7)+fileSysdateCustom(0).substring(8,10);
		
		//Figure out the right Diag code
		String batchMMQdiag="";
		effDt=DT(Common.convertSysdate());
		if (effDt.after(refEffDt))
			batchMMQdiag = "A200"; //ICD10
		else
			batchMMQdiag = "496"; //ICD 9
		
		String batchMMQ="<submitMemberMMQRequests>"+
				 "	<submitMemberMMQRequest>"+
				 "		<MEMBER_SUBMIT>"+
				 "			<MMQ_ACTION_IND>PROC_MMQ</MMQ_ACTION_IND>"+
				 "			<PERSONAL_INFO>"+
				 "				<PROVIDER_ID>"+pid+"</PROVIDER_ID>"+
				 "				<SERVICE_LOCATION>"+sl+"</SERVICE_LOCATION>"+
				 "				<MEMBER_ID>"+mem+"</MEMBER_ID>"+
				 "				<FACILITY_NAME/>"+
				 "				<DTE_ADMIT>"+submitDT+"</DTE_ADMIT>"+
				 "				<LAST_NAME>P</LAST_NAME>"+
				 "				<FIRST_NAME>"+fname+"</FIRST_NAME>"+
				 "				<BIRTH_DTE>"+dob.substring(0,4)+dob.substring(5,7)+dob.substring(8,10)+"</BIRTH_DTE>"+
				 "				<DTE_EFF>"+submitDT+"</DTE_EFF>"+
				 "				<SUBMIT_REASON>1</SUBMIT_REASON>"+
				 "			</PERSONAL_INFO>"+
				 "			<SERVICE_SECTION_1>"+
				 "				<DISP_MEDS_SCORE>1</DISP_MEDS_SCORE>"+
				 "				<SKILLED_OBSERV_DAILIY_CODE>1</SKILLED_OBSERV_DAILIY_CODE>"+
				 "				<SKILLED_OBSERV_DAILIY_SCORE/>"+
				 "				<PERS_HYG_BATH_CODE>3</PERS_HYG_BATH_CODE>"+
				 "				<PERS_HYG_BATH_SCORE/>"+
				 "				<PERS_HYG_GROOM_CODE>3</PERS_HYG_GROOM_CODE>"+
				 "				<PERS_HYG_GROOM_SCORE/>"+
				 "				<DRESSING_CODE>3</DRESSING_CODE>"+
				 "				<DRESSING_SCORE/>"+
				 "				<MOBILITY_CODE>4</MOBILITY_CODE>"+
				 "				<MOBILITY_SCORE/>"+
				 "				<EATING_CODE>2</EATING_CODE>"+
				 "				<EATING_SCORE/>"+
				 "				<CONT_CATH_BLAD_CODE>3</CONT_CATH_BLAD_CODE>"+
				 "				<CONT_CATH_BLAD_SCORE/>"+
				 "				<CONT_CATH_BOWEL_CODE>1</CONT_CATH_BOWEL_CODE>"+
				 "				<CONT_CATH_BOWEL_SCORE/>"+
				 "				<BLAD_BOWEL_RETRAIN_CODE>1</BLAD_BOWEL_RETRAIN_CODE>"+
				 "				<BLAD_BOWEL_RETRAIN_SCORE/>"+
				 "				<POSITIONING_CODE>2</POSITIONING_CODE>"+
				 "				<POSITIONING_SCORE/>"+
				 "				<PRES_ULCER_PREV_CODE>2</PRES_ULCER_PREV_CODE>"+
				 "				<PRES_ULCER_PREV_SCORE/>"+
				 "				<SPROC_DAILY_PRES_ULCER_FREQ>0</SPROC_DAILY_PRES_ULCER_FREQ>"+
				 "				<SPROC_DAILY_PRES_ULCER_SCORE/>"+
				 "				<SPD_PU_STG1_CODE>0</SPD_PU_STG1_CODE>"+
				 "				<SPD_PU_STG2_CODE>0</SPD_PU_STG2_CODE>"+
				 "				<SPD_PU_STG3_CODE>0</SPD_PU_STG3_CODE>"+
				 "				<SPD_PU_STG4_CODE>0</SPD_PU_STG4_CODE>"+
				 "				<SPTD_OTHER_FREQ>1</SPTD_OTHER_FREQ>"+
				 "				<SPTD_OTHER_SCORE/>"+
				 "				<SPTD_OTHER_PROC1_CODE>07</SPTD_OTHER_PROC1_CODE>"+
				 "				<SPTD_OTHER_PROC2_CODE>00</SPTD_OTHER_PROC2_CODE>"+
				 "				<SPTD_OTHER_PROC3_CODE>00</SPTD_OTHER_PROC3_CODE>"+
				 "				<SUBTOTAL/>"+
				 "			</SERVICE_SECTION_1>"+
				 "			<SERVICE_SECTION_2>"+
				 "				<SPEC_ATT_IMMOBIL_CODE>1</SPEC_ATT_IMMOBIL_CODE>"+
				 "				<SPEC_ATT_SEV_SPASTIC_CODE>0</SPEC_ATT_SEV_SPASTIC_CODE>"+
				 "				<SPEC_ATT_BEH_PROB_CODE>0</SPEC_ATT_BEH_PROB_CODE>"+
				 "				<SPEC_ATT_ISOLATION_CODE>0</SPEC_ATT_ISOLATION_CODE>"+
				 "				<SPEC_ATT_SCORE/>"+
				 "				<REST_NRSNG_TYPE1_CODE>0</REST_NRSNG_TYPE1_CODE>"+
				 "				<REST_NRSNG_TYPE2_CODE>0</REST_NRSNG_TYPE2_CODE>"+
				 "				<REST_NRSNG_TYPE3_CODE>0</REST_NRSNG_TYPE3_CODE>"+
				 "				<REST_NRSNG_SCORE/>"+
				 "				<GRAND_TOTAL/>"+
				 "				<CATEGORY>S</CATEGORY>"+
				 "			</SERVICE_SECTION_2>"+
				 "			<EXTRA_QUESTIONS>"+
				 "				<TOILET_USE>2</TOILET_USE>"+
				 "				<TRANSFER>2</TRANSFER>"+
				 "				<MENTAL_STAT>2</MENTAL_STAT>"+
				 "				<RESTRAINT>1</RESTRAINT>"+
				 "				<ACTIVITY_PART>2</ACTIVITY_PART>"+
				 "				<CONSULTATION1_FREQ>0</CONSULTATION1_FREQ>"+
				 "				<CONSULTATION1_TYPE>88</CONSULTATION1_TYPE>"+
				 "				<CONSULTATION2_FREQ>0</CONSULTATION2_FREQ>"+
				 "				<CONSULTATION2_TYPE>88</CONSULTATION2_TYPE>"+
				 "				<CONSULTATION3_FREQ>0</CONSULTATION3_FREQ>"+
				 "				<CONSULTATION3_TYPE>88</CONSULTATION3_TYPE>"+
				 "				<MED1_MED>3</MED1_MED>"+
				 "				<MED1_FREQ>1</MED1_FREQ>"+
				 "				<MED2_MED>0</MED2_MED>"+
				 "				<MED2_FREQ>0</MED2_FREQ>"+
				 "				<MED3_MED>0</MED3_MED>"+
				 "				<MED3_FREQ>0</MED3_FREQ>"+
				 "				<MED4_MED>0</MED4_MED>"+
				 "				<MED4_FREQ>0</MED4_FREQ>"+
				 "				<ACW_ACCIDENT>2</ACW_ACCIDENT>"+
				 "				<ACW_CONTRACTURE>2</ACW_CONTRACTURE>"+
				 "				<ACW_WEIGHT_CHG>2</ACW_WEIGHT_CHG>"+
				 "				<PRIM_DIAGNOSIS>"+batchMMQdiag+"</PRIM_DIAGNOSIS>"+
				 "			</EXTRA_QUESTIONS>"+
				 "			<CERT_STATEMENT>"+
				 "				<RN_EVAL>N.SIROIS/P.LAYDEN</RN_EVAL>"+
				 "				<EVAL_DATE>"+submitDT+"</EVAL_DATE>"+
				 "				<ADMINISTRATOR>M.CORBETT</ADMINISTRATOR>"+
				 "				<AFFILIATION>1</AFFILIATION>"+
				 "				<DISCHARGE_REASON/>"+
				 "				<DISCHARGE_DATE/>"+
				 "			</CERT_STATEMENT>"+
				 "		</MEMBER_SUBMIT>"+
				 "	</submitMemberMMQRequest>"+
				 "</submitMemberMMQRequests>";
		
    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(batchMMQ);
    	out.close();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Batch Files")).click();
		driver.findElement(By.linkText("Upload Batch File")).click();
//		driver.findElement(By.linkText("Manage Members")).click();
//		driver.findElement(By.linkText("Long Term Care")).click();
//		driver.findElement(By.linkText("Upload MMQ Batch Files")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("uploadBatchFiles:uploadBatchFilesPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains(pid)) {
				j.click();
				break;
			}
		
		new Select(driver.findElement(By.id("uploadBatchFiles:uploadBatchFilesPanel:transactionType"))).selectByVisibleText("MMQ Questionnaire");
    	driver.findElement(By.id("uploadBatchFiles:uploadBatchFilesPanel:File")).sendKeys(fileName);
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Upload File']")).click();
		Common.getPageError(mmqBatchTarget);
    	Assert.assertTrue(driver.findElement(By.xpath("//form[@id='uploadBatchFilesConfirmation']/table/tbody/tr[2]/td/span")).getText().equals("Your file was successfully received. The following tracking number should be retained for your records."),"MMQ batch File upload did not happen");
    	String trkNo = driver.findElement(By.xpath("//form[@id='uploadBatchFilesConfirmation']/table/tbody/tr[4]/td/span[7]")).getText();
    	
		//Store trkNo, and other info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_MMQ";
		colNames.add("TRKNO");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_MMQ";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_MMQ values ('"+trkNo+"', '"+mem+"', '"+pid+sl+"', '"+submitDT+"', '"+fname+"')";
		statement.executeQuery(sqlStatement);
    	
    	Common.portalLogout();
    }
    
    @Test
    public void test23389() throws Exception{
    	TestNGCustom.TCNo="23389";
    	log("//TC 23389");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1979-08-17";
        adr1="740 MIDDLE STREET";
        city="WEYMOUTH";
        zip="02188";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-60));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		effDt=DT(Common.convertSysdatecustom(-60));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 3
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("3 - Semiannual category change and significant change");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdate().substring(0, 2)+"/01/"+Common.convertSysdate().substring(6, 10));
		effDt=DT(Common.convertSysdate().substring(0, 2)+"/01/"+Common.convertSysdate().substring(6, 10));

		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("3 - Totally Dependent");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	//Sort on submission reason
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_providerIDLoc")).click();
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_submitReason_reasonDescription")).click();
			
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Category Change"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void test24486() throws Exception{
    	TestNGCustom.TCNo="24486";
    	log("//TC 24486");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1975-04-10";
        adr1="63 SALEM STREET";
        city="BOSTON";
        zip="02113";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-60));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-60));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-60));
		effDt=DT(Common.convertSysdatecustom(-60));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//End MMQ using Elig XML
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"MAZDAZ\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<nursingfacility id_provider=\"110025810A\" dte_discharge=\""+fileSysdateCustom(-59)+"\" dte_loc_end=\""+fileSysdateCustom(-59)+"\" cde_reason_discharge=\"HS\" />\n</EligibilityRequest>");

		mem = getCustomMemebr(xml);
		
		//Verify Panels
		memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals(Common.convertSysdatecustom(-59)),"LoC end date mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_dischargeDate")).getText().equals(Common.convertSysdatecustom(-59)),"LoC discharge date mismatch");

		
		
    }
    
    @Test
    public void test26277() throws Exception{
    	TestNGCustom.TCNo="26277";
    	log("//TC 26277");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-06-11";
        adr1="1 IKEA WAY";
        city="STOUGHTON";
        zip="02072";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-365));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		effDt=DT(Common.convertSysdatecustom(-365));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//End MMQ using Elig XML with end date after MMQ cycle
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" />"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"MAZDAZ\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n"+
				"<nursingfacility id_provider=\"110025810A\" dte_discharge=\""+fileSysdateCustom(0)+"\" dte_loc_end=\""+fileSysdateCustom(0)+"\" cde_reason_discharge=\"HS\" />\n</EligibilityRequest>");

		mem = getCustomMemebr(xml);
		
        //Verify Warning message
        if (!(errorCode.equals("3040")))
    		Assert.assertTrue(false, "Did not get Error Code '3040'");
		
        if (!(errorMessage.equals("LOC End Date cannot be past MMQ Cycle")))
    		Assert.assertTrue(false, "Did not get Error message 'LOC End Date cannot be past MMQ Cycle'. Instead got "+errorMessage);
		
        //Verify the LoC end date is not updated on base
        validateMMQ(mem,loc,score);
		
    }
    
    @Test
    public void test26278() throws Exception{
    	TestNGCustom.TCNo="26278";
    	log("//TC 26278");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-06-11";
        adr1="1 IKEA WAY";
        city="STOUGHTON";
        zip="02072";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-365));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys(Common.convertSysdatecustom(-365));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
		effDt=DT(Common.convertSysdatecustom(-365));

		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);

		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		Common.cancelAll();
		
		//Change MMQ End date to future
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_providerID")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("The LOC end date cannot be greater than the end of the selected MMQ reporting cycle."), "Did not get Error Message 'The LOC end date cannot be greater than the end of the selected MMQ reporting cycle.'");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-364));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		Common.saveAll();
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals(Common.convertSysdatecustom(-364)), "LoC end date did not get updated correctly");

		//Change eff/end dates to be out of current cycle
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_providerID")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(1));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("This LOC end date cannot be accepted because the provider has not submitted a valid MMQ that covers this entire LOC period."), "Did not get Error Message 'This LOC end date cannot be accepted because the provider has not submitted a valid MMQ that covers this entire LOC period.'");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-363));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		Common.saveAll();
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals(Common.convertSysdatecustom(-363)), "LoC end date did not get updated correctly");
		
		//Add overlapping NF segment for same provider
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-364));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-364));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("The same Provider ID's date range segments can not overlap."), "Did not get Error Message 'The same Provider ID's date range segments can not overlap.'");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Update']")).click();
		Common.saveAll();
		
    }
    
    @Test
    public void test22550() throws Exception{
    	TestNGCustom.TCNo="22550";
    	log("//TC 22550");
    	
    	String[] prov = new String[2];
    	String[] loc = new String[3];
    	
    	prov[0] = "110025810";
    	prov[1] = "110025765";
    	loc[0] = "NF - NURSING FACILITY";
    	loc[1] = "3S - Level III ICF/MR Type C (State School)";
    	loc[2] = "NF - NURSING FACILITY";


    	
    	for (int i=0;i<2;i++) {
        	//Get Member ID
        	otherid = Common.generateRandomTaxID();
        	fname=Common.generateRandomName();
        	casenum=Common.generateRandomTaxID();
            ssn="1"+Common.generateRandomTaxID().substring(0,8);
            dob ="1971-1"+i+"-11";
            adr1="50"+i+" COMMONWEALTH AV";
            city="BOSTON";
            zip="02215";
            dep="00";
            aid="40";
            agency="MHO";
            String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
            
            log(" Member"+(i+1)+": "+mem);
        	
            //Search Member and Add NF/3S
            memberSearch(mem);
        	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(prov[0]);
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
    		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText(loc[i]);
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-365));
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdatecustom(-365));
    		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
    		Common.saveAll();
    		
    		//Add 3S/NF with same provider
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(prov[0]);
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
    		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText(loc[i+1]);
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
    		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
    		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("The same Provider ID's date range segments can not overlap."), "Did not get Error Message 'The same Provider ID's date range segments can not overlap.'");

    		//Add 3S/NF with a different Provider
        	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys(prov[1]);
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Save All']")).click();
    		Assert.assertTrue(driver.findElement(By.cssSelector("td.message-text")).getText().equals("Overlapping LOC Dates greater than one day are not allowed for different Provider ID/Svc Locs"), "Did not get Error Message 'Overlapping LOC Dates greater than one day are not allowed for different Provider ID/Svc Locs'");

    		//End NF/3S and save both records
        	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_1:LevelOfCareBean_ColValue_status")).click();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).clear();
    		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EndDate")).sendKeys(Common.convertSysdatecustom(-360));
    		Common.saveAll();
    	}

    }
    
    @Test
    public void test22551() throws Exception{
    	TestNGCustom.TCNo="22551";
    	log("//TC 22551");
    	
    	String idM[] = new String[4];
    	casenum=Common.generateRandomTaxID();
    	
    	for (int i=0;i<4;i++) {
        	//Get Member ID
        	otherid = Common.generateRandomTaxID();
        	fname="A"+i+Common.generateRandomName();
            ssn="1"+Common.generateRandomTaxID().substring(0,8);
            dob ="195"+i+"-0"+(i+1)+"-1"+i;
            adr1="40"+i+" COMMONWEATH AV";
            city="BOSTON";
            zip="02115";
            dep="0"+i;
            aid="0"+(i+2);
            agency="DSS";
            idM[i] = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
            
            //End Elig 08
            caseStatus="4";
            endElig = true;
            idM[i] = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
            
            log(" Member"+(i+1)+": "+idM[i]);
        
    	}
    	
    	//Reopen last member'e elig
    	caseStatus="2";
    	eligStatus="2";
    	idM[3] = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        memberSearch(idM[3]);
       	//Click on Member Case History link
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
        //Click on case number
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
        //verify all but 1 eligs are in closed status
    	for (int i=0;i<3;i++) {
    		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_"+i+":MemberCaseDataBean_ColValue_medicaidID")).getText().equals(idM[i]), "Member "+(i+1)+" '"+idM[i]+"' not found in member case history");
    		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_"+i+":MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"), "Member "+(i+1)+" '"+idM[i]+"' elig status in not closed");
    	}
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_3:MemberCaseDataBean_ColValue_medicaidID")).getText().equals(idM[3]), "Member "+(3+1)+" '"+idM[3]+"' not found in member case history");
		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_3:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("2 - Reopened"), "Member "+(3+1)+" '"+idM[3]+"' elig status in not reopened");
  
    }
    
    @Test
    public void test22552() throws Exception{
    	TestNGCustom.TCNo="22552";
    	log("//TC 22552");
    	
    	//Get Member ID
    	otherid = "1"+Common.generateRandomTaxID().substring(0, 8);
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-06-11";
        adr1="115 WATER ST";
        city="BOSTON";
        zip="02109";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Store Agency ID for comparison
        String otherid0 = otherid;
        //Change Last name and Agency ID
        lastName = "Q";
    	otherid = "2"+Common.generateRandomTaxID().substring(0, 8);
        String mem1 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);


        
        //verify that we got aid cat added to same member
        if (!(mem.equals(mem1)))
        	Assert.assertTrue(false, "Same member not updated");
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals("Q, "+fname),"Name Mismatch");
        //Verify 2 agency IDs are present
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n136")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_0:OtherIdBean_ColValue_agencyId")).getText().equals(otherid0),"The First other id '"+otherid0+"' is missing");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:OtherIdPanel:OtherIdList_1:OtherIdBean_ColValue_agencyId")).getText().equals(otherid),"The Second other id '"+otherid+"' is missing");
        //Verify Previous Name
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n123")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataNamePanel:NameXrefList_0:NameXrefBean_ColValue_lastName")).getText().equals("MAZDAZ"),"Previous last name mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataNamePanel:NameXrefList_0:NameXrefBean_ColValue_firstName")).getText().equals(fname),"First name mismatch");

    }
    
    
    @Test
    public void test22553_23372() throws Exception{
    	TestNGCustom.TCNo="22553_23372";
    	log("//TC 22553_23372");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1972-07-17";
        adr1="348 CONGRESS STREET";
        city="BOSTON";
        zip="02228";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Submit 2nd file ending aid cat 40, and adding aid cat TV
        dob ="1975-07-17";
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        
        String 	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"MAZDAZ\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"4\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\"01\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" dte_end_elig=\""+fileSysdateCustom(-1)+"\" family_size=\"07\" />"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"03\" cde_elig_status=\"1\" cde_line=\"01\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+fileSysdateCustom(0)+"\" dte_begin_elig=\""+fileSysdateCustom(0)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);

        //verify that we got same member
        if (!(mem.equals(Mid)))
        	Assert.assertTrue(false, "Same member not updated");
        
        log("Member: "+mem);
        
      //Search Member
      memberSearch(mem);
      
      Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[6]/td[2]")).getText().equals(ssn.substring(0, 3)+"-"+ssn.substring(3, 5)+"-"+ssn.substring(5, 9)),"SSN Mismatch");

      driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("STD   MASSHEALTH STANDARD"),"Benefit Plan Mismatch");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Benefit Plan effective date Mismatch");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Benefit Plan end date Mismatch");
      	
      driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("03 SSI Disabled"),"Aid Cat Mismatch. New Aid cat was not added");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"New Aid Cat effective date Mismatch");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"New Aid Cat end date Mismatch");
      
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_aidDes")).getText().equals("40 Family"),"Aid Cat Mismatch. Old aid cat not present");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob)))," Old Aid Cat effective date Mismatch");
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_endDate")).getText().equals(Common.convertSysdatecustom(1)),"Old Aid Cat end date Mismatch");
      
      //Verify Dependent number
      driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).click();
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_DepNumber")).getAttribute("value").equals("01"),"New Dependent number mismatch");

      driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_1:AidEligBean_ColValue_aidDes")).click();
      Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_DepNumber")).getAttribute("value").equals("00"),"Old Dependent number mismatch");

      //Verify Case history panel
      driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();

      for (int i=0;i<2;i++) {
          driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_"+i+":RecipientCaseBean_ColValue_caseNumber")).click();

          //Sort by aid cat descending
          driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList:MemberCaseDataBean_ColHeader_aidCategoryCode")).click();
          driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList:MemberCaseDataBean_ColHeader_aidCategoryCode")).click();

          
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("4 - Closed"),"Previous Aid cat not closed");
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_decodedStatus")).getText().equals("1 - New"),"New Aid cat not opened");

          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_aidCategoryCode")).getText().equals("40"),"Previous Aid cat 40 not present");
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_aidCategoryCode")).getText().equals("03"),"New Aid cat 03 not present");
          
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_depNumber")).getText().equals("00"),"Previous dependent number not present");
          Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_depNumber")).getText().equals("01"),"New dependent number not present");

      }
      
    }
    
    @Test
    public void test23365() throws Exception{
    	TestNGCustom.TCNo="23365";
    	log("//TC 23365");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1973-06-11";
        adr1="115 WATER STREET";
        city="BOSTON";
        zip="02109";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys(Common.convertSysdate());
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		
		//Add Patient Pay
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n125")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiability_NewButtonClay:PatLiabilityList_newAction_btn")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatntLiabilityAmount")).clear();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatntLiabilityAmount")).sendKeys("1200");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatLiabilityCode"))).selectByVisibleText("Nursing Home/ICF/Chronic");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_EffectiveDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();

		//Save both records
		Common.saveAll();
		
		//Click on both records
    	driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_status")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityList_0:PatLiabilityBean_ColValue_status")).click();
		
    }
    
    @Test
    public void test23373() throws Exception{
    	TestNGCustom.TCNo="23373";
    	log("//TC 23373");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1983-02-10";
        adr1="138 NEWBURY STREET";
        city="BOSTON";
        zip="02116";
        dep="00";
        aid="BB";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member
        memberSearch(mem);
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n108")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).getText().equals("CCRLM COMMONWEALTH CARE WITH LIMITED"),"Benefit Plan Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Benefit Plan effective date Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Benefit Plan end date Mismatch");
        	
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).getText().equals("BB SF Commonwealth Care + Limited LE 100% FPL"),"Aid Cat Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_effectiveDate")).getText().equals(dateXMLtoPanel(getEligeffDT(dob))),"Aid Cat effective date Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_endDate")).getText().equals("12/31/2299"),"Aid Cat end date Mismatch");
    }
    
    @Test
    public void test23375a() throws Exception{
    	TestNGCustom.TCNo="23375a";
    	log("//TC 23375a");
    	
    	//Get Parent Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-5475); //15 year old
        adr1="3 CENTER PLZ";
        city="BOSTON";
        zip="02108";
        String nameContact=Common.generateRandomName();
        String nameCare=Common.generateRandomName();
        String idContact=Common.generateRandomTaxID();


    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"DSS\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"BURNS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BURNS\" num_case=\""+casenum+"\"/>\n"+
				"<contacts id_contact=\""+idContact+"\" nam_contact=\""+nameContact+"\" cde_contact_type=\"DSS\" nam_care_of=\""+nameCare+"\" adr_street_1=\"101 FEDERAL STREET\" adr_street_2=\" \" adr_city=\"BOSTON\" adr_state=\"MA\" adr_zip_code=\"02110\" dte_begin_contact=\""+fileSysdateCustom(0)+"\" dte_end_contact=\"2299-12-31\"/>\n"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"06\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");    	
        String mem = getCustomMemebr(xml);
        
        log("Member: "+mem);

		//Search Member
        memberSearch(mem);
        
        //Click HIPAA Privacy subsystem tab
        driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_HP")).click();
        driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberSearch")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:HpRecipientSearchBean_CriteriaPanel:HpMemberSearch_MemberID")).sendKeys(mem);
        Common.search();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchResults_0:_id13")).click();
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(mem),"Member ID Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[3]/td[2]")).getText().equals("BURNS, "+fname),"Name Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[4]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[6]/td[2]")).getText().equals(city+"  MA  "+zip+"-0000"),"City/Sate/Zip Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HpMemberInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[7]/td[2]")).getText().equals(dob.substring(5, 7)+"/"+dob.substring(8, 10)+"/"+dob.substring(0, 4)),"DoB Mismatch");

        //Select Member Auth REP/PSI
        driver.findElement(By.id("MMISForm:MMISBodyContent:HPMemberNavigatorPanel:HPMemberNavigatorId:ITM_n3")).click();
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_caseIDNumber")).getText().equals(casenum),"Case Number mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_hhName")).getText().equals("BURNS                "+fname),"Name mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_psiName")).getText().equals(nameContact),"Name Contact mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_careOf")).getText().equals(nameCare),"Name Care of mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_contactType")).getText().equals("DSS"),"Agency mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"Date Received mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_endDate")).getText().equals("12/31/2299"),"End Date mismatch");
        
        String adrcityzip= (driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_cityStateZip")).getText());
        Assert.assertTrue(adrcityzip.equals("BOSTON                         MA 02110"),"City/Sate/Zip1 Mismatch");

        //Click on the record and verify data
        driver.findElement(By.id("MMISForm:MMISBodyContent:HPMembrAuthRepInfoPanel:MemberAuthRepInfoResults_0:HPMemberAuthRepInfoBean_ColValue_caseIDNumber")).click();
        
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HPHouseHdrInformationPanel:HPHouseHdrInfoBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals("BURNS, "+fname),"Name Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HPHouseHdrInformationPanel:HPHouseHdrInfoBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[3]/td[2]")).getText().equals(adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HPHouseHdrInformationPanel:HPHouseHdrInfoBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[5]/td[2]")).getText().equals(city+"             / MA / "+zip+"-0000"),"City/Sate/Zip Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:HPHouseHdrInformationPanel:HPHouseHdrInfoBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(casenum),"Case ID mismatch");
        
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_mbrNameFull")).getText().equals("BURNS, "+fname),"Name Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_conName")).getText().equals(nameContact),"Name Contact Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_mbrIdMedicaid")).getText().equals(mem),"Member ID mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_mbrDOB")).getText().equals(dob.substring(5, 7)+"/"+dob.substring(8, 10)+"/"+dob.substring(0, 4)),"DoB Mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_effectiveDate")).getText().equals(Common.convertSysdate()),"Date Effective mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_contactType")).getText().equals("DSS"),"Agency mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:HpHouseAuthRepInformationPanel:HPHouseAuthRepInfoListResults_0:HPHouseAuthRepInfoBean_ColValue_endDate")).getText().equals("12/31/2299"),"Date End mismatch");

//        //Select Member subsystem
//	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
//        //Enroll Child member
//    	otherid = Common.generateRandomTaxID();
//    	fname=Common.generateRandomName();
//        ssn="1"+Common.generateRandomTaxID().substring(0,8);
//        dob =fileSysdateCustom(-60); //less than 1 year old
//        adr1="3 CENTER PLZ";
//        city="BOSTON";
//        zip="02108";
//        
//		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
//				"id_other=\""+otherid+"\" id_source=\"DSS\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"BURNS\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
//				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BURNS\" num_case=\""+casenum+"\"/>\n"+
//				"<contacts id_contact=\""+idContact+"\" nam_contact=\""+nameContact+"\" cde_contact_type=\"DSS\" nam_care_of=\""+nameCare+"\" adr_street_1=\"101 FEDERAL STREET\" adr_street_2=\" \" adr_city=\"BOSTON\" adr_state=\"MA\" adr_zip_code=\"02110\" dte_begin_contact=\""+fileSysdateCustom(0)+"\" dte_end_contact=\"2299-12-31\"/>\n"+
//				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"06\" cde_elig_status=\"1\" cde_line=\"01\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");    	
//        String memChild = getCustomMemebr(xml);
        
        //Store Member in DB for EPSDT letter for Day 2
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_EPSDT_LETTER";
		colNames.add("MEMBER");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_EPSDT_LETTER";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_EPSDT_LETTER values ('"+mem+"')";
		statement.executeQuery(sqlStatement);
		
    }
    
    @Test
    public void test23376a() throws Exception{
    	TestNGCustom.TCNo="23376a";
    	log("//TC 23376a");
    	
    	//Get Parent Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-6935); 
        adr1="3 CENTER PLZ";
        city="BOSTON";
        zip="02108";
        String nameContact=Common.generateRandomName();
        String nameCare=Common.generateRandomName();
        String idContact=Common.generateRandomTaxID();


    	//Get Member ID
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"DSS\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"ELGJD012\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"ELGJD012\" num_case=\""+casenum+"\"/>\n"+
				"<contacts id_contact=\""+idContact+"\" nam_contact=\""+nameContact+"\" cde_contact_type=\"DSS\" nam_care_of=\""+nameCare+"\" adr_street_1=\"101 FEDERAL STREET\" adr_street_2=\" \" adr_city=\"BOSTON\" adr_state=\"MA\" adr_zip_code=\"02110\" dte_begin_contact=\""+fileSysdateCustom(0)+"\" dte_end_contact=\"2299-12-31\"/>\n"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"02\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");    	
        String mem = getCustomMemebr(xml);

        log("Member: "+mem);

        //Enroll 2nd member with same case, elig and dep 
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-60); 
        adr1="3 CENTER PLZ";
        city="BOSTON";
        zip="02108";
        
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"DSS\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"ELGJD012\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"ELGJD012\" num_case=\""+casenum+"\"/>\n"+
				"<contacts id_contact=\""+idContact+"\" nam_contact=\""+nameContact+"\" cde_contact_type=\"DSS\" nam_care_of=\""+nameCare+"\" adr_street_1=\"101 FEDERAL STREET\" adr_street_2=\" \" adr_city=\"BOSTON\" adr_state=\"MA\" adr_zip_code=\"02110\" dte_begin_contact=\""+fileSysdateCustom(0)+"\" dte_end_contact=\"2299-12-31\"/>\n"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\"02\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");    	
        String memChild = getCustomMemebr(xml);
        if (!(errorMessage.equals("Case/Aid Cat/Dep NUM combo already exists on DB for a different Member ID")))
    		Assert.assertTrue(false, "Did not get Warning message 'Case/Aid Cat/Dep NUM combo already exists on DB for a different Member ID'");
        
        //Store  Member in DB for ELGJD012 error report
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_MEMBER_ELGJD012";
		colNames.add("PARENT_MEMBER");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_MEMBER_ELGJD012";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_MEMBER_ELGJD012 values ('"+mem+"', '"+Common.convertSysdatecustom(1)+"', '"+"ELGJD012"+"', '"+fname+"', '"+ssn+"', '"+dateXMLtoPanel(dob)+"', '"+casenum+"', '"+"02"+"', '"+"00"+"')";
		statement.executeQuery(sqlStatement);
		
    }
    
    @Test
    public void test23388a() throws Exception{
    	TestNGCustom.TCNo="23388a";
    	log("//TC 23388a");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1977-04-03";
        adr1="1297 BROADWAY";
        city="SOMERVILLE";
        zip="02144";
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+Mid);
        
        //Store  Member in DB for ELGJD040 member ID card report
		Statement statement = Common.connection1.createStatement();
		sqlStatement = "select * from R_MEMBER_ELGJD040";
		colNames.add("MEMBER");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  R_MEMBER_ELGJD040";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  R_MEMBER_ELGJD040 values ('"+Mid+"', '"+fname+"', '"+Common.convertSysdatecustom(1)+"', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
        
    }
    
    @Test
    public void test24488() throws Exception{
    	TestNGCustom.TCNo="24488";
    	log("//TC 24488");
    	
    	sqlStatement="Select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, e.agency_id  from T_RE_BASE b, t_re_other_id e where b.ind_active = 'Y' and b.cde_sex='F' and exists (select p.sak_recip from T_RE_ID_CARD p where b.sak_recip=p.sak_recip group by p.sak_recip having count(sak_recip) = 1 ) and b.sak_recip = e.sak_Recip and e.cde_agency = 'MHO' and e.end_date = '22991231' and b.nam_first NOT LIKE '%-%' and b.adr_state = 'MA' and b.dte_death = '0' and rownum<2 and b.id_medicaid not in (100201462965)";
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colNames.add("AGENCY_ID");   //8
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//get member ID card details
        memberSearch(colValues.get(0));
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		String dteIssue = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText();
		String idAction = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText();
		String issueRsn = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText();
		String clerkID = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText();
		String source = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText();
		String dteReq = driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText();
		
		
		//change last name
    	otherid = colValues.get(8).trim();
    	fname=colValues.get(3).trim();
    	lastName = "SMITH";
    	String lName= lastName; //Store lastname again in different variable because it will change to P after xml is executed
    	casenum= Common.generateRandomTaxID();
        ssn=colValues.get(1).trim();
        dob =colValues.get(2).trim().substring(0, 4)+"-"+colValues.get(2).trim().substring(4, 6)+"-"+colValues.get(2).trim().substring(6, 8);
        adr1=colValues.get(5).trim();
        city=colValues.get(6).trim();
        zip=colValues.get(7).trim();
        dep="00";
        aid="40";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member from DB: "+colValues.get(0));
        log("Member generated from query: "+Mid);

        
        if (!(Mid.equals(colValues.get(0))))
        	  Assert.assertTrue(false,"Member generated for last name change is not the same as one selected from DB");
               
        //Verify member name has changed, and verify no change in ID card info
        memberSearch(colValues.get(0));
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td[2]")).getText().equals(lName+", "+fname),"Special char addition to First name failed");
		driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n110")).click();
		if (!(driver.findElements(By.xpath("//span[contains(@id, 'IDCardBean_ColValue_issueDate')]")).size()==1))
      	  Assert.assertTrue(false,"Looks like another row for member ID card got added");

        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_issueDate")).getText().equals(dteIssue),"dteIssue on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_IDCardNumber")).getText().equals(idAction),"idAction on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_idIssueRsn_codeDescription")).getText().equals(issueRsn),"issueRsn on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceID")).getText().equals(clerkID),"clerkID on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_sourceCode")).getText().equals(source),"source on ID card mismatch");
        Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardList_0:IDCardBean_ColValue_requestedDate")).getText().equals(dteReq),"dteReq on ID card mismatch");

    }
    
    @Test
    public void test23382() throws Exception{
    	TestNGCustom.TCNo="23382";
    	log("//TC 23382");
    	
    	Common.portalLogin();
    	
    	//Get inactive and active member
    	sqlStatement = "select binac.id_medicaid , bac.id_medicaid ACTM from t_re_base binac, t_re_base bac, T_RECIP_LINK_XREF xref where binac.sak_recip = xref.SAK_RCP_PURGED  and bac.sak_recip = xref.SAK_RECIP and xref.CDE_STATUS = 'L' and rownum = 1";
    	colNames.add("ID_MEDICAID");
    	colNames.add("ACTM");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String inactMem = colValues.get(0);
    	String actMem = colValues.get(1);
    	log("Inactive member: "+inactMem+" Active member: "+actMem);

    	//Search for inactive member elig
    	EVS.RMreset(sqlStatement);
    	
    	//Verify active member is returned
    	Assert.assertTrue(driver.findElement(By.cssSelector("td.leftAlign > span")).getText().equals("Click on the Date Range to view Eligibility information for Member ID "+actMem),"The elig check did not return active member");
    	
    	Common.portalLogout();
    }
    
    @Test
    public void test23381() throws Exception{
    	TestNGCustom.TCNo="23381";
    	log("//TC 23381");
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1970-10-12";
        adr1="120 UNION PART STREET";
        city="BOSTON";
        zip="02118";
        dep="00";
        aid="40";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Member: "+mem);
    	
        //Search Member and Add NF
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_providerID")).sendKeys("110025810");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareBean_SvcLoc")).sendKeys("A");
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocCode"))).selectByVisibleText("NF - NURSING FACILITY");
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_EffectiveDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_AdmissionDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareDataPanel_ReLocAdmitReason"))).selectByVisibleText("HM - Admitted from home");
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();
		
		//Enter MMQ from Portal
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		List<WebElement> list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("1 - New Admission");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:dateOfAdmission")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		effDt=DT("03/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skilledObjDaily"))).selectByVisibleText("1 - No Observation");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygBathing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_personalHygGrooming"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_dressing"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_mobility"))).selectByVisibleText("2 - Independent w/Wheelchair");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_eating"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBladder"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_continenceCatBowel"))).selectByVisibleText("2 - Incontinent Occasionally");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_bladderBowelRetaining"))).selectByVisibleText("2 - Bladder Retraining");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_positioning"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_pressureUlcerPrevention"))).selectByVisibleText("1 - No Preventative Measures");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg1"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg2"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg3"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerStg4"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyPressUlcerFreq"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOther"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc1"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc2"))).selectByVisibleText("00 - None");
		new Select(driver.findElement(By.id("mmqFirstServiceQuestionForm:mmqFirstServiceQuestionPanel:mmqServiceQuestionVO_skillProcDailyOtherProc3"))).selectByVisibleText("00 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		//Store MMQ category value and MMQ score
		String loc = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		validateMMQ(mem,loc,score);
		
		//Enter MMQ again with reason 3
		Common.portalLogin();
		driver.findElement(By.linkText("Manage Members")).click();
		driver.findElement(By.linkText("Long Term Care")).click();
		driver.findElement(By.linkText("Enter Management Minutes Questionnaires (MMQ)")).click();
		list = new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:providerID"))).getOptions();
		for (WebElement j:list) 
			if ((j.getText()).contains("110025810")) {
				j.click();
				break;
			}
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:memberID")).sendKeys(mem);
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:lastName")).sendKeys("MAZDAZ");
		driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:firstInitial")).sendKeys(fname.substring(0, 1));
		new Select(driver.findElement(By.id("mmqMemberSearchForm:mmqSearchPanel:reasonForSubmission"))).selectByVisibleText("5 - Semiannual no change");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Search']")).click();
		Common.getPageError(mmqTarget);
		
		//Personal Information
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).clear();
		driver.findElement(By.id("mmqPersonalInfoForm:mmqPersonalInfoPanel:effectiveDate")).sendKeys("09/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		effDt=DT("09/01/"+Common.convertSysdatecustom(-360).subSequence(6, 10));
		
		//Service Questions 1-12
		driver.findElement(By.id("mmqPersonalInfoForm:_MENUITEM_firstServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();
		
		enterMMQcommon(mmqTarget);
		
		String loc1 = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_categoryText')]")).getText();
		String score1 = driver.findElement(By.xpath("//span[contains(@id,'mmqServiceQuestionVO_grandTotalText')]")).getText();
		
		//Verify we got same MMQ category value and MMQ score
		Assert.assertTrue(loc1.equals(loc), "loc mismatch");
		Assert.assertTrue(score1.equals(score), "score mismatch");
		
    	//Validate MMQ Score
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(mem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	if (!(driver.findElements(By.xpath("//span[contains(@id, 'LevelOfCareBean_ColValue_endDate')]")).size()==1))
    		Assert.assertTrue(false, "Another row got added for LoC");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch for 2nd submission wih 3 - Semiannual category change and significant change");
    	if (Integer.parseInt(Common.convertSysdate().substring(6, 10))%4==0) //Leap year check
    		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals("02/29/"+Common.convertSysdate().substring(6, 10)), "LoC end date not updated");
    	else
    		Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_endDate")).getText().equals("02/28/"+Common.convertSysdate().substring(6, 10)), "LoC end date not updated");
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	//Sort on submission reason
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_providerIDLoc")).click();
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_submitReason_reasonDescription")).click();
    	
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("No Change"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_1:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
  
    }
    
    @Test
    public void testunix() throws Exception{
    	TestNGCustom.TCNo="unix";
		String command, error;

		//Get Desired Filename
		command = "ls -ltr /customer/dsma/mod/rpt/eld04006.rpt.* | grep '"+Common.monthUNIX("08/09/2013")+"  "+Common.dayUNIX("08/09/2013")+"'";
		error = "There was no report file found";
		String fileName = Common.connectUNIX(command, error);
		fileName = fileName.substring(fileName.length()-40);

		//Verify member data in file
		command = "grep 100208588804 "+fileName;
		error = "The selected file is not correct/ or it is empty/ or it does not have the desired member";
		String outputText = Common.connectUNIX(command, error);

		Assert.assertTrue(outputText.contains("100208588804"), "Member id not found in file");
		Assert.assertTrue(outputText.contains("TEST"), "Member First name not found in file");
		Assert.assertTrue(outputText.contains("INVALID"), "Member Last name not found in file");
    }
    
    @Test
    public void test32960a() throws Exception{
    	TestNGCustom.TCNo="32960a";
    	log("//TC 32960a");
    	
    	//Get 1st Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1966-03-09";
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        String inactMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1966-02-09";
        adr1="729 BRIDGE STREET";
        city="WEYMOUTH";
        zip="02191";
        dep="00";
        aid="08";
        agency="MHO";
        String actMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Inactive Member: "+inactMem+" Active Member: "+actMem);
        
        //Add clinical profile to inactive member
        String ServiceRequestCode="PACE";
        String AssessmentDate=Common.convertSysdate();
        String EvalReason="N";
        String AssessmentReason="1";
        String PaceApprovalDate=Common.convertSysdate();

        memberSearch(inactMem);
    	driver.findElement(By.linkText("Clinical Information")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		new Select(driver.findElement(By.xpath("//select[contains(@id,'ServiceRequestCode')]"))).selectByValue(ServiceRequestCode);
		driver.findElement(By.xpath("//input[contains(@id,'AssessmentDate')]")).sendKeys(AssessmentDate);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'EvalReason')]"))).selectByValue(EvalReason);
		new Select(driver.findElement(By.xpath("//select[contains(@id,'AssessmentReason')]"))).selectByValue(AssessmentReason);
		driver.findElement(By.xpath("//input[contains(@id,'PaceApprovalDate')]")).sendKeys(PaceApprovalDate);
		Common.save();
        log("Clinical information data for Inactive member as below");
        log("ServiceRequestCode: "+ServiceRequestCode+" AssessmentDate: "+AssessmentDate+" EvalReason: "+EvalReason+" AssessmentReason: "+AssessmentReason+" PaceApprovalDate: "+PaceApprovalDate);

		LoginCheck();
        
        //Link 2 members
        memberSearch(actMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_Navi1")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.xpath("//img[@alt='Link ID From pop-up search']")).click();
		driver.findElement(By.xpath("//input[contains(@id,'RecipientSearchCriteriaPanel:CurrentID')]")).sendKeys(inactMem);
		driver.findElement(By.xpath("//*[contains(@id,'RecipientSearchCriteriaPanel:SEARCH')]")).click();
		driver.findElement(By.xpath("//*[contains(@id,'RecipientSearchResults') and contains(@id,'0:column1Value')]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();

        //Store Member info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		//INACTIVE MEMBER
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='Inactive member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='Inactive member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+inactMem+"', 'Inactive member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//ACTIVE MEMBER
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='active member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='active member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+actMem+"', 'active member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//CLINICAL INFORMATION
		//ServiceRequestCode
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='ServiceRequestCode'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='ServiceRequestCode'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+ServiceRequestCode+"', 'ServiceRequestCode', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//AssessmentDate
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='AssessmentDate'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='AssessmentDate'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+AssessmentDate+"', 'AssessmentDate', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//EvalReason
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='EvalReason'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='EvalReason'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+EvalReason+"', 'EvalReason', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//AssessmentReason
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='AssessmentReason'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='AssessmentReason'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+AssessmentReason+"', 'AssessmentReason', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//PaceApprovalDate
		sqlStatement = "select * from r_day2 where TC = '32960' and DES='PaceApprovalDate'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32960' and DES='PaceApprovalDate'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32960', '"+PaceApprovalDate+"', 'PaceApprovalDate', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
				
    }
    
//    @Test
//    public void test32959a() throws Exception{
//    	TestNGCustom.TCNo="32959a";
//    	log("//TC 32959a - Member link with ICO optout Test Case");
//   
//    	int ageDays1=-23360; //64 y.o. must be less than 65 for ico
//    	int ageDays2=-23360+35;
//
//    	
//    	//Get 1st Member ID
//    	otherid = Common.generateRandomTaxID();
//    	fname=Common.generateRandomName();
//    	casenum=Common.generateRandomTaxID();
//        ssn="1"+Common.generateRandomTaxID().substring(0,8);
//        dob =fileSysdateCustom(ageDays1);
//        adr1="101 FEDERAL ST";
//        city="BOSTON";
//        zip="02110";
//        dep="00";
//        aid="03";
//        agency="MHO";
//        String inactMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//                
//        //Add aid cat 50 for COM BP
//        aid="50";
//        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//		Assert.assertTrue(Mid.equals(inactMem), "Aid cat 50 not added to same member");
//		
//        String dob1=dob; //will be used later in this tc to add medicare
//        
//    	//Get 2nd Member ID
//    	otherid = Common.generateRandomTaxID();
//    	fname=Common.generateRandomName();
//    	casenum=Common.generateRandomTaxID();
//        ssn="1"+Common.generateRandomTaxID().substring(0,8);
//        dob =fileSysdateCustom(ageDays2);
//        adr1="99 FEDERAL ST";
//        city="BOSTON";
//        zip="02110";
//        dep="00";
//        aid="03";
//        agency="MHO";
//        String actMem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//        
//        //Add aid cat 50 for COM BP
//        aid="50";
//        Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//		Assert.assertTrue(Mid.equals(actMem), "Aid cat 50 not added to same member");
//		
//        String dob2=dob; //will be used later in this tc to add medicare
//
//        
//        log("Inactive Member: "+inactMem+" Active Member: "+actMem);
//        
//        String medicareID1=Common.generateRandomTaxID();
//        String medicareID2=Common.generateRandomTaxID();
//
//        //Add medicare A and B to inactive member
//        memberSearch(inactMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	
//    	//Medicare ID
//    	driver.findElement(By.linkText("Medicare ID")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		driver.findElement(By.xpath("//input[contains(@id,'MedicareID')]")).sendKeys(medicareID1);
//		Common.save();
//		
//		//Medicare A
//		LoginCheck();
//        memberSearch(inactMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	driver.findElement(By.linkText("Medicare A Coverage")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'MedicareID')]"))).selectByIndex(1);
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys("01/01/"+getEligeffDT(dob1).substring(0, 4));
//		driver.findElement(By.xpath("//input[contains(@id,'EndDate')]")).sendKeys("12/31/2299");
//		driver.findElement(By.xpath("//input[contains(@id,'HIOptionCodeSearch')]")).sendKeys("E");
//		driver.findElement(By.xpath("//input[contains(@id,'PremPayorCodeSearch')]")).sendKeys("CIVIL");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'CdeEntitleRsn')]"))).selectByValue("5");
//		Common.save();
//		
//		//Medicare B
//		LoginCheck();
//        memberSearch(inactMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	driver.findElement(By.linkText("Medicare B Coverage")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'MedicareID')]"))).selectByIndex(1);
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys("01/01/"+getEligeffDT(dob1).substring(0, 4));
//		driver.findElement(By.xpath("//input[contains(@id,'EndDate')]")).sendKeys("12/31/2299");
//		driver.findElement(By.xpath("//input[contains(@id,'SMIOptionCodeSearch')]")).sendKeys("N");
//		driver.findElement(By.xpath("//input[contains(@id,'PremPayorCodeSearch')]")).sendKeys("CIVIL");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'CdeEntitleRsn')]"))).selectByValue("5");
//		Common.save();
//		
//		log("Medicare A and B added to Inactive Member. Medicare id: "+medicareID1);
//		
//	    //Add medicare A and B to active member
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	
//    	//Medicare ID
//    	driver.findElement(By.linkText("Medicare ID")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		driver.findElement(By.xpath("//input[contains(@id,'MedicareID')]")).sendKeys(medicareID2);
//		Common.save();
//		
//		//Medicare A
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	driver.findElement(By.linkText("Medicare A Coverage")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'MedicareID')]"))).selectByIndex(1);
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys("01/01/"+getEligeffDT(dob2).substring(0, 4));
//		driver.findElement(By.xpath("//input[contains(@id,'EndDate')]")).sendKeys("12/31/2299");
//		driver.findElement(By.xpath("//input[contains(@id,'HIOptionCodeSearch')]")).sendKeys("E");
//		driver.findElement(By.xpath("//input[contains(@id,'PremPayorCodeSearch')]")).sendKeys("CIVIL");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'CdeEntitleRsn')]"))).selectByValue("5");
//		Common.save();
//		
//		//Medicare B
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.linkText("Medicare")).click();
//    	driver.findElement(By.linkText("Medicare B Coverage")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'MedicareID')]"))).selectByIndex(1);
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys("01/01/"+getEligeffDT(dob2).substring(0, 4));
//		driver.findElement(By.xpath("//input[contains(@id,'EndDate')]")).sendKeys("12/31/2299");
//		driver.findElement(By.xpath("//input[contains(@id,'SMIOptionCodeSearch')]")).sendKeys("N");
//		driver.findElement(By.xpath("//input[contains(@id,'PremPayorCodeSearch')]")).sendKeys("CIVIL");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'CdeEntitleRsn')]"))).selectByValue("5");
//		Common.save();
//		
//		log("Medicare A and B added to Active Member. Medicare id: "+medicareID2);
//		
//		//Add ICO opt out to Inactive member
//		String icoOptoutEffDt= Common.convertSysdate();
//		LoginCheck();
//        memberSearch(inactMem);
//    	driver.findElement(By.linkText("ICO Opt Out")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).clear();;
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys(icoOptoutEffDt);
//		Common.save();
//		log("ICO opt out added to (FROM) member, start date: "+icoOptoutEffDt+" ,End date: 12/31/2299");
//
//		//Add ICO assignment to Active member
//		String ICOProv = "110031450";
//		String ICOSvcLoc = "B";
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.linkText("PMP Assignment History - SU")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'McProgramList')]"))).selectByValue("ICO");
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).clear();
//		driver.findElement(By.xpath("//input[contains(@id,'EffectiveDate')]")).sendKeys(Common.convertSysdatecustom(-35));
//		driver.findElement(By.xpath("//input[contains(@id,'PmpSvcLoc')]")).sendKeys(ICOProv);
//		driver.findElement(By.xpath("//input[contains(@id,'RePmpHisDistanceSearchHis')]")).sendKeys(ICOSvcLoc);
//		//Somehow, the ICOProv is not getting entered sometimes here, so we enter again
//		driver.findElement(By.xpath("//input[contains(@id,'PmpSvcLoc')]")).clear();
//		driver.findElement(By.xpath("//input[contains(@id,'PmpSvcLoc')]")).sendKeys(ICOProv);
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'StartReasonDropDownEntries')]"))).selectByValue("80");
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'StopReasonDropDownEntries')]"))).selectByValue("80");
//		Common.save();
//		String mcEffdt = driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
//		log("ICO assignment added to (TO) member, start date: "+mcEffdt+" ,End date: 12/31/2299");
//
//        //Link 2 members
//		LoginCheck();
//        memberSearch(actMem);
//    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_Navi1")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
//		driver.findElement(By.xpath("//img[@alt='Link ID From pop-up search']")).click();
//    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:CurrentID")).sendKeys(inactMem);
//    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchCriteriaPanel:SEARCH")).click();
//    	driver.findElement(By.id("MMISForm:MMISBodyContent:LinkRequestPanel:_id318:RecipientSearchResults_0:column1Value")).click();
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
//		Common.saveAll();
//
//        //Store Member info in DB for Day 2
//		Statement statement = Common.connection1.createStatement();
//		//INACTIVE MEMBER
//		sqlStatement = "select * from r_day2 where TC = '32959' and DES='Inactive member'";
//		colNames.add("ID");
//		colValues = Common.executeQuery1(sqlStatement, colNames);
//		if (!(colValues.get(0).equals("null"))) {
//			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='Inactive member'";
//			statement.executeQuery(sqlStatement);
//		}
//		sqlStatement = "insert into  r_day2 values ('32959', '"+inactMem+"', 'Inactive member', '"+Common.convertSysdate()+"')";
//		statement.executeQuery(sqlStatement);
//		
//		//ACTIVE MEMBER
//		sqlStatement = "select * from r_day2 where TC = '32959' and DES='active member'";
//		colNames.add("ID");
//		colValues = Common.executeQuery1(sqlStatement, colNames);
//		if (!(colValues.get(0).equals("null"))) {
//			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='active member'";
//			statement.executeQuery(sqlStatement);
//		}
//		sqlStatement = "insert into  r_day2 values ('32959', '"+actMem+"', 'active member', '"+Common.convertSysdate()+"')";
//		statement.executeQuery(sqlStatement);
//		
//		//icoOptoutEffDt
//		sqlStatement = "select * from r_day2 where TC = '32959' and DES='icoOptoutEffDt'";
//		colNames.add("ID");
//		colValues = Common.executeQuery1(sqlStatement, colNames);
//		if (!(colValues.get(0).equals("null"))) {
//			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='icoOptoutEffDt'";
//			statement.executeQuery(sqlStatement);
//		}
//		sqlStatement = "insert into  r_day2 values ('32959', '"+icoOptoutEffDt+"', 'icoOptoutEffDt', '"+Common.convertSysdate()+"')";
//		statement.executeQuery(sqlStatement);
//
//				
//    }
    
    @Test
    public void test32959a() throws Exception{
    	TestNGCustom.TCNo="32959a";
    	log("//TC 32959a - Member link with ICO optout Test Case");
   
    	int ageDays1=-16060; //around 40-45
    	int ageDays2=-14020;

    	//Get 1st Member ID
    	sqlStatement="select b.id_medicaid from t_re_base b, t_re_opt_out o "+
    			"where b.sak_recip=o.sak_recip and ind_active='Y' and dte_death='0' "+
    			"and o.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between o.dte_effective and o.dte_end "+
    			"and b.cde_sex='F' and dte_birth between '"+DBSysdateCustom(ageDays1)+"' and '"+DBSysdateCustom(ageDays2)+"' "+
    			"and rownum < 2";
    	
    	System.out.println(sqlStatement);
    	    	
    	colNames.add("ID_MEDICAID");

    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String inactMem = colValues.get(0);
        
    	//Get 2nd Member ID
    	sqlStatement="select b.id_medicaid, p.dte_effective, p.dte_end from t_re_base b, t_re_pmp_assign p "+
    			"where b.sak_recip=p.sak_recip and ind_active='Y' and dte_death='0' "+
    			"and p.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between p.dte_effective and p.dte_end "+
    			"and p.sak_pub_hlth=91 "+
    			"and b.cde_sex='F' and b.dte_birth between '"+DBSysdateCustom(ageDays1)+"' and '"+DBSysdateCustom(ageDays2)+"' "+
    			"and exists (select pmp.sak_recip from t_re_pmp_assign pmp where pmp.sak_recip = p.sak_recip  group by pmp.sak_recip having count(pmp.sak_recip)=1) "+
    			"and rownum < 2";
    	
    	System.out.println(sqlStatement);
    	    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_EFFECTIVE");
    	colNames.add("DTE_END");

    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String actMem = colValues.get(0);
    	String pmpEffDt = dateDBtoPanel(colValues.get(1));
    	String pmpEndDt = dateDBtoPanel(colValues.get(2));
    	
        log("Inactive Member:"+inactMem+" Active Member:"+actMem);
    	
    	log("TO member ICO MC program Effective Date:"+pmpEffDt+" End Date:"+pmpEndDt);

		//Get ICO opt out info from Inactive member
		LoginCheck();
        memberSearch(inactMem);
    	driver.findElement(By.linkText("Member Opt Out")).click();
    	String icoOptoutEffDt =	driver.findElement(By.xpath("//*[contains(@id,'MemberOptOutPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
    	String icoOptoutEndDt =	driver.findElement(By.xpath("//*[contains(@id,'MemberOptOutPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
    	String icoOptoutStatus = driver.findElement(By.xpath("//*[contains(@id,'MemberOptOutPanel') and contains(@id,'0:') and contains(@id,'optOutStatusDescription')]")).getText();

		log("ICO opt out information (FROM) member, Effective date: "+icoOptoutEffDt+" ,End date: "+icoOptoutEndDt+" ,Status: "+icoOptoutStatus);

        //Link 2 members
		LoginCheck();
        memberSearch(actMem);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_Navi1")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.xpath("//img[@alt='Link ID From pop-up search']")).click();
		driver.findElement(By.xpath("//input[contains(@id,'RecipientSearchCriteriaPanel:CurrentID')]")).sendKeys(inactMem);
		driver.findElement(By.xpath("//*[contains(@id,'RecipientSearchCriteriaPanel:SEARCH')]")).click();
		driver.findElement(By.xpath("//*[contains(@id,'RecipientSearchResults') and contains(@id,'0:column1Value')]")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
		Common.saveAll();

        //Store Member info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		//INACTIVE MEMBER
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='Inactive member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='Inactive member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+inactMem+"', 'Inactive member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//ACTIVE MEMBER
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='active member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='active member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+actMem+"', 'active member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//icoOptoutEffDt
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='icoOptoutEffDt'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='icoOptoutEffDt'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+icoOptoutEffDt+"', 'icoOptoutEffDt', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//icoOptoutEndDt
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='icoOptoutEndDt'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='icoOptoutEndDt'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+icoOptoutEndDt+"', 'icoOptoutEndDt', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//icoOptoutStatus
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='icoOptoutStatus'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='icoOptoutStatus'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+icoOptoutStatus+"', 'icoOptoutStatus', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//pmpEffDt
		sqlStatement = "select * from r_day2 where TC = '32959' and DES='pmpEffDt'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32959' and DES='pmpEffDt'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32959', '"+pmpEffDt+"', 'pmpEffDt', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);

				
    }
    
    
//    @Test
//    public void test28552() throws Exception{
//    	TestNGCustom.TCNo="28552";
//    	log("//TC 28552");
//    	
//    	//Scenario 1
//    	log ("**Scenario 1");
//    	
//    	sqlStatement="Select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, e.agency_id, e.CDE_AGENCY  from T_RE_BASE b, t_re_other_id e where b.sak_recip = e.sak_Recip and b.adr_state = 'MA' and b.sak_recip = "+
//    				"(select base.sak_recip from t_re_base base, t_re_other_id o where base.sak_recip=o.sak_recip and base.ind_active='Y' and base.dte_death='0' and not exists (select 1 from t_re_aid_elig elig, t_cde_aid a where elig.sak_recip=base.sak_recip and elig.cde_status1 <> 'H' and to_char(sysdate,'YYYYMMDD') between elig.dte_effective and elig.dte_end and elig.sak_cde_aid=a.sak_cde_aid and a.ind_id_card='Y') and rownum < 2)";
//    	colNames.add("ID_MEDICAID"); //0
//    	colNames.add("NUM_SSN");  	 //1
//    	colNames.add("DTE_BIRTH");   //2
//    	colNames.add("NAM_FIRST");   //3
//    	colNames.add("NAM_LAST");    //4
//    	colNames.add("ADR_STREET_1");//5
//    	colNames.add("ADR_CITY");    //6
//    	colNames.add("ADR_ZIP_CODE");//7
//    	colNames.add("AGENCY_ID");   //8
//    	colNames.add("CDE_AGENCY");   //9
//    	colValues = Common.executeQuery(sqlStatement, colNames);
//    	
//    	String mem = colValues.get(0);
//        ssn=colValues.get(1);
//        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
//    	fname=colValues.get(3);
//    	lastName = colValues.get(4);
//        adr1=colValues.get(5);
//        city=colValues.get(6);
//        zip=colValues.get(7);
//    	otherid = colValues.get(8);
//        agency=colValues.get(9);
//        
//        log("Existing DB Member: "+mem);
//    	
//		//Add aid cat HA to this member
//    	casenum= Common.generateRandomTaxID();
//        dep="00";
//        aid="HA";
//        agency="HCF";
//        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//        
//        if (!(Mid.equals(mem)))
//        	  Assert.assertTrue(false,"DB Member "+mem+" not the same as uploaded member "+Mid);
//        
//        log("Successful upload and download of I/P file with agency HCF and aid cat HA");
//
//        
//        memberSearch(mem);
//        String BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
//        String aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
//        Assert.assertTrue(BP.contains("HSNS"),"BP is not HSNS. It is "+BP);
//        Assert.assertTrue(aidCat.contains("HA"),"Aid Cat is not HA. It is "+aidCat);
//        log("BP is "+BP);
//        log("Aid Cat is "+aidCat);
//        
//        //Validate agency name
//    	driver.findElement(By.linkText("Member ID Cross Reference")).click();
//    	//Sort on eff date desc
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'agencyName')]")).click();
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
//    	String agencyName =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'agencyName')]")).getText();
//    	String effDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
//    	String endDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
//        Assert.assertTrue(agencyName.equals("HEALTHCARE FINANCE"),"agencyName is not HEALTHCARE FINANCE. It is "+agencyName);
//        Assert.assertTrue(effDT.equals(Common.convertSysdate()),"effDT is not "+Common.convertSysdate()+". It is "+effDT);
//        Assert.assertTrue(endDT.equals("12/31/2299"),"endDT is not 12/31/2299. It is "+endDT);
//        log("Validated that agencyName: "+agencyName);
//        log("Validated that effDT: "+effDT);
//        log("Validated that endDT: "+endDT);
//
//        //Validate Member ID cards
//    	Common.cancelAll();
//    	driver.findElement(By.linkText("Member ID Cards")).click();
//    	String panelMsg=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNoRecordsMessage")).getText();
//        Assert.assertTrue(panelMsg.equals("***No records found***"),"Member ID Cards panel message is not ***No records found***. It is "+panelMsg);
//        log("Member ID Cards panel message is "+panelMsg);
//        
//    	//Scenario 2
//    	log ("\n**Scenario 2");
//    	LoginCheck();
//    	
//    	//Get Member ID
//    	otherid = Common.generateRandomTaxID();
//    	fname=Common.generateRandomName();
//    	casenum=Common.generateRandomTaxID();
//        ssn="1"+Common.generateRandomTaxID().substring(0,8);
//        dob =fileSysdateCustom(-9025);
//        adr1="228 QUINCY AVE";
//        city="BRAINTREE";
//        zip="02184";
//        dep="00";
//        aid="HA";
//        agency="HCF";
//        String Mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
//        log("Member ID is: "+Mem);
//        
//        memberSearch(Mem);
//        BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
//        aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
//        Assert.assertTrue(BP.contains("HSNS"),"BP is not HSNS. It is "+BP);
//        Assert.assertTrue(aidCat.contains("HA"),"Aid Cat is not HA. It is "+aidCat);
//        log("BP is "+BP);
//        log("Aid Cat is "+aidCat);
//        
//        //Validate agency name
//    	driver.findElement(By.linkText("Member ID Cross Reference")).click();
//    	//Sort on eff date desc
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'agencyName')]")).click();
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
//    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
//    	agencyName =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'agencyName')]")).getText();
//    	effDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
//    	endDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
//        Assert.assertTrue(agencyName.equals("HEALTHCARE FINANCE"),"agencyName is not HEALTHCARE FINANCE. It is "+agencyName);
//        Assert.assertTrue(effDT.equals(Common.convertSysdate()),"effDT is not "+Common.convertSysdate()+". It is "+effDT);
//        Assert.assertTrue(endDT.equals("12/31/2299"),"endDT is not 12/31/2299. It is "+endDT);
//        log("Validated that agencyName: "+agencyName);
//        log("Validated that effDT: "+effDT);
//        log("Validated that endDT: "+endDT);
//
//        //Validate Member ID cards
//    	Common.cancelAll();
//    	driver.findElement(By.linkText("Member ID Cards")).click();
//    	panelMsg=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNoRecordsMessage")).getText();
//        Assert.assertTrue(panelMsg.equals("***No records found***"),"Member ID Cards panel message is not ***No records found***. It is "+panelMsg);
//        log("Member ID Cards panel message is "+panelMsg);
//
//
//    }
    
    @Test
    public void test28552() throws Exception{
    	TestNGCustom.TCNo="28552";
    	log("//TC 28552-HCF sends MA21 txn to add Aid Cat HA/HB/HC/HD Test Case");
    	
    	//Scenario 1
    	log ("**Scenario 1");
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where ind_active='Y' and dte_death='0' and num_ssn<>' '"+
    			"and not exists (select 1 from t_re_aid_elig e, t_cde_aid a "+
    			"where e.sak_recip=b.sak_recip and e.cde_status1 <> 'H' "+
    			"and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and e.sak_cde_aid=a.sak_cde_aid and a.ind_id_card='Y') "+
    			"and not exists (select 1 from t_re_aid_elig e1 "+
    			"where e1.sak_recip=b.sak_recip and e1.cde_status1 <> 'H' "+
    			"and to_char(sysdate,'YYYYMMDD') between e1.dte_effective and e1.dte_end "+
    			"and e1.sak_cde_aid between 218 and 221) "+
    			"and rownum < 2";

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
        
        log("Existing DB Member: "+mem);
    	
		//Add aid cat HA to this member
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="HA";
    	otherid = Common.generateRandomTaxID();
        agency="HCF";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"DB Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with agency HCF and aid cat HA");

        
        memberSearch(mem);
        String BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        Assert.assertTrue(BP.contains("HSNS"),"BP is not HSNS. It is "+BP);
        Assert.assertTrue(aidCat.contains("HA"),"Aid Cat is not HA. It is "+aidCat);
        log("BP is "+BP);
        log("Aid Cat is "+aidCat);
        
        //Validate agency name
    	driver.findElement(By.linkText("Member ID Cross Reference")).click();
    	//Sort on eff date desc
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'agencyName')]")).click();
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
    	String agencyName =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'agencyName')]")).getText();
    	String effDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
    	String endDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
        Assert.assertTrue(agencyName.equals("HEALTHCARE FINANCE"),"agencyName is not HEALTHCARE FINANCE. It is "+agencyName);
        Assert.assertTrue(effDT.equals(Common.convertSysdate()),"effDT is not "+Common.convertSysdate()+". It is "+effDT);
        Assert.assertTrue(endDT.equals("12/31/2299"),"endDT is not 12/31/2299. It is "+endDT);
        log("Validated that agencyName: "+agencyName);
        log("Validated that effDT: "+effDT);
        log("Validated that endDT: "+endDT);

        //Validate Member ID cards
    	Common.cancelAll();
    	driver.findElement(By.linkText("Member ID Cards")).click();
    	String panelMsg=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNoRecordsMessage")).getText();
        Assert.assertTrue(panelMsg.equals("***No records found***"),"Member ID Cards panel message is not ***No records found***. It is "+panelMsg);
        log("Member ID Cards panel message is "+panelMsg);
        
    	//Scenario 2
    	log ("\n**Scenario 2");
    	LoginCheck();
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-9025);
        adr1="228 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="HA";
        agency="HCF";
        String Mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log("Member ID is: "+Mem);
        
        memberSearch(Mem);
        BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        Assert.assertTrue(BP.contains("HSNS"),"BP is not HSNS. It is "+BP);
        Assert.assertTrue(aidCat.contains("HA"),"Aid Cat is not HA. It is "+aidCat);
        log("BP is "+BP);
        log("Aid Cat is "+aidCat);
        
        //Validate agency name
    	driver.findElement(By.linkText("Member ID Cross Reference")).click();
    	//Sort on eff date desc
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'agencyName')]")).click();
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
    	driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'effectiveDate')]")).click();
    	agencyName =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'agencyName')]")).getText();
    	effDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'effectiveDate')]")).getText();
    	endDT =  driver.findElement(By.xpath("//*[contains(@id,'OtherIdPanel') and contains(@id,'0:') and contains(@id,'endDate')]")).getText();
        Assert.assertTrue(agencyName.equals("HEALTHCARE FINANCE"),"agencyName is not HEALTHCARE FINANCE. It is "+agencyName);
        Assert.assertTrue(effDT.equals(Common.convertSysdate()),"effDT is not "+Common.convertSysdate()+". It is "+effDT);
        Assert.assertTrue(endDT.equals("12/31/2299"),"endDT is not 12/31/2299. It is "+endDT);
        log("Validated that agencyName: "+agencyName);
        log("Validated that effDT: "+effDT);
        log("Validated that endDT: "+endDT);

        //Validate Member ID cards
    	Common.cancelAll();
    	driver.findElement(By.linkText("Member ID Cards")).click();
    	panelMsg=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberIDPanel:IDCardNoRecordsMessage")).getText();
        Assert.assertTrue(panelMsg.equals("***No records found***"),"Member ID Cards panel message is not ***No records found***. It is "+panelMsg);
        log("Member ID Cards panel message is "+panelMsg);


    }
    
    @Test
    public void test28553() throws Exception{
    	TestNGCustom.TCNo="28553";
    	log("//TC 28553-HCF sends MA21 txn to update member's demographic info Test Case");
    	
    	//Scenario 1
    	log ("**Scenario 1");
    	
    	sqlStatement="select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from t_re_base b, t_re_aid_elig e " +
    				"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and num_ssn<>' ' and b.cde_race<>'WHITE'" +
    				"and e.cde_status1 <> 'H' and e.cde_agency='HCF' " +
    				"and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end " +
    				"and not exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip " +
    				"and cde_status1 <> 'H' and cde_agency <> e.cde_agency " +
    				"and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end) " +
    				"and b.sak_recip > dbms_random.value * 6300000 " +
    				"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
        
        log("Existing DB Member: "+mem);
        
        //Get member details
        memberSearch(mem);
        String adr1_prev=adr1;
        String city_prev=city;
        String zip_prev=zip;
        String dob_prev=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText();
        String race_prev=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText();
        
        log("Current adr1: "+adr1_prev);
        log("Current city: "+city_prev);
        log("Current zip: "+zip_prev);
        log("Current dob: "+dob_prev);
        log("Current race: "+race_prev);

        //change data 
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        int age=-23360;
        dob =fileSysdateCustom(age); //64 y.o.

        
    	//Now get HCF agency ID for this member
        sqlStatement="select AGENCY_ID from t_re_other_id where cde_agency='HCF' and sak_recip=(select sak_recip from t_re_base where id_medicaid = '"+mem+"')";
    	colNames.add("AGENCY_ID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	otherid = colValues.get(0);
    	
		//Add aid cat HA to this member
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="HA";
        agency="HCF";

        LoginCheck();
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"DB Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with agency HCF and aid cat HA");

        
        memberSearch(mem);
        String adr1_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText();
        String city_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText();
        String zip_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().substring(0, 5);
        String dob_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText();
//      String race_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText();
        String race_new=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_raceData"))).getFirstSelectedOption().getText();
        
        Assert.assertTrue(adr1_new.equals(adr1),"adr1 is not updated. It is "+adr1_new);
        Assert.assertTrue(city_new.equals(city),"city is not updated. It is "+city_new);
        Assert.assertTrue(zip_new.equals(zip),"zip is not updated. It is "+zip_new);
        Assert.assertTrue(dob_new.equals(Common.convertSysdatecustom(age)),"age is not updated. It is "+dob_new);
        Assert.assertTrue(race_new.equals("WHITE"),"race is not updated. It is "+race_new);


        log("Demographics are updated according to I/P File. New Demographics are below:");
        log("New adr1: "+adr1_new);
        log("New city: "+city_new);
        log("New zip: "+zip_new);
        log("New dob: "+dob_new);
        log("New race: "+race_new);
        
        //Verify Previuos address
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n100")).click();
    	//sort on Change date desc
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList:AddressBean_ColHeader_lastChangeDate")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList:AddressBean_ColHeader_lastChangeDate")).click();

    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_street1")).getText().equals(adr1_prev),"Previous adr1 mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_city")).getText().equals(city_prev),"Previous city mismatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressList_0:AddressBean_ColValue_zipCode")).getText().equals(zip_prev),"Previous zip mismatch");

        log("Verified that Previous Address panel contains the previous address");
        
    	//Scenario 2
    	log ("\n**Scenario 2");
    	LoginCheck();
    	
       	sqlStatement="select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from t_re_base b, t_re_aid_elig e " +
				"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and num_ssn<>' ' and b.cde_race<>'WHITE'" +
				"and e.cde_status1 <> 'H' and e.cde_agency='HCF' " +
				"and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end " +
				"and exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip " +
				"and cde_status1 <> 'H' and cde_agency <> e.cde_agency " +
				"and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end) " +
				"and b.sak_recip > dbms_random.value * 6300000 " +
				"and rownum < 2";
	
       	colNames.add("ID_MEDICAID"); //0
       	colNames.add("NUM_SSN");  	 //1
       	colNames.add("DTE_BIRTH");   //2
		colNames.add("NAM_FIRST");   //3
		colNames.add("NAM_LAST");    //4
		colNames.add("ADR_STREET_1");//5
		colNames.add("ADR_CITY");    //6
		colNames.add("ADR_ZIP_CODE");//7
		colValues = Common.executeQuery(sqlStatement, colNames);
		
		mem = colValues.get(0);
	    ssn=colValues.get(1);
	    dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
		fname=colValues.get(3);
		lastName = colValues.get(4);
	    adr1=colValues.get(5);
	    city=colValues.get(6);
	    zip=colValues.get(7);
	    
	    log("Existing DB Member: "+mem);
	    
	    //Get member details
	    memberSearch(mem);
	    adr1_prev=adr1;
	    city_prev=city;
	    zip_prev=zip;
	    dob_prev=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText();
//	    race_prev=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText();
	    race_prev=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_raceData"))).getFirstSelectedOption().getText();
    
	    log("Current adr1: "+adr1_prev);
	    log("Current city: "+city_prev);
	    log("Current zip: "+zip_prev);
	    log("Current dob: "+dob_prev);
	    log("Current race: "+race_prev);

	    //change data 
	    adr1="13 FULLER RD";
	    city="FOXBORO";
	    zip="02035";
	    age=-23360;
	    dob =fileSysdateCustom(age); //64 y.o.

    
		//Now get HCF agency ID for this member
	    sqlStatement="select AGENCY_ID from t_re_other_id where cde_agency='HCF' and sak_recip=(select sak_recip from t_re_base where id_medicaid = '"+mem+"')";
		colNames.add("AGENCY_ID");
		colValues = Common.executeQuery(sqlStatement, colNames);
		otherid = colValues.get(0);
		
		//Add aid cat HA to this member
		casenum= Common.generateRandomTaxID();
	    dep="00";
	    aid="HA";
	    agency="HCF";

	    LoginCheck();
	    Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
	    
	    if (!(Mid.equals(mem)))
	    	  Assert.assertTrue(false,"DB Member "+mem+" not the same as uploaded member "+Mid);
	    
	    log("Successful upload and download of I/P file with agency HCF and aid cat HA");
	    
//        //Verify Warning message
//	    String errCde="2347"; //maybe 2002
//	    String errMsg="Agency is not authorized to submit data in this field: cde_ethnicity       ";
//	    
//        if (!(result_type.equals("W")))
//    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);
//
//        if (!(errorCode.equals(errCde)))
//    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
//		
//        if (!(errorMessage.equals(errMsg)))
//    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
//        
//	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

    
	    memberSearch(mem);
	    adr1_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText();
	    city_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText();
	    zip_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().substring(0, 5);
	    dob_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText();
//	    race_new=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText();
	    race_new=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_raceData"))).getFirstSelectedOption().getText();

	    Assert.assertTrue(adr1_new.equals(adr1_prev),"adr1 is updated. It is "+adr1_new);
	    Assert.assertTrue(city_new.equals(city_prev),"city is updated. It is "+city_new);
	    Assert.assertTrue(zip_new.equals(zip_prev),"zip is updated. It is "+zip_new);
	    Assert.assertTrue(dob_new.equals(dob_prev),"age is updated. It is "+dob_new);
	    Assert.assertTrue(race_new.equals(race_prev),"race is updated. It is "+race_new);
	
	
	    log("Demographics are not updated according to I/P File. New Demographics are same as old ones below:");
	    log("New adr1: "+adr1_new);
	    log("New city: "+city_new);
	    log("New zip: "+zip_new);
	    log("New dob: "+dob_new);
	    log("New race: "+race_new);

    }
    
    @Test
    public void test28554() throws Exception{
    	TestNGCustom.TCNo="28554";
    	log("//TC 28554-Eligibility Verification Request - 270 and web portal Test Case");
    	//Scenario1
    	log("**Scenario 1");
		EVS evs=new EVS();
		evs.LoginCheck();
        //Get member
		sqlStatement="select b.id_medicaid from t_re_base b, t_re_aid_elig e"+
					 " where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0'"+
					 " and e.cde_status1 <> 'H' and e.cde_agency='HCF'"+
					 " and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end"+
					 " and not exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip"+
					 " and cde_status1 <> 'H' and cde_agency <> e.cde_agency"+
					 " and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end)"+
					 " and rownum < 2";

		evs.RMreset(sqlStatement);
		
		//Verify RM
		String scenarioMessage="Member is not eligible";
		String scenarioTarget="//*[contains(@id,'0:status')]";
		evs.rmCommon(scenarioMessage, scenarioTarget); 
		log("Successfully validated message - "+scenarioMessage);

    	//Scenario2
    	log("**Scenario 2");
		evs.LoginCheck();
        //Get member
		sqlStatement="select id_medicaid from t_re_base b, t_re_aid_elig e"+
					 " where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0'"+
					 " and e.cde_status1 <> 'H' and e.cde_agency='HCF'"+
					 " and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end"+
					 " and exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip"+
					 " and cde_status1 <> 'H' and cde_agency <> e.cde_agency"+
					 " and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end)"+
					 " and rownum < 2";


		evs.RMreset(sqlStatement);
		
		//Verify RM
		scenarioMessage="HEALTH SAFETY NET";
		String actualMessage = driver.findElement(By.xpath(scenarioTarget)).getText();
		Assert.assertTrue(!(actualMessage.contains(scenarioMessage)), "Status message has the message - "+scenarioMessage);
		log("Successfully validated that status message does not contain - '"+scenarioMessage+"'. It is '"+actualMessage+"'");
    	
    	//Scenario3
    	log("**Scenario 3");
		evs.LoginCheck();
        //Get member
		sqlStatement="select id_medicaid, e1.dte_effective HSN_EFF, e1.dte_end HSN_END, e2.dte_effective OTH_EFF, e2.dte_end OTH_END"+
					 " from t_re_base b, t_re_elig e1, t_re_elig e2, t_re_aid_elig a"+
					 " where b.sak_recip=e1.sak_recip and b.sak_recip=e2.sak_recip and ind_active='Y' and dte_death='0'"+
					 " and a.sak_recip=b.sak_recip and a.sak_pgm_elig=e1.sak_pgm_elig and a.cde_agency='HCF'"+
					 " and e1.cde_status1 <> 'H' and e2.cde_status1 <> 'H'"+
					 " and e1.sak_pub_hlth in (7,85,86,87,88) and e2.sak_pub_hlth not in (7,85,86,87,88)"+
					 " and e2.dte_effective between to_char(to_date(e1.dte_end, 'YYYYMMDD')+1,'YYYYMMDD')"+
					 " and to_char(to_date(e1.dte_end,'YYYYMMDD')+10, 'YYYYMMDD')"+
					 " and e2.dte_effective between to_char(add_months(sysdate,-3*12),'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD')"+
					 " and not exists (select 1 from t_re_elig e where e.sak_recip=b.sak_recip and e.sak_pub_hlth <> e1.sak_pub_hlth and"+
					 " e.sak_pub_hlth <> e2.sak_pub_hlth"+
					 " and e.dte_effective between to_char(add_months(sysdate,-3*12),'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD'))"+
					 " and rownum < 2";

		evs.RMreset(sqlStatement); //This step is only done so we can click the 'Perform another elig check' button
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @alt='Perform Another Eligibility Check']")).click();
		Assert.assertTrue(driver.findElement(By.xpath("//*[@id='form1']/div/h2")).getText().equals("Check Member Eligibility"),"Did not get the 'Check Member Eligibility' message");
		
		//Select Provider
		new Select(driver.findElement(By.xpath("//select[contains(@id, 'eligInquireSearchProviderID')]"))).selectByIndex(1);
		colNames.add("ID_MEDICAID");
		colNames.add("HSN_END");
		colNames.add("OTH_EFF");
		colValues=Common.executeQuery(sqlStatement, colNames);
		
		if (colValues.get(0).equals("null")) {
			new Select(driver.findElement(By.xpath("//select[contains(@id, 'eligInquireSearchProviderID')]"))).selectByIndex(0);
			log("Member: Skipping this because no member found for this RM");
		    throw new SkipException("Skipping this because no member found for this RM");
		}

		String mem=colValues.get(0);
		String hsnEnd=Common.convertDate(colValues.get(1));
		String othEff=Common.convertDate(colValues.get(2));
		
		log("Member: "+mem);
		driver.findElement(By.xpath("//input[contains(@id, 'memberID')]")).sendKeys(mem);
		driver.findElement(By.xpath("//input[contains(@id, 'fromDOS')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id, 'fromDOS')]")).sendKeys(hsnEnd);
		driver.findElement(By.xpath("//input[contains(@id, 'toDOS')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id, 'toDOS')]")).sendKeys(othEff);

		evs.submit();
		Common.getPageError(evs.peTarget);
		
		//Select Eligibility Tab
		driver.findElement(By.xpath("//*[contains(@id, 'MENUITEM_EligTab')]")).click();
		
		//Verify 2 rows are present
		int count = driver.findElements(By.xpath("//*[contains(@id,'coverageList:') and contains(@id, ':dateRange_Link')]")).size();
		Assert.assertTrue(count==2,"Did not get 2 rows of date range in Eligibility tab, got only "+count+" row.");
		log("Successfully got 2 rows of date range in Eligibility tab");
		
		//Verify 1 of the row has Elig Status as 'Member is not eligible'
		String status1 = driver.findElement(By.xpath("//*[contains(@id,'coverageList:0:status')]")).getText();
		String status2 = driver.findElement(By.xpath("//*[contains(@id,'coverageList:1:status')]")).getText();
		if (status1.equals("Member is not eligible"))
				Assert.assertTrue(!(status2.equals("Member is not eligible")),"Both Status messages are '"+status1+"'");
		else if (status2.equals("Member is not eligible")) 
				Assert.assertTrue(!(status1.equals("Member is not eligible")),"Both Status messages are '"+status1+"'");
		else
			Assert.assertTrue(false,"Neither of the 2 Status messages are 'Member is not eligible'");
		
		log("Successfully validated that only one of the status messages is 'Member is not eligible'. The 2nd status message is something other than the message 'Member is not eligible'.");

    }
    
    @Test
    public void test32913a() throws Exception{
    	TestNGCustom.TCNo="32913a";
    	log("//TC 32913-Auto link the duplicate member IDs - 1 Test Case--Part A");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get 1st Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        
        String ssn1=ssn; //store for later update to member 2
        String mem1 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log ("The first member is: "+mem1+", SSN: "+ssn1+", Elig end date: 12/31/2299");
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
    	casenum=Common.generateRandomTaxID();

        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem2 = getCustomMemebr(xml);
        Assert.assertFalse(mem1.equals(mem2), "The sceond member is same as the first member: "+mem1);
        
        log ("The second member is: "+mem2);
        
        //Update member SSN and Elig end date - Idea is member with the most recent transaction update will be selected
        memberSearch(mem2);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
		
		driver.findElement(By.linkText("Base Information")).click();
		driver.findElement(By.xpath("//input[contains(@id,'SsnNumber')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'SsnNumber')]")).sendKeys(ssn1);
		Common.saveAll();
		
		log("2nd member was successfully updated with same SSN as first member. Second member Elig end date cut short to 12/31/2298");
		
        //Store Member info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		//First MEMBER
		sqlStatement = "select * from r_day2 where TC = '32913' and DES='first member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32913' and DES='first member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32913', '"+mem1+"', 'first member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Second MEMBER
		sqlStatement = "select * from r_day2 where TC = '32913' and DES='second member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32913' and DES='second member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32913', '"+mem2+"', 'second member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Last name
		sqlStatement = "select * from r_day2 where TC = '32913' and DES='last name'";
		String lastName="MAZDAZ";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32913' and DES='last name'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32913', '"+lastName+"', 'last name', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//First name
		sqlStatement = "select * from r_day2 where TC = '32913' and DES='first name'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32913' and DES='first name'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32913', '"+fname+"', 'first name', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);

    }
    
    @Test
    public void test32914a() throws Exception{
    	TestNGCustom.TCNo="32914a";
    	log("//TC 32914-Auto link the duplicate member IDs - 2 Test Case--Part A");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get 1st Member ID -  no SSN
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        dob =fileSysdateCustom(ageDays1);
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem1 = getCustomMemebr(xml);
        log ("The first member is: "+mem1);
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
    	casenum=Common.generateRandomTaxID();

        
    	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem2 = getCustomMemebr(xml);
        Assert.assertFalse(mem1.equals(mem2), "The sceond member is same as the first member: "+mem1);
        
        log ("The second member is: "+mem2);
  
        //Store Member info in DB for Day 2
		Statement statement = Common.connection1.createStatement();
		//First MEMBER
		sqlStatement = "select * from r_day2 where TC = '32914' and DES='first member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32914' and DES='first member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32914', '"+mem1+"', 'first member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Second MEMBER
		sqlStatement = "select * from r_day2 where TC = '32914' and DES='second member'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32914' and DES='second member'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32914', '"+mem2+"', 'second member', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
    }
    
    @Test
    public void test32937() throws Exception{
    	TestNGCustom.TCNo="32937";
    	log("//TC 32937-Invalid SSN in MA21 Eligibility transaction Test Case");
    	
    	int ageDays=-10950; //30 y.o.
    	
    	//Get 1st Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="666"+Common.generateRandomTaxID().substring(0,6);
        dob =fileSysdateCustom(ageDays);
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";

        String mem1 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log ("The first member is: "+mem1+", SSN in input file: "+ssn);
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,2)+"00"+Common.generateRandomTaxID().substring(0,4);
        dob =fileSysdateCustom(ageDays);
        adr1="17 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";

        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log ("The second member is: "+mem2+", SSN in input file: "+ssn);
        
    	//Get 3rd Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,4)+"0000";
        dob =fileSysdateCustom(ageDays);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";

        String mem3 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        log ("The third member is: "+mem3+", SSN in input file: "+ssn);
        
        //Check base app to make sure none of the members have SSN
	    //Select first member
        LoginCheck();
        memberSearch(mem1);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[6]/td[2]")).getText().equals(" "),"The first member has SSN written into DB. Member ID is: "+mem1);
        
        //Select second member
        LoginCheck();
        memberSearch(mem2);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[6]/td[2]")).getText().equals(" "),"The second member has SSN written into DB. Member ID is: "+mem2);
       
        //Select third member
        LoginCheck();
        memberSearch(mem3);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[6]/td[2]")).getText().equals(" "),"The third member has SSN written into DB. Member ID is: "+mem3);
       
        log("Verified that none of the members have SSN written into the DB");
    }
    
    @Test
    public void test32939() throws Exception{
    	TestNGCustom.TCNo="32939";
    	log("//TC 32939-MA21 transaction match criteria 1 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid filled up     
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"MAZDAZ\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" mail_adr_city=\"WEYMOUTH\" mail_adr_state=\"MA\" mail_adr_street_1=\"101 GAS LIGHT DRIVE\" mail_adr_street_2=\" \" mail_adr_zip_code=\"02190\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem2 = getCustomMemebr(xml);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid filled up. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32940() throws Exception{
    	TestNGCustom.TCNo="32940";
    	log("//TC 32940-MA21 transaction match criteria 2 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   

    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32941() throws Exception{
    	TestNGCustom.TCNo="32941";
    	log("//TC 32941-MA21 transaction match criteria 3 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   
    	otherid = Common.generateRandomTaxID();
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32942() throws Exception{
    	TestNGCustom.TCNo="32942";
    	log("//TC 32942-MA21 transaction match criteria 4 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   
    	otherid = Common.generateRandomTaxID();
        dob=Common.convertSysdatecustom(-9125).substring(6, 10)+dob.substring(4, 10); //25 y o but with same month and date
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32943() throws Exception{
    	TestNGCustom.TCNo="32943";
    	log("//TC 32943-MA21 transaction match criteria 5 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname="BD"+Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   
    	otherid = Common.generateRandomTaxID();
    	fname="BCQ"+Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32944() throws Exception{
    	TestNGCustom.TCNo="32944";
    	log("//TC 32944-MA21 transaction match criteria 6 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname="BDCVLJ"+Common.generateRandomName().substring(0,4);
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space   
    	otherid = Common.generateRandomTaxID();
    	fname="BDCVR"+Common.generateRandomName().substring(0,3);
        dob=Common.convertSysdatecustom(-9125).substring(6, 10)+dob.substring(4, 10); //25 y o but with same month and date
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32945() throws Exception{
    	TestNGCustom.TCNo="32945";
    	log("//TC 32945-MA21 transaction match criteria 7 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname="GHUQLJ"+Common.generateRandomName().substring(0,4);
    	lastName="GAMGEE";
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(ageDays1);
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        String mem = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID- This file has id_medicaid as space
    	fname="GHUQR"+Common.generateRandomName().substring(0,3);
    	lastName="LEE";
    	otherid = Common.generateRandomTaxID();
        dob=Common.convertSysdatecustom(-9125).substring(6, 10)+dob.substring(4, 10); //25 y o but with same month and date
    	casenum=Common.generateRandomTaxID();
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        String mem2 = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");


    }
    
    @Test
    public void test32946() throws Exception{
    	TestNGCustom.TCNo="32946";
    	log("//TC 32946-MA21 transaction match criteria 8 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get 1st Member ID -  no SSN
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        dob =fileSysdateCustom(ageDays1);
        adr1="226 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
        dep="00";
        aid="08";
        agency="MHO";
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"PETERS\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem = getCustomMemebr(xml);
        //Update member Elig end date
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'EligDataPanel_EndDate')]")).sendKeys("12312298");
		driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') ]")).click();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).clear();
		driver.findElement(By.xpath("//input[contains(@id,'AidEligDataPanel_EndDate')]")).sendKeys("12312298");
		Common.saveAll();
        log ("Member ID: "+mem+", Current aid cat: "+aid+", Elig end date: 12/31/2298");
        
    	//Get 2nd Member ID
    	otherid = Common.generateRandomTaxID();
        adr1="215 QUINCY AVE";
        city="BRAINTREE";
        zip="02184";
    	casenum=Common.generateRandomTaxID();

        
    	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\"MHO\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"PETERS\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem2 = getCustomMemebr(xml);
        Assert.assertTrue(mem.equals(mem2), "The second transaction member "+mem2+" is not same as the first member: "+mem);
        
		log("2nd member was successfully uploaded with file having id_medicaid blank. Aid cat 40 was added with end date 12/31/2299");
		
		//Check BP end date is extended and 2 aid cats are present
        memberSearch(mem);
		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "BP end date was not updated to 12/31/2299");
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_endDate")).click(); //Sort on aid category asc
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList:AidEligBean_ColHeader_aidDes")).click(); 
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'aidDes') ]")).getText().contains("08"), "Aid cat 08 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText().equals("12/31/2298"), "Aid cat 08 end date was not 12/31/2298");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).getText().contains("40"), "Aid cat 40 was not present");
		Assert.assertTrue(driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'1:') and contains(@id,'endDate') ]")).getText().equals("12/31/2299"), "Aid cat 40 end date was not 12/31/2299");

		log("Successfully validated on panels that aid cat 40 was added with end date 12/31/2299, and BP end date is updated to 12/31/2299");
    }
    
    @Test
    public void test32947() throws Exception{
    	TestNGCustom.TCNo="32947";
    	log("//TC 32947-MA21 updates demographic data for an inactive member Test Case");
    	
    	//Get the 2 members
    	sqlStatement="select t.id_medicaid TO_MID, f.id_medicaid FROM_MID from t_recip_link_xref l, t_re_base t, t_re_base f "+
    			"where l.sak_recip=t.sak_recip and l.sak_rcp_purged=f.sak_recip and f.cde_race='UNKNOW' and t.cde_race='UNKNOW' and t.num_ssn<>' ' and f.num_ssn<>' ' "+
    			"and l.cde_status='L'  "+
    			"and dte_processed between to_char(sysdate-90,'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD') "+
    			"and rownum < 2";
    	
    	colNames.add("FROM_MID");
    	colNames.add("TO_MID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String inactmem = colValues.get(0);
    	String actmem = colValues.get(1);
    	
        log("Inactive Member: "+inactmem);
        log("Active Member: "+actmem);

    	//get Inactive member details
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+inactmem;


    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
        String inactDoB = dob;
        
        log("Inactive member DoB: "+inactDoB);
        log("Inactive member Race: UNKNOW");

    	
		//Change dob and race (race would automatically update to WHITE as we seelcted UNKNOW in SQL)
    	int ageDays1=-10950; //30 y.o.
        dob =fileSysdateCustom(ageDays1);
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="40";
    	otherid = Common.generateRandomTaxID();
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        log("Inactive member new DoB: "+dob);
        log("Inactive member new Race: WHITE");

        
        if (!(Mid.equals(actmem)))
        	  Assert.assertTrue(false,"DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with new DoB and new race");

		//Verify member link is still there
        driver.findElement(By.xpath("//*[@id='MMISForm:MMISMenu:_MENUITEM_Search']")).click();
        driver.findElement(By.xpath("//*[@id='MMISForm:MMISMenu:_MENUITEM_Search']")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:RecipientSearchResultDataPanel_MedicaidID")).clear();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:RecipientSearchResultDataPanel_MedicaidID")).sendKeys(inactmem);
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:SEARCH")).click();
        Assert.assertTrue(driver.findElement(By.cssSelector("span.listTextBlack")).getText().equals("This Member ["+inactmem+" ] is linked to another member whose Member ID is: ["+actmem+" ]"),"Existing Member link did not present");
        log("Verified statement on panel: "+driver.findElement(By.cssSelector("span.listTextBlack")).getText());
        
        //Select Inactive member
        LoginCheck();
        Member.memberSearch(inactmem);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[19]/td[2]")).getText().equals("Inactive"),"Inactive member link status is not Inactive");
        log("The Link Status on the Member Information panel is displayed as 'Inactive', for member "+inactmem);
        //Check DoB and Race is not updated
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText().equals(inactDoB.substring(5, 7)+"/"+inactDoB.substring(8, 10)+"/"+inactDoB.substring(0, 4)),"DoB Mismatch. Check DoB might have been updated");
//      Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText().equals("UNKNOW"),"Race Mismatch. Check DoB might have been updated");
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_raceData"))).getFirstSelectedOption().getText().equals("UNKNOW"),"Race Mismatch");

        
        //Select Active member
        LoginCheck();
        Member.memberSearch(actmem);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[3]/table/tbody/tr[19]/td[2]")).getText().equals("Active"),"Active member link status is not Active");
        log("The Link Status on the Member Information panel is displayed as 'Active', for member "+actmem);
        //Check DoB and Race is updated
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[9]/td[2]")).getText().equals(dob.substring(5, 7)+"/"+dob.substring(8, 10)+"/"+dob.substring(0, 4)),"DoB Mismatch. Check DoB might not have been updated");
//      Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[12]/td[2]")).getText().equals("WHITE"),"Race Mismatch. Check DoB might not have been updated");
        Assert.assertTrue(new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_raceData"))).getFirstSelectedOption().getText().equals("WHITE"),"Race Mismatch");

        log("Successfully validated that DoB and Race are not updated on the inactive member.");
        log("Successfully validated that DoB and Race are  updated on the active member.");


    }
    
    @Test
    public void test32948() throws Exception{
    	TestNGCustom.TCNo="32948";
    	log("//TC 32948-MA21 updates demographic data for an inactive member Test Case");
    	
    	//Scenario1
    	log("**Scenario1**");
    	sqlStatement="select id_medicaid, e.dte_effective, e.dte_end, e.cde_agency from t_re_base b, t_re_aid_elig e "+
    			"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and b.num_ssn<>' ' "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and e.cde_agency in ('DSS', 'DYS') and e.sak_cde_aid=55 "+
    			"and dte_birth > to_char(add_months(sysdate,-12*19), 'YYYYMMDD') "+
    			"and not exists (select 1 from t_re_cust_status where sak_recip=b.sak_recip and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end) "+
    			"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_EFFECTIVE");
    	colNames.add("DTE_END");
    	colNames.add("CDE_AGENCY");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String mem = colValues.get(0);
    	String DTE_EFFECTIVE = colValues.get(1);
    	String DTE_END = colValues.get(2);
    	String CDE_AGENCY = colValues.get(3);
    	
    	DTE_EFFECTIVE=Common.convertDate(DTE_EFFECTIVE);
    	DTE_END=Common.convertDate(DTE_END);
    	
        log("Member: "+mem+" Aid cat DTE_EFFECTIVE: "+DTE_EFFECTIVE+" Aid cat DTE_END: "+DTE_END+" Aid cat CDE_AGENCY: "+CDE_AGENCY);
        
    	String cde_cat_care="";
    	if (CDE_AGENCY.equals("DSS"))
    		cde_cat_care="FOS";
    	else
    		cde_cat_care="DET";

    	DTE_EFFECTIVE=Common.convertSysdate();
    	DTE_END=Common.convertGivendatecustom(DTE_END, -2);

        log("We will add cde_cat_care: "+cde_cat_care+" category of care DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" CDE_AGENCY: "+CDE_AGENCY);

    	//get member details
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+mem;


    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);

		//Add Category of care
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="08";
    	otherid = Common.generateRandomTaxID();
        agency=CDE_AGENCY;
    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
    	DTE_END=datePanelToXML(DTE_END);
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);

        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with the above category of care values");

		//Verify Category of care is added
        LoginCheck();
        Member.memberSearch(mem);
        driver.findElement(By.linkText("Category Of Care")).click();
        //Sort on end date
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        
        String panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
        String panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
        String panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
        String panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
    	DTE_END=dateXMLtoPanel(DTE_END);

        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not added for CDE_AGENCY from XML on Category of care panel, for Scenario 1. Instead, "+panel_CDE_AGENCY+" was added");
        Assert.assertTrue(panel_cde_cat_care.equals(cde_cat_care), cde_cat_care+" was not added for cde_cat_care from XML on Category of care panel, for Scenario 1. Instead, "+panel_cde_cat_care+" was added");
        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(DTE_EFFECTIVE), DTE_EFFECTIVE+" was not added for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 1. Instead, "+panel_DTE_EFFECTIVE+" was added");
        Assert.assertTrue(panel_DTE_END.equals(DTE_END), DTE_END+" was not added for DTE_END from XML on Category of care panel, for Scenario 1. Instead, "+panel_DTE_END+" was added");

        log("Successfully verified that above category of care values were added on the panel.");
        
    	//Scenario3
    	log("**Scenario3**");
   	
        log("Member: "+mem+" Cde cat DTE_EFFECTIVE: "+DTE_EFFECTIVE+" Cde cat DTE_END: "+DTE_END+" Cde cat CDE_AGENCY: "+CDE_AGENCY+" Cde cat care: "+cde_cat_care);
        		
       //Create new dates and cat of care
    	DTE_EFFECTIVE=Common.convertGivendatecustom(DTE_EFFECTIVE, -2);
    	DTE_END=Common.convertGivendatecustom(DTE_END, 1);

        log("We will add cde_cat_care: "+cde_cat_care+" category of care DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" CDE_AGENCY: "+CDE_AGENCY);

		//Add Category of care
    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
    	DTE_END=datePanelToXML(DTE_END);
        
		 xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");

         Mid = getCustomMemebr(xml);

        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with the above category of care values");

		//Verify Category of care is added
        LoginCheck();
        Member.memberSearch(mem);
        driver.findElement(By.linkText("Category Of Care")).click();
        //Sort on end date
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        
        panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
        panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
        panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
        panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
    	DTE_END=dateXMLtoPanel(DTE_END);

        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not added for CDE_AGENCY from XML on Category of care panel, for Scenario 3. Instead, "+panel_CDE_AGENCY+" was added");
        Assert.assertTrue(panel_cde_cat_care.equals(cde_cat_care), cde_cat_care+" was not added for cde_cat_care from XML on Category of care panel, for Scenario 3. Instead, "+panel_cde_cat_care+" was added");
        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(DTE_EFFECTIVE), DTE_EFFECTIVE+" was not added for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 3. Instead, "+panel_DTE_EFFECTIVE+" was added");
        Assert.assertTrue(panel_DTE_END.equals(DTE_END), DTE_END+" was not added for DTE_END from XML on Category of care panel, for Scenario 3. Instead, "+panel_DTE_END+" was added");

        log("Successfully verified that above category of care values were not added on the panel.");
        
    	//Scenario4
    	log("**Scenario4**");
   	
        log("Member: "+mem+" Cde cat DTE_EFFECTIVE: "+DTE_EFFECTIVE+" Cde cat DTE_END: "+DTE_END+" Cde cat CDE_AGENCY: "+CDE_AGENCY+" Cde cat care: "+cde_cat_care);
        
        //Store previous date EFF, Date End and Cat of Care
        String PREV_DTE_EFFECTIVE = DTE_EFFECTIVE;
        String PREV_DTE_END = DTE_END;
        String PREV_cde_cat_care = cde_cat_care;
        		
       //Create new dates and cat of care
    	DTE_EFFECTIVE=Common.convertGivendatecustom(DTE_EFFECTIVE, 3);
    	DTE_END=Common.convertGivendatecustom(DTE_END, -3);
    	
        if (cde_cat_care.equals("FOS"))
    		cde_cat_care="MAO";
    	else
    		cde_cat_care="RES";

        log("We will add cde_cat_care: "+cde_cat_care+" category of care DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" CDE_AGENCY: "+CDE_AGENCY);

		//Add Category of care
    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
    	DTE_END=datePanelToXML(DTE_END);
        
		 xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");

         Mid = getCustomMemebr2(xml);

        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with the above category of care values");
        
        //Verify Warning message
	    String errCde="2243";
	    String errMsg="Category of Care segment cannot overlap existing segment";
	    
	    if (!(result_type.equals("W")))
  		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);
	    
//	    if (!(errorCode.equals(errCde)))
//  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);

  		Assert.assertTrue(errcds.contains(errCde), "Did not get Error Code "+errCde+". See logs for the error codes returned");
  		Assert.assertTrue(errmsgs.contains(errMsg), "Did not get Error Code "+errMsg+". See logs for the error messages returned");

		
//	    if (!(errorMessage.equals(errMsg)))
//  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
      
	    log("Successfully got Warning: "+result_type+" "+errCde+" "+errMsg);

		//Verify Category of care is not added
        LoginCheck();
        Member.memberSearch(mem);
        driver.findElement(By.linkText("Category Of Care")).click();
        //Sort on end date
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        
        panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
        panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
        panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
        panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
    	DTE_END=dateXMLtoPanel(DTE_END);

        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not present for CDE_AGENCY on Category of care panel, for Scenario 4. Instead, "+panel_CDE_AGENCY+" was added");
        Assert.assertTrue(panel_cde_cat_care.equals(PREV_cde_cat_care), PREV_cde_cat_care+" was not present for cde_cat_care from XML on Category of care panel, for Scenario 4. Instead, "+panel_cde_cat_care+" was added");
        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(PREV_DTE_EFFECTIVE), PREV_DTE_EFFECTIVE+" was not present for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 4. Instead, "+panel_DTE_EFFECTIVE+" was added");
        Assert.assertTrue(panel_DTE_END.equals(PREV_DTE_END), PREV_DTE_END+" was not present for DTE_END from XML on Category of care panel, for Scenario 4. Instead, "+panel_DTE_END+" was added");

        log("Successfully verified that above category of care values were not added on the panel.");
        
    	//Scenario2
    	log("**Scenario2**");
    	sqlStatement="select id_medicaid, c.dte_effective, c.dte_end, o.cde_agency, cde_off_status from t_re_base b, t_re_cust_status c, t_re_off_stat o, t_re_aid_elig e "+
    			"where b.sak_recip=c.sak_recip and ind_active='Y' and dte_death='0' "+
    			"and c.dte_end between to_char(add_months(sysdate, -12*2), 'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD') "+
    			"and c.sak_off_stat=o.sak_off_stat "+
    			"and e.sak_recip=b.sak_recip and e.cde_status1 <> 'H' and e.cde_agency=o.cde_agency "+
    			"and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and dte_birth > to_char(add_months(sysdate, -12*19),'YYYYMMDD') "+
    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_effective > c.dte_end and sak_off_stat=c.sak_off_stat) "+
    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_effective > c.dte_end and sak_off_stat <> c.sak_off_stat) "+
    			"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_EFFECTIVE");
    	colNames.add("DTE_END");
    	colNames.add("CDE_AGENCY");
    	colNames.add("CDE_OFF_STATUS");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	mem = colValues.get(0);
    	DTE_EFFECTIVE = colValues.get(1);
    	DTE_END = colValues.get(2);
    	CDE_AGENCY = colValues.get(3);
    	cde_cat_care = colValues.get(4);

    	DTE_EFFECTIVE=Common.convertDate(DTE_EFFECTIVE);
    	DTE_END=Common.convertDate(DTE_END);
    	
        log("Member: "+mem+" category of care:"+cde_cat_care+" DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" Aid cat CDE_AGENCY: "+CDE_AGENCY);
        
    	DTE_END=Common.convertSysdatecustom(2);
    	
        log("We will update cde_cat_care DTE_END: "+DTE_END);

    	//get member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+mem;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);

		//Add Category of care
    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="08";
    	otherid = Common.generateRandomTaxID();
        agency=CDE_AGENCY;
    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
    	DTE_END=datePanelToXML(DTE_END);
        
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");

       Mid = getCustomMemebr(xml);

        
        if (!(Mid.equals(mem)))
        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with the above category of care values");

		//Verify Category of care end date is updated.
        LoginCheck();
        Member.memberSearch(mem);
        driver.findElement(By.linkText("Category Of Care")).click();
        //Sort on end date
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
        
        panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
        panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
        panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
        panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
    	DTE_END=dateXMLtoPanel(DTE_END);

        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not found for CDE_AGENCY from XML on Category of care panel, for Scenario 2. Instead, "+panel_CDE_AGENCY+" was found");
        Assert.assertTrue(panel_cde_cat_care.equals(cde_cat_care), cde_cat_care+" was not found for cde_cat_care from XML on Category of care panel, for Scenario 2. Instead, "+panel_cde_cat_care+" was found");
        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(DTE_EFFECTIVE), DTE_EFFECTIVE+" was not found for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 2. Instead, "+panel_DTE_EFFECTIVE+" was found");
        Assert.assertTrue(panel_DTE_END.equals(DTE_END), DTE_END+" was not updated for DTE_END from XML on Category of care panel, for Scenario 2. Instead, "+panel_DTE_END+" was present");

        log("Successfully verified that above category of care values were found on the panel, and date end was updated.");
        
//    	//Scenario3
//    	log("**Scenario3**");
//    	sqlStatement="select id_medicaid, c.dte_effective, c.dte_end, o.cde_agency, cde_off_status, e.dte_effective as ELIG_DTE_EFFECTIVE from t_re_base b, t_re_cust_status c, t_re_off_stat o, t_re_aid_elig e "+
//    			"where b.sak_recip=c.sak_recip and ind_active='Y' and dte_death='0' "+
//    			"and c.dte_end between to_char(add_months(sysdate, -12*2), 'YYYYMMDD') and to_char(sysdate, 'YYYYMMDD') "+
//    			"and c.sak_off_stat=o.sak_off_stat "+
//    			"and e.sak_recip=b.sak_recip and e.cde_status1 <> 'H' and e.cde_agency=o.cde_agency "+
//    			"and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
//    			"and dte_birth > to_char(add_months(sysdate, -12*19),'YYYYMMDD') "+
//    			"and c.dte_effective > e.dte_effective "+
//    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_effective=to_char(to_date(c.dte_end, 'YYYYMMDD')+1,'YYYYMMDD') and sak_off_stat=c.sak_off_stat) "+
//    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_effective=to_char(to_date(c.dte_end, 'YYYYMMDD')+1,'YYYYMMDD') and sak_off_stat <> c.sak_off_stat) "+
//    			"and not exists (select 1 from t_re_cust_status where sak_recip=c.sak_recip and dte_end=to_char(to_date(c.dte_effective,'YYYYMMDD')-1, 'YYYYMMDD')) "+
//    			"and rownum < 2";
//
//    	
//    	colNames.add("ID_MEDICAID");
//    	colNames.add("DTE_EFFECTIVE");
//    	colNames.add("DTE_END");
//    	colNames.add("CDE_AGENCY");
//    	colNames.add("CDE_OFF_STATUS");
//    	colNames.add("ELIG_DTE_EFFECTIVE");
//    	colValues = Common.executeQuery(sqlStatement, colNames);
//    	mem = colValues.get(0);
//    	DTE_EFFECTIVE = colValues.get(1);
//    	DTE_END = colValues.get(2);
//    	CDE_AGENCY = colValues.get(3);
//    	cde_cat_care = colValues.get(4);
//    	String ELIG_DTE_EFFECTIVE = colValues.get(5);
//
//    	DTE_EFFECTIVE=Common.convertDate(DTE_EFFECTIVE);
//    	DTE_END=Common.convertDate(DTE_END);
//    	
//        log("Member: "+mem+" category of care:"+cde_cat_care+" DTE_EFFECTIVE: "+DTE_EFFECTIVE+" category of care DTE_END: "+DTE_END+" Aid cat CDE_AGENCY: "+CDE_AGENCY);
//        
//        DTE_EFFECTIVE=Common.convertGivendatecustom(DTE_EFFECTIVE, -2);
//    	DTE_END=Common.convertSysdatecustom(2);
//    	
//        log("We will update cde_cat_care DTE_EFFECTIVE: "+DTE_EFFECTIVE+" DTE_END: "+DTE_END);
//
//    	//get member details
//    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
//    			"where b.id_medicaid = "+mem;
//
//    	colNames.add("ID_MEDICAID"); //0
//    	colNames.add("NUM_SSN");  	 //1
//    	colNames.add("DTE_BIRTH");   //2
//    	colNames.add("NAM_FIRST");   //3
//    	colNames.add("NAM_LAST");    //4
//    	colNames.add("ADR_STREET_1");//5
//    	colNames.add("ADR_CITY");    //6
//    	colNames.add("ADR_ZIP_CODE");//7
//    	colValues = Common.executeQuery(sqlStatement, colNames);
//    	
//        ssn=colValues.get(1);
//        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
//    	fname=colValues.get(3);
//    	lastName = colValues.get(4);
//        adr1=colValues.get(5);
//        city=colValues.get(6);
//        zip=colValues.get(7);
//
//		//Add Category of care
//    	casenum= Common.generateRandomTaxID();
//        dep="00";
//        aid="08";
//    	otherid = Common.generateRandomTaxID();
//        agency=CDE_AGENCY;
//    	DTE_EFFECTIVE=datePanelToXML(DTE_EFFECTIVE);
//    	DTE_END=datePanelToXML(DTE_END);
//        
//		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
//				"id_other=\""+otherid+"\" id_source=\""+agency+"\" />\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
//				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />"+
//				" <categoryofcare cde_cat_care=\""+cde_cat_care+"\" dte_effective=\""+DTE_EFFECTIVE+"\" dte_end=\""+DTE_END+"\"  />\n</EligibilityRequest>");
//
//       Mid = getCustomMemebr(xml);
//
//        
//        if (!(Mid.equals(mem)))
//        	  Assert.assertTrue(false,"For Scenario 1, DB Active Member "+mem+" not the same as uploaded member "+Mid);
//        
//        log("Successful upload and download of I/P file with the above category of care values");
//
//		//Verify Category of care end date is updated.
//        LoginCheck();
//        Member.memberSearch(mem);
//        driver.findElement(By.linkText("Category Of Care")).click();
//        //Sort on end date
//        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'effectiveDate') ]")).click();
//        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
//        driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'endDate') ]")).click();
//        
//        panel_CDE_AGENCY = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'agencyCode') ]")).getText();
//        panel_cde_cat_care = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'offStatusCode') ]")).getText();
//        panel_DTE_EFFECTIVE = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'effectiveDate') ]")).getText();
//        panel_DTE_END = driver.findElement(By.xpath("//*[contains(@id,'CategoryOfCarePanel') and contains(@id,'0:') and contains(@id,'endDate') ]")).getText();
//    	DTE_EFFECTIVE=dateXMLtoPanel(DTE_EFFECTIVE);
//    	DTE_END=dateXMLtoPanel(DTE_END);
//
//        Assert.assertTrue(panel_CDE_AGENCY.equals(CDE_AGENCY), CDE_AGENCY+" was not found for CDE_AGENCY from XML on Category of care panel, for Scenario 3. Instead, "+panel_CDE_AGENCY+" was found");
//        Assert.assertTrue(panel_cde_cat_care.equals(cde_cat_care), cde_cat_care+" was not found for cde_cat_care from XML on Category of care panel, for Scenario 3. Instead, "+panel_cde_cat_care+" was found");
//        Assert.assertTrue(panel_DTE_EFFECTIVE.equals(DTE_EFFECTIVE), DTE_EFFECTIVE+" was not found for DTE_EFFECTIVE from XML on Category of care panel, for Scenario 3. Instead, "+panel_DTE_EFFECTIVE+" was found");
//        Assert.assertTrue(panel_DTE_END.equals(DTE_END), DTE_END+" was not updated for DTE_END from XML on Category of care panel, for Scenario 3. Instead, "+panel_DTE_END+" was present");
//
//        log("Successfully verified that above category of care values were found on the panel, and date effective and date end was updated.");

    }
    
    @Test
    public void test32949() throws Exception{
    	TestNGCustom.TCNo="32949";
    	log("//TC 32949-Batch Error Message - 2347 Test Case");
    	
    	int ageDays1=-10950; //30 y.o.
    	
    	//Get 1st Member ID -  no SSN
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        dob =fileSysdateCustom(ageDays1);
        adr1="19 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="SSA";
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_ethnicity=\"AMER\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"PETERS\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem = getCustomMemebr(xml);
        log ("Member is:"+mem+ " cde_ethnic=AMER for agency=SSA was entered in XML");
        
      //Verify Warning message
	    String errCde="2347";
	    String errMsg="Agency is not authorized to submit data in this field: cde_ethnicity";
	    
	    if (!(result_type.equals("W")))
  		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
      
	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);
	    
        //Check Cde_ethnicity is blank
	    
        memberSearch(mem);
		String ethnic=driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[13]/td[2]")).getText();
		Assert.assertTrue(ethnic.equals(" "), "Ethnicity was updated to "+ethnic);
        log ("Successfully validated that Ethnicity is blank");
    }
    
    @Test
    public void test32950() throws Exception{
    	TestNGCustom.TCNo="32950";
    	log("//TC 32950-Batch Error Message - 2039, 2042 Test Case");
    	
    	int ageDays1=-365; //1 y.o.
    	int eligDays = -400; //before DoB
    	String elig_start = fileSysdateCustom(eligDays);
    	String elig_end = fileSysdateCustom(eligDays+2);
    	
    	//Get 1st Member ID -  no SSN
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        dob =fileSysdateCustom(ageDays1);
        adr1="15 FULLER RD";
        city="FOXBORO";
        zip="02035";
        dep="00";
        aid="08";
        agency="MHO";
        
		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\" \" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_ethnicity=\"AMER\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\"PETERS\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"08\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+elig_start+"\" dte_end_elig=\""+elig_end+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String mem = getCustomMemebr(xml);
        log ("Member is:"+mem+ " Following was entered in XML. DoB:"+dob+" elig_start:"+elig_start+" elig_end:"+elig_end);
        
        //Verify Error messages
		String fileName=tempDirPath+Common.fileName();
        String output=FileUtils.readFileToString(new File(fileName));
//        log(output);
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
//        for(int i=0;i<l;i++)
//        	System.out.println("valuesInQuotes["+i+"] "+valuesInQuotes[i]);
        
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        errorMessage=valuesInQuotes[l-1].trim();
        errorCode=valuesInQuotes[l-2].trim();
        
        //Validate 1st error message
	    String errCde="2039";
	    String errMsg="Eligibility begin date cannot be before date of birth";
	    
	    if (!(result_type.equals("E")))
  		Assert.assertTrue(false, "Did not get Result Type E. Instead got Result Type "+result_type);

	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
      
	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);
	    
	    //Validate 2nd error message
        errorMessage=valuesInQuotes[l-3].trim();
        errorCode=valuesInQuotes[l-4].trim();
        
	    errCde="2042";
	    errMsg="Eligibility end date cannot be before date of birth";
	    
	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
	    
	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);
	    
	    //Check Member id is blank
  		Assert.assertTrue(id_medicaid.equals(" "), "Did not get Member id as Blank. Instead got "+id_medicaid);
	    log("Successfully validated that Member id is Blank in the response file");

    }
    
    @Test
    public void test32951() throws Exception{
    	TestNGCustom.TCNo="32951";
    	log("//TC 32951-Batch Error Message - 2040 Test Case");
    	
    	//Get the members with DoD
    	sqlStatement="select id_medicaid, dte_death from t_re_base "+
    			"where ind_active='Y' and dte_death > to_char(add_months(sysdate, -8),'YYYYMMDD') "+
    			"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_DEATH");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String expiredMem = colValues.get(0);
    	String DTE_DEATH = colValues.get(1);
    	DTE_DEATH=Common.convertDate(DTE_DEATH);
    	
        log("Expired Member: "+expiredMem);
        log("DTE_DEATH: "+DTE_DEATH);
        
        //Select Expired member and get current BP and Aid cat
        LoginCheck();
        Member.memberSearch(expiredMem);
        String oldBP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String oldaidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();        

    	//get expired member details
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+expiredMem;


    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
    	

    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="40";
    	otherid = Common.generateRandomTaxID();
        agency="MHO";
        beginDate=fileSysdateCustom(0);
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        
        
        if (!(Mid.equals(expiredMem)))
        	  Assert.assertTrue(false,"DB Member "+expiredMem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with Elig Effective date = "+Common.convertSysdate());

        //Verify Error messages
		String fileName=tempDirPath+Common.fileName();
        String output=FileUtils.readFileToString(new File(fileName));

        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;

        
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        errorMessage=valuesInQuotes[l-1].trim();
        errorCode=valuesInQuotes[l-2].trim();
        
        //Verify Error message
  	    String errCde="2040";
  	    String errMsg="Eligibility begin date cannot be after date of death";
  	    
  	    if (!(result_type.equals("E")))
    		Assert.assertTrue(false, "Did not get Result Type E. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);

        //Select Expired member
        LoginCheck();
        Member.memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[10]/td[2]")).getText().equals(DTE_DEATH),"DTE_DEATH is not displayed on panel");
        log("The DTE_DEATH is successfully displayed on the panel");
        //Check Elig is not added
        String BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        Assert.assertFalse(BP.contains("12/31/2299"),"BP was added. It is "+BP);
        Assert.assertFalse(aidCat.contains("12/31/2299"),"Aid Cat was added. It is "+aidCat);
        Assert.assertTrue(BP.equals(oldBP),"BP was changed. It is "+BP);
        Assert.assertTrue(aidCat.equals(oldaidCat),"Aid Cat was changed. It is "+aidCat);
        log("Verified that Elig is not added");

        
    }
    
    @Test
    public void test32952() throws Exception{
    	TestNGCustom.TCNo="32952";
    	log("//TC 32952-Batch Error Message - 2043 Test Case");
    	
    	//Get the members with DoD
    	sqlStatement="select id_medicaid, dte_death from t_re_base "+
    			"where ind_active='Y' and dte_death > to_char(add_months(sysdate, -8),'YYYYMMDD') "+
    			"and rownum < 2";
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("DTE_DEATH");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String expiredMem = colValues.get(0);
    	String DTE_DEATH = colValues.get(1);
    	DTE_DEATH=Common.convertDate(DTE_DEATH);
    	
        log("Expired Member: "+expiredMem);
        log("DTE_DEATH: "+DTE_DEATH);
        
        //Select Expired member and get current BP and Aid cat
        LoginCheck();
        Member.memberSearch(expiredMem);
        String oldBP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String oldaidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();        

    	//get expired member details
    	
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code from T_RE_BASE b "+
    			"where b.id_medicaid = "+expiredMem;


    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colNames.add("ADR_STREET_1");//5
    	colNames.add("ADR_CITY");    //6
    	colNames.add("ADR_ZIP_CODE");//7
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
        adr1=colValues.get(5);
        city=colValues.get(6);
        zip=colValues.get(7);
    	

    	casenum= Common.generateRandomTaxID();
        dep="00";
        aid="40";
    	otherid = Common.generateRandomTaxID();
        agency="MHO";
        beginDate=Common.convertGivendatecustom(DTE_DEATH, -2);
        beginDate=datePanelToXML(beginDate);
        String elig_end = "2298-12-31";

		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" dte_end_elig=\""+elig_end+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);        
        
        if (!(Mid.equals(expiredMem)))
        	  Assert.assertTrue(false,"DB Member "+expiredMem+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with Elig Effective date = "+dateXMLtoPanel(beginDate)+" End Date = "+dateXMLtoPanel(elig_end));

        //Verify Error messages
		String fileName=tempDirPath+Common.fileName();
        String output=FileUtils.readFileToString(new File(fileName));

        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;

        
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        errorMessage=valuesInQuotes[l-1].trim();
        errorCode=valuesInQuotes[l-2].trim();
        
        //Verify Error message
  	    String errCde="2043";
  	    String errMsg="Eligibility end date cannot be after date of death";
  	    
  	    if (!(result_type.equals("E")))
    		Assert.assertTrue(false, "Did not get Result Type E. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);

        //Select Expired member
        LoginCheck();
        Member.memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[10]/td[2]")).getText().equals(DTE_DEATH),"DTE_DEATH is not displayed on panel");
        log("The DTE_DEATH is successfully displayed on the panel");
        //Check Elig is not added
        String BP=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans"))).getFirstSelectedOption().getText();
        String aidCat=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        Assert.assertFalse(BP.contains("12/31/2298"),"BP was added. It is "+BP);
        Assert.assertFalse(aidCat.contains("12/31/2298"),"Aid Cat was added. It is "+aidCat);
        Assert.assertTrue(BP.equals(oldBP),"BP was changed. It is "+BP);
        Assert.assertTrue(aidCat.equals(oldaidCat),"Aid Cat was changed. It is "+aidCat);
        log("Verified that Elig is not added");

        
    }
    
    @Test
    public void test32953() throws Exception{
    	TestNGCustom.TCNo="32953";
    	log("//TC 32953-Batch Error Message - 2333 Test Case");
    	//Re-run if failing for error - Aid cat was not end dated. Current row is ... Add member to exclusion list in below sql before re-running
    	//This is the aid cat to be added everytime    	
        aid="D1";
    	
    	//Get the member which doesn't have above aid cat
    	sqlStatement="select b.id_medicaid, c.num_case, x.dep_num, ce.cde_aid_category, x1.dep_num DIFF_DEP, ce1.cde_aid_category DIFF_AID "+
    			"from t_re_base b, t_re_aid_elig e, t_re_case_xref x, t_re_case c, t_re_case_xref x1, t_re_aid_elig e1, T_CDE_AID ce, t_cde_aid ce1 "+
    			"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and b.num_ssn <> ' ' "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and e.sak_aid_elig=x.sak_aid_elig and e.sak_recip=x.sak_recip and x.sak_case=c.sak_case "+
    			"and e.sak_cde_aid <> 245 and e.cde_agency='MHO' "+
    			"and dte_birth > to_char(add_months(sysdate, -12*60), 'YYYYMMDD') "+
    			"and x1.sak_case=x.sak_case and x1.dep_num <> x.dep_num and x1.sak_aid_elig=e1.sak_aid_elig and x1.sak_recip <> b.sak_recip "+
    			"and e1.sak_cde_aid <> e.sak_cde_aid "+
    			"and ce.sak_cde_aid = e.sak_cde_aid and ce1.sak_cde_aid = e1.sak_cde_aid "+
    			"and b.id_medicaid not in ( '100207238419', '100036799185', '100204534521', '100051593752', '100051862454', '100232014215', '100008688598') "+
				"and b.sak_recip > dbms_random.value * 6300000 " +   			
				"and rownum < 2";
    	    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_CASE");
    	colNames.add("DEP_NUM");
    	colNames.add("CDE_AID_CATEGORY");
    	colNames.add("DIFF_DEP");
    	colNames.add("DIFF_AID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String memBer = colValues.get(0);
        String NUM_CASE=colValues.get(1);
        String DEP_NUM=colValues.get(2);
        String CDE_AID_CATEGORY=colValues.get(3);
        String DIFF_DEP=colValues.get(4);
        String DIFF_AID=colValues.get(5);

        log("Member: "+memBer);
        log("We will use this for 2333 Aid cat/case/dep cumbo error NUM_CASE:"+NUM_CASE+" Dependent number:"+DIFF_DEP+" Aid CAT:"+DIFF_AID);
      
    	//get member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);

    	casenum= Common.generateRandomTaxID();
        dep="00";
    	otherid = Common.generateRandomTaxID();
        agency="MHO";
        adr1="19 FULLER RD";
        city="FOXBORO";
        zip="02035";
        String elig_end = fileSysdateCustom(0);
        String elig_end_dt_UI=Common.convertSysdate();
        
        //get current aid cat, to end it in xml
        LoginCheck();
        Member.memberSearch(memBer);
        String curr_aid_row =new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        if (curr_aid_row.contains(DIFF_AID)) { //If current row is DIFF_AID, select the next active one
        	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).selectByIndex(1);
        	curr_aid_row= new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        }
        String curr_aid =curr_aid_row.substring(0,2);

        log("We will use this to end existing aid cat. NUM_CASE:"+casenum+" Dependent number:"+dep+" Aid CAT:"+curr_aid);

		String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
				"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
				"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+NUM_CASE+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+curr_aid+"\" cde_elig_status=\"1\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\"01\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" dte_end_elig=\""+elig_end+"\" family_size=\"07\" />"+
				"<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+DIFF_AID+"\" cde_elig_status=\"1\" cde_line=\""+DIFF_DEP+"\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>");

        String Mid = getCustomMemebr(xml);        
        
        //Verify Warning message
  	    String errCde="2333";
  	    String errMsg="Case/Aid Cat/Dep NUM combo already exists on DB for a different Member ID";
  	    
  	    if (!(result_type.equals("W")))
    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);

        //Verify that current member aid cat is end dated.
        LoginCheck();
        Member.memberSearch(memBer);
        String postRun_curr_aid_row =new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        if (postRun_curr_aid_row.contains(DIFF_AID)) { //If current row is DIFF_AID, select the next active one
        	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).selectByIndex(1);
        	postRun_curr_aid_row= new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        }
        
        Assert.assertTrue((postRun_curr_aid_row.contains(curr_aid) && postRun_curr_aid_row.contains(elig_end_dt_UI)), "Aid cat was not end dated. Current row is "+postRun_curr_aid_row);
        log("Verified that current aid cat was ended");
        
        //Verify new Aid cat is added
        boolean aidFound=false;
		List<WebElement> list = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getOptions();
		for (WebElement j:list){
			String currEligRow = j.getText();
			if (currEligRow.contains(DIFF_AID)) {
				aidFound=true;
				break;
			}
		}
        Assert.assertTrue(aidFound,"Aid Cat "+DIFF_AID+" was not added");
        log("Verified that Aid Cat "+DIFF_AID+" was added");
      

    }
    
    @Test
    public void test32954() throws Exception{
    	TestNGCustom.TCNo="32954";
    	log("//TC 32954-Demographic updates hierarchy Test Case");
    	
    	//This is the aid cat to be added everytime    	
        aid="D1";
    	
    	//Get the member which doesn't have above aid cat
    	sqlStatement="select /*+RULE*/ b.id_medicaid, o.address_line_1, o.adr_city, o.adr_zip_code from t_re_base b, t_re_aid_elig e, t_re_other_address o "+
    			"where b.sak_recip=e.sak_recip and ind_active='Y' and dte_death='0' and b.num_ssn<>' ' "+
    			"and b.sak_recip=o.sak_recip and e.cde_status1 <> 'H' and e.cde_agency='DSS' "+
    			"and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and o.cde_agency='DSS' and o.cde_addr_usage='MR' and o.address_line_2=' ' "+
    			"and not exists (Select 1 from t_re_address prev where prev.sak_recip = b.sak_recip) "+
				"and not exists (Select 1 from t_re_aid_elig e1, t_cde_aid aid where e1.sak_recip = b.sak_recip and e1.sak_cde_aid=aid.sak_cde_aid  and aid.cde_aid_category = '"+aid+"') " +
    			"and rownum < 2";
    	
    	System.out.println(sqlStatement);
    	
    	colNames.add("ID_MEDICAID");
    	colNames.add("ADDRESS_LINE_1");
    	colNames.add("ADR_CITY");
    	colNames.add("ADR_ZIP_CODE");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String memBer = colValues.get(0);
        String curr_adr1=colValues.get(1);
        String curr_city=colValues.get(2);
        String curr_zip=colValues.get(3);
    	
        log("Member: "+memBer);
        log("Current Address: "+curr_adr1+" "+curr_city+" "+curr_zip);
   
    	//get member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);

    	casenum= Common.generateRandomTaxID();
        dep="00";
    	otherid = Common.generateRandomTaxID();
        agency="HIX";
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        beginDate = fileSysdateCustom(-2);
        String addedBeginDate = beginDate; //this is stored because beginDate gets reset to "" after file run

        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);      
        
        if (!(Mid.equals(memBer)))
        	  Assert.assertTrue(false,"DB Member "+memBer+" not the same as uploaded member "+Mid);
        
        log("Successful upload and download of I/P file with agency = "+agency+", Address = "+adr1+" "+city+" "+zip);

        //Verify Warning messages
        
//        //Verify Error message
//  	    String errCde="2043";
//  	    String errMsg="Eligibility end date cannot be after date of death";
//  	    
//  	    if (!(result_type.equals("W")))
//    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);
//
//  	    if (!(errorCode.equals(errCde)))
//    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
//  		
//  	    if (!(errorMessage.equals(errMsg)))
//    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
//        
//  	    log("Successfully got Error: "+result_type+" "+errorCode+" "+errorMessage);

        //Select  member
        LoginCheck();
        Member.memberSearch(Mid);
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[4]/td[2]")).getText().equals(curr_adr1),"Address Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[7]/td[2]")).getText().equals(curr_city),"City Mismatch");
        Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientInformationBean_DataPanel']/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[9]/td[2]")).getText().equals(curr_zip+"-0000"),"Zip Mismatch");        //Check Elig is added
        //Verify Aid cat is added
        boolean aidFound=false;
		List<WebElement> list = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getOptions();
		for (WebElement j:list){
			String currEligRow = j.getText();
			if ((currEligRow.contains(aid) && currEligRow.contains(dateXMLtoPanel(addedBeginDate)) && currEligRow.contains("12/31/2299"))) {
				aidFound=true;
				break;
			}
		}
        Assert.assertTrue(aidFound,"Aid Cat "+aid+" was not found");
        log("Verified that Aid Cat "+aid+" was added");
        //Verify member address panel
        driver.findElement(By.linkText("Member Address")).click();
        //sort on Address indicator
        driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'addressZip') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'addressInd') ]")).click();
        driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'addressInd') ]")).click();
        
        String panel_adr_type = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'addressInd') ]")).getText();
        String panel_adr_source = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'cdeAgency') ]")).getText();
        String panel_adr_line_1 = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'addressLine1') ]")).getText();
        String panel_city = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'addressCity') ]")).getText();
        String panel_zip = driver.findElement(By.xpath("//*[contains(@id,'OtherAddressPanel') and contains(@id,'0:') and contains(@id,'addressZip') ]")).getText();

        Assert.assertTrue(panel_adr_type.equals("MR"), "MR is not the address type on member address panel. It is "+panel_adr_type);
        Assert.assertTrue(panel_adr_source.equals("DSS"), "DSS is not the agency on member address panel. It is "+panel_adr_source);
        Assert.assertTrue(panel_adr_line_1.equals(curr_adr1), curr_adr1+" is not the address line 1 on member address panel. It is "+panel_adr_line_1);
        Assert.assertTrue(panel_city.equals(curr_city), curr_city+" is not the city on member address panel. It is "+panel_city);
        Assert.assertTrue(panel_zip.equals(curr_zip), curr_zip+" is not the zip code on member address panel. It is "+panel_zip);
        
        log("Verified that MR address was not updated on member address panel");
        
        //Verify previous address panel.
        Common.cancelAll();
        driver.findElement(By.linkText("Previous Data - Address")).click();
        String no_rec_found = driver.findElement(By.id("MMISForm:MMISBodyContent:PreviousDataAddressPanel:AddressNoRecordsMessage")).getText();
        Assert.assertTrue(no_rec_found.equals("***No records found***"), "***No records found*** message was not found on previous address panel. Instead "+no_rec_found+"was");
        
        log("Verified that no address present on previous address panel");

    }
    
    @Test
    public void test32955a() throws Exception{
    	TestNGCustom.TCNo="32955a";
    	log("//TC 32955a-Crossed MID detected - original MID existing Test Case");
    	
    	
    	//Get Crossed_memBer
    	sqlStatement="select b.id_medicaid, c.num_case, x.dep_num, ce.cde_aid_category, e.cde_agency, o.agency_id "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where b.ind_active = 'Y' and b.dte_death = 0 and l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and rownum < 2";
        	
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_CASE");
    	colNames.add("DEP_NUM");
    	colNames.add("CDE_AID_CATEGORY");
    	colNames.add("CDE_AGENCY");
    	colNames.add("AGENCY_ID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String Crossed_memBer = colValues.get(0);
        String NUM_CASE=colValues.get(1);
        String DEP_NUM=colValues.get(2);
        String CDE_AID_CATEGORY=colValues.get(3);
        String CDE_AGENCY=colValues.get(4);
        String AGENCY_ID=colValues.get(5);
    	   
    	//get crossed member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+Crossed_memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
    	
        //Get crossed member's current Elig
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		String current_aid_crossed = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
		
		Assert.assertTrue(current_aid_crossed.contains(CDE_AID_CATEGORY), "DB returned aid cat may not be the member's first aid cat");
		
		log("Crossed Member ID:"+Crossed_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_crossed);
		
		//Get the 2nd original member
    	sqlStatement="select b.id_medicaid "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.dte_end < to_char(sysdate, 'YYYYMMDD') "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and exists (select num_ssn from t_re_base b1 where b1.num_ssn = b.num_ssn group by b1.num_ssn having count(b1.num_ssn) = 1) "+
    			"and ce.cde_aid_category<>'"+CDE_AID_CATEGORY+"' "+
    			"and rownum < 2";
    	    	    	
    	colNames.add("ID_MEDICAID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String original_memBer = colValues.get(0);
    	
    	//get original member details
    	sqlStatement="select  b.num_ssn, b.dte_birth, b.nam_last, b.nam_first from T_RE_BASE b "+
    			"where b.id_medicaid = "+original_memBer;
    	
    	colNames.add("NUM_SSN");  	 //0
    	colNames.add("DTE_BIRTH");   //1
    	colNames.add("NAM_LAST");    //2
    	colNames.add("NAM_FIRST");   //3
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//This will update SSN, DOB, Lastname and FirstName in the I/P file
        ssn=colValues.get(0);
        dob =colValues.get(1).substring(0, 4)+"-"+colValues.get(1).substring(4, 6)+"-"+colValues.get(1).substring(6, 8);
    	lastName = colValues.get(2);
    	fname=colValues.get(3);
    	
        //Get original member's current Elig
    	LoginCheck();
        Member.memberSearch(original_memBer);
		String current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
				
		log("Original Member ID:"+original_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_original+" Last Name:"+lastName+" First Name:"+fname+" DoB:"+dob);
		
		//Create I/P file
    	casenum= NUM_CASE;
        dep=DEP_NUM;
    	otherid = AGENCY_ID;
        agency=CDE_AGENCY;
        aid=CDE_AID_CATEGORY;
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        beginDate = fileSysdateCustom(0);
        String addedBeginDate = beginDate; //this is stored because beginDate gets reset to "" after file run
        String addedlastName = lastName; //this is stored because lastName gets reset to P after file run

        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);      
        
        if (!(Mid.equals(original_memBer)))
        	  Assert.assertTrue(false,"Original Member "+original_memBer+" not the same as Member received in response file "+Mid);
        
        log("Successful upload and download of I/P file Original Member SSN:"+ssn+" Last Name:"+addedlastName+" First Name:"+fname+" DoB:"+dob);
        log("The response File contains the Original Member ID:"+original_memBer);

        //Verify Warning messages
        
  	    String errCde="2388";
  	    String errMsg="Warning Member ID on txn is crossed with id_medicaid retrieved";
  	    
  	    if (!(result_type.equals("W")))
    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

        //Check that Crossed member's current Elig is gone
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory")).size();
		Assert.assertTrue(size==0, "Original member still has Elig. Maybe the Elig was not historied.");
		size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans")).size();
		Assert.assertTrue(size==0, "Original member still has BP. Maybe the BP was not historied.");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		String histStatus = driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "BP is not Historied. It is "+histStatus);
		
		driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		histStatus = driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "Aid cat is not Historied. It is "+histStatus);
				
		log("Successfully verified that Crossed Member ID:"+Crossed_memBer+" Aid cat and BP are historied");
		
		// Check that Original member has the Elig Added
    	LoginCheck();
        Member.memberSearch(original_memBer);
		current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
		Assert.assertTrue(current_aid_original.equals(CDE_AID_CATEGORY+" "+dateXMLtoPanel(addedBeginDate)+" - 12/31/2299"), CDE_AID_CATEGORY+" was not Added. Instead, this Aid was found: "+current_aid_original);

		log("Successfully verified that Original Member ID:"+original_memBer+" has the following AId cat added: "+current_aid_original);
		log("Please check Member Benefit plan/Aid Cat dropdown and panels manually");
		
		//Check T_RE_CROSSED_MID Table
		sqlStatement="select ORIGINAL_MID, CROSSED_MID,  to_char(DTE_INSERT, 'MM/DD/YYYY') as DTE from T_RE_CROSSED_MID where CROSSED_MID = "+Crossed_memBer;
    	colNames.add("ORIGINAL_MID"); //0
    	colNames.add("CROSSED_MID");  //1
    	colNames.add("DTE");   //2
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String table_original_memBer = colValues.get(0);
    	String table_Crossed_memBer = colValues.get(1);
    	String table_dte = colValues.get(2);
    	
		Assert.assertTrue(table_original_memBer.equals(original_memBer), "Original Member not found in T_RE_CROSSED_MID. Instead found "+table_original_memBer);
		Assert.assertTrue(table_Crossed_memBer.equals(Crossed_memBer), "Crossed Member not found in T_RE_CROSSED_MID. Instead found "+table_Crossed_memBer);
		Assert.assertTrue(table_dte.equals(Common.convertSysdate()), "Insert date not equal to today's date in T_RE_CROSSED_MID. Instead it is "+table_dte);
		
		log("Successfully verified entry into T_RE_CROSSED_MID table.");
		
		//Store Members for Day 2
		Statement statement = Common.connection1.createStatement();

		//Original Member
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='original_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='original_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+original_memBer+"', 'original_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Crossed Member
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='Crossed_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='Crossed_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+Crossed_memBer+"', 'Crossed_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Aid Cat
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='CDE_AID_CATEGORY'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='CDE_AID_CATEGORY'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+CDE_AID_CATEGORY+"', 'CDE_AID_CATEGORY', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//SSN
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='SSN'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='SSN'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+ssn+"', 'SSN', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Case No.
		sqlStatement = "select * from r_day2 where TC = '32955' and DES='CASENUM'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32955' and DES='CASENUM'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32955', '"+casenum+"', 'CASENUM', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    }
    
    @Test
    public void test32956a() throws Exception{
    	TestNGCustom.TCNo="32956a";
    	log("//TC 32956a-Crossed MID detected - no match found Test Case");
    	
    	
    	//Get Crossed_memBer
    	sqlStatement="select b.id_medicaid, c.num_case, x.dep_num, ce.cde_aid_category, e.cde_agency, o.agency_id "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and rownum < 2";
        	
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_CASE");
    	colNames.add("DEP_NUM");
    	colNames.add("CDE_AID_CATEGORY");
    	colNames.add("CDE_AGENCY");
    	colNames.add("AGENCY_ID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String Crossed_memBer = colValues.get(0);
        String NUM_CASE=colValues.get(1);
        String DEP_NUM=colValues.get(2);
        String CDE_AID_CATEGORY=colValues.get(3);
        String CDE_AGENCY=colValues.get(4);
        String AGENCY_ID=colValues.get(5);
    	   
    	//get crossed member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+Crossed_memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
    	
        //Get crossed member's current Elig
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		String current_aid_crossed = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
		
		Assert.assertTrue(current_aid_crossed.contains(CDE_AID_CATEGORY), "DB returned aid cat may not be the member's first aid cat");
		
		log("Crossed Member ID:"+Crossed_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_crossed);
		
//		//Get the 2nd original member
//    	sqlStatement="select b.id_medicaid "+
//    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
//    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
//    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
//    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
//    			"and e.dte_end < to_char(sysdate, 'YYYYMMDD') "+
//    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
//    			"and exists (select num_ssn from t_re_base b1 where b1.num_ssn = b.num_ssn group by b1.num_ssn having count(b1.num_ssn) = 1) "+
//    			"and ce.cde_aid_category<>'"+CDE_AID_CATEGORY+"' "+
//    			"and rownum < 2";
//    	    	    	
//    	colNames.add("ID_MEDICAID");
//    	colValues = Common.executeQuery(sqlStatement, colNames);
//    	
//    	String original_memBer = colValues.get(0);
//    	
//    	//get original member details
//    	sqlStatement="select  b.num_ssn, b.dte_birth, b.nam_last, b.nam_first from T_RE_BASE b "+
//    			"where b.id_medicaid = "+original_memBer;
//    	
//    	colNames.add("NUM_SSN");  	 //0
//    	colNames.add("DTE_BIRTH");   //1
//    	colNames.add("NAM_LAST");    //2
//    	colNames.add("NAM_FIRST");   //3
//    	colValues = Common.executeQuery(sqlStatement, colNames);
	
    	//This will update SSN, DOB, Lastname and FirstName in the I/P file
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob =fileSysdateCustom(-700);
    	lastName = Common.generateRandomName();
//    	fname=colValues.get(3);
    	
//        //Get original member's current Elig
//    	LoginCheck();
//        Member.memberSearch(original_memBer);
//		String current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
//
//		driver.findElement(By.linkText("Member Benefit Plan")).click();
//		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
//		bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
//		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
//		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
//		
//		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
//		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
//		aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
//		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
//		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
				
		log("The following is replaced in file as SSN:"+ssn+" Last Name:"+lastName+" DoB:"+dob);
		
		//Create I/P file
    	casenum= NUM_CASE;
        dep=DEP_NUM;
    	otherid = AGENCY_ID;
        agency=CDE_AGENCY;
        aid=CDE_AID_CATEGORY;
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        beginDate = fileSysdateCustom(0);
        String addedBeginDate = beginDate; //this is stored because beginDate gets reset to "" after file run
        String addedlastName = lastName; //this is stored because lastName gets reset to P after file run

        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);      
        
        if ((Mid.equals(Crossed_memBer)))
        	  Assert.assertTrue(false,"New Member was not created. Crossed Member received in response file, which is "+Crossed_memBer);
        
        log("Successful upload and download of I/P file with New Member SSN:"+ssn+" Last Name:"+addedlastName+" DoB:"+dob);
        log("The response File contains the New Member ID:"+Mid);

        //Verify Warning messages
        
  	    String errCde="2388";
  	    String errMsg="Warning Member ID on txn is crossed with id_medicaid retrieved";
  	    
  	    if (!(result_type.equals("W")))
    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

  	    if (!(errorCode.equals(errCde)))
    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
  		
  	    if (!(errorMessage.equals(errMsg)))
    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
        
  	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

        //Check that Crossed member's current Elig is gone
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory")).size();
		Assert.assertTrue(size==0, "Original member still has Elig. Maybe the Elig was not historied.");
		size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans")).size();
		Assert.assertTrue(size==0, "Original member still has BP. Maybe the BP was not historied.");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		String histStatus = driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "BP is not Historied. It is "+histStatus);
		
		driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		histStatus = driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "Aid cat is not Historied. It is "+histStatus);
				
		log("Successfully verified that Crossed Member ID:"+Crossed_memBer+" Aid cat and BP are historied");
		
		// Check that Original member has the Elig Added
    	LoginCheck();
        Member.memberSearch(Mid);
		String current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
		Assert.assertTrue(current_aid_original.equals(CDE_AID_CATEGORY+" "+dateXMLtoPanel(addedBeginDate)+" - 12/31/2299"), CDE_AID_CATEGORY+" was not Added. Instead, this Aid was found: "+current_aid_original);

		log("Successfully verified that New Member ID:"+Mid+" has the following AId cat added: "+current_aid_original);
		log("Please check Member Benefit plan/Aid Cat dropdown and panels manually");
		
		//Check T_RE_CROSSED_MID Table
		sqlStatement="select ORIGINAL_MID, CROSSED_MID,  to_char(DTE_INSERT, 'MM/DD/YYYY') as DTE from T_RE_CROSSED_MID where CROSSED_MID = "+Crossed_memBer;
    	colNames.add("ORIGINAL_MID"); //0
    	colNames.add("CROSSED_MID");  //1
    	colNames.add("DTE");   //2
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String table_original_memBer = colValues.get(0);
    	String table_Crossed_memBer = colValues.get(1);
    	String table_dte = colValues.get(2);
    	
		Assert.assertTrue(table_original_memBer.equals(Mid), "Original Member not found in T_RE_CROSSED_MID. Instead found "+table_original_memBer);
		Assert.assertTrue(table_Crossed_memBer.equals(Crossed_memBer), "Crossed Member not found in T_RE_CROSSED_MID. Instead found "+table_Crossed_memBer);
		Assert.assertTrue(table_dte.equals(Common.convertSysdate()), "Insert date not equal to today's date in T_RE_CROSSED_MID. Instead it is "+table_dte);
		
		log("Successfully verified entry into T_RE_CROSSED_MID table.");
		
		//Store Members for Day 2
		Statement statement = Common.connection1.createStatement();

		//Original Member
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='original_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='original_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+Mid+"', 'original_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Crossed Member
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='Crossed_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='Crossed_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+Crossed_memBer+"', 'Crossed_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Aid Cat
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='CDE_AID_CATEGORY'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='CDE_AID_CATEGORY'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+CDE_AID_CATEGORY+"', 'CDE_AID_CATEGORY', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//SSN
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='SSN'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='SSN'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+ssn+"', 'SSN', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Case No.
		sqlStatement = "select * from r_day2 where TC = '32956' and DES='CASENUM'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32956' and DES='CASENUM'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32956', '"+casenum+"', 'CASENUM', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    }
    
    @Test
    public void test32957a() throws Exception{
    	TestNGCustom.TCNo="32957a";
    	log("//TC 32957a-Inactive MID on txn, crossed MID detected for the active member Test Case");
    	
    	
    	//Get Crossed_memBer
    	sqlStatement="select b.id_medicaid, c.num_case, x.dep_num, ce.cde_aid_category, e.cde_agency, o.agency_id, b.sak_recip "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.cde_status1 <> 'H' and to_char(sysdate, 'YYYYMMDD') between e.dte_effective and e.dte_end "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and b.ind_active = 'N' "+
    			"and rownum < 2";
        	
    	colNames.add("ID_MEDICAID");
    	colNames.add("NUM_CASE");
    	colNames.add("DEP_NUM");
    	colNames.add("CDE_AID_CATEGORY");
    	colNames.add("CDE_AGENCY");
    	colNames.add("AGENCY_ID");
    	colNames.add("SAK_RECIP"); //This is to get the active member id later
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String Crossed_memBer = colValues.get(0);
        String NUM_CASE=colValues.get(1);
        String DEP_NUM=colValues.get(2);
        String CDE_AID_CATEGORY=colValues.get(3);
        String CDE_AGENCY=colValues.get(4);
        String AGENCY_ID=colValues.get(5);
        String INACTIVE_SAK_RECIP=colValues.get(6);
   
    	//get crossed member details
    	sqlStatement="select  b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last from T_RE_BASE b "+
    			"where b.id_medicaid = "+Crossed_memBer;

    	colNames.add("ID_MEDICAID"); //0
    	colNames.add("NUM_SSN");  	 //1
    	colNames.add("DTE_BIRTH");   //2
    	colNames.add("NAM_FIRST");   //3
    	colNames.add("NAM_LAST");    //4
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String mem = colValues.get(0);
    	fileMem=mem;
        ssn=colValues.get(1);
        dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
    	fname=colValues.get(3);
    	lastName = colValues.get(4);
    	
        //Get crossed member's current Elig
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		String current_aid_crossed = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
		
		Assert.assertTrue(current_aid_crossed.contains(CDE_AID_CATEGORY), "DB returned aid cat may not be the member's first aid cat");
		
		log("Crossed(Inactive) Member ID:"+Crossed_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_crossed);
		
		//Get Active member ID
		sqlStatement="select a.id_medicaid from t_re_base a, t_recip_link_xref x where x.sak_recip = a.sak_recip and x.sak_rcp_purged = "+INACTIVE_SAK_RECIP;
    	colNames.add("ID_MEDICAID"); //0
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String active_mem = colValues.get(0);
		log("Crossed(Active) Member ID:"+active_mem);
		
		//Get the 2nd original member
    	sqlStatement="select b.id_medicaid "+
    			"from a_t_re_ps2_log l, t_re_base b, t_re_case_xref x, t_re_case c, t_cde_aid ce, t_re_aid_elig e, T_RE_OTHER_ID o "+
    			"where l.cde_txn_type='A' and l.id_medicaid = b.id_medicaid and b.num_ssn<>' ' and b.cde_sex = 'F' "+
    			"and e.sak_recip = b.sak_recip and o.cde_agency = e.cde_agency and o.sak_recip = b.sak_recip "+
    			"and x.sak_aid_elig=e.sak_aid_elig and x.sak_case=c.sak_case and ce.sak_cde_aid = e.sak_cde_aid "+
    			"and e.dte_end < to_char(sysdate, 'YYYYMMDD') "+
    			"and exists (select 1 from t_re_aid_elig e1 where e1.sak_recip = b.sak_recip  group by e1.sak_recip having count(e1.sak_recip) = 1) "+
    			"and exists (select num_ssn from t_re_base b1 where b1.num_ssn = b.num_ssn group by b1.num_ssn having count(b1.num_ssn) = 1) "+
    			"and ce.cde_aid_category<>'"+CDE_AID_CATEGORY+"' "+
    			"and rownum < 2";
    	    	    	
    	colNames.add("ID_MEDICAID");
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	String original_memBer = colValues.get(0);
    	
    	//get original member details
    	sqlStatement="select  b.num_ssn, b.dte_birth, b.nam_last, b.nam_first from T_RE_BASE b "+
    			"where b.id_medicaid = "+original_memBer;
    	
    	colNames.add("NUM_SSN");  	 //0
    	colNames.add("DTE_BIRTH");   //1
    	colNames.add("NAM_LAST");    //2
    	colNames.add("NAM_FIRST");   //3
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	
    	//This will update SSN, DOB, Lastname and FirstName in the I/P file
        ssn=colValues.get(0);
        dob =colValues.get(1).substring(0, 4)+"-"+colValues.get(1).substring(4, 6)+"-"+colValues.get(1).substring(6, 8);
    	lastName = colValues.get(2);
    	fname=colValues.get(3);
    	
        //Get original member's current Elig
    	LoginCheck();
        Member.memberSearch(original_memBer);
		String current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		bpRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'benefitPlan') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(bpRowCount==0, "More than 1 BP was present. Please check test data or find a different member by ending current one's aid cat");
		
		driver.findElement(By.xpath("//*[contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		aidRowCount = driver.findElements(By.xpath("//*[contains(@id,'1:') and contains(@id,'aidDes') ]")).size();
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		Assert.assertTrue(aidRowCount==0, "More than 1 Aid Cat was present. Please check test data or find a different member by ending current one's aid cat");
				
		log("Original Member ID:"+original_memBer+" SSN:"+ssn+" Aid Cat:"+current_aid_original+" Last Name:"+lastName+" First Name:"+fname+" DoB:"+dob);
		
		//Create I/P file
    	casenum= NUM_CASE;
        dep=DEP_NUM;
    	otherid = AGENCY_ID;
        agency=CDE_AGENCY;
        aid=CDE_AID_CATEGORY;
        adr1="13 FULLER RD";
        city="FOXBORO";
        zip="02035";
        beginDate = fileSysdateCustom(0);
        String addedBeginDate = beginDate; //this is stored because beginDate gets reset to "" after file run
        String addedlastName = lastName; //this is stored because lastName gets reset to P after file run

        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);      
        
        if (!(Mid.equals(original_memBer)))
        	  Assert.assertTrue(false,"Original Member "+original_memBer+" not the same as Member received in response file "+Mid);
        
        log("Successful upload and download of I/P file Original Member SSN:"+ssn+" Last Name:"+addedlastName+" First Name:"+fname+" DoB:"+dob);
        log("The response File contains the Original Member ID:"+original_memBer);

//        //Verify Warning messages
//        
//  	    String errCde="2388";
//  	    String errMsg="Warning Member ID on txn is crossed with id_medicaid retrieved";
//  	    
//  	    if (!(result_type.equals("W")))
//    		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);
//
//  	    if (!(errorCode.equals(errCde)))
//    		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
//  		
//  	    if (!(errorMessage.equals(errMsg)))
//    		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
//        
//  	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);
  	    
  	    
        //Verify Error messages
		String fileName=tempDirPath+Common.fileName();
        String output=FileUtils.readFileToString(new File(fileName));
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
        
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        errorMessage=valuesInQuotes[l-1].trim();
        errorCode=valuesInQuotes[l-2].trim();
        
        //Validate 1st error message
        String errCde="2317";
        String errMsg="Warning Member ID is invalid, use Member ID on response file";
	    
	    if (!(result_type.equals("W")))
  		Assert.assertTrue(false, "Did not get Result Type W. Instead got Result Type "+result_type);

	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
      
	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);
	    
	    //Validate 2nd error message
	    errCde="2388";
	    errMsg="Warning Member ID on txn is crossed with id_medicaid retrieved";
	    
        errorMessage=valuesInQuotes[l-3].trim();
        errorCode=valuesInQuotes[l-4].trim();
	    
	    if (!(errorCode.equals(errCde)))
  		Assert.assertTrue(false, "Did not get Error Code "+errCde+". Instead got Error Code "+errorCode);
		
	    if (!(errorMessage.equals(errMsg)))
  		Assert.assertTrue(false, "Did not get Error Message "+errMsg+". Instead got Error Message "+errorMessage);
	    
	    log("Successfully got Warning: "+result_type+" "+errorCode+" "+errorMessage);

        //Check that Crossed member's current Elig is gone
    	LoginCheck();
        Member.memberSearch(Crossed_memBer);
		driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
		int size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory")).size();
		Assert.assertTrue(size==0, "Crossed member still has Elig. Maybe the Elig was not historied.");
		size = driver.findElements(By.id("MMISForm:MMISBodyContent:RecipientInformation_benefitPlans")).size();
		Assert.assertTrue(size==0, "Crossed member still has BP. Maybe the BP was not historied.");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

		driver.findElement(By.linkText("Member Benefit Plan")).click();
		String histStatus = driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "BP is not Historied. It is "+histStatus);
		
		driver.findElement(By.xpath("//*[contains(@id,'EligPanel') and contains(@id,'0:') and contains(@id,'benefitPlan') ]")).click();
		histStatus = driver.findElement(By.xpath("//*[contains(@id,'AidRecipientBenefitPlanPanel') and contains(@id,'0:') and contains(@id,'status1Code') ]")).getText();
		Assert.assertTrue(histStatus.equals("History"), "Aid cat is not Historied. It is "+histStatus);
				
		log("Successfully verified that Crossed Member ID:"+Crossed_memBer+" Aid cat and BP are historied");
		
		// Check that Original member has the Elig Added
    	LoginCheck();
        Member.memberSearch(original_memBer);
		current_aid_original = new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
		Assert.assertTrue(current_aid_original.equals(CDE_AID_CATEGORY+" "+dateXMLtoPanel(addedBeginDate)+" - 12/31/2299"), CDE_AID_CATEGORY+" was not Added to Original Member. Instead, this Aid was found: "+current_aid_original);

		log("Successfully verified that Original Member ID:"+original_memBer+" has the following AId cat added: "+current_aid_original);
		log("Please check Member Benefit plan/Aid Cat dropdown and panels manually");
		
		//Check T_RE_CROSSED_MID Table
		sqlStatement="select ORIGINAL_MID, CROSSED_MID,  to_char(DTE_INSERT, 'MM/DD/YYYY') as DTE from T_RE_CROSSED_MID where CROSSED_MID = "+Crossed_memBer;
    	colNames.add("ORIGINAL_MID"); //0
    	colNames.add("CROSSED_MID_ACTIVE");  //1
    	colNames.add("DTE");   //2
    	colValues = Common.executeQuery(sqlStatement, colNames);
    	String table_original_memBer = colValues.get(0);
    	String table_Crossed_memBer_active = colValues.get(1);
    	String table_dte = colValues.get(2);
    	
		Assert.assertTrue(table_original_memBer.equals(original_memBer), "Original Member not found in T_RE_CROSSED_MID. Instead found "+table_original_memBer);
		Assert.assertTrue(table_Crossed_memBer_active.equals(active_mem), "Crossed Member(Active) not found in T_RE_CROSSED_MID. Instead found "+table_Crossed_memBer_active);
		Assert.assertTrue(table_dte.equals(Common.convertSysdate()), "Insert date not equal to today's date in T_RE_CROSSED_MID. Instead it is "+table_dte);
		
		log("Successfully verified entry into T_RE_CROSSED_MID table.");
		
		//Store Members for Day 2
		Statement statement = Common.connection1.createStatement();

		//Original Member
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='original_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='original_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+original_memBer+"', 'original_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Crossed Member
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='Crossed_memBer'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='Crossed_memBer'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+Crossed_memBer+"', 'Crossed_memBer', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Aid Cat
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='CDE_AID_CATEGORY'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='CDE_AID_CATEGORY'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+CDE_AID_CATEGORY+"', 'CDE_AID_CATEGORY', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//SSN
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='SSN'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='SSN'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+ssn+"', 'SSN', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
		
		//Case No.
		sqlStatement = "select * from r_day2 where TC = '32957' and DES='CASENUM'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (!(colValues.get(0).equals("null"))) {
			sqlStatement = "delete from  r_day2 where TC = '32957' and DES='CASENUM'";
			statement.executeQuery(sqlStatement);
		}
		sqlStatement = "insert into  r_day2 values ('32957', '"+casenum+"', 'CASENUM', '"+Common.convertSysdate()+"')";
		statement.executeQuery(sqlStatement);
    }
    
    
    /****************************************************************************************/
    /* 																						*/
    /*  																					*/
    /* 	                  		Member CNS Started - 09/11/2024       						*/
    /* 																						*/
    /* 	   															Mahammad Mohsunov		*/
    /* 	   															Abujot Singh			*/
    /****************************************************************************************/
    
    /* Mahammad Mohsunov */
    
    @Test
    public void test47312() throws Exception{
    	
    	TestNGCustom.TCNo="47312";
    	log("//TC 47312- DB print type agency Lower, Transaction agency Higher");
    	
    	log("Create a SSA member with any cde_print_type field");
    	
    	String agency="SSA";
    	String printType="BRAILLE";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);

    	log("Member created with cde_print_type stored in t_re_communication table, cde_agency_print stored as SSA");

    	//Step 2
    	
    	log("Upload xml file for the same member from MHO or HIX with the same print type as DB");
    	
    	agency="MHO";
    	
	    updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile("SSA", "MHO", "id_source");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
    	log("No changes to cde_print_type and cde_agency_print updated to MHO or HIX");

    	//Step 3
    	
    	log("Upload xml file for the same member from MHO or HIX with the different print type stored in DB");

    	agency="HIX";
    	String newPrintType="LRG";
    	
	    updateExistFile("MHO", "HIX", "id_source");
	    updateExistFile(printType, newPrintType, "cde_print_type");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(newPrintType), newPrintType+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
   
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);
        
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(newPrintType), printTypeUI+" is not equal to "+newPrintType+" .Print type on UI: " +printTypeUI);
        
    	log("cde_print_type is updated to incoming transaction in t_re_communication and cde_agency_print stored as MHO or HIX.");
    	
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47313() throws Exception{
    	
    	TestNGCustom.TCNo="47313";
    	log("//TC 47313- DB print type agency Higher, Transaction agency");
    	
    	log("1)Create a MHO or HIX member with any cde_print_type field.");
    	
    	String agency="HIX";
    	String printType="LRG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
        log("Member created with cde_print_type stored in t_re_communication table, cde_agency_print stored as MHO or HIX.");
        
        log("2)Upload xml file for the same member from SSA with the same print type as DB.");

	    updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile("HIX", "SSA", "id_source");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
        log("No changes to cde_print_type and cde_agency_print.");
        
        log("3)Upload xml file for the same member from SSA with the different print type stored in DB.");

	    updateExistFile(printType, "BRAILLE", "cde_print_type");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
   
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);
        
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
        log("No changes to cde_print_type and cde_agency_print.");
        
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47314() throws Exception{
    	
    	TestNGCustom.TCNo="47314";
    	log("//TC 47314- DB print type agency Higher and transaction agency at same level");
    	
        log("1)Create a MHO member with any cde_print_type field.");

    	String agency="MHO";
    	String printType="LRG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
        log("Member created with cde_print_type stored in t_re_communication table, cde_agency_print stored as MHO.");

        log("2)Upload xml file for the same member from MHO with the same print type as DB.");
        
        /* Upload xml file for the same member from MHO with the same print type as DB. */
    	
	    updateExistFile(" ", mid, "id_medicaid");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
        log("No changes to cde_print_type and cde_agency_print.");

        log("3)Upload xml file for the same member from HIX with the same print type as DB.");
        
        agency="HIX";

	    updateExistFile("MHO", "HIX", "id_source");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	//Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
        log("No changes to cde_print_type and cde_agency_print updated to HIX.");

        log("4)Upload xml file for the same member from HIX with the different print type stored in DB");
        
        printType="BRAILLE";
        
	    updateExistFile("LRG", printType, "cde_print_type");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
   
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);
        
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
        log("cde_print_type is updated to incoming transaction in t_re_communication and no changes to cde_agency_print.");

        log("5)Upload xml file for the same member from MHO with the different print type stored in DB.");
        
        agency="MHO";
        printType="REG";
        
	    updateExistFile("HIX", agency, "id_source");
	    updateExistFile("BRAILLE", printType, "cde_print_type");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
   
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);
        
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
        log("cde_print_type is updated to incoming transaction in t_re_communication and cde_agency_print stored as MHO.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47315() throws Exception{
    	
    	TestNGCustom.TCNo="47315";
    	log("//TC 47315- Invalid print type- New Member");
    	
    	log("Create a new member from MHO, HIX or SSA with an invalid cde_print_type value.");
    	
    	String agency="MHO";
    	String printType="LRGA";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	testCreateMember_CNS(agency,printType ,communicationPref, cellPhoneNum, email);
    	Assert.assertTrue(errorMessage.equals("Print type is invalid"), "Did not get error message or error message is uncorrect. Error message from response file: "+errorMessage);
        
    	log("The following warning message is received \"Print type is invalid\" and member created with cde_print_type stored as \"Reg\" and cde_agency_print as blank.");
    
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47316() throws Exception{
    	
    	TestNGCustom.TCNo="47316";
    	log("//TC 47316- Invalid Print type- existing mem with data from inactive agency");
    	
    	log("1) Create a new member from MHO, HIX or SSA with valid cde_print_type value and with closed eligibility segment with a past date and any closing reason.");    	
    	
    	String agency="MHO";
    	String printType="LRG";
    	String communicationPref="TEXT\\SMS";
      	String cellPhoneNum="1112223344";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	endElig=true;
    	endEligDate= Common.convertDate_yyyyHIFENmmHIFENdd(Common.convertSysdatecustom(-60));
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
    	
    	log("Member created with cde_print_type stored in t_re_communication table, cde_agency_print stored as MHO, HIX or SSA .");    	

    	log("2)Upload xml file for the same member with an invalid cde_print_type value with different valid cde_agency_print than stored in t_re_communication table.");    	
    	
        agency="HIX";
        String invalidPrintType="BRAILE";
    	String expectedAgency="";
        String expectedPrintType="REG";
        
	    updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile("MHO", agency, "id_source");
	    updateExistFile(printType, invalidPrintType, "cde_print_type");

    	mid= uploadMA21(xml);
    	
    	Assert.assertTrue(errorMessage.equals("Print type is invalid"), "Did not get error message or error message is uncorrect. Error message from response file: "+errorMessage);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(colValues.get(0).equals(expectedAgency), expectedAgency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(expectedPrintType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(expectedPrintType), printTypeUI+" is not equal to "+expectedPrintType+" .Print type on UI: " +printTypeUI);
    
    	log("The following warning message is received \"Print type is invalid\" and cde_print_type stored as \"Reg\" and cde_agency_print as blank.");    	

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47317() throws Exception{
    	
    	TestNGCustom.TCNo="47317";
    	log("//TC 47317- Invalid Print type- existing mem with data from active agency");
    	
    	log("1) Create a new member from SSA with valid cde_print_type value.");
    	
    	String agency="SSA";
    	String printType="LRG";
    	String communicationPref="TEXT\\SMS";
      	String cellPhoneNum="1112223344";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
    	
    	log("Member created with cde_print_type stored in t_re_communication table, cde_agency_print stored as SSA.");

    	log("Upload xml file for the same member with an invalid cde_print_type value from HIX or MHO.");
    	
	    updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, "HIX", "id_source");
	    updateExistFile(printType, "BRAILE", "cde_print_type");

    	mid= uploadMA21(xml);
    	
    	Assert.assertTrue(errorMessage.equals("Print type is invalid"), "Did not get error message or error message is uncorrect. Error message from response file: "+errorMessage);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
    	log("The following warning message is received \"Print type is invalid\" and No changes to t_re_communication table.");
    
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47318() throws Exception{
    	
    	TestNGCustom.TCNo="47318";
    	log("//TC 47318- No data in DB, No print type segment");
    	
    	log("Create a new member from all agencies without print type segment in xml.");
    	log("*** HIX *** ");

    	String agency="HIX";
    	
    	String mid= testCreateMember_without_CNS(agency);
    	
    	String expectedPrintType="REG";
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(expectedPrintType),expectedPrintType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(expectedPrintType), printTypeUI+" is not equal to "+expectedPrintType+" .Print type on UI: " +printTypeUI);
        
    	log("All member created should have cde_print_type stored as default value \"Reg\" and cde_agency_print as blank. (HIX)");

    	log("*** MHO *** ");
        
        agency="MHO";
    	
    	mid= testCreateMember_without_CNS(agency);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(expectedPrintType),expectedPrintType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(expectedPrintType), printTypeUI+" is not equal to "+expectedPrintType+" .Print type on UI: " +printTypeUI);
        	
    	log("All member created should have cde_print_type stored as default value \"Reg\" and cde_agency_print as blank. (MHO)");

    	log("*** SSA *** ");

        /*             SSA               */
        
        agency="SSA";
    	
    	mid= testCreateMember_without_CNS(agency);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(expectedPrintType),expectedPrintType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(expectedPrintType), printTypeUI+" is not equal to "+expectedPrintType+" .Print type on UI: " +printTypeUI);

    	log("All member created should have cde_print_type stored as default value \"Reg\" and cde_agency_print as blank. (SSA)");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47319() throws Exception{
    	
    	TestNGCustom.TCNo="47319";
    	log("//TC 47319- existing print type in DB, No print type segment");
    	
    	log("1) Create a new member from HIX, MHO or SSA with any print type data.");

    	String agency="MHO";
    	String printType="BRAILLE";
    	String communicationPref="TEXT\\SMS";
      	String cellPhoneNum="1112223344";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        
    	log("Member created with cde_print_type stored in t_re_communication table, cde_agency_print stored as MHO, HIX or SSA .");
    	
    	log("2) Upload xml file for the same member from a non authorized agency for print type without member print type segment.");

	    updateExistFile(agency, "DTA", "id_source");
    	
	    //delete communicationPreference segment
    	xml=xml.substring(0, xml.indexOf("<communicationpreference"))+"</EligibilityRequest>";
    	
    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);

    	log(" No changes to t_re_communication table");
    	
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47337() throws Exception{
    	
    	TestNGCustom.TCNo="47337";
    	log("//TC 47337- DB comm pref from higher, txn comm pref from lower");
    	
    	log("1) Create HIX member with Communication Preference as Paper with any print type.");

    	String agency_HIX="HIX";
    	String printType_lrg="LRG";
    	String communicationPref_paper="PAPER";
    	String cellPhoneNum="";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency_HIX,printType_lrg ,communicationPref_paper, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_lrg), printType_lrg+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref_paper), communicationPref_paper+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_lrg), printTypeUI+" is not equal to "+printType_lrg+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_paper), communicationPreferenceUI+" is not equal to "+communicationPref_paper+" .Print type on UI: " +communicationPreferenceUI);

    	log("Member created with cde_communication_pref stored as paper and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as HIX. No email or num_cell_phone stored.");

    	log("2) Upload xml file for the same member from MHO with the same communication preference and print type as DB.");

        String agency_MHO="MHO";
        
	    updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency_HIX, agency_MHO, "id_source");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(colValues.get(0).equals(agency_MHO), agency_MHO+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_lrg), printType_lrg+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref_paper), communicationPref_paper+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
        
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	//Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_lrg), printTypeUI+" is not equal to "+printType_lrg+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_paper), communicationPreferenceUI+" is not equal to "+communicationPref_paper+" .Print type on UI: " +communicationPreferenceUI);
        
    	log("No changes to cde_communication_pref value or cde_agency_pref. cde_agency_print updated to MHO.");

    	log("3) Upload xml file for the same member from HIX with communication preference as Email with valid email address and with any print type.");

        String communicationPref_email="EMAIL";
        email=Common.generateRandomName()+"@gmail.com";
        
	    updateExistFile(agency_MHO, agency_HIX, "id_source");
	    updateExistFile(communicationPref_paper, communicationPref_email, "cde_communication_pref");
	    
	    //add email to MA21 file
	    xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"));
	    xml=xml.substring(0, xml.lastIndexOf("/>"));
	    xml=xml+"email=\""+email+"\"/>\n</EligibilityRequest>";
	    
	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(colValues.get(0).equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_lrg), printType_lrg+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref_email), communicationPref_email+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr =colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	//Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_lrg), printTypeUI+" is not equal to "+printType_lrg+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_email), communicationPreferenceUI+" is not equal to "+communicationPref_email+" .Print type on UI: " +communicationPreferenceUI);
    	
    	log("cde_communication_pref in t_re_communication updated to Email, email address from txn inserted, print type matches transaction print type, cde_agency_print & cde_agency_pref stored as HIX.");

    	log("4) Upload xml file for the same member from SSA with the different communication preference and print type than what's stored in the DB.");
    	
    	String agency_SSA="SSA";
    	String printType_braille="BRAILLE";
    	String communicationPref_text="TEXT\\SMS";
    	
    	updateExistFile(agency_HIX, agency_SSA, "id_source");
 	    updateExistFile(printType_lrg, printType_braille, "cde_print_type");
 	    updateExistFile(communicationPref_email, communicationPref_text, "cde_communication_pref");
 	    
 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	
 	    Assert.assertTrue(colValues.get(0).equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
   	 
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType_lrg), printType_lrg+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
       
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_communication_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref_email), communicationPref_email+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
   	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);

 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
   		colValues=Common.executeQuery(sqlStatement, colNames);
   	
   		email_addr =colValues.get(0);
   	
   		Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
   	
   		sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
   		colNames.add("num_cell_phone");
   	
   		try {
   			colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
   	
		}
   		
   		//Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_lrg), printTypeUI+" is not equal to "+printType_lrg+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_email), communicationPreferenceUI+" is not equal to "+communicationPref_email+" .Print type on UI: " +communicationPreferenceUI);
   	
    	log("No changes to DB");

    	log("5) Upload xml file for the same member from HIX with communication preference as Text\\SMS with valid num_cell_phone and with any print type.");

   		String phone="1112223344";
    	updateExistFile(agency_SSA, agency_HIX, "id_source");
    	updateExistFile(communicationPref_email, communicationPref_text, "cde_communication_pref");


        xml=xml.substring(0, xml.indexOf("email", xml.indexOf("<communicationpreference")));
	    xml=xml+"num_cell_phone=\""+phone+"\"/>\n</EligibilityRequest>";

	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	
 	    Assert.assertTrue(colValues.get(0).equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
   	 
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType_braille), printType_braille+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("cde_agency_pref");
	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
	    cde_agency_pref=colValues.get(0);
  	
	    Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);

	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("num_cell_phone");
  		colValues=Common.executeQuery(sqlStatement, colNames);
  	
  		String num_cell_phone =colValues.get(0);
  	
  		Assert.assertTrue(num_cell_phone.equals(phone), phone+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);
    	
  		sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_communication_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref_text), communicationPref_text+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  		
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
  		colNames.add("email_addr");
  	
  		try {
  			colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
  	
		}
  		
  		//Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_braille), printTypeUI+" is not equal to "+printType_braille+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_text), communicationPreferenceUI+" is not equal to "+communicationPref_text+" .Print type on UI: " +communicationPreferenceUI);
  		
    	log("cde_communication_pref in t_re_communication updated to Text\\SMS, num_cell_phone from txn inserted, print type matches transaction print type, cde_agency_print & cde_agency_pref stored as HIX. Previously stored email address is removed from t_re_communication table.");

    	log("6) Upload xml file for the same member from MHO with the different communication preference and print type than what's stored in the DB.");

  		String printType_reg="REG";
  		
  		updateExistFile(agency_HIX, agency_MHO, "id_source");
 	    updateExistFile(printType_braille, printType_reg, "cde_print_type");
    	updateExistFile(communicationPref_text, communicationPref_paper, "cde_communication_pref");

    	//delete num_cell_phone from MA21 file
    	xml=xml.substring(0, xml.indexOf("num_cell_phone"));
 	    xml=xml+"/>\n</EligibilityRequest>";
 	    
	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	
 	    Assert.assertTrue(colValues.get(0).equals(agency_MHO), agency_MHO+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);

 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("cde_print_type");
	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
	    cde_print_type=colValues.get(0);
  	
	    Assert.assertTrue(cde_print_type.equals(printType_reg), printType_reg+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
   	
	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("cde_agency_pref");
	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
	    cde_agency_pref=colValues.get(0);
  	
	    Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
	    
	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("num_cell_phone");
  		colValues=Common.executeQuery(sqlStatement, colNames);
  	
  		num_cell_phone =colValues.get(0);
  	
  		Assert.assertTrue(num_cell_phone.equals(phone), phone+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);
	    
  		sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_communication_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref_text), communicationPref_text+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
	    
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 		colNames.add("email_addr");
 	
 		try {
 			colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
 	
		}
 		
 		//Validate * Member Communication Preference/Accommodations * panel
    	
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_reg), printTypeUI+" is not equal to "+printType_reg+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_text), communicationPreferenceUI+" is not equal to "+communicationPref_text+" .Print type on UI: " +communicationPreferenceUI);
 		
    	log("No changes to cde_communication_pref value or cde_agency_pref. Print type updated to match transaction value and cde_agency_print updated to MHO.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47338() throws Exception{
    	
    	TestNGCustom.TCNo="47338";
    	log("//TC 47338- DB paper from lower, txn from higher w/ same comm pref as DB");
    	
    	log("1) Create MHO member with Communication Preference as Paper with any print type.");

    	String agency="MHO";
    	String printType="LRG";
    	String communicationPref="PAPER";
    	String cellPhoneNum="";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

        log("Member created with cde_communication_pref stored as paper and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No email or num_cell_phone stored.");
        
        log("2) Upload xml file for same member from HIX with same communication preference, same print type");
        
        String agency_HIX="HIX";
        
        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_HIX, "id_source");
	    
	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        log("cde_communication_pref and cde_print_type remains the same, cde_agency for both fields updated to HIX.");
        
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47339() throws Exception{
    	
    	TestNGCustom.TCNo="47339";
    	log("//TC 47339- DB paper from lower, txn from higher w/ diff comm pref as DB");
    	
    	log("1) Create MHO member with Communication Preference as Paper with any print type.");

    	String agency="MHO";
    	String printType="LRG";
    	String communicationPref="PAPER";
    	String cellPhoneNum="";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

    	log("Member created with cde_communication_pref stored as paper and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No email or num_cell_phone stored.");

    	log("2)Upload xml file for same member from HIX with different communication preference, different print type");
        
        String agency_HIX="HIX";
        String printType_braille="BRAILLE";
    	String communicationPref_text="TEXT\\SMS";
    	String cellPhone="1112223344";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_HIX, "id_source");
 	    updateExistFile(printType, printType_braille, "cde_print_type");
    	updateExistFile(communicationPref, communicationPref_text, "cde_communication_pref");
    	
        xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"));
  	    xml=xml.substring(0, xml.lastIndexOf("/>"));
  	    xml=xml+"num_cell_phone=\""+cellPhone+"\"/>\n</EligibilityRequest>";
	    
	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_braille), printType_braille+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref_text), communicationPref_text+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String num_cell_phone=colValues.get(0);

    	Assert.assertTrue(num_cell_phone.equals(cellPhone), cellPhone+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	log("cde_communication_pref and cde_print_type matches tansaction value, cde_agency for both fields updated to HIX. If communication pref updated to Email, then email address should be inserted as well. If communication pref updated to Text\\SMS, then num_cell_phone should be inserted as well.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47340() throws Exception{
    	
    	TestNGCustom.TCNo="47340";
    	log("//TC 47340- DB email from lower, txn from higher w/ same comm pref as DB");
    	
    	log("1) Create SSA member with Communication Preference as Email with email address and any print type.");

    	String agency="SSA";
    	String printType="LRG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

    	log("Member created with cde_communication_pref stored as email, txn email address stored and cde_print_type matches txn value in t_re_communication table, cde_agency for both fields stored as SSA.");

    	log("2) Upload xml file for same member from HIX with same communication preference, different print type");

        String agency_HIX="HIX";
        String printType_braille="BRAILLE";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_HIX, "id_source");
 	    updateExistFile(printType, printType_braille, "cde_print_type");
 	    
 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType_braille), printType_braille+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
  	
 	    try {
 		   colValues=Common.executeQuery(sqlStatement, colNames);
 		   throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

	    } catch (NullPointerException e){
			
			 log("num_cell_phone validation passed");
			 colNames.clear();
			 colValues.clear();
  	
	    }
  	
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    email_addr=colValues.get(0);
  	
 	    Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
  	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_braille), printTypeUI+" is not equal to "+printType_braille+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
       
    	log("No change to cde_communication_pref value or email address and cde_print_type matches tansaction value, cde_agency for both fields updated to HIX.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47341() throws Exception{
    	
    	TestNGCustom.TCNo="47341";
    	log("//TC 47341- DB email from lower, txn higher w/ same comm pref, diff email");
    	
    	log("1) Create SSA member with Communication Preference as Email with email address and any print type.");

    	String agency="SSA";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
  		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Member created with cde_communication_pref stored as email, txn email address stored and cde_print_type matches txn value in t_re_communication table, cde_agency for both fields stored as SSA.");

    	log("2) Upload xml file for same member from HIX with same communication preference, different email address, same print type");
        
        String agency_HIX="HIX";
        String newEmail=Common.generateRandomName()+"@gmail.com";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(email, newEmail, "email");
	    updateExistFile(agency, agency_HIX, "id_source");

 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	   sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	   colNames.add("cde_agency_pref");
 	   colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	   cde_agency_pref=colValues.get(0);
   	
 	   Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	   sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	   colNames.add("num_cell_phone");
  	
 	   try {
 		  colValues=Common.executeQuery(sqlStatement, colNames);
		  throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

	   } catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
  	
	   }
  	
 	   sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	   colNames.add("email_addr");
 	   colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	   email_addr=colValues.get(0);
  	
 	   Assert.assertTrue(email_addr.equals(newEmail), newEmail+" is not found \"t_re_communication\" table. Found: "+email_addr);
  	
 	   //Validate * Member Communication Preference/Accommodations * panel

 	   memberSearch(mid);

       driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
       printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
       communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
       emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

       Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
       Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
       Assert.assertTrue(emailUI.equals(newEmail), email+" is not equal to "+newEmail+" .Print type on UI: " +emailUI);
       
       log(" No change to cde_communication_pref value, email address updated to reflect txn email address and no change to cde_print_type value, cde_agency for both fields updated to HIX.");

   	   log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47342() throws Exception{
    	
    	TestNGCustom.TCNo="47342";
    	log("//TC 47342- DB email from lower, txn from higher w/ diff comm pref as DB");
    	
    	log("1) Create MHO member with Communication Preference as email with emaill adress and any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
  		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Member created with cde_communication_pref stored as email, txn email address stored and cde_print_type matches txn value in t_re_communication table, cde_agency for both fields stored as MHO.");

    	log("2) Upload xml file for same member from HIX with different communication preference, different print type");
        
        String agency_HIX="HIX";
        String printType_braille="BRAILLE";
        String communicationPref_text="TEXT\\SMS";
        String cellPhone="1112223344";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_HIX, "id_source");
	    updateExistFile(printType, printType_braille, "cde_print_type");
	    updateExistFile(communicationPref, communicationPref_text, "cde_communication_pref");
	    
	    xml=xml.substring(0, xml.indexOf("email"));
  	    xml=xml+" num_cell_phone=\""+cellPhone+"\"/>\n</EligibilityRequest>";
  	    
 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType_braille), printType_braille+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref_text), communicationPref_text+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
 	   	
	    String num_cell_phone= colValues.get(0);
	   
 	    Assert.assertTrue(num_cell_phone.equals(cellPhone), cellPhone+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);
  	
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
 	  
 	    try {
 		   colValues=Common.executeQuery(sqlStatement, colNames);
 		   throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

	    } catch (NullPointerException e){
			
			 log("email_addr validation passed");
			 colNames.clear();
			 colValues.clear();
  	
	    }
  	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType_braille), printTypeUI+" is not equal to "+printType_braille+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_text), communicationPreferenceUI+" is not equal to "+communicationPref_text+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(""), email+" is not equal to blank .Print type on UI: " +emailUI);

    	log("cde_communication_pref and cde_print_type matches tansaction value, cde_agency for both fields updated to HIX. If communication pref updated to Text\\SMS, then num_cell_phone should be inserted as well and previously stored email address should be removed. If communication pref updated to paper, previously stored email address should be removed.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47343() throws Exception{
    	
    	TestNGCustom.TCNo="47343";
    	log("//TC 47343- DB text from lower, txn from higher w/ same comm pref as DB");
    	
    	log("1) Create MHO member with Communication Preference as Text\\SMS with cell phone number and any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
  		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Member created with cde_communication_pref stored as Text\\SMS, txn cell phone number stored and cde_print_type matches txn value in t_re_communication table, cde_agency for both fields stored as MHO.");

    	log("2) Upload xml file for same member from HIX with same communication preference, cell phone number and print type");
        
        String agency_HIX="HIX";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_HIX, "id_source");
	    
 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
 	   	
	    String num_cell_phone= colValues.get(0);
	   
 	    Assert.assertTrue(num_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);
  	
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
 	  
 	    try {
 		   colValues=Common.executeQuery(sqlStatement, colNames);
 		   throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

	    } catch (NullPointerException e){
			
			 log("email_addr validation passed");
			 colNames.clear();
			 colValues.clear();
  	
	    }
  	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("No change to cde_communication_pref value or cell phone number or cde_print_type, cde_agency for both fields updated to HIX.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47344() throws Exception{
    	
    	TestNGCustom.TCNo="47344";
    	log("//TC 47344- DB text from lower, txn higher w/ same comm pref, diff cell");
    	
    	log("1) Create MHO member with Communication Preference as Text\\SMS with cell phone number and any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
  		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Member created with cde_communication_pref stored as Text\\SMS, txn cell phone number stored and cde_print_type matches txn value in t_re_communication table, cde_agency for both fields stored as MHO.");

    	log("2) Upload xml file for same member from HIX with same communication preference, different cell phone number and different print type");
        
        String agency_HIX="HIX";
        String printType_lrg="LRG";
        String newCellPhoneNum="2223334455";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_HIX, "id_source");
	    updateExistFile(printType, printType_lrg, "cde_print_type");
	    updateExistFile(cellPhoneNum, newCellPhoneNum, "num_cell_phone");

 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType_lrg), printType_lrg+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
 	   	
	    String num_cell_phone= colValues.get(0);
	   
 	    Assert.assertTrue(num_cell_phone.equals(newCellPhoneNum), newCellPhoneNum+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);
  	
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
 	  
 	    try {
 		    colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

	    } catch (NullPointerException e){
			
			 log("email_addr validation passed");
			 colNames.clear();
			 colValues.clear();
  	
	    }
  	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_lrg), printTypeUI+" is not equal to "+printType_lrg+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(newCellPhoneNum), cellPhoneUI+" (UI) is not equal to "+newCellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("No change to cde_communication_pref value, txn cell phone number and cde_print_type updated to match txn values, cde_agency for both fields updated to HIX.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47345() throws Exception{
    	
    	TestNGCustom.TCNo="47345";
    	log("//TC 47345- DB text from lower, txn from higher w/ diff comm pref as DB ");
    	
    	log("1) Create SSA member with Communication Preference as Text\\SMS with cell phone number and any print type.");

    	String agency="SSA";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Member created with cde_communication_pref stored as Text\\SMS, txn cell phone number stored and cde_print_type matches txn value in t_re_communication table, cde_agency for both fields stored as SSA.");
    	
    	log("2) Upload xml file for same member from HIX with different communication preference, same print type");

        String agency_HIX="HIX";
        String communicationPref_email="EMAIL";
        email=Common.generateRandomName()+"@gmail.com";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_HIX, "id_source");
	    updateExistFile(communicationPref, communicationPref_email, "cde_communication_pref");
	    
	    xml=xml.substring(0, xml.indexOf("num_cell_phone"));
  	    xml=xml+" email=\""+email+"\"/>\n</EligibilityRequest>";

 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref_email), communicationPref_email+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_HIX), agency_HIX+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");

 	    try {
 		    colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

	    } catch (NullPointerException e){
			
			 log("num_cell_phone validation passed");
			 colNames.clear();
			 colValues.clear();
  	
	    }
 	    
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
 	    colValues=Common.executeQuery(sqlStatement, colNames);

 	    String email_addr=colValues.get(0);
 	    
 	    Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
  	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_email), communicationPreferenceUI+" is not equal to "+communicationPref_email+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(""), cellPhoneUI+" (UI) is not equal to blank .Cell phone on UI: " +cellPhoneUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Cde_communication_pref value updated to match txn value, no change to cde_print_type value, cde_agency for both fields updated to HIX. If communication pref updated to Email, then txn email address should be inserted and previously stored cell phone number should be removed. If communication pref updated to paper, previously stored cell phone number should be removed.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47346() throws Exception{
    	
    	TestNGCustom.TCNo="47346";
    	log("//TC 47346- DB has Paper, txn from same level w/ same comm pref as DB");
    	
    	log("1) Create SSA member with Communication Preference as Paper with any print type.");

    	String agency="SSA";
    	String printType="LRG";
    	String communicationPref="PAPER";
    	String cellPhoneNum="";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

        log("Member created with cde_communication_pref stored as paper and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as SSA. No email or num_cell_phone stored.");
        
        log("2) Upload xml file for same member from MHO with same communication preference, same print type");

        String agency_MHO="MHO";
        
        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_MHO, "id_source");
	    
	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_MHO), agency_MHO+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_MHO), agency_MHO+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        log("cde_communication_pref and cde_print_type matches tansaction value , cde_agency_pref and cde_agency_print updated to MHO.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47347() throws Exception{
    	
    	TestNGCustom.TCNo="test47347";
    	log("//TC 47347- DB has Paper, txn from same level w/ diff comm pref as DB");
    	
        log("1) Create MHO member with Communication Preference as Paper with any print type.");

    	String agency="MHO";
    	String printType="BRAILLE";
    	String communicationPref="PAPER";
    	String cellPhoneNum="";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

        log("Member created with cde_communication_pref stored as paper and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No email or num_cell_phone stored.");

        log("2) Upload xml file for same member from SSA with different communication preference and print type");

    	/* Upload xml file for same member from MHO with same communication preference, same print type. */
        
        String agency_SSA="SSA";
	    String communicationPref_text="TEXT\\SMS";
    	String cellPhone="1112223344";
        
        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_SSA, "id_source");
    	updateExistFile(communicationPref, communicationPref_text, "cde_communication_pref");
    	
        xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"));
  	    xml=xml.substring(0, xml.lastIndexOf("/>"));
  	    xml=xml+"num_cell_phone=\""+cellPhone+"\"/>\n</EligibilityRequest>";
	    
	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref_text), communicationPref_text+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
  	    colNames.add("num_cell_phone");
  	    colValues=Common.executeQuery(sqlStatement, colNames);
  	   	
 	    String num_cell_phone= colValues.get(0);
 	   
  	    Assert.assertTrue(num_cell_phone.equals(cellPhone), cellPhone+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);
    	
  	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	  //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_text), communicationPreferenceUI+" is not equal to "+communicationPref_text+" .Print type on UI: " +communicationPreferenceUI);
        
        log("cde_communication_pref matches tansaction value and cde_agency updated to SSA. No changes to print type value or cde_agency. If communication pref updated to Text\\SMS, then num_cell_phone should be inserted as well. If communication pref updated to Email, then email address should be inserted as well.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47348() throws Exception{
    	
    	TestNGCustom.TCNo="test47348";
    	log("//TC 47348- DB has email, txn from same level w/ same comm pref and email");
    	
    	log("1) Create MHO member with Communication Preference as Email with any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Member created with cde_communication_pref stored as email with email address and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No num_cell_phone should be stored.");

    	log("2) Upload xml file for the same member from SSA with the same communication preference and email address, different print type");
        
        String agency_SSA="SSA";
        String printType_LRG="LRG";
        
        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_SSA, "id_source");
	    updateExistFile(printType, printType_LRG, "cde_print_type");

	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
  	    colNames.add("num_cell_phone");
  	    
  		try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
  		sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
  	    colNames.add("email_addr");
  	    colValues=Common.executeQuery(sqlStatement, colNames);

  	    email_addr=colValues.get(0);
  	    
  	    Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
    	//Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("No change to cde_communication_pref value or email address, communication preference agency updated to SSA. No changes to print type value or agency.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47349() throws Exception{
    	
    	TestNGCustom.TCNo="test47349";
    	log("//TC 47349- DB has email, txn from same level w/ same comm pref, diff email");
    	
    	log("1) Create MHO member with Communication Preference as Email with any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Member created with cde_communication_pref stored as email with email address and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No num_cell_phone should be stored.");

    	log("2) Upload xml file for the same member from SSA with the same communication preference, different email address and same print type as DB.");
        
        String agency_SSA="SSA";
        String newEmail=Common.generateRandomName()+"@gmail.com";;
        
        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_SSA, "id_source");
	    updateExistFile(email, newEmail, "email");

	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
  	    colNames.add("num_cell_phone");
  	    
  		try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
  		sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
  	    colNames.add("email_addr");
  	    colValues=Common.executeQuery(sqlStatement, colNames);

  	    email_addr=colValues.get(0);
  	    
  	    Assert.assertTrue(email_addr.equals(newEmail), newEmail+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
    	//Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(newEmail), newEmail+" is not equal to "+emailUI+"(UI) .Print type on UI: " +emailUI);

    	log("No change to cde_communication_pref value, email address updated to match txn value and cde_agency updated to SSA. No changes to print type value or agency.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47350() throws Exception{
    	
    	TestNGCustom.TCNo="test47350";
    	log("//TC 47350- DB has email, txn from same level w/ diff comm pref than DB ");
    	
    	log("1) Create SSA member with Communication Preference as Email with any print type.");

    	String agency="SSA";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Member created with cde_communication_pref stored as email with email address and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as SSA. No num_cell_phone should be stored.");

    	log("2) Upload xml file for the same member from MHO with different communication preference than DB and same print type.");
        
        String agency_MHO="MHO";
    	String communicationPref_text="TEXT\\SMS";
    	cellPhoneNum="1112223344";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_MHO, "id_source");
    	updateExistFile(communicationPref, communicationPref_text, "cde_communication_pref");
    	
        xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"));
  	    xml=xml.substring(0, xml.lastIndexOf("/>"));
  	    xml=xml+" num_cell_phone=\""+cellPhoneNum+"\"/>\n</EligibilityRequest>";

	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_MHO), agency_MHO+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref_text), communicationPref_text+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency_MHO), agency_MHO+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
  	    colNames.add("num_cell_phone");
  	    colValues=Common.executeQuery(sqlStatement, colNames);
  	   	
 	    String num_cell_phone= colValues.get(0);
 	   
  	    Assert.assertTrue(num_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);
    	
  		sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
  	    colNames.add("email_addr");
  	  
  	    try {
  	    	colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
  	
		}
    	
    	//Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");
        emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_text), communicationPreferenceUI+" is not equal to "+communicationPref_text+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);
        Assert.assertTrue(emailUI.equals(""), email+" is not equal to blank. Print type on UI: " +emailUI);

    	log("Cde_communication_pref updated to match txn value. No changes to print type value , cde_agency_pref and cde_agency_print udpated to MHO. If communication pref updated to Text\\SMS, then num_cell_phone should be inserted as well. Previously stored email address should be removed.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47351() throws Exception{
    	
    	TestNGCustom.TCNo="47351";
    	log("//TC 47351- DB has Text, txn from same level w/ same comm pref and cell ");
    	
    	log("1) Create SSA member with Communication Preference as Text with any print type.");

    	String agency="SSA";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
 		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Member created with cde_communication_pref stored as Text\\SMS with num_cell_phone and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as SSA. No email address should be stored.");

    	log("2) Upload xml file for the same member from MHO with the same communication preference and cell phone, different print type");

        String agency_MHO="MHO";
        String printType_LRG="LRG";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_MHO, "id_source");
	    updateExistFile(printType, printType_LRG, "cde_print_type");

 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency_MHO), agency_MHO+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType_LRG), printType_LRG+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_MHO), agency_MHO+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
   
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    numm_cell_phone=colValues.get(0);
   	
 	    Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);
 	    
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
 	   
 	    try {
 		    colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

	    } catch (NullPointerException e){
			
			 log("email_addr validation passed");
			 colNames.clear();
			 colValues.clear();
  	
	    }
 	    
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_LRG), printTypeUI+" is not equal to "+printType_LRG+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPref+" is not equal to "+communicationPreferenceUI+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneUI+" (UI) is not equal to blank .Cell phone on UI: " +cellPhoneUI);

    	log("No changes to cde_communication_pref value or num_cell_phone, cde_print_type updated to match txn value in t_re_communication table, cde_agency for both fields updated to MHO");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47352() throws Exception{
    	
    	TestNGCustom.TCNo="47352";
    	log("//TC 47352- DB has Text, txn from same level w/ same comm pref, diff cell ");
    	
    	log("1) Create MHO member with Communication Preference as Text with any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Member created with cde_communication_pref stored as Text\\SMS with num_cell_phone and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No email address should be stored.");

    	log("2) Upload xml file for the same member from SSA with the same communication preference and different cell phone and print type");

        String agency_SSA="SSA";
        String printType_LRG="LRG";
        String newCellPhoneNum="2223334455";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_SSA, "id_source");
	    updateExistFile(printType, printType_LRG, "cde_print_type");
	    updateExistFile(cellPhoneNum, newCellPhoneNum, "num_cell_phone");

 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
   
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    numm_cell_phone=colValues.get(0);
   	
 	    Assert.assertTrue(numm_cell_phone.equals(newCellPhoneNum), newCellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);
 	    
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
 	   
 	    try {
 		    colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

	    } catch (NullPointerException e){
			
			 log("email_addr validation passed");
			 colNames.clear();
			 colValues.clear();
  	
	    }
 	    
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPref+" is not equal to "+communicationPreferenceUI+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(newCellPhoneNum), cellPhoneUI+" (UI) is not equal to "+newCellPhoneNum+" .Cell phone on UI: " +cellPhoneUI);

    	log("No changes to cde_communication_pref value, num_cell_phone updated to match txn cell phone and cde_agency_pref updated to SSA. No changes to cde_print_type value or agency in t_re_communication table.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47353() throws Exception{
    	
    	TestNGCustom.TCNo="47353";
    	log("//TC 47353- DB has Text, txn from same level w/ same comm pref, diff cell ");
    	
    	log("1) Create MHO member with Communication Preference as Text with any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Member created with cde_communication_pref stored as Text\\SMS with num_cell_phone and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No email address should be stored.");

    	log("2) Upload xml file for the same member from SSA with different communication preference, same print type");
        
        String agency_SSA="SSA";
	    String communicationPref_email="EMAIL";
    	email=Common.generateRandomName()+"@gmail.com";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(agency, agency_SSA, "id_source");
	    updateExistFile(communicationPref, communicationPref_email, "cde_communication_pref");
	    
        xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"));
  	    xml=xml.substring(0, xml.lastIndexOf("/>"));
	    xml=xml+"email=\""+email+"\"/>\n</EligibilityRequest>";

 	    uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref_email), communicationPref_email+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
   
 	    try {
 		    colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

	    } catch (NullPointerException e){
			
			 log("num_cell_phone validation passed");
			 colNames.clear();
			 colValues.clear();
  	
	    }
 	    
 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
 	    colValues=Common.executeQuery(sqlStatement, colNames);

 	    String email_addr=colValues.get(0);
 	    
 	    Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
   	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_email), communicationPref_email+" is not equal to "+communicationPreferenceUI+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(""), cellPhoneUI+" (UI) is not equal to blank .Cell phone on UI: " +cellPhoneUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);
   
    	log(" Cde_communication_pref updated to match txn value. No changes to print type value , cde_agency_pref and cde_agency_print udpated to SSA. If communication pref updated to Email, then email address should be inserted as well. Previously stored cell phone number should be removed.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47354() throws Exception{
    	
    	TestNGCustom.TCNo="47354";
    	log("//TC 47354- DB has Paper, txn from same agency w/ same comm pref as DB");
    	
    	log("1) Create MHO member with Communication Preference as Paper with any print type.");

    	String agency="MHO";
    	String printType="LRG";
    	String communicationPref="PAPER";
    	String cellPhoneNum="";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

    	log("Member created with cde_communication_pref stored as paper and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No email or num_cell_phone stored.");

    	log("2) Upload xml file for the same member from MHO with same communication preference, different print type");

        String printType_LRG="LRG";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(printType, printType_LRG, "cde_print_type");
	    
	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_LRG), printType_LRG+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	//Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_LRG), printTypeUI+" is not equal to "+printType_LRG+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

    	log("No changes to cde_communication_pref value or agency, cde_print type value updated to match txn value and no changes to cde_agency_pref or cde_agency_print.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47355() throws Exception{
    	
    	TestNGCustom.TCNo="47355";
    	log("//TC 47355- DB has Paper, txn from same agency w/ diff comm pref as DB");
    	
    	log("1) Create HIX member with Communication Preference as Paper with any print type.");

    	String agency="HIX";
    	String printType="LRG";
    	String communicationPref="PAPER";
    	String cellPhoneNum="";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

    	log("Member created with cde_communication_pref stored as paper and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as HIX. No email or num_cell_phone stored.");
        
    	log("2) Upload xml file for the same member from HIX with different communication preference and print type than DB");

        String printType_braille="BRAILLE";
    	String communicationPref_email="EMAIL";
    	email=Common.generateRandomName()+"@gmail.com";
    	
        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(printType, printType_braille, "cde_print_type");
	    updateExistFile(communicationPref, communicationPref_email, "cde_communication_pref");

        xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"));
  	    xml=xml.substring(0, xml.lastIndexOf("/>"));
  	    xml=xml+ "email=\""+email+"\"/>\n</EligibilityRequest>";
	    
	    uploadMA21(xml);
	    
	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_braille), printType_braille+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref_email), communicationPref_email+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
    	
    	//Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_braille), printTypeUI+" is not equal to "+printType_braille+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_email), communicationPreferenceUI+" is not equal to "+communicationPref_email+" .Print type on UI: " +communicationPreferenceUI);
        
    	log("cde_communication_pref matches tansaction value and cde_agency_pref updated to SSA. No changes to print type value or cde_agency_print. If communication pref updated to Text\\SMS, then num_cell_phone should be inserted as well. If communication pref updated to Email, then email address should be inserted as well.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47356() throws Exception{
    	
    	TestNGCustom.TCNo="47356";
    	log("//TC 47356- DB has email, txn from same agency w/ same comm pref and email ");
    	
    	log("1) Create SSA member with Communication Preference as Email with email address and any print type.");

    	String agency="SSA";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Member created with cde_communication_pref stored as email with email address and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as SSA. No num_cell_phone should be stored.");
        
    	log("2) Upload xml file for the same member from SSA with the same communication preference, email address and print type.");

        updateExistFile(" ", mid, "id_medicaid");
  	    
 	    uploadMA21(xml);
 	    
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("No changes should be made to t_re_communication table. No records added to a_t_re_communication table.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47357() throws Exception{
    	
    	TestNGCustom.TCNo="47357";
    	log("//TC 47357- DB has email, txn from same agency w/ same comm pref, diff email ");
    	
    	log("1) Create HIX member with Communication Preference as Email with email address and any print type.");
    	
    	String agency="HIX";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Member created with cde_communication_pref stored as email, email address and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as HIX. No num_cell_phone stored.");
        
    	log("2) Upload xml file for the same member from HIX with the same communication preference, different email and same print type");

        String newEmail=Common.generateRandomName()+"@gmail.com";
        
        updateExistFile(" ", mid, "id_medicaid");
        updateExistFile(email, newEmail, "email");

 	    uploadMA21(xml);
 	    
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(newEmail), newEmail+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(newEmail), newEmail+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("No changes to cde_communication_pref or cde_print type. Email updated to match txn email address, cde_agency_print & cde_agency_pref stored as HIX.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47358() throws Exception{
    	
    	TestNGCustom.TCNo="47358";
    	log("//TC 47358- DB has email, txn from same agency w/ diff comm pref than DB ");
    	
    	log("1) Create MHO member with Communication Preference as Email with email address and any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);

    	log("Member created with cde_communication_pref stored as email, email address and cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No num_cell_phone stored.");
        
    	log("2) Upload xml file for the same member from MHO with a different communication preference than DB, and same print type.");

        String newEmail=Common.generateRandomName()+"@gmail.com";
        String communicationPref_text="TEXT\\SMS";
    	cellPhoneNum="1112223344";

        updateExistFile(" ", mid, "id_medicaid");
    	updateExistFile(communicationPref, communicationPref_text, "cde_communication_pref");

        xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"));
  	    xml=xml.substring(0, xml.lastIndexOf("/>"));
  	    xml=xml+" num_cell_phone=\""+cellPhoneNum+"\"/>\n</EligibilityRequest>";
  	    
 	    uploadMA21(xml);
 	    
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref_text), communicationPref_text+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String num_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(num_cell_phone.equals(num_cell_phone), num_cell_phone+" is not found \"t_re_communication\" table. Found: "+num_cell_phone);
    		
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_text), communicationPreferenceUI+" is not equal to "+communicationPref_text+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(""), newEmail+" is not equal to blank .Print type on UI: " +emailUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Cde_communication_pref matches tansaction value and no changes to cde_agency_pref, cde_ print_type value or cde_agency_print. If cde_communication_pref updated to Text\\SMS, then num_cell_phone should be inserted as well. Previously stored email address should be removed.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47359() throws Exception{
    	
    	TestNGCustom.TCNo="47359";
    	log("//TC 47359- DB has Text, txn from same agency w/ same comm pref and cell ");
    	
    	log("1) Create SSA member with Communication Preference as Text with cell phone number and any print type.");

    	String agency="SSA";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Member created with cde_communication_pref stored as Text\\SMS with num_cell_phone, cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as SSA. No email address stored.");

    	log("2) Upload xml file for the same member from SSA with same communication preference, cell phone number and print type");

        updateExistFile(" ", mid, "id_medicaid");

        uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
   
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    numm_cell_phone=colValues.get(0);
   	
 	    Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
   	
 	    try {
   		
 		    colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

 	    } catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
   	
 	    }
   	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPref+" is not equal to "+communicationPreferenceUI+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneUI+" (UI) is not equal to "+cellPhoneNum+" .Cell phone on UI: " +cellPhoneUI);
   
    	log("No changes to t_re_communication table");
    	
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47360() throws Exception{
    	
    	TestNGCustom.TCNo="47360";
    	log("//TC 47360- DB has Text, txn from same agency w/ same comm pref, diff cell ");
    	
    	log("1) Create MHO member with Communication Preference as Text with cell phone number and any print type.");

    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("Member created with cde_communication_pref stored as Text\\SMS with num_cell_phone, cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as MHO. No email address stored.");

    	log("2) Upload xml file for the same member from MHO with same communication preference, different cell phone number and print type");

        String printType_LRG="LRG";
        String newCellPhoneNum="2223334455";
        
        updateExistFile(" ", mid, "id_medicaid");
        updateExistFile(printType, printType_LRG, "cde_print_type");
        updateExistFile(cellPhoneNum, newCellPhoneNum, "num_cell_phone");

        uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType_LRG), printType_LRG+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
   
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    numm_cell_phone=colValues.get(0);
   	
 	    Assert.assertTrue(numm_cell_phone.equals(newCellPhoneNum), newCellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

 	    sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("email_addr");
   	
 	    try {
 		    colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

 	    } catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
   	
 	    }
   	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType_LRG), printTypeUI+" is not equal to "+printType_LRG+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPref+" is not equal to "+communicationPreferenceUI+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(newCellPhoneNum), cellPhoneUI+" (UI) is not equal to "+newCellPhoneNum+" .Cell phone on UI: " +cellPhoneUI);
   
    	log("No changes to cde_communication_pref, num_cell_phone and cde_print_type updated to match txn value, cde_agency_print & cde_agency_pref stored as MHO. No email address stored.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47361() throws Exception{
    	
    	TestNGCustom.TCNo="47361";
    	log("//TC 47361- DB has Text, txn from same agency w/ same comm pref, diff cell ");
    	
    	log("1) Create HIX member with Communication Preference as Text with cell phone number and any print type.");

    	String agency="HIX";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);

    	log("1) Create HIX member with Communication Preference as Text with cell phone number and any print type.");

    	log("Member created with cde_communication_pref stored as Text\\SMS with num_cell_phone, cde_print_type matches txn value in t_re_communication table, cde_agency_print & cde_agency_pref stored as HIX. No email address stored.");

        String printType_LRG="LRG";
        String communicationPref_email="EMAIL";
    	email=Common.generateRandomName()+"@gmail.com";

        updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile(communicationPref, communicationPref_email, "cde_communication_pref");
	    updateExistFile(printType, printType_LRG, "cde_print_type");
	    
        xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"));
  	    xml=xml.substring(0, xml.lastIndexOf("/>"));
	    xml=xml+"email=\""+email+"\"/>\n</EligibilityRequest>";

        uploadMA21(xml);
 	    
 	    sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_print");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_print=colValues.get(0);
   	 
 	    Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
 	    sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_print_type");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_print_type=colValues.get(0);
   	
 	    Assert.assertTrue(cde_print_type.equals(printType_LRG), printType_LRG+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
        
 	    sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_communication_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
  	
 	    cde_communication_pref=colValues.get(0);
  	
 	    Assert.assertTrue(cde_communication_pref.equals(communicationPref_email), communicationPref_email+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
  	
 	    sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("cde_agency_pref");
 	    colValues=Common.executeQuery(sqlStatement, colNames);
   	
 	    cde_agency_pref=colValues.get(0);
   	
 	    Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
  	
 	    sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
 	    colNames.add("num_cell_phone");
   
 	    try {
 	   		
		    colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

	    } catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
  	
	    }
   	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
   	
 	    //Validate * Member Communication Preference/Accommodations * panel

 	    memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
       
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType_LRG), printTypeUI+" is not equal to "+printType_LRG+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref_email), communicationPref_email+" is not equal to "+communicationPreferenceUI+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(""), cellPhoneUI+" (UI) is not equal to blank .Cell phone on UI: " +cellPhoneUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);
   
    	log("Cde_communication_pref and cde_print_type matches tansaction value and no changes to cde_agency_pref or cde_agency_print. If cde_communication_pref updated to Email, then email address should be inserted as well. Previously stored num_cell_phone should be removed.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47377() throws Exception{
    	
    	TestNGCustom.TCNo="47377";
    	log("//TC 47377- New member with email communication preference having email segm ");
    	
    	log("Create a new member or update existing member with cde_communication_pref as \"EMAIL\" where email attribute is missing");

    	//create test data
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        
    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String MA21= getMA21_CNS(otherid, fname, casenum, ssn, dob, adr1, city, zip, dep, aid, agency, printType, communicationPref, cellPhoneNum, email);
    	
    	MA21=MA21.substring(0, xml.indexOf(" email"));
    	MA21=MA21+"/>\n</EligibilityRequest>";

    	uploadMA21(MA21);
    	
    	Assert.assertTrue(errorMessage.trim().equals("Member Communication Preference Email address is missing or invalid"), "Did not get expected error message. Error message from output file: "+errorMessage);

    	log("Create a new member or update existing member with cde_communication_pref as \"EMAIL\" where email value is missing");
    	
    	//create test data
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        
    	agency="MHO";
    	printType="REG";
    	communicationPref="EMAIL";
    	cellPhoneNum="";
    	email=Common.generateRandomName()+"@gmail.com";
    	
    	getMA21_CNS(otherid, fname, casenum, ssn, dob, adr1, city, zip, dep, aid, agency, printType, communicationPref, cellPhoneNum, email);

	    updateExistFile(email, " ", "email");

    	Assert.assertTrue(uploadMA21_schemaError(xml), "Did not get schema error.");
    	
    	log("Create a new member or update existing member with cde_communication_pref as \"EMAIL\" where email value is invalid");

    	//create test data
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        
    	agency="MHO";
    	printType="REG";
    	communicationPref="EMAIL";
    	cellPhoneNum="";
    	email=Common.generateRandomName()+"gmail.com";
    	
    	getMA21_CNS(otherid, fname, casenum, ssn, dob, adr1, city, zip, dep, aid, agency, printType, communicationPref, cellPhoneNum, email);
    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:CLEAR")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:CLEAR")).click();

    	Assert.assertTrue(uploadMA21_schemaError(xml), "Did not get schema error.");
    	
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47379() throws Exception{
    	
    	TestNGCustom.TCNo="47379";
    	log("//TC 47379- New member with NON-email communication preference not having em ");
    	
    	log("Create a new member or update existing member with cde_communication_pref as \"TEXT\\SMS\" with email segment");

    	//create test data
        
    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="invalidemail@gmail.com";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum), cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);

    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);
    	
    	log("Valid or invalid member communication preference email received should be ignored");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47380() throws Exception{
    	
    	TestNGCustom.TCNo="47380";
    	log("//TC 47380- Existing member (without active benefits) with email communication ");
    	
    	log("Update existing member (without open eligibility) with cde_communication_pref as \"EMAIL\" without email segment");

    	//create test data
        
    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email="";
    	
    	//this will delete communication preference segment
    	commPrefrenence=false;
    	
    	mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	memberSearch(mid);
    	
    	driver.findElement(By.xpath("//a[text()='Member Benefit Plan']")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate']")).clear();
    	driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate']")).sendKeys(Common.convertSysdate());

    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).click();
    	driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate']")).clear();
    	driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate']")).sendKeys(Common.convertSysdate());
    	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EligCodeStatus"))).selectByVisibleText("Closed");

    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligPanel_updateAction_btn")).click();
    	Common.saveAll();
    	
    	updateExistFile(" ", mid, "id_medicaid");
    	
    	xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"))+("<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" />\n</EligibilityRequest>");;

    	System.out.println(xml);
    	
    	uploadMA21(xml);

    	Assert.assertTrue(errorMessage.trim().contains("Member Communication Preference Email address is missing or invalid"), "Did not get expected warning message");
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	
    	String expectedCommunicationPref="PAPER";
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(expectedCommunicationPref), expectedCommunicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	String expectedAgencyPref="";
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(expectedAgencyPref), "Blank \"Agency Pref\" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(expectedCommunicationPref), communicationPreferenceUI+" is not equal to "+expectedCommunicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(""), email+" is not equal to blank .Print type on UI: " +emailUI);
    
    	log("Default Communication Preference \"PAPER\" is stored in T_RE_COMMUNICATION table");
    	
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47381() throws Exception{
    	
    	TestNGCustom.TCNo="47381";
    	log("//TC 47381- Existing member (without active benefits) with email communication ");
    	
    	log("Update existing member (with open eligibility) with cde_communication_pref as \"EMAIL\" without email segment");

    	//create test data
        
    	String agency="HIX";
    	String printType="LRG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email="";
    	
    	//this will delete communication preference segment
    	commPrefrenence=false;
    	
    	mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	updateExistFile(" ", mid, "id_medicaid");

    	xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"))+("<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" />\n</EligibilityRequest>");;

    	System.out.println(xml);
    	
    	uploadMA21(xml);

    	Assert.assertTrue(errorMessage.trim().contains("Member Communication Preference Email address is missing or invalid"), "Did not get expected warning message");
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	
    	String expectedCommunicationPref="PAPER";
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(expectedCommunicationPref), expectedCommunicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	String expectedAgencyPref="";
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(expectedAgencyPref), "Blank \"Agency Pref\" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(expectedCommunicationPref), communicationPreferenceUI+" is not equal to "+expectedCommunicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(""), email+" is not equal to blank .Print type on UI: " +emailUI);
    
    	log("No updates made to the T_RE_COMMUNICATION table");
    	
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47382() throws Exception{
    	
    	TestNGCustom.TCNo="47382";
    	log("//TC 47382- New member with TEXT\\SMS communication preference having num_cel ");
    	
    	log("Create a new member or update existing member with cde_communication_pref as \"TEXT\\SMS\" with valid values for num_cell_phone");

    	//create test data
        
    	String agency="HIX";
    	String printType="LRG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="1112223344";
    	String email="";
    	
    	//this will delete communication preference segment
    	commPrefrenence=false;
    	
    	mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	memberSearch(mid);
    	
    	String cellPhoneNum_UI= new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_phoneNumberData"))).getFirstSelectedOption().toString();
    	log("Cell phone on UI before communication preference update: "+cellPhoneNum_UI);
    	
    	updateExistFile(" ", mid, "id_medicaid");

    	xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"))+("<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" num_cell_phone=\""+cellPhoneNum+"\"  />\n</EligibilityRequest>");;

    	System.out.println(xml);
    	
    	uploadMA21(xml);

    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), "\"Agency Pref\" is not equal to "+agency+". Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String numm_cell_phone=colValues.get(0);
    	
    	Assert.assertTrue(numm_cell_phone.equals(cellPhoneNum) && !(numm_cell_phone.equals(cellPhoneNum_UI)) , cellPhoneNum+" is not found \"t_re_communication\" table. Found: "+numm_cell_phone);
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(cellPhoneNum), cellPhoneNum+" (UI) is not equal to "+cellPhoneNum+" .Print type on UI: " +cellPhoneUI);
    
    	log("Valid values for num_cell_phone gets stored in T_RE_COMMUNICATION table that is different than num_cell_phone in member demographics segment stored in table.");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47383() throws Exception{
    	
    	TestNGCustom.TCNo="47383";
    	log("//TC 47383- New member with TEXT\\SMS communication preference having num_cel ");
    	
    	log("Create a new member or update existing member with cde_communication_pref as \"TEXT\\SMS\" where");
    	log("*** attribute is missing ***");

    	//create test data
    	
    	String agency="HIX";
    	String printType="LRG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="";
    	String email="";
    	
    	mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	Assert.assertTrue(errorMessage.trim().contains("Member Communication Preference Phone number is missing"), "Did not get expected warning message");

    	log("Receive following warning message \"Member Communication Preference Phone number is missing\"");

    	log("*** Value is invalid  ***");

    	//create test data

    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        
    	log("Receive schema error");

    	cellPhoneNum="11234556";
    	
    	getMA21_CNS(otherid, fname, casenum, ssn, dob, adr1, city, zip, dep, aid, agency, printType, communicationPref, cellPhoneNum, email);

    	uploadMA21_schemaError(xml);
    	
    	log("*** Value is missing  ***");

    	cellPhoneNum=" ";
    	
    	getMA21_CNS(otherid, fname, casenum, ssn, dob, adr1, city, zip, dep, aid, agency, printType, communicationPref, cellPhoneNum, email);

    	uploadMA21_schemaError(xml);
    	
    	log("Receive schema error");
    	
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47384() throws Exception{
    	
    	TestNGCustom.TCNo="47384";
    	log("//TC 47384 - New member with non-TEXT/SMS communication preference not having ");
    	
    	log("Create a new member or update existing member with cde_communication_pref as \"EMAIL\" without num_cell_phone segment");
    	
    	//create test data
    	
    	String agency="HIX";
    	String printType="LRG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="1112223344";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(communicationPref), communicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String email_addr=colValues.get(0);
    	
    	Assert.assertTrue(email_addr.equals(email), email+" is not found \"t_re_communication\" table. Found: "+email_addr);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String emailUI=driver.findElement(By.xpath("//textarea[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress']")).getText();
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(emailUI.equals(email), email+" is not equal to "+email+" .Print type on UI: " +emailUI);
        Assert.assertTrue(cellPhoneUI.equals(""), "Cell phone is not equal to blank .Print type on UI: " +cellPhoneUI);

        log("Valid or invalid member communication preference num_cell_phone is ignored");
    	
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47386() throws Exception{
    	
    	TestNGCustom.TCNo="47386";
    	log("//TC 47386- Existing member (without active benefits) with TEXT/SMS communic ");
    	
    	//create test data
    	
    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="";
    	String email="";
    	
    	//this will delete communication preference segment
    	commPrefrenence=false;
    	
    	mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	memberSearch(mid);
    	
    	driver.findElement(By.xpath("//a[text()='Member Benefit Plan']")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligList_0:EligBean_ColValue_benefitPlan")).click();
    	driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate']")).clear();
    	driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate']")).sendKeys(Common.convertSysdate());

    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).click();
    	driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate']")).clear();
    	driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate']")).sendKeys(Common.convertSysdate());
    	new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EligCodeStatus"))).selectByVisibleText("Closed");

    	driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligPanel_updateAction_btn")).click();
    	Common.saveAll();
    	
    	updateExistFile(" ", mid, "id_medicaid");
    	
    	xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"))+("<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" />\n</EligibilityRequest>");;

    	log("Update existing member (without open eligibility) with cde_communication_pref as \"TEXT/SMS\" without num_cell_phone segment");

    	uploadMA21(xml);

    	Assert.assertTrue(errorMessage.trim().contains("Member Communication Preference Phone number is missing"), "Did not get expected warning message");
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	String expectedCommunicationPref="PAPER";
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(expectedCommunicationPref), expectedCommunicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	String expectedAgencyPref="";
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(expectedAgencyPref), "Blank \"Agency Pref\" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(expectedCommunicationPref), communicationPreferenceUI+" is not equal to "+expectedCommunicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(""), "Cell phone is not equal to blank .Print type on UI: " +cellPhoneUI);
    
        log("Default Communication Preference \"PAPER\" is stored in T_RE_COMMUNICATION table");
        
    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47387() throws Exception{
    	
    	TestNGCustom.TCNo="47387";
    	log("//TC 47387- Existing member (with active benefits) with TEXT/SMS communic ");
    	
    	log("First create member to update");

    	//create test data
    	
    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	String cellPhoneNum="";
    	String email="";
    	
    	//this will delete communication preference segment
    	commPrefrenence=false;
    	
    	mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	String expectedCommunicationPref="PAPER";
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref_before=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref_before.equals(expectedCommunicationPref), expectedCommunicationPref+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref_before);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type_before=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type_before.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type_before);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";

    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
    		colValues.get(0);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (IndexOutOfBoundsException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	log("Member created succesfully");

    	log("Update existing member (with open eligibility) with cde_communication_pref as \"TEXT/SMS\" without num_cell_phone segment");
    	
    	updateExistFile(" ", mid, "id_medicaid");
    	
    	xml=xml.substring(0, xml.indexOf("</EligibilityRequest>"))+("<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" />\n</EligibilityRequest>");;

    	uploadMA21(xml);

    	Assert.assertTrue(errorMessage.trim().contains("Member Communication Preference Phone number is missing"), "Did not get expected warning message");
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(cde_print_type_before), cde_print_type_before+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	sqlStatement="select cde_communication_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_communication_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_communication_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_communication_pref.equals(cde_communication_pref_before), cde_communication_pref_before+" is not found \"t_re_communication\" table. Found: "+cde_communication_pref);
    	
    	String expectedAgencyPref="";
    	
    	sqlStatement="select cde_agency_pref from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_pref");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_pref=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_pref.equals(expectedAgencyPref), "Blank \"Agency Pref\" is not found \"t_re_communication\" table. Found: "+cde_agency_pref);
    	
    	sqlStatement="select num_cell_phone from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("num_cell_phone");
    
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("num_cell_phone validation in T_RE_COMMUNICATION tabble failed. num_cell_phone is not null in DB.");

		} catch (NullPointerException e){
			
			log("num_cell_phone validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
    	sqlStatement="select email_addr from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("email_addr");
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("email_addr validation in T_RE_COMMUNICATION tabble failed. email_addr is not null in DB.");

		} catch (NullPointerException e){
			
			log("email_addr validation passed");
			colNames.clear();
			colValues.clear();
    	
    	}
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");
        String cellPhoneUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_NumberCellPhone']")).getText();

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(expectedCommunicationPref), communicationPreferenceUI+" is not equal to "+expectedCommunicationPref+" .Print type on UI: " +communicationPreferenceUI);
        Assert.assertTrue(cellPhoneUI.equals(""), "Cell phone is not equal to blank .Print type on UI: " +cellPhoneUI);
    
    	log("No updates made to the T_RE_COMMUNICATION table");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47401() throws Exception{
    	
    	TestNGCustom.TCNo="47401";
    	log("//TC 47401- Description of state code ID  ");
    	
    	log("Validate state code (AA and AP) descriptions in T_STATE table.");
    	
    	String expectedDescAA="ARMED FORCES AM";
    	String expectedDescAP="ARMED FORCES PA";
    	
    	sqlStatement="select dsc_state from t_state where cde_state in ('AA', 'AP')";
    	colNames.add("dsc_state");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String actualDescAA=colValues.get(0);
    	String actualDescAP=colValues.get(1);
    	
    	Assert.assertTrue(actualDescAA.equals(expectedDescAA), "Description from DB("+actualDescAA+") does not match with expected description("+expectedDescAA+")");
    	Assert.assertTrue(expectedDescAP.equals(actualDescAP), "Description from DB("+actualDescAP+") does not match with expected description("+expectedDescAP+")");

    	log(TestNGCustom.TCNo+" passed");

    }
    
    
    @Test
    public void test47402() throws Exception{
    	
    	TestNGCustom.TCNo="47402";
    	log("//TC 47402- New state code value AA and AP accepted in MMIS  ");
    	
    	log("Verify the state code \"AA\" and \"AP\" is accepted in MMIS in the eligibility feeds for all eligibility sources.");
    	
    	log("Verify the state code \"AA\"");

    	//create test data
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        
    	String agency="MHO";
    	String printType="REG";
    	String communicationPref="EMAIL";
    	String cellPhoneNum="";
    	String email=Common.generateRandomName()+"@gmail.com";
    	
    	String MA21= getMA21_CNS(otherid, fname, casenum, ssn, dob, adr1, city, zip, dep, aid, agency, printType, communicationPref, cellPhoneNum, email);    	

    	String stateCodeinFile="AA";
    	updateExistFile("MA", stateCodeinFile, "res_adr_state");
    	
    	String mid=uploadMA21(xml);
    	
    	memberSearch(mid);
    	
    	String stateOnUI=driver.findElement(By.xpath("//label[@for='MMISForm:MMISBodyContent:RecipientInformationBean_State']//..//../td[2]")).getText();
    	
    	Assert.assertTrue(stateOnUI.equals(stateCodeinFile), "State on UI is not equal to state in file("+stateCodeinFile+ ").State on UI: "+stateOnUI);
    	
    	//validate adr_state in t_re_base table
    	sqlStatement="select adr_state from t_re_base where id_medicaid='"+mid+"'";
    	colNames.add("adr_state");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String adr_state=colValues.get(0);
    	
    	Assert.assertTrue(adr_state.equals(stateCodeinFile), "adr_state record in t_re_base table for MID: "+mid+" is no equal to "+stateCodeinFile+" (in file). Actual record in DB: "+adr_state);
    	
    	log("Verifying the state code \"AA\" is succesfull");
    	
    	log("Verify the state code \"AP\"");

    	//create test data
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        
    	agency="HIX";
    	printType="REG";
    	communicationPref="EMAIL";
    	cellPhoneNum="";
    	email=Common.generateRandomName()+"@gmail.com";
    	
    	MA21= getMA21_CNS(otherid, fname, casenum, ssn, dob, adr1, city, zip, dep, aid, agency, printType, communicationPref, cellPhoneNum, email);    	

    	stateCodeinFile="AP";
    	updateExistFile("MA", stateCodeinFile, "res_adr_state");
    	
    	mid=uploadMA21(xml);
    	
    	memberSearch(mid);
    	
    	stateOnUI=driver.findElement(By.xpath("//label[@for='MMISForm:MMISBodyContent:RecipientInformationBean_State']//..//../td[2]")).getText();
    	
    	Assert.assertTrue(stateOnUI.equals(stateCodeinFile), "State on UI is not equal to state in file("+stateCodeinFile+ ").State on UI: "+stateOnUI);
    
    	//validate adr_state in t_re_base table
    	sqlStatement="select adr_state from t_re_base where id_medicaid='"+mid+"'";
    	colNames.add("adr_state");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	adr_state=colValues.get(0);
    	
    	Assert.assertTrue(adr_state.equals(stateCodeinFile), "adr_state record in t_re_base table for MID: "+mid+" is no equal to "+stateCodeinFile+" (in file). Actual record in DB: "+adr_state);
    	log("Verifying the state code \"AP\" is succesfull");
    	
    	log("Verify that invalid state code throwa schema error on UI");

    	//create test data
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        
    	agency="HIX";
    	printType="REG";
    	communicationPref="EMAIL";
    	cellPhoneNum="";
    	email=Common.generateRandomName()+"@gmail.com";
    	
    	MA21= getMA21_CNS(otherid, fname, casenum, ssn, dob, adr1, city, zip, dep, aid, agency, printType, communicationPref, cellPhoneNum, email);    	

    	stateCodeinFile="WD";
    	updateExistFile("MA", stateCodeinFile, "res_adr_state");
    	
    	uploadMA21_schemaError(xml);
    
    	log("Verifying invalid state code is succesfull");
    	
    	log(TestNGCustom.TCNo+" passed");
    
    }
    
    
    @Test
    public void test47435() throws Exception{
    	
    	TestNGCustom.TCNo="47435";
    	log("//TC 47435- Inactve cat14, exst print type, In txn print typ, actv cat14 ");
    	
    	log("1)Create a new member from MHO with cde_print_type as LRG and inactive aidcat 14.");

    	String agency="MHO";
    	String printType="LRG";
    	String communicationPref="PAPER";
    	String cellPhoneNum="";
    	String email="";
    	
    	endElig=true;  endEligDate="2024-08-01"; specificAidCat="14"; openRsn="00";
    	
    	String mid= testCreateMember_CNS(agency, printType ,communicationPref, cellPhoneNum, email);
    	
    	sqlStatement="select dte_end from t_re_elig where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("dte_end");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String endDateEligDB=colValues.get(0);
    	
    	Assert.assertTrue(endEligDate.equals(Common.convertDate_DBformat_TO_fileFormat(endDateEligDB)), endEligDate+" (in file) is not equal to "+endEligDate+"(in DB) table. Found: "+endDateEligDB);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        //Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        String aidCategoryOnUI=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        String aidCategoryEndDateOnUI=aidCategoryOnUI.substring(16);
        
        Assert.assertTrue(aidCategoryEndDateOnUI.equals(Common.convertDate_yyyyHIFENmmHIFENddToRegular(endEligDate)), aidCategoryEndDateOnUI+"eligibility end date on UI is not equal to "+Common.convertDate_yyyyHIFENmmHIFENddToRegular(endEligDate)+" eligibility en date in file .Eligibility end date on UI: " +Common.convertDate_yyyyHIFENmmHIFENddToRegular(endEligDate));
        
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        String communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);
        Assert.assertTrue(communicationPreferenceUI.equals(communicationPref), communicationPreferenceUI+" is not equal to "+communicationPref+" .Print type on UI: " +communicationPreferenceUI);

    	log("Member created with LRG cde_print_type, and cde_agency_print MHO and inactive aidcat 14.");

    	log("2)Upload xml for the same member from SSA with REG cde_print_type and aidcat 14.");

        String printType_REG="REG";
        String agency_SSA="SSA";

    	updateExistFile(" ", mid, "id_medicaid");
    	updateExistFile(endEligDate, openEndDateFile, "dte_end_elig");
    	updateExistFile(closedEligStatus, openEligStatus, "cde_elig_status");

    	updateExistFile(printType, printType_REG, "cde_print_type");
    	updateExistFile(agency, agency_SSA, "id_source");

    	//delete dte_end_elig 
    	xml=xml.substring(0, xml.indexOf("cde_close_reason"))+xml.substring(xml.indexOf("cde_region"));

    	uploadMA21(xml);
    	
    	sqlStatement="select dte_end from t_re_elig where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("dte_end");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	endDateEligDB=colValues.get(0);
    	
    	Assert.assertTrue(openEndDateFile.equals(Common.convertDate_DBformat_TO_fileFormat(endDateEligDB)), openEndDateFile+" (in file) is not equal to "+endDateEligDB+"(in DB) table. Found: "+endDateEligDB);

    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(""), "NULL is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);

    	//Validate * Member Communication Preference/Accommodations * panel

    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        
        aidCategoryOnUI=new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientInformation_aidCategory"))).getFirstSelectedOption().getText();
        aidCategoryEndDateOnUI=aidCategoryOnUI.substring(15);
        
        printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        communicationPreferenceUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref']")).getAttribute("value");

        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);

    	log("cde_print_type remains same and cde_agency_print stored as blank.");
    	
    	log("3)Upload xml for the same member from SSA with LRG cde_print_type and aidcat 14.");

    	updateExistFile(printType_REG, printType, "cde_print_type");
    	
    	uploadMA21(xml);

    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
		
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);

    	log("cde_print_type remains same and cde_agency_print updated to SSA.");
    	
    	log("4)Upload xml for the same member from SSA with BRAILLE cde_print_type and aidcat 14.");

    	String printType_BRAILLE="BRAILLE";
    	
    	updateExistFile(printType, printType_BRAILLE, "cde_print_type");
    	
    	uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);

    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_BRAILLE), printType_BRAILLE+" is not found \"t_re_communication\" table. Found: "+cde_print_type);

    	log("cde_print_type updated to Braille and cde_agency_print remains same as DB.");
    	
    	log("5)Upload xml for the same member from SSA with REG cde_print_type and aidcat 14.");
    	
    	updateExistFile(printType_BRAILLE, printType_REG, "cde_print_type");
    	
    	uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);

    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_BRAILLE), printType_BRAILLE+" is not found \"t_re_communication\" table. Found: "+cde_print_type);

    	log("cde_print_type and cde_agency_print remains same as DB.");
    	
    	log("6)Upload xml for the same member from SSA with LRG cde_print_type and aidcat 14.");
    	
    	updateExistFile(printType_REG, printType, "cde_print_type");
    	
    	uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency_SSA), agency_SSA+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);

    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType_BRAILLE), printType_BRAILLE+" is not found \"t_re_communication\" table. Found: "+cde_print_type);

    	log("cde_print_type and cde_agency_print remains same as DB.");
    	
    	log(TestNGCustom.TCNo+" passed");


    }
    
    /* Singh Abujot CNS Started*/
    
    @Test
    public void test47311() throws Exception {
                              TestNGCustom.TCNo="test47311";

                   log("//TC test47311");
                   String [] CDE_PRINT_TYPE_array = {"REG","LRG","BRAILLE"};
                   String [] DSC_PRINT_TYPE_array = {"Regular","Large Print","Braille"};
                   
                   for (int i = 0; i < CDE_PRINT_TYPE_array.length; i++) {
                                 
                	   sqlStatement = "select * from T_CDE_COMM_PRINT where CDE_PRINT_TYPE = '"+CDE_PRINT_TYPE_array[i]+"'";
                	   colNames.add("CDE_PRINT_TYPE");                
                	   colNames.add("DSC_PRINT_TYPE");
                                          
                	   colValues = Common.executeQuery(sqlStatement, colNames);
                                          
                	   String CDE_PRINT_TYPE = colValues.get(0);
                	   String DSC_PRINT_TYPE = colValues.get(1);
                	   log(CDE_PRINT_TYPE +" "+ DSC_PRINT_TYPE);
                	   Assert.assertTrue(DSC_PRINT_TYPE.equals(DSC_PRINT_TYPE_array[i]), "Print type description has mismatch expected: "+DSC_PRINT_TYPE_array[i]+" but found: "+ DSC_PRINT_TYPE);

                   }
               
    }

    
    @Test
    public void test47336() throws Exception {
                              TestNGCustom.TCNo="test47336";

                   log("//TC test47336");
                   String [] CDE_COMM_PERF_array = {"PAPER","EMAIL","TEXT\\SMS"};
                   String [] DSC_COMM_PERF_array = {"Paper","Paperless-email","Paperless-text"};
                   
                   for (int i = 0; i < CDE_COMM_PERF_array.length; i++) {
                                  
                	   sqlStatement = "select * from T_CDE_COMM_PREF where CDE_COMMUNICATION_PREF = '"+CDE_COMM_PERF_array[i]+"'";
                	   colNames.add("CDE_COMMUNICATION_PREF");     
                	   colNames.add("DSC_COMMUNICATION_PREF");
                	   colNames.add("ID_VERSION_LOCK");
                	   
                	   colValues = Common.executeQuery(sqlStatement, colNames);
                               
                	   String CDE_COMM_PERF = colValues.get(0);
                	   String DSC_COMM_PERF = colValues.get(1);
                	   String ID_VERSION_LOCK = colValues.get(2);
                	   log(CDE_COMM_PERF + " "+DSC_COMM_PERF);
                	   Assert.assertTrue(DSC_COMM_PERF.equals(DSC_COMM_PERF_array[i]), "Code Pref description has mismatch expected: "+DSC_COMM_PERF_array[i]+" but found: "+ DSC_COMM_PERF);

                   }
               
    }

    
    
    @Test
    public void test47320() throws Exception{
    	
    	TestNGCustom.TCNo="47320";
    	log("//TC 47320 - Actve mem, exst prnt typ BRAILLE, In txn no print typ sgmnt & cat14 Test Case");
    	
    	List<WebElement> agencyAffiliations =new ArrayList<>();
    	boolean agencyFound=false;
    	
    	/* Create a SSA member with any cde_print_type field. */
    	
    	String agency="SSA";
    	String printType="BRAILLE";
    	String communicationPref="TEXT\\SMS";
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, "", "");
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        
        //Validate * Member Communication Preference/Accommodations * panel
    	memberSearch(mid);
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);

    	/* Upload XMl with cde_cat = 14 instead of 40 and validate. cde_agency_print, cde_print_type remains unchnaged*/
    	
//    	agency="MHO";
    	
	    updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile("40", "14", "cde_cat");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	// validate CDE_cat is chnage to 14 
    	
    	sqlStatement="select a.sak_recip, c.ID_MEDICAID, b.CDE_AID_CATEGORY from t_re_aid_elig a , t_cde_aid b, t_re_base c where a.sak_recip = c.sak_recip and b.SAK_CDE_AID = a.SAK_CDE_AID and b.CDE_AID_CATEGORY = '14' and c.id_medicaid='"+mid+"'";
    		
    	colNames.add("CDE_AID_CATEGORY");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	Assert.assertTrue(colValues.get(0).equals("14"), "CDE_AID_CATEGORY is no 14 but found : "+colValues.get(0));
        
    	
    }
    
    
    @Test
    public void test47321() throws Exception{
    	
    	TestNGCustom.TCNo="47321";
    	log("//TC 47321 - Actve mem, exst prnt typ REG, In txn no print typ sgmnt & cat14 Test Case");
    	
    	List<WebElement> agencyAffiliations =new ArrayList<>();
    	boolean agencyFound=false;
    	
    	/* Create a SSA member with any cde_print_type field. */
    	
    	String agency="SSA";
    	String printType="REG";
    	String communicationPref="TEXT\\SMS";
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, "", "");
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        
        //Validate * Member Communication Preference/Accommodations * panel
    	memberSearch(mid);

        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);

    	/* Upload XMl with cde_cat = 14 instead of 40 and validate. cde_agency_print, cde_print_type remains unchnaged*/
    	

    	
	    updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile("40", "14", "cde_cat");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	Assert.assertTrue(colValues.get(0).equals(""), " blank is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	// validate CDE_cat is chnage to 14 
    	
    	sqlStatement="select a.sak_recip, c.ID_MEDICAID, b.CDE_AID_CATEGORY from t_re_aid_elig a , t_cde_aid b, t_re_base c where a.sak_recip = c.sak_recip and b.SAK_CDE_AID = a.SAK_CDE_AID and b.CDE_AID_CATEGORY = '14' and c.id_medicaid='"+mid+"'";	    		
    	colNames.add("CDE_AID_CATEGORY");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	Assert.assertTrue(colValues.get(0).equals("14"), "CDE_AID_CATEGORY is no 14 but found : "+colValues.get(0));
        
    	
    }
    
    @Test
    public void test47322() throws Exception{
    	
    	TestNGCustom.TCNo="test47322";
    	log("//TC test47322 - Actve mem, exst prnt typ LRG, In txn no print typ sgmnt & cat14 Test Case");
    	
    	List<WebElement> agencyAffiliations =new ArrayList<>();
    	boolean agencyFound=false;
    	
    	/* Create a SSA member with any cde_print_type field. */
    	
    	String agency="SSA";
    	String printType="LRG";
    	String communicationPref="TEXT\\SMS";
    	
    	String mid= testCreateMember_CNS(agency,printType ,communicationPref, "", "");
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_agency_print=colValues.get(0);
    	
    	Assert.assertTrue(cde_agency_print.equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+cde_agency_print);
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
        
        //Validate * Member Communication Preference/Accommodations * panel
    	memberSearch(mid);
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);

    	/* Upload XMl with cde_cat = 14 instead of 40 and validate. cde_agency_print, cde_print_type remains unchnaged*/
    	
//    	agency="MHO";
    	
	    updateExistFile(" ", mid, "id_medicaid");
	    updateExistFile("40", "14", "cde_cat");

    	mid= uploadMA21(xml);
    	
    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_agency_print");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
    	
    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	cde_print_type=colValues.get(0);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	
    	// validate CDE_cat is chnage to 14 
    	// i think i should be finding by Medicad id ask anshul
    	sqlStatement="select a.sak_recip, c.ID_MEDICAID, b.CDE_AID_CATEGORY from t_re_aid_elig a , t_cde_aid b, t_re_base c where a.sak_recip = c.sak_recip and b.SAK_CDE_AID = a.SAK_CDE_AID and b.CDE_AID_CATEGORY = '14' and c.id_medicaid='"+mid+"'";
    		
    	colNames.add("CDE_AID_CATEGORY");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	Assert.assertTrue(colValues.get(0).equals("14"), "CDE_AID_CATEGORY is no 14 but found : "+colValues.get(0));
        
    	
    }
    
    @Test
    public void test47323() throws Exception{
	    	
	    	TestNGCustom.TCNo="test47323";
	    	log("//TC test47323 - Actve mem, exst prnt typ LRG, In txn no print typ sgmnt & cat14 Test Case");
	    	
	    	/* Create a SSA member with no print segment (no communication tag). */
	    	
	      	otherid = Common.generateRandomTaxID();
	    	fname=Common.generateRandomName();
	    	casenum=Common.generateRandomTaxID();
	        ssn="1"+Common.generateRandomTaxID().substring(0,8);
	        dob ="2001-09-01";
	        adr1="100 HANCOCK ST";
	        city="QUINCY";
	        zip="02171";
	        dep="00";
	        aid="14";
	        beginDate="2023-02-01";
	        agency="SSA";
	        String mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
	    	
	    	sqlStatement="select cde_agency_print from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("cde_agency_print");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	
	    	String cde_agency_print=colValues.get(0);
	    	
	    	Assert.assertTrue(cde_agency_print.equals(""), " cde_agency_print should be empty in \"t_re_communication\" table. but Found: "+cde_agency_print);
	    	
	    	sqlStatement="select cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("cde_print_type");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	
	    	String cde_print_type=colValues.get(0);
	    	
	    	Assert.assertTrue(cde_print_type.equals("LRG"), "print type is LRG in \"t_re_communication\" table. but Found: "+cde_print_type);
	    	
	        
	        //Validate * Member Communication Preference/Accommodations * panel
	    	memberSearch(mid);
	        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
	        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
	        
	    	Assert.assertTrue(cde_print_type.equals("LRG"), "print type is LRG in \"t_re_communication\" table. but Found: "+cde_print_type);

	  
	    	  	
	    }
    
    @Test
    public void test47335() throws Exception{
    	
    	TestNGCustom.TCNo="test47335";
    	log("//TC test47335 - Active aidcat 14 and Print type - New Member Test Case");
    	
    	
    	
    	/* Create a SSA member with cde_print_type: REG and aidcat: 14 field. */
    	
    	String agency="SSA";
    	String printType="BRAILLE";
    	String communicationPref="TEXT\\SMS";
    	
    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="14";
        beginDate="2023-02-01";
        String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref , "", "");
        System.out.println(mid);
  ///// create and get memberID end
    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("CDE_AGENCY_PRINT");
    	colNames.add("cde_print_type");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String CDE_AGENCY_PRINT=colValues.get(0);
    	String cde_print_type=colValues.get(1);
    	
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type is not found \"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);

        
        //Validate * Member Communication Preference/Accommodations * panel
    	memberSearch(mid);
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
        String printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);

        
        /* Create a SSA member with cde_print_type: LRG and aidcat: 14 field. */
        
    	 agency="SSA";
    	 printType="LRG";
    
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="14";
        beginDate="2023-02-01";
         mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
        System.out.println(mid);
    	
    
    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("CDE_AGENCY_PRINT");
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	CDE_AGENCY_PRINT=colValues.get(0);
    	 cde_print_type=colValues.get(1);	
    	 
    	Assert.assertTrue(cde_print_type.equals(printType), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type is not found \"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);

        
        //Validate * Member Communication Preference/Accommodations * panel
    	memberSearch(mid);
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
         printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals(printType), printTypeUI+" is not equal to "+printType+" .Print type on UI: " +printTypeUI);

        
        /* Create a SSA member with cde_print_type: REG and aidcat: 14 field. */
        
     	 agency="SSA";
    	 printType="REG";
    
    	
    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="14";
        beginDate="2023-02-01";
         mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
        System.out.println(mid);
    	
    
    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("CDE_AGENCY_PRINT");
    	colNames.add("cde_print_type");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	
    	CDE_AGENCY_PRINT=colValues.get(0);
    	 cde_print_type=colValues.get(1);
    	 
    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG should be found \"t_re_communication\" table. but Found: "+cde_print_type);
    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "Blank should be the agency type is not found \"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);

        
        //Validate * Member Communication Preference/Accommodations * panel
    	memberSearch(mid);
        driver.findElement(By.xpath("//a[text() = 'Member Communication Preference/Accommodations']")).click();
         printTypeUI=driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType']")).getAttribute("value");
        
        Assert.assertTrue(printTypeUI.equals("LRG"), "LRG should be found .But Print type on UI: " +printTypeUI);
 }
    @Test
public void test47334() throws Exception{
    	
	       	
	    	String agency="SSA";
	    	String printType="REG";
	    	String communicationPref="TEXT\\SMS";
	    	
	    	TestNGCustom.TCNo="test47334";
	    	log("//TC test47334 - create new member from SSA with cde_print_type as REG and aidcat 14. upload xml for same memebr from SSA aid cat 14 and LRG cde_print_type  and update the same member from SSA with aidcat 14 and BRAILLE cde_print_type");
	    		    	
	      	// create and Get Member ID
	    	otherid = Common.generateRandomTaxID();
	    	fname=Common.generateRandomName();
	    	casenum=Common.generateRandomTaxID();
	        ssn="1"+Common.generateRandomTaxID().substring(0,8);
	        dob ="2001-09-01";
	        adr1="100 HANCOCK ST";
	        city="QUINCY";
	        zip="02171";
	        dep="00";
	        aid="14";
	        beginDate="2023-02-01";
	        String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
	        System.out.println(mid);
	       ///// create and get memberID end
	    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("CDE_AGENCY_PRINT");
	    	colNames.add("cde_print_type");
	    	
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	
	    	String CDE_AGENCY_PRINT=colValues.get(0);
	    	String cde_print_type=colValues.get(1);
	    	// Member created with LRG cde_print_type, and cde_agency_print as blank.
	    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
	    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "Blank should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
 //upload xml of same member with SSA aidcat 14 and LRG cde_print_type
	        updateExistFile("REG", "LRG", "cde_print_type");
	    	mid= uploadMA21(xml);
	    	
	    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("CDE_AGENCY_PRINT");
	    	colNames.add("cde_print_type");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	cde_print_type = colValues.get(1);
	    	CDE_AGENCY_PRINT = colValues.get(0);
	    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
	    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
	    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	    	
	    	//upload xml of same member with SSA aidcat 14 and BRAILLE cde_print_type
	    	updateExistFile("LRG", "BRAILLE", "cde_print_type");
	    	mid= uploadMA21(xml);
	    	
	    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("CDE_AGENCY_PRINT");
	    	colNames.add("cde_print_type");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	cde_print_type = colValues.get(1);
	    	CDE_AGENCY_PRINT = colValues.get(0);
	    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
	    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
	    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
	    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	    		
    	
    }
	
    @Test
public void test47333() throws Exception{
    	
	       	
	    	String agency="SSA";
	    	String printType="LRG";
	    	String communicationPref="TEXT\\SMS";
	    	
	    	TestNGCustom.TCNo="test47333";
	    	log("//TC test47333 - create new member from SSA with cde_print_type as LRG and aidcat 14. upload xml for same memebr from SSA aid cat 14 and REG cde_print_type  and update the same member from SSA with aidcat 14 and BRAILLE cde_print_type");
	    		    	
	      	// create and Get Member ID
	    	otherid = Common.generateRandomTaxID();
	    	fname=Common.generateRandomName();
	    	casenum=Common.generateRandomTaxID();
	        ssn="1"+Common.generateRandomTaxID().substring(0,8);
	        dob ="2001-09-01";
	        adr1="100 HANCOCK ST";
	        city="QUINCY";
	        zip="02171";
	        dep="00";
	        aid="14";
	        beginDate="2023-02-01";
	        String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
	        System.out.println(mid);
	       ///// create and get memberID end
	    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("CDE_AGENCY_PRINT");
	    	colNames.add("cde_print_type");
	    	
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	
	    	String CDE_AGENCY_PRINT=colValues.get(0);
	    	String cde_print_type=colValues.get(1);
	    	// Member created with LRG cde_print_type, and cde_agency_print as blank.
	    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
	    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
 //upload xml of same member with SSA aidcat 14 and LRG cde_print_type
	        updateExistFile("LRG", "REG", "cde_print_type");
	    	mid= uploadMA21(xml);
	    	
	    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("CDE_AGENCY_PRINT");
	    	colNames.add("cde_print_type");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	cde_print_type = colValues.get(1);
	    	CDE_AGENCY_PRINT = colValues.get(0);
	    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
	    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
	    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	    	
	    	//upload xml of same member with SSA aidcat 14 and BRAILLE cde_print_type
	    	updateExistFile("REG", "BRAILLE", "cde_print_type");
	    	mid= uploadMA21(xml);
	    	
	    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("CDE_AGENCY_PRINT");
	    	colNames.add("cde_print_type");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	cde_print_type = colValues.get(1);
	    	CDE_AGENCY_PRINT = colValues.get(0);
	    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
	    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
	    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
	    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	    		
    	
    } 
    @Test
    public void test47332() throws Exception{
	    	
		       	
		    	String agency="SSA";
		    	String printType="BRAILLE";
		    	String communicationPref="TEXT\\SMS";
		    	
		    	TestNGCustom.TCNo="test47332";
		    	log("//TC test47332 - create new member from SSA with cde_print_type as BRAILLE and aidcat 14. upload xml for same memebr from SSA aid cat 14 and LRG cde_print_type  and SSA with with aidcat 40 and REG cde_print_type and  update the same member from SSA with aidcat 14 and REG cde_print_type");
		    		    	
		      	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="14";
		        beginDate="2023-02-01";
		        String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       ///// create and get memberID end
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with LRG cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //upload xml of same member with SSA aidcat 14 and LRG cde_print_type
		        updateExistFile("BRAILLE", "LRG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	//upload xml of same member with SSA aidcat 40 and REG cde_print_type
		    	updateExistFile("LRG", "REG", "cde_print_type");
		    	updateExistFile("40", "14", "cde_cat");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
			
		   //upload xml of same member with SSA aidcat 14 and REG cde_print_type
		    	updateExistFile("14", "40", "cde_cat");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
			
	    } 
    
    @Test
    public void test47331() throws Exception{
	    	
		       	
		    	String agency="SSA";
		    	String printType="BRAILLE";
		    	String communicationPref="TEXT\\SMS";
		    	
		    	TestNGCustom.TCNo="test47331";
		    	log("//TC test47331 - create new member from SSA with cde_print_type as BRAILLE and aidcat 14. upload xml for same memebr from MHO and BRAILLE cde_print_type  and update the same member from MHO and REG cde_print_type:::: update the same member from MHO and LRG cde_print_type");
		    		    	
		      	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="14";
		        beginDate="2023-02-01";
		        String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       ///// create and get memberID end
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //upload xml of same member with SSA aidcat 14 and LRG cde_print_type
		        updateExistFile("SSA", "MHO", "id_source");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	//upload xml of same member with SSA aidcat 14 and BRAILLE cde_print_type
		    	updateExistFile("BRAILLE", "REG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    		
		  //upload xml of same member with SSA aidcat 14 and BRAILLE cde_print_type
		    	updateExistFile("REG", "LRG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	    	
	    } 
    
    @Test
    public void test47330() throws Exception{
	    	
		       	
		    	String agency="MHO";
		    	String printType="LRG";
		    	String communicationPref="TEXT\\SMS";
		    	
		    	TestNGCustom.TCNo="test47330";
		    	log("//TC test47330 - create new mem MHO, LRG:: update SSA, aidcat 14,REG:: update LRG:: MHO, LRG:: update to SSA, BRAILLE ");
		    		    	
		      	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		        String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       ///// create and get memberID end
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //upload xml of same member with SSA aidcat 14 and REG cde_print_type
		        updateExistFile("MHO", "SSA", "id_source");
		        updateExistFile("LRG", "REG", "cde_print_type");
		    	updateExistFile("40", "14", "cde_cat");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	//upload xml of same member  LRG cde_print_type
		    	updateExistFile("REG", "LRG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    		
		  //upload xml of same member with MHO and LRG cde_print_type
		    	
		    	updateExistFile("SSA", "MHO", "id_source");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
//upload xml of same member with SSA and BRAILLE cde_print_type
		    	
		    	updateExistFile("MHO", "SSA", "id_source");
		    	updateExistFile("LRG", "BRAILLE", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	    	
	    } 
    
    
    
    @Test
    public void test47328() throws Exception{
	    	
		       	
		    	String agency="MHO";
		    	String printType="BRAILLE";
		    	String communicationPref="TEXT\\SMS";
		    	
		    	TestNGCustom.TCNo="test47328";
		    	log("//TC test47328 - ");
		    		    	
		      	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		        String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       ///// create and get memberID end
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //upload xml of same member with SSA aidcat 14 and BRAILLE cde_print_type
		        updateExistFile("MHO", "SSA", "id_source");
		        updateExistFile("BRAILLE", "REG", "cde_print_type");
		    	updateExistFile("40", "14", "cde_cat");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	//upload xml of same member  LRG cde_print_type
		    	updateExistFile("REG", "LRG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    		
		  //upload xml of same member Braille cde_print_type
		    	
		    	updateExistFile("LRG", "BRAILLE", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT); 	
	      } 
    
    
    
    @Test
    public void test47329() throws Exception{
	    	
		       	
		    	String agency="MHO";
		    	String printType="REG";
		    	String communicationPref="TEXT\\SMS";
		    	
		    	TestNGCustom.TCNo="test47329";
		    	log("//TC test47329 - create new mem MHO, REG:: update SSA, aidcat 14,REG:: update  MHO, REG:: Update SSA, aidcat14, LRG;;;update to SSA, BRAILLE ");
		    		    	
		      	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		        String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref , "", "");
		        System.out.println(mid);
		       ///// create and get memberID end
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("REG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //2. upload xml of same member with SSA aidcat 14 and REG cde_print_type
		        updateExistFile("MHO", "SSA", "id_source");
		        
		    	updateExistFile("40", "14", "cde_cat");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "blank should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	//3. upload xml of same member  LRG cde_print_type
		       updateExistFile("SSA", "MHO", "id_source");
		       //updateExistFile("REG", "BRAILLE", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "blank should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		  
		   //3.b upload xml of same member  LRG cde_print_type
			       updateExistFile("MHO", "SSA", "id_source");
			       updateExistFile("REG", "LRG", "cde_print_type");
			    	mid= uploadMA21(xml);
			    	
			    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
			    	colNames.add("CDE_AGENCY_PRINT");
			    	colNames.add("cde_print_type");
			    	colValues=Common.executeQuery(sqlStatement, colNames);
			    	cde_print_type = colValues.get(1);
			    	CDE_AGENCY_PRINT = colValues.get(0);
			    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
			    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
			    	Assert.assertTrue(cde_print_type.equals("LRG"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
			    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
			 //4. upload xml of same member  LRG cde_print_type
				       updateExistFile("SSA", "MHO", "id_source");
				       updateExistFile("LRG", "REG", "cde_print_type");
				    	mid= uploadMA21(xml);
				    	
				    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
				    	colNames.add("CDE_AGENCY_PRINT");
				    	colNames.add("cde_print_type");
				    	colValues=Common.executeQuery(sqlStatement, colNames);
				    	cde_print_type = colValues.get(1);
				    	CDE_AGENCY_PRINT = colValues.get(0);
				    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
				    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
				    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
				    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
				  
			//4.b upload xml of same member  LRG cde_print_type
					       updateExistFile("MHO", "SSA", "id_source");
					       updateExistFile("REG", "BRAILLE", "cde_print_type");
					    	mid= uploadMA21(xml);
					    	
					    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
					    	colNames.add("CDE_AGENCY_PRINT");
					    	colNames.add("cde_print_type");
					    	colValues=Common.executeQuery(sqlStatement, colNames);
					    	cde_print_type = colValues.get(1);
					    	CDE_AGENCY_PRINT = colValues.get(0);
					    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
					    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
					    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
					    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
							
		  //5. upload xml of same member with MHO and LRG cde_print_type
		    	
		    	updateExistFile("SSA", "MHO", "id_source");
		    	updateExistFile("BRAILLE", "REG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
    //5.b upload xml of same member with SSA and BRAILLE cde_print_type
		    	
		    	updateExistFile("MHO", "DTA", "id_source");
		    	updateExistFile("REG", "BRAILLE", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	// ask this based on the tc it should be DTA
	    	
	    }
    
    @Test
    public void test47324() throws Exception{
			       	
		    	String agency="HIX";
		    	String printType="BRAILLE";
		    	String communicationPref="TEXT\\SMS";
		    	endElig= true;
		    	endEligDate="2023-12-31";
		    	
		    	TestNGCustom.TCNo="test47324";
		    	log("//TC test47324 - ");
		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="14";
		        beginDate="2023-02-01";
		    				    	
		       // String mid = testCreateMember_CNS(agency, printType, communicationPref);
		    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       ///// create and get memberID end
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //upload xml of same member with MHO aidcat 40 and REG cde_print_type
		        updateExistFile("HIX", "MHO", "id_source");
		        updateExistFile("BRAILLE", "REG", "cde_print_type");
		    	updateExistFile("14", "40", "cde_cat");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("REG"), "REG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	//upload xml of same member  with following
		    	updateExistFile("MHO", "SSA", "id_source");
		        updateExistFile("REG", "LRG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    		
		  //upload xml of same member with following
		    	updateExistFile("SSA", "MHO", "id_source");
		        updateExistFile("LRG", "BRAILLE", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
		  //upload xml of same member with following
		    	updateExistFile("MHO", "HIX", "id_source");
		        
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	      } 
    
    @Test
    public void test47325() throws Exception{
			       	
		    	String agency="HIX";
		    	String printType="BRAILLE";
		    	String communicationPref="TEXT\\SMS";
		    	endElig= true;
		    	endEligDate="2023-12-31";
		    	
		    	TestNGCustom.TCNo="test47325";
		    	log("//TC test47325 - ");
		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    	
		       // String mid = testCreateMember_CNS(agency, printType, communicationPref);
		    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       ///// create and get memberID end
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), printType+" is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //upload xml of same member with SSA aidcat 14 and REG cde_print_type
		        updateExistFile("HIX", "SSA", "id_source");
		        updateExistFile("BRAILLE", "REG", "cde_print_type");
		    	updateExistFile("40", "14", "cde_cat");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	
	//upload xml of same member  with with SSA aidcat 14 and LRG
		    	
		        updateExistFile("REG", "LRG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		
		  //upload xml of same member with SSA with aidcat 14 and BRAILLE
		    	
		        updateExistFile("LRG", "BRAILLE", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
		  //upload xml of same member with following
		    	
		        
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	      } 
    
    
    @Test
    public void test47326() throws Exception{
			       	
		    	String agency="HIX";
		    	String printType="REG";
		    	String communicationPref="TEXT\\SMS";
		    	endElig= true;
		    	endEligDate="2023-12-31";
		    	
		    	TestNGCustom.TCNo="test47326";
		    	log("//TC test47326 - ");
		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    	
		       // String mid = testCreateMember_CNS(agency, printType, communicationPref);
		    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       ///// create and get memberID end
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("REG"), "REG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //upload xml of same member with SSA aidcat 14 and REG cde_print_type
		        updateExistFile("HIX", "SSA", "id_source");
		    	updateExistFile("40", "14", "cde_cat");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "blank should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	//upload xml of same member  with following
		    	
		        updateExistFile("REG", "LRG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    		
		  //upload xml of same member with following
		    	
		        updateExistFile("LRG", "BRAILLE", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
		  //upload xml of same member with following
		    	updateExistFile("SSA", "DTA", "id_source");
		        
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "blank should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	      } 
    
    @Test
    public void test47327() throws Exception{
			       	
		    	String agency="HIX";
		    	String printType="LRG";
		    	String communicationPref="TEXT\\SMS";
		    	endElig= true;
		    	endEligDate="2023-12-31";
		    	
		    	TestNGCustom.TCNo="test47327";
		    	log("//TC test47327 - ");
		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    
		    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	 //upload xml of same member with SSA aidcat 14 and REG cde_print_type
		        updateExistFile("HIX", "SSA", "id_source");
		    	updateExistFile("40", "14", "cde_cat");
		    	updateExistFile("LRG", "REG", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "blank should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    	
	//existing HIX or MHO or SSA member with closed eligibility and cde_print_type as LRG in DB and update the same member from SSA with aidcat 14 and LRG cde_print_type
		    	 agency="HIX";
		    	 printType="LRG";
		    	 communicationPref="TEXT\\SMS";
		    	endElig= true;
		    	endEligDate="2023-12-31";
		    	
		    	TestNGCustom.TCNo="test47327";
		    	log("//TC test47327 - ");
		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    
		    	 mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        
		    	 updateExistFile("HIX", "SSA", "id_source");
			     updateExistFile("40", "14", "cde_cat");
			     
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		    		
		  //upload xml of same member with following
		    	
		        updateExistFile("LRG", "BRAILLE", "cde_print_type");
		    	mid= uploadMA21(xml);
		    	
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	cde_print_type = colValues.get(1);
		    	CDE_AGENCY_PRINT = colValues.get(0);
		    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
		    	//Assert.assertTrue(colValues.get(0).equals(agency), agency+" is not found \"t_re_communication\" table. Found: "+colValues.get(0));
		    	Assert.assertTrue(cde_print_type.equals("BRAILLE"), "BRAILLE is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		     } 
    
    
    @Test
    public void test47362() throws Exception{
			       	
		    	String agency="MHO";
		    	String printType="REG";
		    	String communicationPref="Fax";
		
		    	
		    	TestNGCustom.TCNo="test47362";
		    	log("//TC test47362 - ");
				    
		    	String mid = testCreateMember_CNS(agency, printType, communicationPref, "", "");
		        System.out.println(mid);
		       
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	System.out.println(colNames.size());
		    	System.out.println(colNames.get(0));
		    	System.out.println(colNames.get(1));

		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("REG"), "REG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	         //	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "MHO should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
		     }
    
    
    
    @Test
    public void test47363() throws Exception{
			       	
		    	String agency="MHO";
		    	String printType="REG";
		    	String communicationPref="EMAIL";
		    	TestNGCustom.TCNo="test47363";
		    	log("//TC test47363 - ");
		     	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    
		    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "jot@GMAIL.COM");
		        
		        System.out.println(mid);
		       
		    	sqlStatement="select CDE_COMMUNICATION_PREF, cde_print_type, CDE_AGENCY_PRINT from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_COMMUNICATION_PREF");
		    	colNames.add("cde_print_type");
		    	colNames.add("CDE_AGENCY_PRINT");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_COMMUNICATION_PREF=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	String CDE_AGENCY_PRINT=colValues.get(2);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("REG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_COMMUNICATION_PREF.equals("EMAIL"), "EMAIL should be  CDE_COMMUNICATION_PREF in\"t_re_communication\" table. but Found: -"+CDE_COMMUNICATION_PREF+"-");
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");

		    	//close the open eligibility segment with a past date and any closing reason
		    	endElig= true;
		    	endEligDate="2023-12-31";
		    	updateExistFile("EMAIL", "NOTHING", "cde_communication_pref");
		    	updateExistFile("MHO", "SSA", "id_source");
		    	
		    	mid= uploadMA21(xml);
		    	//Assert.assertTrue(cde_print_type.equals("REG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_COMMUNICATION_PREF.equals("PAPER"), "PAPER should be the CDE_COMMUNICATION_PREF type in\"t_re_communication\" table. but Found: -"+CDE_COMMUNICATION_PREF+"-");
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(" "), "blank should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
		     } 
    
    
    
    @Test
    public void test47364() throws Exception{
			       	
		    	String agency="SSA";
		    	String printType="LRG";
		    	String communicationPref="TEXT\\SMS";
		    	TestNGCustom.TCNo="test47364";
		    	log("//TC test47364 - ");
    				    
//		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    
		    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        
				System.out.println(mid);
		       
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	// Member created with BRAILLE cde_print_type, and cde_agency_print as SSA.
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "blank should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
		    	
		    	// invalid cde_communication_pref value from a HIX.
		    	updateExistFile("SSA", "HIX", "id_source");
		    	updateExistFile("TEXT\\SMS", "Message", "cde_communication_pref");
		    	mid= uploadMA21(xml);
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
		     } 
    
    
    @Test
    public void test47365() throws Exception{
			       	
		    	String agency="SSA";
		    	//String printType="REG";
		    	//String communicationPref="absent";
		    	TestNGCustom.TCNo="test47365";
		    	log("//TC test47365 - ");
    				    
//		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    
		    	String mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
		        
				System.out.println(mid);
		       
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colNames.add("CDE_COMMUNICATION_PREF");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	String CDE_COMMUNICATION_PREF=colValues.get(2);

		    	Assert.assertTrue(CDE_COMMUNICATION_PREF.equals("PAPER"), "PAPER is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(cde_print_type.equals("REG"), "REG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "blank should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	// agency - HIX
		    	 agency="HIX";
			    	String printType="REG";
		    	
    				    
//		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    
		    	mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
		        
				System.out.println(mid);
		       
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colNames.add("CDE_COMMUNICATION_PREF");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	 CDE_AGENCY_PRINT=colValues.get(0);
		    	 cde_print_type=colValues.get(1);
		    	 CDE_COMMUNICATION_PREF=colValues.get(2);

		    	Assert.assertTrue(CDE_COMMUNICATION_PREF.equals("PAPER"), "PAPER is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(cde_print_type.equals("REG"), "REG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals(""), "blank should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
		     
    }
    @Test
    public void test47366() throws Exception{
			       	
		    	String agency="SSA";
		    	String printType="REG";
		    	String communicationPref="TEXT\\SMS";
		    	TestNGCustom.TCNo="test47366";
		    	log("//TC test47366 - ");
    				    
//		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    
		    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", "");
		        
				System.out.println(mid);
		       
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colNames.add("CDE_COMMUNICATION_PREF");
		    	
		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	String CDE_COMMUNICATION_PREF=colValues.get(2);

		    	Assert.assertTrue(cde_print_type.equals("REG"), "REG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
//same member from a non authorized agency for communication preference without member communication preference segment
		   	 deleteCommunicationpreference( printType,  communicationPref,  "", "" );
		    

	    	mid= uploadMA21(xml);
	    	
	    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("CDE_AGENCY_PRINT");
	    	colNames.add("cde_print_type");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	cde_print_type = colValues.get(1);
	    	CDE_AGENCY_PRINT = colValues.get(0);
	    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
	    	
	    	Assert.assertTrue(cde_print_type.equals("REG"), "REG is not found \"t_re_communication\" table. Found: "+cde_print_type);
	    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: "+CDE_AGENCY_PRINT);
	    	
    }
    
    @Test
    public void test47367() throws Exception{
			       	
		    	String agency="HIX";
		    	String printType="LRG";
		    	String communicationPref="EMAIL";
		    	String emailIs = "jatt.test@gmail.com";
		    	TestNGCustom.TCNo="test47367";
		    	log("//TC test47367 - ");
    				    
//		    	// create and Get Member ID
		    	otherid = Common.generateRandomTaxID();
		    	fname=Common.generateRandomName();
		    	casenum=Common.generateRandomTaxID();
		        ssn="1"+Common.generateRandomTaxID().substring(0,8);
		        dob ="2001-09-01";
		        adr1="100 HANCOCK ST";
		        city="QUINCY";
		        zip="02171";
		        dep="00";
		        aid="40";
		        beginDate="2023-02-01";
		    				    
		    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs);
		        
				System.out.println(mid);
		       
		    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    	colNames.add("CDE_AGENCY_PRINT");
		    	colNames.add("cde_print_type");
		    	colNames.add("CDE_COMMUNICATION_PREF");
		    	colNames.add("EMAIL_ADDR");

		    	colValues=Common.executeQuery(sqlStatement, colNames);
		    	
		    	String CDE_AGENCY_PRINT=colValues.get(0);
		    	String cde_print_type=colValues.get(1);
		    	String CDE_COMMUNICATION_PREF=colValues.get(2);
		    	String EMAIL_ADDR=colValues.get(3);

		    	Assert.assertTrue(EMAIL_ADDR.equals(emailIs), emailIs+ " is not found \"t_re_communication\" table. Found: "+EMAIL_ADDR);
		    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
		    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
//same member with no email segment in XML 
		   	 deleteCommunicationEmailAddressTag( emailIs );
		    
	    	mid= uploadMA21(xml);
	    	
	    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	colNames.add("CDE_AGENCY_PRINT");
	    	colNames.add("cde_print_type");
	    	colNames.add("CDE_COMMUNICATION_PREF");
	    	colNames.add("EMAIL_ADDR");

	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	
	    	CDE_AGENCY_PRINT=colValues.get(0);
	    	cde_print_type=colValues.get(1);
	    	CDE_COMMUNICATION_PREF=colValues.get(2);
	    	EMAIL_ADDR=colValues.get(3);
	    	System.out.println(colValues.get(0) + " ----------------------------  "+ colValues.get(1));
	    	

	    	Assert.assertTrue(EMAIL_ADDR.equals(emailIs), emailIs+ " is not found \"t_re_communication\" table. Found: "+EMAIL_ADDR);
	    	Assert.assertTrue(cde_print_type.equals("LRG"), "LRG is not found \"t_re_communication\" table. Found: "+cde_print_type);
	    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");

    }
    
    @Test
    public void test47368() throws Exception{
	TestNGCustom.TCNo="47368";
	log("//TC 47368-");
	
	//Scenario 1
	log ("**Scenario 1");
	String email;
	String printType="BRAILLE";
	String communicationPref="EMAIL";
	
	String [] accom = {"VRS","CART"}; // valid accomodations
	
//	sqlStatement="select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, emailtable.EMAIL_ADDR from t_re_base b, t_re_aid_elig e, t_re_email_addr emailtable " +
//				"where b.sak_recip=e.sak_recip and emailtable.sak_recip=b.sak_recip and ind_active='Y' and dte_death='0' and num_ssn<>' ' and b.cde_race<>'WHITE'" +
//				"and e.cde_status1 <> 'H' and e.cde_agency='HCF' " +
//				"and to_char(sysdate,'YYYYMMDD') between e.dte_effective and e.dte_end " +
//				"and not exists (select 1 from t_re_aid_elig where sak_recip=b.sak_recip " +
//				"and cde_status1 <> 'H' and cde_agency <> e.cde_agency " +
//				"and to_char(sysdate, 'YYYYMMDD') between dte_effective and dte_end) " +
//				"and b.sak_recip > dbms_random.value * 6300000 " +
//				"and rownum < 2";
	
	sqlStatement="select b.id_medicaid, b.num_ssn, b.dte_birth, b.nam_first, b.nam_last, b.adr_street_1, b.adr_city, b.adr_zip_code, emailtable.EMAIL_ADDR from t_re_base b, t_re_aid_elig e, t_re_email_addr emailtable " +
			"where b.sak_recip=e.sak_recip and emailtable.sak_recip=b.sak_recip and ind_active='Y' and dte_death='0' and num_ssn<>' ' " +
			"and rownum < 2";
	
	colNames.add("ID_MEDICAID"); //0
	colNames.add("NUM_SSN");  	 //1
	colNames.add("DTE_BIRTH");   //2
	colNames.add("NAM_FIRST");   //3
	colNames.add("NAM_LAST");    //4
	colNames.add("ADR_STREET_1");//5
	colNames.add("ADR_CITY");    //6
	colNames.add("ADR_ZIP_CODE");//7
	colNames.add("EMAIL_ADDR");//8

	colValues = Common.executeQuery(sqlStatement, colNames);
	
	String mem = colValues.get(0);
    ssn=colValues.get(1);
    dob =colValues.get(2).substring(0, 4)+"-"+colValues.get(2).substring(4, 6)+"-"+colValues.get(2).substring(6, 8);
	fname=colValues.get(3);
	lastName = colValues.get(4);
    adr1=colValues.get(5);
    city=colValues.get(6);
    zip=colValues.get(7);
    email = colValues.get(8);
    
    
    
	otherid = Common.generateRandomTaxID();

	casenum=Common.generateRandomTaxID();
    dep="00";
    aid="40";
    agency="HIX";
    
    String ssn1=ssn; //store for later update to member 2
    String emailIs = "jatt.test@gmail.com";

    
//	String xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+" \" "+
//			"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic email=\""+email+"\" cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
//			"<case cde_case_status=\"1\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\"BUGS\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\"40\" cde_elig_status=\"1\" cde_line=\"00\" cde_office=\"600\" cde_open_reason=\"01\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+getEligeffDT(dob)+"\" family_size=\"07\" />\n</EligibilityRequest>"+
//			 "<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" email=\""+emailIs+"\"/>\n<accommodation cde_accommodation=\""+accom[0]+"\"/>\n<accommodation cde_accommodation=\""+accom[1]+"\"/>\n</EligibilityRequest>");

    xml = createXml( mem, otherid,  fname, lastName, ssn,  casenum,  dob,  adr1,  city,  zip,  dep,  aid,  agency,  printType,  communicationPref,  "",email,  emailIs,  accom);
	   
    String mem2 = uploadMA21(xml);
    
    sqlStatement="select  emailtable.EMAIL_ADDR from  t_re_email_addr emailtable where EMAIL_ADDR = '"+email+"'";
	colNames.add("EMAIL_ADDR"); //0
    colValues=Common.executeQuery(sqlStatement, colNames);

    Assert.assertTrue(colValues.get(0).equals(email), "email is not found which was found before uploading xml");
    Assert.assertTrue(mem2.equals(mem), "Memeber are differnet");
    
	sqlStatement="select EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mem+"')";
    colNames.add("EMAIL_ADDR");
    colValues=Common.executeQuery(sqlStatement, colNames);
    		    	
    Assert.assertTrue(colValues.get(0).equals(emailIs), "communication pref email is different than what is expected.");
   
    memberSearch(mem);
    
	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MemberCommunicationPreference")).click(); // click member communication
	String UIEmailAddr=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress")).getText();
	Assert.assertTrue(UIEmailAddr.equals(emailIs),  "Email Address is different in db VS UI");

     

    }
    
    @Test
    public void test47369a() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"III","BBB"};

    	TestNGCustom.TCNo="test47369a";
    	log("//TC test47369a - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    	
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);

    	//String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs);
        
		System.out.println(mid);
       
		sqlStatement="select CDE_ACCOMMODATION from  a_t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";

    	colNames.add("CDE_ACCOMMODATION");
    	//colValues=Common.executeQuery(sqlStatement, colNames);	    	
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("CDE_ACCOMMODATION validation in a_t_re_accommodation tabble failed. num_cell_phone is not null in DB.");
 
		} catch (NullPointerException e){
			log("CDE_ACCOMMODATION validation passed");
			colNames.clear();
			colValues.clear();
    	}

    }
   
    
    
    
    @Test
    public void test47369b() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"III","BRAILLE"};

    	TestNGCustom.TCNo="test47369b";
    	log("//TC test47369b - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);

		System.out.println(mid);
       
		sqlStatement="select CDE_ACCOMMODATION from  a_t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";

    	colNames.add("CDE_ACCOMMODATION");
    	//colValues=Common.executeQuery(sqlStatement, colNames);	    	
    	
    	try {
    		colValues=Common.executeQuery(sqlStatement, colNames);
		    throw new Exception("CDE_ACCOMMODATION validation in a_t_re_accommodation tabble failed. num_cell_phone is not null in DB.");
 
		} catch (NullPointerException e){
			log("CDE_ACCOMMODATION validation passed");
			colNames.clear();
			colValues.clear();
    	}
    	
    }
    
    
    @Test
    public void test47371() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"VRS","CART"};
    	
    	TestNGCustom.TCNo="test47371";
    	log("//TC test47371 ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
        
		System.out.println(mid);
       
    	sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
    		System.out.println("------------ new member in HIX with valid accomodations done.........");
    	}
    	// chnage agency to DTA: no chnages should be made to db and agency should remain as HIX
    	  agency = "DTA"; 
    		 
		  mid= uploadMA21(xml);
		    		    	
		  sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
		    colNames.add("CDE_AGENCY_PRINT");
		    colValues=Common.executeQuery(sqlStatement, colNames);
		    		    	
		  String CDE_AGENCY_PRINT=colValues.get(0);
		    Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
		    System.out.println("---XML had DTA-----agency remained HIX.. so this is good........");
		    
		    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
	    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
	    	}
		    System.out.println("--------Accomodation remained same as well.  no chnages were found. ........");
    }
    
    @Test
    public void test47370() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"BRAILLE","OTHER"};
    	TestNGCustom.TCNo="test47370";
    	log("//TC test47370 - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
        
		System.out.println(mid);
       
    	sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
    		System.out.println("------------ new member with valid accomodations done.........");
    	}
    	// following are invalid accomodations. 
//    	accom[0]= "ttt";
//    	accom[1]= "ddd";
        updateExistFile(accom[0], "ttt", "cde_accommodation");
        updateExistFile(accom[1], "ddd", "cde_accommodation");


    	mid= uploadMA21(xml);
	       sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals("OTHER")|| accomValue.equals("BRAILLE")) {
    	    	Assert.assertTrue(true, " accomodations got chnaged when invalid accomodations were passed");
    		}else {	Assert.assertTrue(false, "accomodations got chnaged when invalid accomodations were passed");
}
    		System.out.println("------------ invalid accom passed and these accoms did not get added so we are good..........");
    	}

//Send transaction with same valid accomodations as DB from MHO
    	agency = "MHO";
    	updateExistFile("ttt" ,accom[0], "cde_accommodation");
        updateExistFile("ddd", accom[1], "cde_accommodation");
    	updateExistFile("HIX" ,"MHO", "id_source");

        
    	accom[0]= "BRAILLE";
    	accom[1]= "OTHER"; 
    	mid= uploadMA21(xml);
    	
    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("CDE_AGENCY_PRINT");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String CDE_AGENCY_PRINT=colValues.get(0);
    	
    	Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");

    	sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(true, " accomodations should have not changed");
	    		}else {	Assert.assertTrue(false, "accomodations got chnaged even when valid accomodations were passed");
}
	    	}
    		System.out.println("----------with same valid accomodations and agency MHO passed only agency got chnaged  so we are good..........");
//chnage agency to SSA 
	    agency = "SSA";
    	updateExistFile("MHO" ,"SSA", "id_source");

 
	    mid= uploadMA21(xml);
	    		    	
	    sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("CDE_AGENCY_PRINT");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    		    	
	    CDE_AGENCY_PRINT=colValues.get(0);
	    Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	    System.out.println("--------agency changed to SSA..........");
//change accomodation to valid and see if the valid accomodation got updated in DB. 
	    	
	    
	    updateExistFile(accom[0], "CART" , "cde_accommodation");
        updateExistFile(accom[1], "VRS",  "cde_accommodation");
	    mid= uploadMA21(xml);
  	    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(true, " accomodations did not get updated in db");
	    		}else {	Assert.assertTrue(false, "accomodations did not get update in db");
}
	    	}
	    	
    System.out.println(accom[0]+"-----------"+accom[1]+"- are now accomodations ..........");

    }
    
    @Test
    public void test47372() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47372";
    	log("//TC test47372 - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
        
		System.out.println(mid);
       
	    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
    	}
    	
    	// update user with one invalid and one valid accomodation. 
    	
    	   updateExistFile(accom[0], "ttt" , "cde_accommodation");
	       updateExistFile(accom[1], "OTHER",  "cde_accommodation");
	        
    	mid= uploadMA21(xml);
    	sqlStatement="select  CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_COMMUNICATION_PREF");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String CDE_COMMUNICATION_PREF=colValues.get(0);

    	Assert.assertTrue(CDE_COMMUNICATION_PREF.equals("EMAIL"), "Text and SMS is not found \"t_re_communication\" table. Found: "+CDE_COMMUNICATION_PREF);
    	
    	
	       sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals("OTHER")|| accomValue.equals("VRS") || accomValue.equals("CART")) {
    	    	Assert.assertTrue(colValues.size() == 1, "accomodation size is not 1 it is "+colValues.size());
    			Assert.assertTrue(true, " accomodations got chnaged when invalid accomodations were passed");
    		}else {	Assert.assertTrue(false, "accomodations got chnaged when invalid accomodations were passed");
}
    		System.out.println("-test47372----- good..........");
    	}
    	
    }
    
    
    @Test
    public void test47374() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	
    	TestNGCustom.TCNo="test47374";
    	log("//TC test47374 - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs);
        
		System.out.println(mid);
		sqlStatement="select EMAIL_ADDR, CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("EMAIL_ADDR");
    	colNames.add("CDE_COMMUNICATION_PREF");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String EMAIL_ADDR=colValues.get(0);
    	String CDE_COMMUNICATION_PREF=colValues.get(1);

		sqlStatement="select  CDE_LANG_WRITTEN from T_RE_BASE where id_medicaid='"+mid+"'";
    	colNames.add("CDE_LANG_WRITTEN");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String CDE_LANG_WRITTEN=colValues.get(0);
    	memberSearch(mid);
    	
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MemberCommunicationPreference")).click(); // click on member communication preference/Accomodations
	    String UIPrintType=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType")).getAttribute("value");
	      
	    String UIWrittenLang=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:RecipientInformationBean_WrittenLanguage")).getAttribute("value");
	    String UICommPref=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref")).getAttribute("value");
	    String UIEmailAddr=driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress")).getText();
	    
	    System.out.println(UIPrintType+"  -- "+UIWrittenLang+" -- "+UICommPref+" -- "+ UIEmailAddr	 );
    	Assert.assertTrue(UIWrittenLang.contains(CDE_LANG_WRITTEN),  "Language is differnt in db vs UI");
    	Assert.assertTrue(UICommPref.equals(CDE_COMMUNICATION_PREF),  "Comm Pref is differe t db vs UI");
    	Assert.assertTrue(UIEmailAddr.equals(EMAIL_ADDR),  "Email Address is different in db VS UI");

    }
    
    @Test
    public void test47375() throws Exception{
       
    	
    	TestNGCustom.TCNo="test47375";
    	log("//TC test47375 - ");
			
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	//String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs);
        
		
    	//memberSearch(mid);//100236008817
    	memberSearch("100236008817");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MemberCommunicationPreference")).click(); // click on member communication preference/Accomodations
	    driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodePrintType_Error_Highlight")).click();
	    checkTextInOtherWindow("Print Type","//html/body/div/b", "Member's notice print type.", "//html/body/div/br");
	      Thread.sleep(5000);// 
		driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:RecipientInformationBean_WrittenLanguage_Error_Highlight")).click();
	    checkTextInOtherWindow("Written Language","//html/body/div/b", "Member's preferred written language.", "//html/body/div/br");
         Thread.sleep(5000);
	    driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_CodeCommunicationPref_Error_Highlight")).click();
	    checkTextInOtherWindow("Communication Preference","//html/body/div/b", "Member's preferred method to recieve notices.", "//html/body/div/br");
	    Thread.sleep(5000);
	   driver.findElement(By.id("MMISForm:MMISBodyContent:MemberCommunicationPreference:MemberCommunicationPreferenceDataPanel_EmailAddress_Error_Highlight")).click();
	    checkTextInOtherWindow("Email","//html/body/div/b", "Email address where memebr has requested to recieve electronic notification.", "//html/body/div/br"); 

    }
    
    public void checkTextInOtherWindow(String textToBeChecked1, String xpath1, String textToBeChecked2, String xpath2) {
    	 //Switch to new window
 		 for(String winHandleNew:driver.getWindowHandles()) 
 		 driver.switchTo().window(winHandleNew);
 		 Assert.assertTrue(driver.findElement(By.xpath("//html/body/div/b")).getText().contains(textToBeChecked1),textToBeChecked1 +"--is not present on the new window");
 		 
 		 //Assert.assertTrue(driver.findElement(By.xpath("//html/body/div/br")).getText().contains(textToBeChecked2), textToBeChecked2 +"--is not present on the new window");
 		 driver.close();
 		 Common.switchToMainWin();
 		 //winHandleCurrent=driver.getWindowHandle();
    	
    }
    
    @Test
    public void test47376a() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47376a";
    	log("//TC test47376a - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
	       
		    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
	    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
	    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
	    	}
    	
		System.out.println(mid);
		sqlStatement="select EMAIL_ADDR, CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("EMAIL_ADDR");
    	colNames.add("CDE_COMMUNICATION_PREF");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String EMAIL_ADDR=colValues.get(0);
    	String CDE_COMMUNICATION_PREF=colValues.get(1);
    	

    	Assert.assertTrue(EMAIL_ADDR.equals(emailIs), emailIs+ " is not found \"t_re_communication\" table. Found: "+EMAIL_ADDR);
    	Assert.assertTrue(CDE_COMMUNICATION_PREF.equals(communicationPref), "email is not found \"t_re_communication\" table. Found: "+CDE_COMMUNICATION_PREF);
    	
    	
    	// invalid values
        updateExistFile(emailIs, "", "email");
        updateExistFile(accom[0], "ttt", "cde_accommodation");
        updateExistFile(accom[1], "ddd", "cde_accommodation");
        
    	 validateInvalidDataUpload(xml);
    	 
    	//valid value for existing member 
	    updateExistFile("",emailIs, "email");
	    updateExistFile("ttt", "OTHER", "cde_accommodation");
	    updateExistFile("ddd", "BRAILLE", "cde_accommodation");
	    
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
	    driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
    	mid= uploadMA21(xml);

        sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	System.out.println(colValues.size()+"------- is the new size of col values");
    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals("OTHER" )|| accomValue.equals("BRAILLE")) {
    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
    	}
    	sqlStatement="select EMAIL_ADDR, CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("EMAIL_ADDR");
    	colNames.add("CDE_COMMUNICATION_PREF");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	EMAIL_ADDR=colValues.get(0);
    	Assert.assertTrue(EMAIL_ADDR.equals(emailIs), emailIs+ " is not found \"t_re_communication\" table. Found: "+EMAIL_ADDR);
    	 
    	 
    }
    
    @Test
    public void test47376b() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47376b";
    	log("//TC test47376b - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
	       
		    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
	    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
	    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
	    	}
    	
		System.out.println(mid);
		sqlStatement="select EMAIL_ADDR, CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("EMAIL_ADDR");
    	colNames.add("CDE_COMMUNICATION_PREF");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	String EMAIL_ADDR=colValues.get(0);
    	String CDE_COMMUNICATION_PREF=colValues.get(1);
    	

    	Assert.assertTrue(EMAIL_ADDR.equals(emailIs), emailIs+ " is not found \"t_re_communication\" table. Found: "+EMAIL_ADDR);
    	Assert.assertTrue(CDE_COMMUNICATION_PREF.equals(communicationPref), "email is not found \"t_re_communication\" table. Found: "+CDE_COMMUNICATION_PREF);
    	
    	 
    	//valid value for existing member 
	    updateExistFile(emailIs,"jotdhillon@gmail.com", "email");
	    updateExistFile(accom[0], "OTHER", "cde_accommodation");
	    updateExistFile(accom[1], "BRAILLE", "cde_accommodation");
	    
    	mid= uploadMA21(xml);

        sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	System.out.println(colValues.size()+"------- is the new size of col values");
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals("OTHER" )|| accomValue.equals("BRAILLE")) {
    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
    	}
    	sqlStatement="select EMAIL_ADDR, CDE_COMMUNICATION_PREF from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	colNames.add("EMAIL_ADDR");
    	colNames.add("CDE_COMMUNICATION_PREF");
    	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	
    	EMAIL_ADDR=colValues.get(0);
    	Assert.assertTrue(EMAIL_ADDR.equals("jotdhillon@gmail.com"), "jotdhillon@gmail.com is not found \"t_re_communication\" table. Found: "+EMAIL_ADDR);
    	 
    	 
    }
    
    @Test
    public void test47376c() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jot@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47376c";
    	log("//TC test47376c - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    		
        
	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);

	//removed email  
    updateExistFile(emailIs," ", "email");
	    validateInvalidDataUpload(xml);
    	 
    }
    
    @Test
    public void test47376d() throws Exception{
       	
    	String agency="HIX";
    	String printType="BRAILLE";
    	String communicationPref="TEXT\\SMS";
    	//String emailIs = "jot@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47376d";
    	log("//TC test47376d - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    		
        
	String mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "1244067890", "");

	//removed email  
    updateExistFile("1244067890"," ", "num_cell_phone");
	    validateInvalidDataUpload(xml);
	 
    	 
    }
    public void validateInvalidDataUpload(String xml) throws FileNotFoundException {

    	if(!(driver.findElements(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).size() > 0))
    		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	
    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
        Assert.assertTrue(message.trim().equals("Uploaded file is invalid according to Member Eligibility schema"),"The Error is: "+message);
    }
    
    @Test
    public void test47388() throws Exception{
    	
    	TestNGCustom.TCNo="test47388";
    	log("//TC test47388 - ");
       	
    	String [] accom = {"ASL","ALD","CART","LRG","BRAILLE","TTY","VRS","EFORMAT","OTHER","NONE"};
    	
    	TestNGCustom.TCNo="test47388";
    	log("//TC test47388 - ");
			    

		sqlStatement="select CDE_ACCOMMODATION from  T_CDE_ACCOMMODATION";
    	colNames.add("CDE_ACCOMMODATION");
 	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	int count = 0;
    	 for (String s : accom) {
    		 count++;
 	    	Assert.assertTrue(colValues.contains(s), s+ " is not found \"CDE_ACCOMMODATIONn\" table. Found: ");

    	 }


    	Assert.assertTrue(count==10, "Table does not have all 10 accomodations. number of accomodations found : "+count);
    		 
    }
    
    @Test
    public void test47389() throws Exception{
       	
    	String agency="SSA";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47389";
    	log("//TC test47389 - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
	       
		    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
	    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
	    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
	    	}
    	
		System.out.println(mid);
		sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("CDE_AGENCY_PRINT");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    		    	
	  String CDE_AGENCY_PRINT=colValues.get(0);
	    Assert.assertTrue(CDE_AGENCY_PRINT.equals("SSA"), "SSA should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	  
    	
    	// Update agency value
    	updateExistFile( "SSA", "HIX", "id_source");
        
	    
    	mid= uploadMA21(xml);

        sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	System.out.println(colValues.size()+"------- is the new size of col values");
    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
    	}
    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("CDE_AGENCY_PRINT");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    		    	
	   CDE_AGENCY_PRINT=colValues.get(0);
	    Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	   
	    updateExistFile( accom[0], "ASL", "cde_accommodation");
	    updateExistFile( accom[1], "BRAILLE", "cde_accommodation");
    	updateExistFile( "HIX", "MHO", "id_source");

	    mid= uploadMA21(xml);
		sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("CDE_AGENCY_PRINT");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    		    	
	   CDE_AGENCY_PRINT=colValues.get(0);
	    Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	   
    	 
    }
    
    @Test
    public void test47390() throws Exception{
       	
    	String agency="MHO";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47390";
    	log("//TC test47390 - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
	       
		    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
	    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
	    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
	    	}
    	
		System.out.println(mid);
		sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("CDE_AGENCY_PRINT");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    		    	
	  String CDE_AGENCY_PRINT=colValues.get(0);
	    Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	  
    	
    	// Update agency value
    	updateExistFile( "MHO", "SSA", "id_source");
        
	    
    	mid= uploadMA21(xml);

        sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	System.out.println(colValues.size()+"------- is the new size of col values");
    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
    	}
    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("CDE_AGENCY_PRINT");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    		    	
	   CDE_AGENCY_PRINT=colValues.get(0);
	    Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	   
    }
    
    @Test
    public void test47391() throws Exception{
       	
    	String agency="MHO";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47391";
    	log("//TC test47391 - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
	       
		    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
	    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
	    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
	    	}
    	
		System.out.println(mid);
		sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("CDE_AGENCY_PRINT");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    		    	
	  String CDE_AGENCY_PRINT=colValues.get(0);
	    Assert.assertTrue(CDE_AGENCY_PRINT.equals("MHO"), "MHO should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	  
    	
    	// Update agency value
    	updateExistFile( "MHO", "HIX", "id_source");
        
	    
    	mid= uploadMA21(xml);

        sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
    	
    	colNames.add("CDE_ACCOMMODATION");
    	colValues=Common.executeQuery(sqlStatement, colNames);
    	System.out.println(colValues.size()+"------- is the new size of col values");
    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	for (String accomValue : colValues) {
    		System.out.println(accomValue);
    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
    	    	Assert.assertTrue(colValues.size() == 2, "accomodation size is not 2 it is "+colValues.size());
    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
    	}
    	sqlStatement="select CDE_AGENCY_PRINT, cde_print_type, CDE_COMMUNICATION_PREF, EMAIL_ADDR from  t_re_communication where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    colNames.add("CDE_AGENCY_PRINT");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    		    	
	   CDE_AGENCY_PRINT=colValues.get(0);
	    Assert.assertTrue(CDE_AGENCY_PRINT.equals("HIX"), "HIX should be the agency type in\"t_re_communication\" table. but Found: -"+CDE_AGENCY_PRINT+"-");
	   
    }
    
    
    @Test
    public void test47400() throws Exception{
    	
    	TestNGCustom.TCNo="test47400";
    	log("//TC test47400 - ");	    	
			    

		sqlStatement="select DSC_STATE from  T_STATE where CDE_STATE = 'AA'";
    	colNames.add("DSC_STATE");
 	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    
	    Assert.assertTrue(colValues.get(0).equals("ARMED FORCES AM"), "ARMED FORCES AM should be the DSC_state as CDE_STATE is AA");
	    

		sqlStatement="select DSC_STATE from  T_STATE where CDE_STATE = 'AP'";
    	colNames.add("DSC_STATE");
 	
    	colValues=Common.executeQuery(sqlStatement, colNames);
    
	    Assert.assertTrue(colValues.get(0).equals("ARMED FORCES PA"), "ARMED FORCES AM should be the DSC_state as CDE_STATE is AP");
    		 
    }
    
    @Test
    public void testCNSnotice() throws Exception{
    	
    	TestNGCustom.TCNo="testCNSnotice";
    	log("//TC testCNSnotice");	    	
    	
		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RptsAndLetters")).click();
		driver.findElement(By.linkText("Notices")).click();
		driver.findElement(By.linkText("CNS Notice Request Search")).click();
		
		driver.findElement(By.id("MMISForm:MMISBodyContent:CNSNoticeRequestSearchPanel:CnsNoticeRequestSearchResultsBean_CriteriaPanel:CnsNoticeRequestSearch_NoticeId")).sendKeys("92");
		Common.search();
		String pdfFileName=driver.findElement(By.id("MMISForm:MMISBodyContent:CNSNoticeRequestSearchPanel:CnsNoticeRequestSearchResultsDataTable_0:CnsNoticeRequest_link")).getAttribute("href");
		pdfFileName = tempDirPath+pdfFileName.substring(pdfFileName.lastIndexOf("/")+1, pdfFileName.indexOf("?"))+".pdf";
		driver.findElement(By.id("MMISForm:MMISBodyContent:CNSNoticeRequestSearchPanel:CnsNoticeRequestSearchResultsDataTable_0:CnsNoticeRequestSearch_yesCurrentNoticeId")).click();
		System.out.println(pdfFileName);
		Thread.sleep(5000);
		String pdfContent = readPDFContent(pdfFileName);
		log(pdfContent);
		
//		//Store the current window Handle
//		winHandleCurrent=driver.getWindowHandle();
//		
//		//Switch to new window
//		for(String winHandle:driver.getWindowHandles())
//			driver.switchTo().window(winHandle);
//		
//		//content start
//		String pdfContent = readPDFContent(driver.getCurrentUrl());
//		log(pdfContent);
//		//content end
//		
//		//Close the second window
//		driver.close();
//		
//		//Switch back to main window
//		Common.switchToMainWin();

    }
    
    public String readPDFContent(String pdfFile) throws Exception {
    	
    	PDDocument doc = PDDocument.load(new File(pdfFile));
	    String pdfText = new PDFTextStripper().getText(doc);
	    doc.close();
	   
	    return pdfText;
	}
    
    public String readPDFContentUsingURL(String appUrl) throws Exception {
	    URL url = new URL(appUrl);
	    URLConnection urlConn = url.openConnection();
	    urlConn.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.6045.200 Safari/537.36");
	    InputStream is = urlConn.getInputStream();
	    BufferedInputStream fileToParse = new BufferedInputStream(is);
	    
	    PDDocument doc = PDDocument.load(fileToParse);
	    String textIneed = new PDFTextStripper().getText(doc);
	    doc.close();
	    fileToParse.close();
	    is.close();
	    return textIneed;
	}
 
    
    @Test
    public void test47518() throws Exception{
       	
    	String agency="MHO";
    	String printType="BRAILLE";
    	String communicationPref="EMAIL";
    	String emailIs = "jatt.test@gmail.com";
    	String [] accom = {"VRS","CART"}; // valid accomodations
    	
    	TestNGCustom.TCNo="test47518";
    	log("//TC test47518 - ");
			    
//    	// create and Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="2001-09-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
    				    
    	String mid = getNewMember_CNSWithAccomodation(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, "", emailIs, accom);
	       
		    sqlStatement="select CDE_ACCOMMODATION from  t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
	    	
	    	colNames.add("CDE_ACCOMMODATION");
	    	colValues=Common.executeQuery(sqlStatement, colNames);
	    	for (String accomValue : colValues) {
	    		System.out.println(accomValue);
	    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
	    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
	    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
}
	    	}
    	
		    sqlStatement="select CDE_ACCOMMODATION from  a_t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"')";
				    	
		    colNames.add("CDE_ACCOMMODATION");
				    	
			//Assert.assertTrue(null == Common.executeQuery(sqlStatement, colNames), "accomodation are present it should be empty size is:  "+colValues.size());

			try {
	    		colValues=Common.executeQuery(sqlStatement, colNames);
			    throw new Exception("CDE_ACCOMMODATION validation in a_t_re_accommodation tabble failed. CDE_ACCOMMODATION is not null in DB.");

			} catch (NullPointerException e){
				
				log("CDE_ACCOMMODATION validation passed");
				colNames.clear();
				colValues.clear();
	    	
	    	}
	  
    	
    	// Update agency value
    	updateExistFile( "MHO", "HIX", "id_source");
    	 updateExistFile( accom[0], "ASL", "cde_accommodation");
		 updateExistFile( accom[1], "BRAILLE", "cde_accommodation");
        
	    
    	mid= uploadMA21(xml);
	
	    sqlStatement="select CDE_ACCOMMODATION from  a_t_re_accommodation where sak_recip=(select sak_recip from t_re_base where id_medicaid='"+mid+"') and CDE_AGENCY = 'MHO'";
			    	
			    	colNames.add("CDE_ACCOMMODATION");
			    	colValues=Common.executeQuery(sqlStatement, colNames);
			    	for (String accomValue : colValues) {
			    		System.out.println(accomValue);
			    		if (accomValue.equals(accom[0] )|| accomValue.equals(accom[1])) {
			    	    	Assert.assertTrue(true, " I am always gonna be true here :)");
			    		}else {	Assert.assertTrue(false, "Accomodation is different that what were passed in the xml");
		}
			    	}
    }
    
    
    public void addPPA(String amount, int days) {
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatntLiabilityAmount")).clear();
		driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatntLiabilityAmount")).sendKeys(amount);
		new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_PatLiabilityCode"))).selectByVisibleText("Nursing Home/ICF/Chronic");
		driver.findElement(By.id("MMISForm:MMISBodyContent:PatLiabilityPanel:PatLiabilityDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(days));
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Add']")).click();
    }
        
    public static String getNewMemebr(String otherid, String fname, String ssn, String casenum, String dob, String adr1, String city, String zip, String dep, String aid, String agency) throws Exception {
    	
    	String xml;
    	//Check if SSN 4th and 5th digit <>00
    	if ((ssn.substring(3, 5).equals("00")) && !(TestNGCustom.TCNo.equals("32937"))) {
//    		ssn=ssn.substring(0, 3)+"47"+ssn.substring(5, 9);//any randon value at 4 and 5 except 00
    		throw new SkipException ("SSN 4th and 5th digit were 00, so retry this TC. SSN:"+ssn);
    	}
    	//unless set something else, Set begindate = dob 
    	if (beginDate.equals(""))
    		beginDate = getEligeffDT(dob);
    	if (!endElig) {
    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
    					"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
    					"<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\""+eligStatus+"\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" family_size=\"07\" />\n</EligibilityRequest>");    	//filename is same as otherid for uniqueness
    	} else {
    		endElig = false; //for next time
    		Date sysdate=new Date();
    		SimpleDateFormat sdf= new SimpleDateFormat("yyyy-MM-dd");
    		String sys = sdf.format(sysdate).toString(); //this is the elig end date
    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
						"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
						"<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"4\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+beginDate+"\" dte_end_elig=\""+sys+"\" family_size=\"07\" />\n</EligibilityRequest>");    	//filename is same as otherid for uniqueness	
    	}
    	
    	//Reset id_medicaid in input file to " " for next run
    	if (!(fileMem.equals(" ")))
    		fileMem=" ";
    	//Reset last name in input file to "MAZDAZ" for next run
    	if (!(lastName.equals("MAZDAZ")))
    		lastName="MAZDAZ";
    	//Reset begin date in input file to "" for next run
    	if (!(beginDate.equals("")))
    		beginDate="";
    	//Reset open reason to 01, if its not 01
    	if (!(openRsn.equals("01")))
    		openRsn="01";
    	//Reset case status to 1, if its not 1
    	if (!(caseStatus.equals("1")))
    		caseStatus="1";
    	//Reset elig status to 1, if its not 1
    	if (!(eligStatus.equals("1")))
    		eligStatus="1";
    	
    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
        Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
    	log("The MA21 download File name is: "+Common.fileName());
    	//Press Clear button to reset the screen
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click(); //Removed for chromedriver as it cannot locate Clear button at this step
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click(); //Added for chromedriver
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

        String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
        if(l>5)
        {
        	errorMessage=valuesInQuotes[l-1].trim();
        	errorCode=valuesInQuotes[l-2].trim();
        }
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
     if(result_type.equals("S"))
        {
        	System.out.println("The Member Eligibility file upload is Successfull");
        }
        else{
            System.out.println("Upload successfull but data issue "+errorMessage);
        }
    	
    	return id_medicaid;
    }
    
public static String getNewMemebr_withCopay(String otherid, String fname, String ssn, String casenum, String dob, String adr1, String city, String zip, String dep, String aid, String agency, String amt_cost_sharing, String amt_copay_cap, String amt_premium_cap, String dte_begin_copay) throws Exception {
    	
    	String xml;
    	//Check if SSN 4th and 5th digit <>00
    	if ((ssn.substring(3, 5).equals("00")) && !(TestNGCustom.TCNo.equals("32937"))) {
//    		ssn=ssn.substring(0, 3)+"47"+ssn.substring(5, 9);//any randon value at 4 and 5 except 00
    		throw new SkipException ("SSN 4th and 5th digit were 00, so retry this TC. SSN:"+ssn);
    	}
    	//unless set something else, Set begindate = dob 
    	if (beginDate.equals(""))
    		beginDate = getEligeffDT(dob);
    	if (!endElig) {
    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
    					"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" pct_income_fpl=\"53\"/>"+
    					"<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\""+eligStatus+"\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" family_size=\"07\" />\n<costsharing amt_cost_sharing=\""+amt_cost_sharing+"\" amt_copay_cap=\""+amt_copay_cap+"\" amt_premium_cap=\""+amt_premium_cap+"\" dte_begin_copay=\""+dte_begin_copay+"\" />\n</EligibilityRequest>");    	//filename is same as otherid for uniqueness
    	} else {
    		endElig = false; //for next time
    		Date sysdate=new Date();
    		SimpleDateFormat sdf= new SimpleDateFormat("yyyy-MM-dd");
    		String sys = sdf.format(sysdate).toString(); //this is the elig end date
    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
						"id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
						"<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"4\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+beginDate+"\" dte_end_elig=\""+sys+"\" family_size=\"07\" />\n</EligibilityRequest>");    	//filename is same as otherid for uniqueness	
    	}
    	
    	//Reset id_medicaid in input file to " " for next run
    	if (!(fileMem.equals(" ")))
    		fileMem=" ";
    	//Reset last name in input file to "MAZDAZ" for next run
    	if (!(lastName.equals("MAZDAZ")))
    		lastName="MAZDAZ";
    	//Reset begin date in input file to "" for next run
    	if (!(beginDate.equals("")))
    		beginDate="";
    	//Reset open reason to 01, if its not 01
    	if (!(openRsn.equals("01")))
    		openRsn="01";
    	//Reset case status to 1, if its not 1
    	if (!(caseStatus.equals("1")))
    		caseStatus="1";
    	//Reset elig status to 1, if its not 1
    	if (!(eligStatus.equals("1")))
    		eligStatus="1";
    	
    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
        Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
    	log("The MA21 download File name is: "+Common.fileName());
    	//Press Clear button to reset the screen
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

        String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
        if(l>5)
        {
        	errorMessage=valuesInQuotes[l-1].trim();
        	errorCode=valuesInQuotes[l-2].trim();
        }
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
     if(result_type.equals("S"))
        {
        	System.out.println("The Member Eligibility file upload is Successfull");
        }
        else{
            System.out.println("Upload successfull but data issue "+errorMessage);
        }
    	
    	return id_medicaid;
    }
    
public static String getCustomMemebr(String xml) throws Exception {
    	
		String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
        Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
    	Thread.sleep(2000);
    	//Press Clear button to reset the screen
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click(); //Removed for chromedriver as it cannot locate Clear button at this step
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click(); //Added for chromedriver
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

        String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
        if(l>5)
        {
        	errorMessage=valuesInQuotes[l-1].trim();
        	errorCode=valuesInQuotes[l-2].trim();
        }
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
     if(result_type.equals("S"))
        {
        	System.out.println("The Member Eligibility file upload is Successfull");
        }
        else{
            System.out.println("Upload successfull but data issue "+errorMessage);
        }
    	
    	return id_medicaid;
    }

public static String getCustomMemebr1(String xml) throws Exception {
	
	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
	
	// writing xml string to xml file
	PrintWriter out = new PrintWriter(fileName);
	out.println(xml);
	out.close();
	
	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
    driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
    String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
    Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
	Thread.sleep(2000);
	//Press Clear button to reset the screen
	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();
	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

    String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
    String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
    int l=valuesInQuotes.length;
  /*  if(l>5)
    {
    	errorMessage=valuesInQuotes[l-1].trim();
    	errorCode=valuesInQuotes[l-2].trim();
    }*/
         result_type=valuesInQuotes[1];
   // String id_medicaid=valuesInQuotes[2];
    String id_other=valuesInQuotes[3];
    
/* if(result_type.equals("S"))
    {
    	System.out.println("The Member Eligibility file upload is Successfull");
    }
    else{
        System.out.println("Upload successfull but data issue "+errorMessage);
    }*/
	
	//return id_medicaid;
 
 return id_other;

}

public static String getCustomMemebr2(String xml) throws Exception {
	
	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
	
	// writing xml string to xml file
	PrintWriter out = new PrintWriter(fileName);
	out.println(xml);
	out.close();
	
	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
    driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
    String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
    Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
	Thread.sleep(2000);
	//Press Clear button to reset the screen
//	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click(); //Removed for chromedriver as it cannot locate Clear button at this step
	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click(); //Added for chromedriver
	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

    String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
    String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
    int l=valuesInQuotes.length;
    if(l>5)
    {
    	String[]errorDescriptions=StringUtils.substringsBetween(output , "description=\"","\"");
    	String[]errorCodes=StringUtils.substringsBetween(output , "code=\"","\"");

	    int errCount=errorDescriptions.length;
 
	      for(int i=0;i<errCount;i++){
	    	 {
	    		 errmsgs.add(errorDescriptions[i].trim());
	    		 errcds.add(errorCodes[i].trim());
	    	 log(errcds.get(i)+" "+errmsgs.get(i));
	         }
	    }

    }
    result_type=valuesInQuotes[1];
    String id_medicaid=valuesInQuotes[2];
    
 if(result_type.equals("S"))
    {
    	System.out.println("The Member Eligibility file upload is Successfull");
    }
    else{
        System.out.println("Upload successfull but data issue "+errorMessage);
    }
	
	return id_medicaid;
}
    
    public void verifyCaseHist(String searchID, String Fid,String Sid,String Did) {
    	
      memberSearch(searchID);

      //Click on Member Case History link
      driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_RecipientCaseld")).click();
      //Click on case number
      driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseList_0:RecipientCaseBean_ColValue_caseNumber")).click();
      Assert.assertTrue(driver.findElement(By.xpath("//table[@id='MMISForm:MMISBodyContent:RecipientCasePanel:RecipientCaseBean_DataPanel']/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]")).getText().equals(casenum),"Case Number Mismatch");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_medicaidID")).getText().equals(Did),"Daughter ID not listed in member case history");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_medicaidID")).getText().equals(Fid),"Father ID not listed in member case history");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_2:MemberCaseDataBean_ColValue_medicaidID")).getText().equals(Sid),"Son ID not listed in member case history");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_0:MemberCaseDataBean_ColValue_depNumber")).getText().equals("02"),"Daughter Dep number mismatch");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_1:MemberCaseDataBean_ColValue_depNumber")).getText().equals("00"),"Father Dep number mismatch");
  	  Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientCasePanel:MemberCaseDataPanel:MemberCaseDataList_2:MemberCaseDataBean_ColValue_depNumber")).getText().equals("01"),"Son Dep number mismatch");

  	  Common.cancelAll();
    	
    }
    
    public static void memberSearch(String memberID) {
        driver.findElement(By.xpath("//*[@id='MMISForm:MMISMenu:_MENUITEM_Search']")).click();
        driver.findElement(By.xpath("//*[@id='MMISForm:MMISMenu:_MENUITEM_Search']")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:RecipientSearchResultDataPanel_MedicaidID")).clear();
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:RecipientSearchResultDataPanel_MedicaidID")).sendKeys(memberID);
        driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientSearchBean_CriteriaPanel:SEARCH")).click();
        driver.findElement(By.xpath("//*[contains(@id, 'RecipientSearchResults_0')]")).click();
    }
    

	//Get system date +/- days in yyyy-MM-dd format
	public static String fileSysdateCustom(int i) {
		SimpleDateFormat sdf= new SimpleDateFormat("yyyy-MM-dd");
		Calendar cal = Calendar.getInstance();     
		cal.add( Calendar.DATE, i );    
		return (sdf.format(cal.getTime()).toString());
	} 
	
	//Get system date +/- days in yyyyMMdd format
	public static String DBSysdateCustom(int i) {
		SimpleDateFormat sdf= new SimpleDateFormat("yyyyMMdd");
		Calendar cal = Calendar.getInstance();     
		cal.add( Calendar.DATE, i );    
		return (sdf.format(cal.getTime()).toString());
	} 
	
	//Get date string from yyyy-MM-dd to MM/dd/YYYY format
	public static String dateXMLtoPanel(String xmlDate) {
		return xmlDate.substring(5, 7)+"/"+xmlDate.substring(8, 10)+"/"+xmlDate.substring(0, 4);
	}
	
	//Get date string from MM/dd/YYYY to yyyy-MM-dd format
	public static String datePanelToXML(String panelDate) {
		return panelDate.substring(6, 10)+"-"+panelDate.substring(0, 2)+"-"+panelDate.substring(3, 5);
	}
	
	//Get date string from yyyyMMdd to MM/dd/YYYY format
	public static String dateDBtoPanel(String xmlDate) {
		return xmlDate.substring(4, 6)+"/"+xmlDate.substring(6, 8)+"/"+xmlDate.substring(0, 4);
	}
	
	public void enterMMQcommon(String mmqTarget) {
		//Service Questions 13-14
		driver.findElement(By.id("mmqFirstServiceQuestionForm:_MENUITEM_secondServiceQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_specialAttImmobility"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_specialAttSeverSpasRigidity"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_specialAttBehaviourProb"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_specialAttIsolation"))).selectByVisibleText("0");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_restNursingCodeType1"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_restNursingCodeType2"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqSecondServiceQuestionForm:mmqSecondServiceQuestionPanel:mmqServiceQuestionVO_restNursingCodeType3"))).selectByVisibleText("0 - None");
		driver.findElement(By.xpath("//input[@class='buttonFunctional' and @value='Get Score']")).click();

		//Additional Questions
		driver.findElement(By.id("mmqSecondServiceQuestionForm:_MENUITEM_additionalQuestionTab")).click();
		Common.getPageError(mmqTarget);
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_toiletUse"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_transfer"))).selectByVisibleText("2 - Assist");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_mentalStatus"))).selectByVisibleText("1 - Oriented");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_restraint"))).selectByVisibleText("1 - Not Ordered");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_activitiesParticipation"))).selectByVisibleText("1 - Always Active");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationType1"))).selectByVisibleText("00 - 00 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationType2"))).selectByVisibleText("00 - 00 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationType3"))).selectByVisibleText("00 - 00 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationFreq1"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationFreq2"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:ConsultationPanel:mmqAdditionalQuestionVO_consultationFreq3"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationMed1"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationMed2"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationMed3"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationMed4"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationFreq1"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationFreq2"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationFreq3"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:MedicationPanel:mmqAdditionalQuestionVO_medicationFreq4"))).selectByVisibleText("0 - None");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:AccidentsPanel:mmqAdditionalQuestionVO_accidContWeightAccidents"))).selectByVisibleText("Yes");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:AccidentsPanel:mmqAdditionalQuestionVO_accidContWeightContracture"))).selectByVisibleText("Yes");
		new Select(driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:AccidentsPanel:mmqAdditionalQuestionVO_accidContWeightWeightChange"))).selectByVisibleText("No");
		//Enter Diag code
		driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_primaryICDDiagnosis")).clear();
        System.out.println("effDt "+effDt);
        System.out.println("refEffDt "+refEffDt);

		if (effDt.after(refEffDt))
			driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_primaryICDDiagnosis")).sendKeys("A200"); //ICD 10
		else
			driver.findElement(By.id("mmqAdditionalQuestionForm:mmqAdditionalQuestionPanel:mmqAdditionalQuestionVO_primaryICDDiagnosis")).sendKeys("4019"); //ICD 9


		
		//Certified Statement
		driver.findElement(By.id("mmqAdditionalQuestionForm:_MENUITEM_certifiedStatementTab")).click();
		Common.getPageError("//form[contains(@id,'mmqAdditionalQuestionForm')]/div/table[2]/tbody/tr"); //Cannot use mmqTarget here because the on submit page, mmqTarget is present even though there is no page error
		driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_rnEvaluator")).sendKeys(Common.generateRandomName());
		driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_evaluationDate")).sendKeys(Common.convertSysdate());
		driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_nameOfAdmin")).sendKeys(Common.generateRandomName());
		new Select(driver.findElement(By.id("mmqCertifiedStatementForm:mmqCertifiedStatementPanel:mmqCertifiedStatementVO_affiliation"))).selectByVisibleText("1 - Nursing Facility Staff");
		
		//Submit MMQ
		driver.findElement(By.xpath("//input[@class='buttonCommand' and @value='Submit']")).click();
		Common.getPageError(mmqTarget);
	}
	
	public static void validateMMQ(String member, String loc, String score) throws Exception {
		//login back to Base
		Common.portalLogout();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Recipient")).click();
        memberSearch(member);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_n113")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:LevelOfCarePanel:LevelOfCareList_0:LevelOfCareBean_ColValue_reLocCode_code")).getText().equals("4"+loc),"LoC/MMC mismatch");
    	
    	//Validate MMQ Score
    	driver.findElement(By.id("MMISForm:MMISBodyContent:RecipientNavigatorPanel:RecipientNavigator:ITM_MMQSummary")).click();
    	//Sort on submission reason
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_providerIDLoc")).click();
			driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList:MmqBean_ColHeader_submitReason_reasonDescription")).click();
			
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_submitReason_reasonDescription")).getText().equals("Admission"),"Reason For Submission Mimatch");
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_cdeCategory")).getText().equals(loc),"MMC Category mismatch");
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:MMQSummaryList_0:MmqBean_ColValue_submitReason_reasonDescription")).click();
    	driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='MMQ Details']")).click();
    	Assert.assertTrue(driver.findElement(By.id("MMISForm:MMISBodyContent:MMQSummaryPanel:grandTotal")).getText().equals(score),"MMQ Score mismatch");
	}

	//Get system date from String to Date  format
	public static Date DT(String inputStrDt) throws Exception {
		Date date =new SimpleDateFormat("MM/dd/yyyy").parse(inputStrDt);
		return date;
	}
	
	//This function was developed on 5/11/2015 when Gloria identified that we are setting Elig Eff DT = member DoB, which is not correct.
	//This function looks at Member's DoB and adds addyears(a certain no. of years, see below) to it, and makes it the Members Elig start date
	//Later, we removed the addyears logic(however, still kept as comments below as might be useful later). Current logic is if dob < 2 years, Elig start date= dob, else elig start date = sysdate-1 year
	public static String getEligeffDT(String memDoB) throws Exception {
		String alterMemDoB=memDoB;
		String eligEffDt;
		//int addyears = 3;
		SimpleDateFormat sdf1= new SimpleDateFormat("yyyy-MM-dd");
		Date eligEffDate;

		
		//get DoB in actual Date format
		Date dobDate = sdf1.parse(alterMemDoB);
		
		//Get today's date
		Date sysDT = new Date();
		int NineteenHundredSysDT = sysDT.getYear();
		int NineteenHundredAge =  dobDate.getYear();
		
		if ((NineteenHundredSysDT-NineteenHundredAge)<=1)
			eligEffDt=memDoB;
		else {
//			dobDate.setYear((NineteenHundredAge+addyears));
			dobDate.setYear((NineteenHundredSysDT-1));
			eligEffDate=dobDate;
			eligEffDt = sdf1.format(eligEffDate).toString();
		}
		
		return eligEffDt;
	}
	
    @Test
    public void demo() throws Exception{
    	String dob = "2015-05-11";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));
    	
    	dob="2014-05-11";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));

    	dob="2015-05-17";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));

    	dob="2013-05-18";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));

    	dob="2015-05-19";
    	System.out.println("DoB:"+dob+", Elig:"+getEligeffDT(dob));

    }
    
    //Create new members as needed for testing
    @Test
    public void testCreateMember() throws Exception{


    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1981-01-01";
        adr1="100 HANCOCK ST";
        city="QUINCY";
        zip="02171";
        dep="00";
        aid="40";
        beginDate="2023-02-01";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        System.out.println(Mid);
        log("Member:"+Mid);
        
        
    }
    
    //Create new members with TPL as needed for testing
    @Test
    public void testCreateMember_TPL() throws Exception{
		//Get a policy holder ID
	    sqlStatement = "select SAK_POL_HOLD from t_policy_Holder where adr_mail_strt1 <> ' ' and adr_mail_city <> ' ' and adr_mail_state = 'MA' and num_ssn is not null  and dte_birth <> '0' and rownum < 2";
	    System.out.println(sqlStatement);
	    colNames.add("SAK_POL_HOLD");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    String polHolderID=colValues.get(0);
	    //Create a policyNumber
    	String polNum = Common.generateRandomTaxID()+Common.generateRandomTaxID().substring(0, 4);

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1996-09-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid="TC";
        beginDate="2019-06-24";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        System.out.println(Mid);
        log("Member:"+Mid);
//        Thread.sleep(60000);
        driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();

	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLCurrentId")).sendKeys(Mid);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLcarrierNumber")).sendKeys("0027000");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SubContractorIndicator"))).selectByVisibleText("No");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLRelationship")).sendKeys("01");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLPolicyHolderSearch")).sendKeys(polHolderID);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_TplPolicyNumber")).sendKeys(polNum);
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_CostAvoidIndicator"))).selectByVisibleText("No");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_OriginCode"))).selectByVisibleText("MA21");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_CdeInitOrg"))).selectByVisibleText("MA21");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SuspectCode"))).selectByVisibleText("VERIFIED");
        driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SuspectDate")).sendKeys(Common.convertSysdate());
        new Select(driver.findElement(By.xpath("//select[contains(@id, 'MedicalSupportIndicator')]"))).selectByVisibleText("Yes");
	 	driver.findElement(By.xpath("//input[contains(@id, 'MedicalSupportBeginDate')]")).sendKeys(Common.convertSysdatecustom(-5)); //% days before start date
	 	driver.findElement(By.xpath("//input[contains(@id, 'MedicalSupportEndDate')]")).sendKeys("12/31/2299");

        Common.saveAll();
        
        //Add Coverage
        driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n103")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:Coverage_NewButtonClay:CoverageList_newAction_btn")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageDataPanel_CoverageCode")).sendKeys("02");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageDataPanel_OIPlanCode")).sendKeys("OI02");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageXrefDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-5)); //% days before start date
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageXrefDataPanel_EndDate")).sendKeys("12/31/2299");
	 	Common.saveAll();
	 	log("Resource successfully added for Member: "+Mid);
        
        
    }
    
    //Create new members with copay as needed for testing
    @Test
    public void testCreateMember_copay() throws Exception{
    	String amt_cost_sharing, amt_copay_cap, amt_premium_cap, dte_begin_copay;

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1996-09-01";
        adr1="200 Westgate Dr";
        city="Brockton";
        zip="02301";
        dep="00";
        aid="40";
        beginDate="2022-06-01";
        agency="HIX";
        amt_cost_sharing="15.56";
        amt_copay_cap="28.21"; //change this
        amt_premium_cap="47";
        dte_begin_copay="2022-04-01";
        String Mid = getNewMemebr_withCopay(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency,amt_cost_sharing,amt_copay_cap,amt_premium_cap,dte_begin_copay);
        System.out.println(Mid);
        log("Member:"+Mid);
        
        
    }
    
    //Add TPL as needed for testing
    @Test
    public void testAdd_TPL() throws Exception{
		//Get a policy holder ID
	    sqlStatement = "select SAK_POL_HOLD from t_policy_Holder where adr_mail_strt1 <> ' ' and adr_mail_city <> ' ' and adr_mail_state = 'MA' and num_ssn is not null  and dte_birth <> '0' and rownum < 2";
	    System.out.println(sqlStatement);
	    colNames.add("SAK_POL_HOLD");
	    colValues=Common.executeQuery(sqlStatement, colNames);
	    String polHolderID=colValues.get(0);
	    //Create a policyNumber
    	String polNum = Common.generateRandomTaxID()+Common.generateRandomTaxID().substring(0, 4);

   
        String Mid = "100202151369";

        
        driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_TPL")).click();
	 	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='New']")).click();

	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLCurrentId")).sendKeys(Mid);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLcarrierNumber")).sendKeys("0027000");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SubContractorIndicator"))).selectByVisibleText("No");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLRelationship")).sendKeys("01");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TPLPolicyHolderSearch")).sendKeys(polHolderID);
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_TplPolicyNumber")).sendKeys(polNum);
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_CostAvoidIndicator"))).selectByVisibleText("No");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_OriginCode"))).selectByVisibleText("MA21");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_CdeInitOrg"))).selectByVisibleText("MA21");
        new Select(driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SuspectCode"))).selectByVisibleText("VERIFIED");
        driver.findElement(By.id("MMISForm:MMISBodyContent:TplBaseInformationPanel:TplResourceDataPanel_SuspectDate")).sendKeys(Common.convertSysdate());
        new Select(driver.findElement(By.xpath("//select[contains(@id, 'MedicalSupportIndicator')]"))).selectByVisibleText("Yes");
	 	driver.findElement(By.xpath("//input[contains(@id, 'MedicalSupportBeginDate')]")).sendKeys(Common.convertSysdatecustom(-5)); //% days before start date
	 	driver.findElement(By.xpath("//input[contains(@id, 'MedicalSupportEndDate')]")).sendKeys("12/31/2299");

        Common.saveAll();
        
        //Add Coverage
        driver.findElement(By.id("MMISForm:MMISBodyContent:TplNavigatorPanel:TPLNavigator:ITM_n103")).click();
		driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:Coverage_NewButtonClay:CoverageList_newAction_btn")).click();
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageDataPanel_CoverageCode")).sendKeys("02");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageDataPanel_OIPlanCode")).sendKeys("OI02");
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageXrefDataPanel_EffectiveDate")).sendKeys(Common.convertSysdatecustom(-5)); //% days before start date
	 	driver.findElement(By.id("MMISForm:MMISBodyContent:CoveragePanel:CoverageXrefDataPanel_EndDate")).sendKeys("12/31/2299");
	 	Common.saveAll();
	 	log("Resource successfully added for Member: "+Mid);
        
        
    }
    
    @Test
    public void testMIP() throws Exception{
//		driver.findElement(By.xpath("//input[contains(@id,'legalName')]")).sendKeys(Common.generateRandomName());
//    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_RelatedData")).click();
//    	driver.findElement(By.linkText("Base Information")).click();
//		new Select(driver.findElement(By.xpath("//select[contains(@id,'providerType')]"))).selectByVisibleText("PHARMACY");

		String status = "Test Case Passed";
		String owner = "Gandhi, Anshul";
		String relSak = "3074";
    	String tc = "35250";

		
		driver.get("https://mmis.techkc.ehs.state.ma.us/zMIP/utils/PortalLogin.asp");
		driver.findElement(By.xpath("//input[contains(@name,'txtLogonID')]")).sendKeys("agandhi");
		driver.findElement(By.xpath("//input[contains(@name,'pssPassword')]")).sendKeys("deb1rdy2");
		driver.findElement(By.xpath("//input[@type='submit' and @value='Login']")).click();

		
//    	driver.findElement(By.linkText("DocoTool")).click();
//    	driver.findElement(By.linkText("Testing")).click();
    	
////		driver.findElement(By.xpath("//input[contains(@name,'TcID')]")).clear();
////		driver.findElement(By.xpath("//input[contains(@name,'TcID')]")).sendKeys(tc);
//		driver.findElement(By.xpath("//*[@id='tableTestCases']/tbody/tr[3]/td/input[1]")).clear();
//		driver.findElement(By.xpath("//*[@id='tableTestCases']/tbody/tr[3]/td/input[1]")).sendKeys(tc);    	
//		driver.findElement(By.xpath("//input[@type='submit' and @value='Go']")).click();
////		driver.findElement(By.xpath("//*[contains(@href,'"+tc+"')]")).click();
    	
		driver.get("https://mmis.techkc.ehs.state.ma.us/zMIP/zDOT/utils_TC/dotTcManageInfo.asp");

		driver.findElement(By.xpath("//*[@id='reqnavPageLength']/tbody/tr[1]/td[1]/input[1]")).clear();
		driver.findElement(By.xpath("//*[@id='reqnavPageLength']/tbody/tr[1]/td[1]/input[1]")).sendKeys(tc);
		driver.findElement(By.xpath("//*[@id='reqnavPageLength']/tbody/tr[1]/td[1]/input[2]")).click();


    	driver.findElement(By.linkText("Status")).click();
		new Select(driver.findElement(By.xpath("//select[contains(@name,'StatusSak')]"))).selectByVisibleText(status);
		new Select(driver.findElement(By.xpath("//select[contains(@name,'OwnerSak')]"))).selectByVisibleText(owner);
		driver.findElement(By.xpath("//input[@type='submit' and @value='Add Status']")).click();
		
    	driver.findElement(By.linkText("Release")).click();
		driver.findElement(By.xpath("//*[contains(@href,"+relSak+")]")).click();
		new Select(driver.findElement(By.xpath("//select[contains(@name,'IndPassFail')]"))).selectByVisibleText("Pass");
		driver.findElement(By.xpath("//input[@type='submit' and @value='Update Release']")).click();
		System.out.println("TC "+tc+" is updated");
		
		







        
        
    }

    public static String createMember(String aidcat) throws Exception{

    	//Get Member ID
    	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1996-09-01";
        adr1="101 FEDERAL ST";
        city="BOSTON";
        zip="02110";
        dep="00";
        aid=aidcat;
        beginDate="2019-06-24";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        System.out.println(Mid);
        log("Member:"+Mid);
        return Mid;
        
    }
    
    public void createMember1() throws Exception{

       	otherid = Common.generateRandomTaxID();
    	fname=Common.generateRandomName();
    	casenum=Common.generateRandomTaxID();
        ssn="1"+Common.generateRandomTaxID().substring(0,8);
        dob ="1996-09-01";
        adr1="50 SUMMER ST";
        city="ADAMS";
        zip="01220";
        dep="00";
        aid="40";
        beginDate="2018-02-01";
        agency="MHO";
        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
        System.out.println(Mid);
        log(Mid);
        
    }
    
	@Test
	public void testTPTData_ACOB() throws Exception{

		for (int i=0; i<20; i++)
			createMember1();
		
	}
	
	@Test
	public void testsedMem() throws Exception{

		//Verify unix report
//		String command, error;

		//Get Desired Filename

//		command = "sed -u -n \"/id_provider=\\\"110000614\\\"/,/<\\/Provider>/p\" /customer/dsma/mod/data01/tpr90001.xml.0016"; //MO file
//		command = "sed -u -n \"/id_provider=\\\"110000614\\\"/,/<\\/Provider>/p\" /customer/dsma/acc/data01/tpr90001.xml.0014"; //UAT file
		
//		command = "sed -n \"/100000970069/,/<\\/Member>/p\" /customer/dsma/acc/data01/eld06540.xml.0464";
//		command = "sed -u -n \"/id_medicaid=\\\"100000970069\\\"/,/<\\/Member>/p\" /customer/dsma/acc/data01/eld06540.xml.0464";
		
//		command = "sed -u -n \"/id_provider=\\\"110000869\\\"/,/<\\/Provider>/p\" /customer/dsma/mod/data01/tpr90001.xml.0016"; //MO file
//		error = "There was no report file found for the command: "+command;
//		String outfile_latterData = Common.connectUNIX(command, error);
//		log(outfile_latterData);

//		command = "ls -ltr /customer/dsma/"+unixDir+"/data01/eld06540.xml.* | tail -1"; //grabs the latest gdg of the file
//
//		error = "There was no report file found for the command: "+command;
//		String fileName = Common.connectUNIX(command, error);
//		fileName=fileName.substring(fileName.indexOf("/"), fileName.length());
//		fileName = Common.chkCompress(fileName);		
//		log(" The member report filename is: "+fileName);
		
		String  sql, finalString;

	    //Verify unix report
	  	String command, error;
	  		  		
	  	//Get Desired Filename
	  	command = "ls -ltr /customer/dsma/"+unixDir+"/logs/elgjd055.*.* | tail -1"; 
	  	

	  	error = "There was no report file found";
	  	String fileName = Common.connectUNIX(command, error);
	  	fileName=fileName.substring(fileName.indexOf("/"), fileName.length());
	  	log("The Job logs for the job ELGJD055 is: "+fileName);
		
     	//following is job completed today or same day
		
		command = "grep '/customer/dsma/"+unixDir.toLowerCase()+"/job/ELGJD055 completed "+Common.convertSysdate().substring(0, Common.convertSysdate().length()-4) + Common.convertSysdate().substring(Common.convertSysdate().length()-2)+"' "+fileName;

	  	error = "The selected file "+fileName+" is not correct/ or it is empty/ or it does not have the desired data or completed message";
	  	log(Common.connectUNIX(command, error));
	 
	  	
	  	//get data from day 2 table. 
	  	sqlStatement = "select * from r_day2 where TC = '45942'";
		colNames.add("ID");
		colValues = Common.executeQuery1(sqlStatement, colNames);
		if (colValues.get(0).equals("null"))
		    throw new SkipException("Skipping this test because there no member found");
		String MemIdFromDB = colValues.get(0);
		log(" Member from day 2 MIP table is: "+MemIdFromDB);
		// get the data file and validate 
	  	String fileDate = Common.convertSysdatecustom(-2);
	    // count the number occurance of <Member>
//	 	//Get count data Filename
//	 	command = "ls -ltr /customer/dsma/"+unixDir+"/data01/eld05501.count.xml.* | grep '"+Common.monthUNIX(fileDate)+" "+Common.dayUNIX(fileDate)+"'";
//	 	error = "There was no count data file found to check the count ";
//	 		        
//	 	fileName = Common.connectUNIX(command, error);
//	 	fileName=fileName.substring(fileName.indexOf("/"), fileName.length());
//	 	log("++++++++++++++"+fileName+"--count data file ------------");
//	 	log("Count Data filename is: "+fileName);
//	 	
//	 	command = "grep -B 0 'record_count' "+fileName; 
//	    error = "record_count does not exist. ";
//	    	
//	    String count = Common.connectUNIX(command, error);
//	    count=count.substring(count.indexOf("\"")+1, count.lastIndexOf("\""));
//        log("--"+count+"-- --------is the count in the count data file ------------");	        

        //Get Desired Filename  	
//        command = "ls -ltr /customer/dsma/"+unixDir+"/data01/eld05501.xml.* | tail -1";
        command = "ls -ltr /customer/dsma/"+unixDir+"/data01/eld05501.xml.* | grep '"+Common.monthUNIX(fileDate)+" "+Common.dayUNIX(fileDate)+"'";
        error = "There was no data file found";
        
        fileName = Common.connectUNIX(command, error);
        fileName=fileName.substring(fileName.indexOf("/"), fileName.length());
        System.out.println("++++++++++++++"+fileName+"--data file ------------");	        
        fileName = Common.chkCompress(fileName);
        log(" Data filename is: "+fileName);
        
        command = "grep -c '<Member>' "+fileName;
    	error = "Memeber tag does not exist. ";
    	
    	String getMemTagCountFromXML = Common.connectUNIX(command, error);
        log("++++++++++++++"+getMemTagCountFromXML+"--this is total numebr of members in the XML file ------------");	        
//        assertTrue(count.equals(getMemTagCountFromXML.trim()),"count in xml vs count in count of member tag is different--"+"member tag count is :"+getMemTagCountFromXML + "- count in count.xml is: -"+count);
         
        command = "grep -B 6 '"+MemIdFromDB+"' "+fileName;
    	error = "Memeber ID does not exist. ";
    	
    	String firstTextWithMemId = Common.connectUNIX(command, error);
    	log(firstTextWithMemId+"---------------------1st string");
    	log("\r\n");
    	
    	command = "sed -u -n \"/id_medicaid=\\\""+MemIdFromDB+"\\\"/,/<\\/Member>/p\" "+fileName;
   	    error = "Memeber end Tag does not exist";
	    
	    String secondTextWithEndingMemberTag = Common.connectUNIX(command, error);
	    log(secondTextWithEndingMemberTag+"-------------------2nd string");
    	
    	 finalString = firstTextWithMemId.substring(0,firstTextWithMemId.indexOf("id_medicaid=\""+MemIdFromDB+"\"")) + secondTextWithEndingMemberTag;  
	     fileName=fileName.substring(fileName.lastIndexOf("/")+1, fileName.length()); // sbstring has to b dne as we want to create file in temp.

	     System.out.println(finalString);
	      fileName=tempDirPath+TestNGCustom.TCNo+"_"+fileName+".xml";
	  	// writing xml string to xml file
	      	PrintWriter out = new PrintWriter(fileName);
	      	out.println(finalString);
	      	out.close();       
	       	
//             validDemographic(finalString,MemIdFromDB);
//             validateProvLov(finalString,MemIdFromDB);
//             validateCdeAidCategory(finalString,MemIdFromDB);
//             validateAmtCoPay(finalString,MemIdFromDB);
//             validateMedicarePartA(finalString,MemIdFromDB);
//             validateOtherId(finalString,MemIdFromDB);
//             validatePGMHealth(finalString,MemIdFromDB);
//             validateTPL(finalString,MemIdFromDB);

		
	}
	
	 public String testCreateMember_CNS(String agency, String printType, String communicationPref, String cellPhoneNumber, String email) throws Exception{

	    	//Get Member ID
	    	otherid = Common.generateRandomTaxID();
	    	fname=Common.generateRandomName();
	    	casenum=Common.generateRandomTaxID();
	        ssn="1"+Common.generateRandomTaxID().substring(0,8);
	        dob ="2001-09-01";
	        adr1="100 HANCOCK ST";
	        city="QUINCY";
	        zip="02171";
	        dep="00";
	        aid="40";  if(!(specificAidCat.equals("")) ) aid=specificAidCat; 
	        beginDate="2023-02-01";
	        this.agency=agency;
	        String Mid = getNewMember_CNS(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency, printType, communicationPref, cellPhoneNumber, email);
	        System.out.println(Mid);
	        log("Member:"+Mid);
	        
	        return Mid;
	        
	}
	 
	public String testCreateMember_without_CNS(String agency) throws Exception{

	    	//Get Member ID
	    	otherid = Common.generateRandomTaxID();
	    	fname=Common.generateRandomName();
	    	casenum=Common.generateRandomTaxID();
	        ssn="1"+Common.generateRandomTaxID().substring(0,8);
	        dob ="2001-09-01";
	        adr1="100 HANCOCK ST";
	        city="QUINCY";
	        zip="02171";
	        dep="00";
	        aid="40";
	        beginDate="2023-02-01";
	        this.agency=agency;
	        String Mid = getNewMemebr(otherid,fname,ssn,casenum,dob,adr1,city,zip,dep,aid,agency);
	        System.out.println(Mid);
	        log("Member:"+Mid);
	        
	        return Mid;
	        
	}
	 
	public static String getNewMember_CNS(String otherid, String fname, String ssn, String casenum, String dob, String adr1, String city, String zip, String dep, String aid, String agency, String printType, String communicationPref, String numCellPhone, String email) throws Exception {
	    	
	    	//Check if SSN 4th and 5th digit <>00
	    	if ((ssn.substring(3, 5).equals("00")) && !(TestNGCustom.TCNo.equals("32937"))) {
//	    		ssn=ssn.substring(0, 3)+"47"+ssn.substring(5, 9);//any randon value at 4 and 5 except 00
	    		throw new SkipException ("SSN 4th and 5th digit were 00, so retry this TC. SSN:"+ssn);
	    	}
	    	
	    	//unless set something else, Set begindate = dob 
	    	if (beginDate.equals(""))
	    		beginDate = getEligeffDT(dob);
	    	if (!endElig) {
	    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
	    			 
	    			 "id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" email=\""+emailDemographic+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" num_phone_day=\"6177775258\" num_phone_night=\"6177775258\" />"+
	    			 
	    			 "<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n"+
	    			 
	    			 "<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\""+eligStatus+"\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" family_size=\"07\" />\n"+
	    			
					 "<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" num_cell_phone=\""+numCellPhone+"\" email=\""+email+"\"/>\n</EligibilityRequest>");    	
	    		//filename is same as otherid for uniqueness
	    	} else {
	    		endElig = false; //for next time
	    		Date sysdate=new Date();
	    		SimpleDateFormat sdf= new SimpleDateFormat("yyyy-MM-dd");
	    		String sys = sdf.format(sysdate).toString(); //this is the elig end date
	    		
	    		if(!(endEligDate.equals("")))
	    			sys=endEligDate;
	    		
	    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
					 
	    			 "id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" email=\""+emailDemographic+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\" num_phone_day=\"6177775258\" num_phone_night=\"6177775258\"  />\n"+
					
					 "<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\" />\n" +
					
					 "<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"4\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+beginDate+"\" dte_end_elig=\""+sys+"\" family_size=\"07\" />\n"+
					
					 "<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" num_cell_phone=\""+numCellPhone+"\" email=\""+email+"\"/>\n</EligibilityRequest>");    	
	    		//filename is same as otherid for uniqueness	
	    	}
	    	
	    	if(numCellPhone.equals("") && xml.contains("num_cell_phone"))
	        	xml=xml.substring(0, xml.indexOf("num_cell_phone"))+"email=\""+email+"\"/>\n</EligibilityRequest>";
	    	

	    	if(email.equals("") && xml.contains("email"))
	        	xml=xml.substring(0, xml.indexOf("email=\"\""))+"/>\n</EligibilityRequest>";


	    	if(!commPrefrenence)
	        	xml=xml.substring(0, xml.indexOf("<communicationpreference"))+"\n</EligibilityRequest>";
	    	
	    	//Reset id_medicaid in input file to " " for next run
	    	if (!(fileMem.equals(" ")))
	    		fileMem=" ";
	    	//Reset last name in input file to "MAZDAZ" for next run
	    	if (!(lastName.equals("MAZDAZ")))
	    		lastName="MAZDAZ";
	    	//Reset begin date in input file to "" for next run
	    	if (!(beginDate.equals("")))
	    		beginDate="";
	    	//Reset open reason to 01, if its not 01
	    	if (!(openRsn.equals("01")))
	    		openRsn="01";
	    	//Reset case status to 1, if its not 1
	    	if (!(caseStatus.equals("1")))
	    		caseStatus="1";
	    	//Reset elig status to 1, if its not 1
	    	if (!(eligStatus.equals("1")))
	    		eligStatus="1";
	    	
	    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
	    	
	    	// writing xml string to xml file
	    	PrintWriter out = new PrintWriter(fileName);
	    	out.println(xml);
	    	out.close();
	    	
	    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
	    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
	        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
	        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
	        Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
	    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
	    	log("The MA21 download File name is: "+Common.fileName());
	    	//Press Clear button to reset the screen
//			driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click(); //Removed for chromedriver as it cannot locate Clear button at this step
	    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click(); //Added for chromedriver
			driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

	        String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
	        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
	        int l=valuesInQuotes.length;
	        if(l>5)
	        {
	        	errorMessage=valuesInQuotes[l-1].trim();
	        	errorCode=valuesInQuotes[l-2].trim();
	        }
	        result_type=valuesInQuotes[1];
	        String id_medicaid=valuesInQuotes[2];
	        
	        if(result_type.equals("S"))
	        {
	        	System.out.println("The Member Eligibility file upload is Successfull");
	        }
	        else{
	            System.out.println("Upload successfull but data issue "+errorMessage);
	        }
	    	
	    	return id_medicaid;
	}
	
	public static String getNewMember_CNSWithAccomodation(String otherid, String fname, String ssn, String casenum, String dob, String adr1, String city, String zip, String dep, String aid, String agency, String printType, String communicationPref, String numCellPhone, String email, String[] accom) throws Exception {
      	
      	//Check if SSN 4th and 5th digit <>00
      	if ((ssn.substring(3, 5).equals("00")) && !(TestNGCustom.TCNo.equals("32937"))) {
//      		ssn=ssn.substring(0, 3)+"47"+ssn.substring(5, 9);//any randon value at 4 and 5 except 00
      		throw new SkipException ("SSN 4th and 5th digit were 00, so retry this TC. SSN:"+ssn);
      	}
      	
      	
      	//unless set something else, Set begindate = dob 
      	if (beginDate.equals(""))
      		beginDate = getEligeffDT(dob);
    		
    	xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
    		    			 
      			 "id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
      			 
      			 "<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n"+
      			 
      			 "<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\""+eligStatus+"\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" family_size=\"07\" />\n"+
      			
    				 "<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" email=\""+email+"\"/>\n<accommodation cde_accommodation=\""+accom[0]+"\"/>\n<accommodation cde_accommodation=\""+accom[1]+"\"/>\n</EligibilityRequest>");
    			
      	
      	if(numCellPhone.equals("") && xml.contains("num_cell_phone"))
          	xml=xml.substring(0, xml.indexOf("num_cell_phone"))+"email=\""+email+"\"/>\n</EligibilityRequest>";
      	
      	if(email.equals("") && xml.contains("email"))
          	xml=xml.substring(0, xml.indexOf("email"))+"/>\n</EligibilityRequest>";

      	
      	System.out.println(xml);
      	
      	//Reset id_medicaid in input file to " " for next run
      	if (!(fileMem.equals(" ")))
      		fileMem=" ";
      	//Reset last name in input file to "MAZDAZ" for next run
      	if (!(lastName.equals("MAZDAZ")))
      		lastName="MAZDAZ";
      	//Reset begin date in input file to "" for next run
      	if (!(beginDate.equals("")))
      		beginDate="";
      	//Reset open reason to 01, if its not 01
      	if (!(openRsn.equals("01")))
      		openRsn="01";
      	//Reset case status to 1, if its not 1
      	if (!(caseStatus.equals("1")))
      		caseStatus="1";
      	//Reset elig status to 1, if its not 1
      	if (!(eligStatus.equals("1")))
      		eligStatus="1";
      	
      	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
      	
      	// writing xml string to xml file
      	PrintWriter out = new PrintWriter(fileName);
      	out.println(xml);
      	out.close();
      	
      	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
      	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
          driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
          String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
          Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
      	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
      	log("The MA21 download File name is: "+Common.fileName());
      	//Press Clear button to reset the screen
//    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click(); //Removed for chromedriver as it cannot locate Clear button at this step
      	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click(); //Added for chromedriver
    		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

          String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
          String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
          int l=valuesInQuotes.length;
          if(l>5)
          {
          	errorMessage=valuesInQuotes[l-1].trim();
          	errorCode=valuesInQuotes[l-2].trim();
          }
          result_type=valuesInQuotes[1];
          String id_medicaid=valuesInQuotes[2];
          
          if(result_type.equals("S"))
          {
          	System.out.println("The Member Eligibility file upload is Successfull");
          }
          else{
              System.out.println("Upload successfull but data issue "+errorMessage);
          }
      	
      	return id_medicaid;
      
	}
	
	//update oldData to newData in atribute segment
  	public static void updateExistFile(String oldData, String newData, String atribute) throws Exception {
  			xml=xml.replace(atribute+"=\""+oldData, atribute+"=\""+newData);
  	}	
  	
  	public void deleteCommunicationEmailAddressTag(String email){
 		xml=xml.replace("email=\""+email+"\"" , "");
    }
  	
  	public static void deleteCommunicationpreference(String printType, String communicationPref, String numCellPhone, String email) throws Exception {
		xml=xml.replace("<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" num_cell_phone=\""+numCellPhone+"\" email=\""+email+"\"/>", "");
    }
  	
  	public static String getMA21_CNS(String otherid, String fname, String ssn, String casenum, String dob, String adr1, String city, String zip, String dep, String aid, String agency, String printType, String communicationPref, String numCellPhone, String email) throws Exception {
    	
    	//Check if SSN 4th and 5th digit <>00
    	if ((ssn.substring(3, 5).equals("00")) && !(TestNGCustom.TCNo.equals("32937"))) {
//    		ssn=ssn.substring(0, 3)+"47"+ssn.substring(5, 9);//any randon value at 4 and 5 except 00
    		throw new SkipException ("SSN 4th and 5th digit were 00, so retry this TC. SSN:"+ssn);
    	}
    	
    	//unless set something else, Set begindate = dob 
    	if (beginDate.equals(""))
    		beginDate = getEligeffDT(dob);
    	if (!endElig) {
    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
    			 
    			 "id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
    			 
    			 "<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n"+
    			 
    			 "<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\""+eligStatus+"\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" family_size=\"07\" />\n"+
    			
				 "<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" num_cell_phone=\""+numCellPhone+"\" email=\""+email+"\"/>\n</EligibilityRequest>");    	
    		//filename is same as otherid for uniqueness
    	} else {
    		endElig = false; //for next time
    		Date sysdate=new Date();
    		SimpleDateFormat sdf= new SimpleDateFormat("yyyy-MM-dd");
    		String sys = sdf.format(sysdate).toString(); //this is the elig end date
    		
    		if(!(endEligDate.equals("")))
    			sys=endEligDate;
    		
    		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+fileMem+"\" "+
				 
    			 "id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>\n"+
				
				 "<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastName+"\" num_case=\""+casenum+"\"/>\n" +
				
				 "<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\"4\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_close_reason=\"00\" cde_region=\"01\" dte_appl=\""+getEligeffDT(dob)+"\" dte_begin_elig=\""+beginDate+"\" dte_end_elig=\""+sys+"\" family_size=\"07\" />\n"+
				
				 "<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" num_cell_phone=\""+numCellPhone+"\" email=\""+email+"\"/>\n</EligibilityRequest>");    	
    		//filename is same as otherid for uniqueness	
    	}
    	
    	if(numCellPhone.equals("") && xml.contains("num_cell_phone"))
        	xml=xml.substring(0, xml.indexOf("num_cell_phone"))+"email=\""+email+"\"/>\n</EligibilityRequest>";
    	
    	if(email.equals("") && xml.contains("email"))
        	xml=xml.substring(0, xml.indexOf("email"))+"/>\n</EligibilityRequest>";

    	
    	System.out.println(xml);
    	
    	//Reset id_medicaid in input file to " " for next run
    	if (!(fileMem.equals(" ")))
    		fileMem=" ";
    	//Reset last name in input file to "MAZDAZ" for next run
    	if (!(lastName.equals("MAZDAZ")))
    		lastName="MAZDAZ";
    	//Reset begin date in input file to "" for next run
    	if (!(beginDate.equals("")))
    		beginDate="";
    	//Reset open reason to 01, if its not 01
    	if (!(openRsn.equals("01")))
    		openRsn="01";
    	//Reset case status to 1, if its not 1
    	if (!(caseStatus.equals("1")))
    		caseStatus="1";
    	//Reset elig status to 1, if its not 1
    	if (!(eligStatus.equals("1")))
    		eligStatus="1";
    	
    	return xml;
    	
    }
  	
    public static String createXml(String mem, String otherid, String fname,String lastname, String ssn, String casenum, String dob, String adr1, String city, String zip, String dep, String aid, String agency, String printType, String communicationPref, String numCellPhone, String email, String emailIs, String[] accom) throws Exception {
	  	
	  	//Check if SSN 4th and 5th digit <>00
	  	if ((ssn.substring(3, 5).equals("00")) && !(TestNGCustom.TCNo.equals("32937"))) {
//	  		ssn=ssn.substring(0, 3)+"47"+ssn.substring(5, 9);//any randon value at 4 and 5 except 00
	  		throw new SkipException ("SSN 4th and 5th digit were 00, so retry this TC. SSN:"+ssn);
	  	}
	  	
	  	
	  	//unless set something else, Set begindate = dob
	  	if (beginDate.equals(""))
	  		beginDate = getEligeffDT(dob);
			
		xml=("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><EligibilityRequest\nxmlns=\"http://xmlns.hhs.ma.gov/HHS/serviceobjects/versions/1.0/EligibilityServices\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<transactionsource id_medicaid=\""+mem+"\" "+
			    			
	  			 "id_other=\""+otherid+"\" id_source=\""+agency+"\"/>\n<demographic email=\""+email+"\" cde_citizen=\"C\" cde_lang_written=\"ENG\" cde_race=\"WHITE\" cde_sex=\"F\" dte_birth=\""+dob+"\" nam_first=\""+fname+"\" nam_last=\""+lastName+"\" nam_mid_init=\" \" num_primary_ssn=\""+ssn+"\" res_adr_city=\""+city+"\" res_adr_state=\"MA\" res_adr_street_1=\""+adr1+"\" res_adr_street_2=\" \" res_adr_zip_code=\""+zip+"\"/>"+
	  			
	  			 "<case cde_case_status=\""+caseStatus+"\" hoh_nam_first=\""+fname+"\" hoh_nam_init=\" \" hoh_nam_last=\""+lastname+"\" num_case=\""+casenum+"\"/>\n"+
	  			
	  			 "<eligibility amt_gross_income=\"14198.22\" cde_cat=\""+aid+"\" cde_elig_status=\""+eligStatus+"\" cde_line=\""+dep+"\" cde_office=\"600\" cde_open_reason=\""+openRsn+"\" cde_region=\"01\" dte_appl=\""+beginDate+"\" dte_begin_elig=\""+beginDate+"\" family_size=\"07\" />\n"+
	  			
					 "<communicationpreference cde_print_type=\""+printType+"\" cde_communication_pref=\""+communicationPref+"\" email=\""+emailIs+"\"/>\n<accommodation cde_accommodation=\""+accom[0]+"\"/>\n<accommodation cde_accommodation=\""+accom[1]+"\"/>\n</EligibilityRequest>");
				
	  	
	  	if(numCellPhone.equals("") && xml.contains("num_cell_phone"))
	      	xml=xml.substring(0, xml.indexOf("num_cell_phone"))+"email=\""+email+"\"/>\n</EligibilityRequest>";
	  	
	  	if(email.equals("") && xml.contains("email"))
	      	xml=xml.substring(0, xml.indexOf("email"))+"/>\n</EligibilityRequest>";
 
	  	
	  	System.out.println(xml);
       return xml;
       
    }
  	
  	public static String uploadMA21(String xml) throws Exception {
    	
    	if(!(driver.findElements(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).size() > 0))
    		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	
    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
        Assert.assertTrue(message.trim().equals("The Member Eligibility Update file was successfully uploaded and processed. Please click on the Download button to download the response file"),"The Error is: "+message);
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON2")).click();
    	log("The MA21 download File name is: "+Common.fileName());
    	
    	//Press Clear button to reset the screen
//		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click(); //Removed for chromedriver as it cannot locate Clear button at this step
    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click(); //Added for chromedriver
		driver.findElement(By.xpath("//input[@class='buttonImage' and @alt='Clear']")).click();

        String output=FileUtils.readFileToString(new File(fileName+".out.xml"));
        String[] valuesInQuotes = StringUtils.substringsBetween(output , "=\"","\"");
        int l=valuesInQuotes.length;
        if(l>5)
        {
        	errorMessage=valuesInQuotes[l-1].trim();
        	errorCode=valuesInQuotes[l-2].trim();
        }
        result_type=valuesInQuotes[1];
        String id_medicaid=valuesInQuotes[2];
        
        if(result_type.equals("S"))
        	System.out.println("The Member Eligibility file upload is Successfull");
        
        else
            System.out.println("Upload successfull but data issue "+errorMessage);
    	
    	return id_medicaid;
    }
  	
  	
  	public static boolean uploadMA21_schemaError(String xml) throws Exception {
    	
    	if(!(driver.findElements(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).size() > 0)) {
    		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_Search")).click();
    		driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	}
    	
    	String fileName=tempDirPath+otherid+Common.generateRandomName().substring(0,3)+".xml";
    	
    	// writing xml string to xml file
    	PrintWriter out = new PrintWriter(fileName);
    	out.println(xml);
    	out.close();
    	
     	System.out.println(xml);

    	driver.findElement(By.id("MMISForm:MMISMenu:_MENUITEM_MemberEligibilityUpdateFileUpload")).click();
    	driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:MemberEligibilityUpdateFileUpload_FileName2")).sendKeys(fileName);
        driver.findElement(By.id("MMISForm:MMISBodyContent:MemberEligibilityUpdateFileUploadBean_CriteriaPanel:EXTRABUTTON1")).click();
        String message=(driver.findElement(By.xpath("//*[@id='MMISForm:MMISContentTable']/tbody/tr/td/div/table/tbody/tr/td/table[1]/tbody/tr[2]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]")).getText());
        Assert.assertTrue(message.trim().equals("Uploaded file is invalid according to Member Eligibility schema"),"The Error is: "+message);
    
        return true;
	}
  	
  	public static void createBenefitPlan(String benefitPlan, String effDate, String endDate, String aidcat, String openReason, String caseNum, String countyList, String deptNum, String grossIncome, String certDate, String agency, String caseWorkerId, String appReferId, String familySize, String appDate) throws Exception{
        
		        if(appDate.equals("") || appDate.equals(null) ) 
		 appDate=Common.convertSysdate();
		        
		        if(driver.findElements(By.xpath("//a[text()='Member Benefit Plan']")).size() > 0)
		                       driver.findElement(By.xpath("//a[text()='Member Benefit Plan']")).click();
		        
		        //open benefit plan
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:BenefitPlanList_newAction_btn")).click();
		
		new Select(driver.findElement(By.xpath("//select[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_PubHlthPgm']"))).selectByValue(benefitPlan);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EffectiveDate']")).sendKeys(effDate);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate']")).sendKeys(endDate);
		new Select(driver.findElement(By.xpath("//select[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_FinancialPayer']"))).selectByVisibleText("1 - EOHHS");
		
		//open aid cat
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidCategoryList_newAction_btn")).click();
		
		new Select(driver.findElement(By.xpath("//select[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_CdeAid']"))).selectByValue(aidcat);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EffectiveDate']")).sendKeys(effDate);
		new Select(driver.findElement(By.xpath("//select[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EligStart']"))).selectByValue(openReason);
		//case number
		driver.findElement(By.xpath("//a[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_CaseNumber_CMD_SEARCH']/img")).click();
		
		if(caseNum.equals("")) {
		driver.findElement(By.xpath("//*[contains(@id,'MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel') and contains(@id, 'MemberCaseNumberPopUpSearchCriteriaPanel:SEARCH') ]")).click();
		driver.findElement(By.xpath("//*[contains(@id,'MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel') and contains(@id, 'MemberCaseNumberPopUpSearchResults_0:column1Value') ]")).click();
		}else {
		driver.findElement(By.xpath("//input[contains(@id,'MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel') and contains(@id, 'MemberCaseNumberPopUpSearchCriteriaPanel:CaseNumber') ]")).sendKeys(caseNum);
		driver.findElement(By.xpath("//*[contains(@id,'MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel') and contains(@id, 'MemberCaseNumberPopUpSearchCriteriaPanel:SEARCH') ]")).click();
		driver.findElement(By.xpath("//*[contains(@id,'MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel') and contains(@id, 'MemberCaseNumberPopUpSearchResults_0:column1Value') ]")).click();
		}
		new Select(driver.findElement(By.xpath("//select[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_CountyOfficeList']"))).selectByValue(countyList);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_DepNumber']")).sendKeys(deptNum);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_GrossIncoAmount']")).clear();
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_GrossIncoAmount']")).sendKeys(grossIncome);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_CertificationDate']")).sendKeys(certDate);
		new Select(driver.findElement(By.xpath("//select[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EligCodeStatus']"))).selectByVisibleText("New");
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate']")).sendKeys(endDate);
		new Select(driver.findElement(By.xpath("//select[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_AgencyCode']"))).selectByVisibleText(agency);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_CaseWorkerID']")).sendKeys(caseWorkerId);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_ApplicReferbyId']")).sendKeys(appReferId);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_FamilySizeQuantity']")).sendKeys(familySize);
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_ApplicDate']")).clear();
		driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_ApplicDate']")).sendKeys(appDate);
		
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligPanel_addAction_btn")).click();
		
		//add benefit plan
		driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligPanel_addAction_btn")).click();
		Common.saveAll();
		
  	}
  	
  	public static void closeBenefitPlanWoneAidCat(String benefitPlan, String effDate, String newEndDate) throws InterruptedException {
		
		if(driver.findElements(By.xpath("//a[text()='Member Benefit Plan']")).size() > 0)
			driver.findElement(By.xpath("//a[text()='Member Benefit Plan']")).click();

		String benefitPlanLocator="//*[@id='MMISForm:MMISBodyContent:EligPanel:EligList:tbody_element']//tr/td[3]/a/span[contains(text(), '"+benefitPlan+"')]//..//..//..//../td[4]/span[text()='Active']//..//..//../td[6]/span[text()='"+effDate+"']//..//..//../td[7]/span[text()='12/31/2299']//..//..//../td[3]/a";
	
		driver.findElement(By.xpath(benefitPlanLocator)).click();
	
		//close benefit plan
        driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate']")).clear();
        driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:EligDataPanel_EndDate']")).sendKeys(newEndDate);
        
        //close aid cat
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligList_0:AidEligBean_ColValue_aidDes")).click();
        driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate']")).clear();
        driver.findElement(By.xpath("//input[@id='MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligDataPanel_EndDate']")).sendKeys(newEndDate);
        
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:AidRecipientBenefitPlanPanel:AidEligPanel_updateAction_btn")).click();
        driver.findElement(By.id("MMISForm:MMISBodyContent:EligPanel:EligPanel_updateAction_btn")).click();

        Thread.sleep(1000);
        Common.saveAll();
	
	}

    	
		
}